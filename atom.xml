<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Lab Notebook</title>
 <link href="/2012/atom.xml" rel="self"/>
 <link href="/"/>
 <updated>2015-02-25T21:45:20+00:00</updated>
 <id>http://www.carlboettiger.info/2012</id>
 <author>
   <name>Carl Boettiger</name>
   <email>cboettig@gmail.com</email>
 </author>

 
 <entry>
   <title>Learning Jekyll</title>
	 <link href="/2012/12/30/learning-jekyll.html"/>
   <updated>2012-12-30T00:00:00+00:00</updated>
   <id>/12/30/learning-jekyll</id>
   <content type="html">&lt;h1 id=&quot;some-quick-thoughts-on-learning-jekyll&quot;&gt;Some quick thoughts on learning Jekyll&lt;/h1&gt;
&lt;p&gt;After recieving a few queries on how to get started with Jekyll I thought I’d jot down my own opinions here. Of course there is already rather good documentation for the software and plenty of blogs providing tutorials. While no doubt more than adequate, I have more opinions on how to get started actually &lt;em&gt;learning&lt;/em&gt; what’s going on than I could easily fit into a tweet, and also a couple favorite links to references so I thought I’d jot down my reply in long form here.&lt;/p&gt;
&lt;h2 id=&quot;brief-background&quot;&gt;Brief Background&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;Jekyll&lt;/a&gt; is a fantastic and popular static blogging platform, written in Ruby by a Github founder, &lt;a href=&quot;http://tom.preston-werner.com/&quot;&gt;Tom Preston-Werner&lt;/a&gt;, which powers this site (at least currently). Similar static website generators exist for Python (&lt;a href=&quot;https://github.com/hyde/hyde&quot;&gt;Hyde&lt;/a&gt;) Haskell (&lt;a href=&quot;https://github.com/jgm/yst&quot;&gt;yst&lt;/a&gt;), and probably others, but Jekyll is quite widespread.&lt;/p&gt;
&lt;p&gt;With the (unofficial) slogan of the bloging platform for hackers, Jekyll is aimed at folks who don’t mind a little coding. If you’re looking for a polished, user-friendly product where a huge community of developers has written most imaginable extensions, check out Wordpress.org. If you want something where you can easily get into the guts and customize everything, Jekyll may be the best game in town. Compared to a dynamic site, a static site is much more lightweight, which translates into faster, more stable, and less expensive. What’s not to like?&lt;/p&gt;
&lt;h2 id=&quot;where-to-start&quot;&gt;Where to start?&lt;/h2&gt;
&lt;p&gt;A couple pre-configured Jekyll setups have emerged to reduce the learning curve, most notably &lt;a href=&quot;https://github.com/imathis/octopress&quot;&gt;Octopress&lt;/a&gt; and &lt;a href=&quot;https://github.com/plusjade/jekyll-bootstrap&quot;&gt;Jekyll Bootstrap&lt;/a&gt;. In my opinion, in an attempt to make things easier through tricks such as automated Ruby makefiles (Rakefiles) I think these projects have actually made Jekyll appear much more complicated than it really is, as evidenced by the number of talented programmers running Octopress with the identical configuration. They may get you started faster, but their use of advanced techniques to provide more functionality out-of-the-box makes for a tougher learning curve.&lt;/p&gt;
&lt;p&gt;See the Jekyll-Bootstrap’s &lt;a href=&quot;http://jekyllbootstrap.com/lessons/jekyll-introduction.html&quot;&gt;introduction&lt;/a&gt; to Jekyll for a nice explanation of how Jekyll is laid out. Understand the basic YAML headers, and the role of the &lt;code&gt;_layout&lt;/code&gt;, &lt;code&gt;_includes&lt;/code&gt; and &lt;code&gt;_posts&lt;/code&gt; directories, and you’ve mastered the basics. Or read on below for my take on getting started.&lt;/p&gt;
&lt;h2 id=&quot;running-jekyll&quot;&gt;Running Jekyll&lt;/h2&gt;
&lt;p&gt;For a basic site hosted on Github, one never actually has to run Jekyll locally – just push the site to a gh-pages branch of a Github repository, or to the master branch of a repository named &lt;code&gt;username.github.com&lt;/code&gt; for a personal website, and Jekyll will be run by the server. Jekyll is frequently run locally instead, allowing the user to copy the static website it generates to any (static) web server (see Hosting options, below). Simply install Jekyll following the directions on its &lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;homepage README&lt;/a&gt;.[^1]&lt;/p&gt;
&lt;h2 id=&quot;my-rough-guide-to-learn-by-doing&quot;&gt;My rough guide to learn-by-doing&lt;/h2&gt;
&lt;p&gt;I believe the best way to start with Jekyll is start with a really bare-bones site. You add features as you need them, making maintenance easy.&lt;/p&gt;
&lt;p&gt;Start with an empty repository. Create a markdown file, say, &lt;code&gt;index.md&lt;/code&gt;. Write whatever you want in standard markdown, just stick a &lt;a href=&quot;http://en.wikipedia.org/wiki/YAML&quot;&gt;YAML&lt;/a&gt; header on the top. Stick what? From your standardized testing days, think something like &lt;code&gt;markdown:html :: yaml:xml&lt;/code&gt;. Three &lt;code&gt;-&lt;/code&gt; on their own line to start, three &lt;code&gt;-&lt;/code&gt; on another line to close define the block of YAML data, whose mere existence is enough to get Jekyll to pay attention to that file. Here we specify any metadata we want.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    ---
    layout: default
    ---

    # My site title

    some text
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And voilà, we have a functional Jekyll site. The basic thing to remember is that everything else is gravy, to be mastered as you have a need for it. The advanced features can be super helpful once you know them, but in the beginning they may just get in the way of understanding what’s actually going on.&lt;/p&gt;
&lt;h3 id=&quot;getting-deeper-jekyll-site-file-structure&quot;&gt;Getting deeper: Jekyll site file structure&lt;/h3&gt;
&lt;p&gt;Directories that are functional for Jekyll but do not appear in the generated website start with an underscore &lt;code&gt;_&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Root directory. You don’t need any of the standard directories for a barebones site. As we saw above, any markdown file with YAML header matter in the root directory will be parsed. Don’t like markdown? We could write these files in html (with .html extension) instead. Jekyll will parse them as long as they have some YAML header matter, allowing us to still use things like page templates and other tricks from Liquid code described below.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;_posts&lt;/code&gt; Your posts live here. They should be titled in &lt;code&gt;YYYY-MM-DD-post-title.md&lt;/code&gt; format, which will allow Jekyll to automatically figure out the post date and title, while also keeping the posts neatly organized in this directory. (The title and the publication date, optionally including time can alternatively be given in the YAML header matter if you don’t like this convention. See below).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;_layout&lt;/code&gt; For a completely barebones site, you don’t need this directory. Here you can provide files defining the basic HTML layout, or template, for each of the pages in your website. If your familiar with HTML, you can go ahead and set up a page as you like, and then add the single line of Liquid code in the body to pull in the HTML generated by parsing the markdown files. The mimimal layout file might look something like this (see an HTML tutorial for details):&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;!doctype html&amp;gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;html&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; lang=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;en&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; charset=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;utf-8&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt; {{ page.title }} &lt;span class=&quot;kw&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;

{{ page.content }}

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;where the double braces and words &lt;code&gt;page.title&lt;/code&gt; and &lt;code&gt;page.content&lt;/code&gt; are Liquid code that will tell Jekyll to insert the title and content of the page in the appropriate spot. To use a layout, save this file in &lt;code&gt;_layout&lt;/code&gt; with the desired layout name, e.g. &lt;code&gt;plainlayout&lt;/code&gt;, and then it can be applied to any page (markdown or html file in the root directory) or post by adding &lt;code&gt;layout: plainlayout&lt;/code&gt; to the YAML header of that file. This provides a super convenient way to create page templates for a static site.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;_includes&lt;/code&gt; Often one might have several layouts corresponding to different kinds of pages on your site. To avoid copy-pasting the parts of the layout that stay the same (perhaps all have the same header matter pointing to your CSS files and analytics tracker), you can just place these snippets inside the &lt;code&gt;_includes&lt;/code&gt; directory with their own filenames. For instance, we could move the header text to a file called &lt;code&gt;header&lt;/code&gt; in that directory with the contents:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;er&quot;&gt;&amp;lt;&lt;/span&gt;!doctype html&amp;gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;html&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; lang=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;en&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; charset=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;utf-8&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt; {{ page.title }} &lt;span class=&quot;kw&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To automatically reuse a snippet of HTML code in any file on your site (a layout file or other), we need to learn one more Liquid command. This one goes between brace-percent symbols, and uses the command &lt;code&gt;include&lt;/code&gt;, followed by the filename, like so:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{% include header %}
&amp;lt;body&amp;gt;
{{ page.content }}
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The above example provides a shorter layout file, which pulls in the header snippet. If you have only one layout, this is of course pointless, but the more you add to and change your site, the more useful the ability to reuse a single HTML chunk with just a line of code becomes.&lt;/p&gt;
&lt;h3 id=&quot;configuration&quot;&gt;Configuration&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;YAML&lt;/strong&gt; and the &lt;code&gt;_config.yml&lt;/code&gt; file. Recall that YAML is the very human-readable data structure, whose syntax is explained quite throughly on &lt;a href=&quot;http://en.wikipedia.org/wiki/YAML&quot;&gt;it’s wikipedia page&lt;/a&gt;. One glance at an example reveals almost all you need to know about the syntax, such as:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;
---
layout: post
category: ecology
tags: 
  - howto
  - jekyll
modified: 2013-01-07
---&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Lists can be done in a variety of ways, comma-s&lt;/p&gt;
&lt;p&gt;One of the Jekyll beginner’s mysteries is knowing just what words/metadata/variables are already available in Jekyll and how to add those that are not. &lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/Template-Data&quot;&gt;A list appears on the Jekyll Wiki&lt;/a&gt;. Note that the syntax uses the ruby structure, so &lt;code&gt;page.title&lt;/code&gt; and &lt;code&gt;page.date&lt;/code&gt; are both part of the page. We can create any custom variable by adding it to that page’s yaml header. For instance, &lt;code&gt;modified&lt;/code&gt; is not defined anywhere in Jekyll’s default Template Data, but none-the-less we can access this modification date in this page’s &lt;code&gt;layout&lt;/code&gt; or the page itself using {{ page.modified }} liquid tag.&lt;/p&gt;
&lt;p&gt;Metadata belonging to the site as a whole, rather than a particular page, is specified in the &lt;code&gt;_config.yml&lt;/code&gt; file, along with a few options telling Jekyll how to parse the site. Again, the &lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/Configuration&quot;&gt;Jekyll wiki has a great overview&lt;/a&gt;. As the extension implies, this entire file is in YAML. If we want to create new global variables, such as our twitter account, we can just add them to the YAML like so:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;author:
  twitter: cboettig
  github: cboettig&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(note the indentation for hierarchy) and now my twitter username is available through the liquid command &lt;code&gt;site.author.twitter&lt;/code&gt;. Again, it’s just another trick to insert some text, just like &lt;code&gt;_layout&lt;/code&gt; and &lt;code&gt;_includes&lt;/code&gt;. Only use can prove how helpful this can be.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Markdown parser hell&lt;/strong&gt;. A lot of Jekyll adopters are already familar with Github and it’s flavor of markdown with such features as fenced codeblocks, thus it comes as real suprise to run into advice explaining how code blocks need to be wrapped in the never-heard-of “Liquid” syntax &lt;code&gt;{% highlight %}&lt;/code&gt;. Ignore this nonsense. How your markdown is parsed depends on what flavor of markdown you use, and there is a special level of hell for anyone inventing a new flavor (&lt;a href=&quot;http://www.codinghorror.com/blog/2012/10/the-future-of-markdown.html&quot;&gt;Atwood 2012&lt;/a&gt;). Fortunately Github’s Tom Preston-Werner finally gave up the perfect irony that Github’s flavor was not one of the built-in Jekyll parsers (though being a hacker system, this could be added manually), and you can now get that behavior by setting your chosen parser to be &lt;code&gt;redcarpet&lt;/code&gt; with the convenient extensions [^2]&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;markdown: redcarpet
redcarpet:
  extensions: [&amp;quot;no_intra_emphasis&amp;quot;, &amp;quot;fenced_code_blocks&amp;quot;, &amp;quot;autolink&amp;quot;, &amp;quot;tables&amp;quot;, &amp;quot;with_toc_data&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;more-advanced-tricks&quot;&gt;More advanced tricks&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Liquid&lt;/strong&gt; Your next stop should really be to read &lt;a href=&quot;https://github.com/Shopify/liquid/wiki/Liquid-for-Designers&quot;&gt;Liquid for Designers&lt;/a&gt;. Liquid is the glue that specifies all the rules needed to assemble your site, and is quite simple. Understand how Liquid works and you’ve mastered Jekyll. Jekyll provides &lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/Liquid-Extensions&quot;&gt;some additional Liquid functions&lt;/a&gt; common for blogs.&lt;/p&gt;
&lt;p&gt;Your next stop is to get some really nice customizable CSS scaffolding to control the layout for your site. While there’s a huge number of free CSS themes available, this isn’t 2002, so head on over to &lt;a href=&quot;http://twitter.github.com/bootstrap&quot;&gt;Twitter-Bootstrap&lt;/a&gt; (a project originally created by some of the programmers at Twitter, now evolved to it’s own community). The CSS-based grid layout and some very nice JQuery Javascripts tools can make your site as pretty and as interactive as you can imagine. Like Octopress, prebuilt CSS can lead to all sites looking the same. Check out themes for Bootstrap, and the excellent set of icons by &lt;a href=&quot;http://fortawesome.github.com/Font-Awesome/&quot;&gt;FontAwesome&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Your final step is where the hacking really begins. Now and again you imagine something you just can’t do with these tools. Your only recourse is to &lt;del&gt;ask on &lt;a href=&quot;http://stackoverflow.com&quot;&gt;Stackoverflow&lt;/a&gt; for someone to do it for you&lt;/del&gt; learn a bit of Ruby. Anything you can write in Ruby you can add to Jekyll as a “plugin”, by defining a Liquid extension for a Ruby function. Ruby is clearly a favorite language of web-developers thanks to its dynamic-site implementation Ruby-on-Rails and a vibrant Github community, so there’s a wealth of useful tools, including an implementation to most APIs you might care to interact with (Github, Twitter, various Google APIs, are among the ones I’m using).&lt;/p&gt;
&lt;h2 id=&quot;hosting-options&quot;&gt;Hosting options&lt;/h2&gt;
&lt;p&gt;Because Jekyll generates a static site, it can be hosted almost anywhere for nothing or next to nothing in costs. The primary question to consider is your choice of domain name. If you wish to host your site from university domain name, just copy the contents of &lt;code&gt;_site&lt;/code&gt; into your &lt;code&gt;public_html&lt;/code&gt; or similarly named directory on the web server.&lt;/p&gt;
&lt;p&gt;While having a university affiliated domain can appear more official and help with discoverability, buying your own domain name as your permanent Internet home may be a more reliable long-term solution. Once you’ve purchased a domain name from a provider, a static site can be hosted at your own domain name for next to nothing on &lt;a href=&quot;http://docs.amazonwebservices.com/AmazonS3/latest/dev/WebsiteHosting.html&quot;&gt;Amazon S3&lt;/a&gt;, or for literally nothing &lt;a href=&quot;https://help.github.com/articles/setting-up-a-custom-domain-with-pages&quot;&gt;through Github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;[1]: Details on installing and running ruby gems for Jekyll will vary by operating system, so I won’t bother with more details here. Some further background for linux based platforms at least appears in my &lt;a href=&quot;http://www.carlboettiger.info/README.html&quot;&gt;site’s info file&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/12/27/notes.html"/>
   <updated>2012-12-27T00:00:00+00:00</updated>
   <id>/12/27/notes</id>
   <content type="html">&lt;h1 id=&quot;nonparametric-bayes&quot;&gt;Nonparametric Bayes&lt;/h1&gt;
&lt;h2 id=&quot;continuing-sensitivity-analysis&quot;&gt;Continuing sensitivity analysis&lt;/h2&gt;
&lt;p&gt;The commit log to &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commits/af970f7c4ac759b95fca929b87cd06d45a5d2178/inst/examples/sensitivity.md&quot;&gt;sensitivity.md&lt;/a&gt; and earlier to &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commits/6aba5dce46370c600351eff270a76a664dacc7db/inst/examples/myers-exploration.md&quot;&gt;myer-exploration.md&lt;/a&gt; (now depricated) capture the summary figures for replicate runs of the observation data, with commits corresponding to various parameter configurations, etc. Here is a nice collection of replicates from &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/af970f7c4ac759b95fca929b87cd06d45a5d2178/inst/examples/sensitivity.md&quot;&gt;sensitivity.md&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Harvest during observations&lt;/strong&gt; Tweaked calculation of observation data given the harvest regime under which observations were taken (simulation was not implementing all harvests).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Also adjusted norm used in GP (the parametric use log-normal densities in calculating the transition function on the untransformed data. The GP, also on untransformed data, uses normal noise as per its model).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Relaxed priors, shows no impact on GP performance.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;non-stationary-dynamics&quot;&gt;Non-stationary dynamics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ran the Allen et al. Allee model under conditions for non-stationary stable states (e.g. period 2, period 4) etc, with and without substantial process noise (to confirm the cyclical pattern). Shows good performance of GP against terrible perfomance of alternative parametric approaches. Closes issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/16&quot;&gt;#16&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-27-16-11-45-5da7c1081b-unnamed-chunk-2.png&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-27-16-13-35-5da7c1081b-unnamed-chunk-4.png&quot; alt=&quot;plot of chunk unnamed-chunk-4&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-4&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/da0fb51032334c0e11f962674d4022cc04b2279b/inst/examples/allee.md&quot;&gt;allee.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Commit log links to some additional examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;another allee example altering MLE initial condition to attempt better likelihood estimates. GP still outperforms. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/606350a764ff9998e87216f627ee94c1dce12460&quot;&gt;04:40 pm 2012/12/27&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;in oscillatory regime with non-negligible noise. again GP performs nearly optimally while MLE methods suffer greatly &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/4c05a9ca5864a5983fae4a6e015f2bc1b2c3e1c0&quot;&gt;04:27 pm 2012/12/27&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Example of Ricker-Allee in oscillation regime, shows non-trivial dynamics, GP does very well (closes #22) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/da0fb51032334c0e11f962674d4022cc04b2279b&quot;&gt;04:17 pm 2012/12/27&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;work with non-named arguments in MLE, consistent ordering for plot legends &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/5da7c1081b1c260e95f9808fc3c698d12e3b7cbd&quot;&gt;04:05 pm 2012/12/27&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;other-projects&quot;&gt;Other projects&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Upgraded gems, had to update notebook’s liquid code metadata to handle dates in string format on pages vs being date objects in posts. &lt;a href=&quot;https://github.com/cboettig/labnotebook/commit/de4d4cc0737eb5d16ca1785edcb39c01c646080a&quot;&gt;de4d4cc&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Setting up &lt;a href=&quot;https://github.com/cboettig/multiple_uncertainty&quot;&gt;multiple_uncertainty&lt;/a&gt; as a separate repository (branched from &lt;a href=&quot;https://github.com/cboettig/pdg_control&quot;&gt;pdg-control&lt;/a&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/12/23/notes.html"/>
   <updated>2012-12-23T00:00:00+00:00</updated>
   <id>/12/23/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;added generation of observational data under varying harvest conditions (issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/19&quot;&gt;#19&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;added MLE fit based on the data-generating model (issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/20&quot;&gt;#20&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GP plot with and without nugget variance (issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/17&quot;&gt;#17&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run longer simulations under policy such that sustainable profits clearly beat out collapsing the fishery (part of issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/22&quot;&gt;#22&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Progress Summary</title>
	 <link href="/2012/12/21/progress-summary.html"/>
   <updated>2012-12-21T00:00:00+00:00</updated>
   <id>/12/21/progress-summary</id>
   <content type="html">&lt;h1 id=&quot;progress-mid-october-through-mid-december&quot;&gt;Progress mid-October through mid-December&lt;/h1&gt;
&lt;h2 id=&quot;time-nonparametric-bayes&quot;&gt;80% Time: nonparametric-bayes&lt;/h2&gt;
&lt;p&gt;The bulk of my time has been spent becoming familiar with the literature on Gaussian Processes and their numerical implementation. I have written my own Gaussian process code from scratch to convince myself of my understanding of the methodology, and explored some of the related numerical issues addressing computational speed and stability.&lt;/p&gt;
&lt;p&gt;I then developed an algorithm for applying the Gaussian process inference of the state dynamics to stochastic dynamic programming methods for determining an optimal harvesting policy. I have compared the performance of the Gaussian-process inferred model to the optimal solution (given the exact underlying model) and to solutions based on estimated parametric models (both matching and not matching the underlying structure). This analysis shows the benefit of the nonparametric approach in better accounting for structural uncertainty in the underlying dynamics.&lt;/p&gt;
&lt;p&gt;Steve and I have just started to look into the potential for state shifts and warning signals there-of in the ENSO / Pacific decadal oscillation. I obtained 2 appropriate datasets and have run a very preliminary &lt;a href=&quot;http://www.carlboettiger.info/2012/12/17/random_ews_example.html&quot;&gt;analysis&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;time-independent-projects&quot;&gt;20% Time: Independent projects&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;strong&gt;pdg-control Working group paper.&lt;/strong&gt; Updated analysis for Figures 3 and 4. Updated draft. Conference call for feedback from working group participants. (&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/doc/policycosts/policycosts.tex&quot;&gt;Current draft&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Wrote &lt;strong&gt;comment&lt;/strong&gt; piece on Early Warning Signals for &lt;em&gt;Nature&lt;/em&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Working on EWS review paper for Theoretical Ecology with Noam Ross. (&lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;Current draft&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Working on analysis optimal policies under multiple uncertainties (with Jim Sanchirico, Mike Springborn). &lt;a href=&quot;http://www.carlboettiger.info/tags.html#multiple-uncertainty&quot;&gt;#multiple-uncertainty&lt;/a&gt; tag in notebook; currently analyses are part of &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/examples&quot;&gt;pdg-control&lt;/a&gt; repository.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Finished and submitted NSF post-doc application&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;other-academic-activities&quot;&gt;Other academic activities&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Wrote requested reviews for &lt;em&gt;Conservation Letters&lt;/em&gt;, &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;em&gt;Proceedings of the Royal Society B&lt;/em&gt;. Declined to review for &lt;em&gt;Systematic Biology&lt;/em&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Presented my &lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.97500&quot;&gt;exit seminar&lt;/a&gt; in the UC Davis Center for Population Biology Colloquia series.&lt;/li&gt;
&lt;li&gt;Interviewed for the &lt;em&gt;Nature&lt;/em&gt; column &lt;em&gt;Turning Point&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Invited and attended the PLoS alt-metrics workshop and hackathon&lt;/li&gt;
&lt;li&gt;Ran two sessions on version management, dynamic/reproducible papers, and building academic websites for the Mangel group.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Presented scaling from individual to population level models through the van Kampen expansion in Steve’s Applied Math Club&lt;/li&gt;
&lt;li&gt;Participated regularly in applied math club meetings.&lt;/li&gt;
&lt;li&gt;Established communication with FishBase team, arranged a coalition of developers interested in API access.&lt;/li&gt;
&lt;li&gt;ongoing development in &lt;a href=&quot;https://github.com/ropensci&quot;&gt;rOpenSci project&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;goals-for-january---march&quot;&gt;Goals for January - March&lt;/h1&gt;
&lt;h2 id=&quot;time&quot;&gt;80% Time&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Writeup of the Nonparametric Bayesian approach to management paper.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Initial goal for manuscript is proof of concept piece with the aim of demonstrating the value of a nonparametric approach to ecological decision-making. Alternatively a more technical piece could focus on the details of using Gaussian processes models for stochastic dynamic programming.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Outline of manuscript: Dec 31st&lt;/li&gt;
&lt;li&gt;Decide on manuscript figures to include&lt;/li&gt;
&lt;li&gt;Complete draft&lt;/li&gt;
&lt;li&gt;Appendices&lt;/li&gt;
&lt;li&gt;Solocit friendly revisions&lt;/li&gt;
&lt;li&gt;Submit (by March 31?)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Next steps and Additional projects&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The multi-species context is probably the next goal. Depending on timing, Steve may take the lead on that in these three months; I aim to be working in this in March. The step after will be the active/reinforcement learning/approximate SDP approaches. I aim to start into the background reading for that material but real progress on that front will happen after March.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Steve and I will likely continue to do something with the ENSO / PDO analysis as well. (Currently waiting on Steve’s pending queries to domain experts for further discussion)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I will also need to determine my summer conference schedule during this interval, and submit abstracts, etc. I have committed to the symposium to which I was invited at SIAM in San Deigo, July 8 - 12, and plan on attending ESA.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;time-goals&quot;&gt;20% Time goals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Finish and submit EWS review paper: end of January&lt;/li&gt;
&lt;li&gt;Finish and submit pdg-control policy costs paper (see &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues?direction=desc&amp;amp;labels=policy+costs&amp;amp;milestone=&amp;amp;page=1&amp;amp;sort=created&amp;amp;state=open&quot;&gt;current issues&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Finish the methods section for the Labrids paper&lt;/li&gt;
&lt;li&gt;Finish my pending review for &lt;em&gt;Environmental Modeling and Assessment&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Skype with pdg-control Working group, basic follow-up tasks.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Some next steps on multiple uncertainty.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;additional-academic-goals&quot;&gt;Additional academic goals&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Present in mega-group meeting: Feburary 20th&lt;/li&gt;
&lt;li&gt;Join the phylotastic hackathon remotely(?)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Results Comparing Gp To Parametric</title>
	 <link href="/2012/12/20/results-comparing-gp-to-parametric.html"/>
   <updated>2012-12-20T00:00:00+00:00</updated>
   <id>/12/20/results-comparing-gp-to-parametric</id>
   <content type="html">&lt;p&gt;Comparison of the Gaussian process inference to the true optimum and a parametric estimate.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-20-23-12-06-60abafd424-unnamed-chunk-22.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Comparison across 100 simulations under the policies inferred from each approach show the nearly optimal performance of the GP and the tragic crashes introduced by the parametric management.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-20-23-12-07-60abafd424-unnamed-chunk-23.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;sensitivity-analysis&quot;&gt;Sensitivity analysis&lt;/h2&gt;
&lt;p&gt;Working through an exploratory sensitivity analysis to see GP performance over different parameters.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/6aba5dce46370c600351eff270a76a664dacc7db/inst/examples/myers-exploration.md&quot;&gt;Example from 32 replicates&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Distribution of yield over replicates shows the parametric model performing rather poorly, while most of the GP replicates perform nearly optimally.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-20-23-13-46-60abafd424-unnamed-chunk-3.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/60abafd4242b3840454b3a138a428a1c633e73fd/inst/examples/myers-exploration.md&quot;&gt;smaller noise&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-20-22-57-55-96ad28dd6e-unnamed-chunk-3.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/9d5cd1f027bdfe5f356dce83756726c95a6fcdd8/inst/examples/myers-exploration.md&quot;&gt;larger growth-rate parameters&lt;/a&gt;:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-20-20-50-42-3f7bd6aa34-unnamed-chunk-3.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;from-the-commit-log&quot;&gt;from the commit log&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;smaller r, shows GP outperform parametric estimate &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/6aba5dce46370c600351eff270a76a664dacc7db&quot;&gt;09:21 am 2012/12/21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;small noise. works well. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/60abafd4242b3840454b3a138a428a1c633e73fd&quot;&gt;11:01 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GP performs poorly with weak noise prior (nugget) when not conditioned on 0,0 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/96ad28dd6edfbcec720b77fe645719fa673dd44a&quot;&gt;10:45 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;less successful with higher noise level &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/0fdaadb9b57715390e149b3c182b8115ff036960&quot;&gt;09:10 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ah here we go! with a decent allee effect model, the results are much clearer! &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/9d5cd1f027bdfe5f356dce83756726c95a6fcdd8&quot;&gt;08:52 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;strange Ricker Allee example – even true model doesn’t harvest successfully &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/3f7bd6aa349d23aa7aeb28b772b9b32b5d7645b1&quot;&gt;08:37 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;delta 1.5, r 1.3 K 4.5 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ee54f02a6d81ca0e89395837666055f4f6d1bcb0&quot;&gt;08:17 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;higher K value results in better persistence in general, not always outperforming parametric model though. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/db67f4ccb4f185b3000bbe6a93d770490e027593&quot;&gt;07:57 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;harvest, and then escaped population recruits; comparable &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/8e5a4cd1abe38671fb884855bae3babac7d4802d&quot;&gt;07:09 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;shorter OptTime and lower initial state do not much change the fraction that fail to persist &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/1130545ef69d6b6e064ca3a0360ee905c0a2b32d&quot;&gt;06:31 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sensitivity analysis over replicates shows mixed results &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e823ed12ef20d5c6dcbd04540bb957bf33116cab&quot;&gt;05:35 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;fixed bug (had Ef and V in gp_transition_matrix) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/8307de6858cc9fe067d7c86c31ce93a91862f75e&quot;&gt;05:18 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;still crashing &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/44c19ba3882ce5a419c63d13c61a1b63377d051b&quot;&gt;05:01 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;more iterations &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/61aeba3dd05033f6b9184a145035cf9708dbc18a&quot;&gt;04:34 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;corrected iterations &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/278d66f2af22eada8d704b87a20738aba874ceb4&quot;&gt;04:28 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;cpu=8 for running on one.ucdavis &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/4adf814f23c90b4d415e5580e776f07bb1f5f355&quot;&gt;02:21 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;unique seeds for parallel computing &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/9a79a72650d3bfbb9768853f9132cd5dec6f88d6&quot;&gt;02:11 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;30 replicates with full graphs &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/88d4295e217bc6b52e23c19f4094b2a85cb61bfb&quot;&gt;02:03 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;avoid external source call, print plots &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/fd14d9146826c529b6ce0a1912feffd839d37261&quot;&gt;12:49 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;trying methods for looping over replicates efficiently &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/edee0e6ef100702ed3f420dc2c0d47a691b52d3f&quot;&gt;12:38 pm 2012/12/20&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;next-goalsissues&quot;&gt;next goals/issues&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;#22 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/22&quot;&gt;Minor modifcations for the replicate comparisons&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;#20 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/20&quot;&gt;Compare against correct parametric model with parameters estimated from the data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;#19 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/19&quot;&gt;Vary harvest policy during the observation stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;#17 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/17&quot;&gt;GP process plots should show with and without nugget variance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Gp Model Space</title>
	 <link href="/2012/12/19/exploring-gp-model-space.html"/>
   <updated>2012-12-19T00:00:00+00:00</updated>
   <id>/12/19/exploring-gp-model-space</id>
   <content type="html">&lt;p&gt;Trying to think about a more systematic way to go about varying the parameters: the underlying parametric model has 3 parameters for the stock-recruitment curve’s deterministic skeleton, plus growth noise. (My first exploratory phase has been just to try different things. See my &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commits/master/inst/examples/myer-example.md&quot;&gt;various tweaks in the history log&lt;/a&gt; Clearly time to be more systematic about both running and visualizing the various cases.)&lt;/p&gt;
&lt;p&gt;Should I just choose a handful of parameter combinations to test? (Trying to think of a way to do this that is easy to summarize – at least I can summarize expected profit under each set). Presumably, for each set of these parameters, I’d want a few (many?) stochastic realizations of the calibration/training data.&lt;/p&gt;
&lt;p&gt;Would it be worth digging up some real-world data-sets and base the selection of underlying model parameters on them?&lt;/p&gt;
&lt;p&gt;Then there’s a variety of nuisance parameters: grid size, discount rate, price of fish (non-dimensionalization eliminates that one I guess), cost to fishing (and whether the cost is on effort or harvest, whether linear or quadratic, etc), harvest grid size / possible constraints on maximum or minimum allowable levels for the control; length of the calibration period (and related dynamics if we use any of the variable fishing effort models you showed me today).&lt;/p&gt;
&lt;p&gt;Additionally there’s the MCMC-related nuisance parameters – parameters for the priors, possibly hyperpriors, and the MCMC convergence analysis (selecting burn-in period – currently 2000 steps out of 16000, etc) . Also the distributional shapes for the priors, and perhaps more meaningfully, the GP covariance function (using Gaussian for simplicity, but might want to look at Matern, and the various linear + Gaussian covariances).&lt;/p&gt;
&lt;h2 id=&quot;new-and-progressing-issues&quot;&gt;New and progressing issues&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/19&quot;&gt;Vary harvest policy during the observation stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/18&quot;&gt;Add prior &amp;amp; posterior graphs (on same plot) to standard analysis (i.e. gaussian-process-control.R)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/17&quot;&gt;GP process plots should show with and without nugget variance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/16&quot;&gt;examples with non-stationary dynamics (e.g. Ricker with oscillations)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/14&quot;&gt;evaluate GP under large noise conditions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/12&quot;&gt;Characterize and develop a strategy for inferred GP that are not self-sustaining&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;from-the-commit-log-today&quot;&gt;from the commit log today&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;prior/posterior plots added to the BH-Ricker example. Comparable but non-optimal performance by GP. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/f1711a171c62005e88a17af13a7ad3e697ae382e&quot;&gt;06:07 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;oscillating ricker still does not give decent solutions &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/19c32b33a15c675c8bf900f24962aee4a6ade31f&quot;&gt;05:45 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;shows posteriors and priors of hyperparameters &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/4ce05b91910168114c86a417ec56de925de94969&quot;&gt;05:38 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;fixed minor typo in calc of posterior distribution plots #18 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/01d0f47bcce6aa977f79f27cb8a980eef04d4673&quot;&gt;05:15 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;plotting for posteriors and priors added #18 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ab9cfac258cfdc7c888c95473329f048e32a8ec3&quot;&gt;04:13 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;replicate &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ae91163f2e8c4eb5094913908f49e722cff52656&quot;&gt;02:22 pm 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;time to start writing &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/aef1d1ac8af8b7a49bcc4f8d13b397c587805087&quot;&gt;09:16 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ah, good. With a bit more data, a very nice example of how GP can avoid problems of a structurally inaccurate parametric approach (Myers vs Ricker). &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/a8ea0c17c1a4ed4ca8ab51bebb75a9c98ec32564&quot;&gt;09:15 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;more data going up to positive equilibrium, better but still does not avoid crash &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/325786ba1798c0f888da59b584af67e4a0117e42&quot;&gt;08:29 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;An interesting example – seems to work despite being calibrated on a crashing dataset. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/b88842a2537eff45c9b383f04a4ffc0a126e3fe7&quot;&gt;08:08 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;With smaller K, GP cannot quite determine a proper policy &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/a462d4165b92a6c226e02460bd83d48acae7232f&quot;&gt;07:37 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;try different dynamic parameters on Myers (lower K) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/36a9985baf70df0d020a7a509490650d9bcd6f80&quot;&gt;05:59 am 2012/12/19&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;misc-ropensci&quot;&gt;Misc: ropensci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;resolved some outstanding issues on rfigshare (&lt;a href=&quot;https://github.com/ropensci/rfigshare/issues?state=closed&quot;&gt;rfigshare/issues?state=closed&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Random_ews_example</title>
	 <link href="/2012/12/17/random_ews_example.html"/>
   <updated>2012-12-17T00:00:00+00:00</updated>
   <id>/12/17/random_ews_example</id>
   <content type="html">&lt;h1 id=&quot;enso-ews&quot;&gt;ENSO EWS&lt;/h1&gt;
&lt;p&gt;Let’s just see what happens with the &lt;a href=&quot;http://www.esrl.noaa.gov/psd/enso/mei/&quot;&gt;MEI data&lt;/a&gt; for PDO:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.table&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info/assets/data/mei.csv&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;header=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;!-- html table generated in R 2.15.2 by xtable 1.7-0 package --&gt;
&lt;!-- Mon Dec 17 15:31:58 2012 --&gt;
&lt;p&gt;For the moment let’s ignore annual structure and just collapse this into timeseries sampled bimonthly.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;YEAR&amp;quot;&lt;/span&gt;)
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt$value
Z &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;X[!&lt;span class=&quot;kw&quot;&gt;is.na&lt;/span&gt;(X)]
Z &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(Z)-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), Z[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(Z)-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)])&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;png&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;mei.png&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(earlywarnings)
a &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;generic_ews&lt;/span&gt;(Z, &lt;span class=&quot;dt&quot;&gt;detrending=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;gaussian&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-18-6c85b56d2c-mei2012.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;How about the data from MacDonald (2005)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;ftp://ftp.ncdc.noaa.gov/pub/data/paleo/treering/reconstructions/pdo-macdonald2005.txt&quot;&gt;original data link&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.table&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info/assets/data/pdo-macdonald2005.csv&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;header=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;png&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;macdonald2005.png&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(earlywarnings)
a &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;generic_ews&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;detrending=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;gaussian&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;dev.off&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-18-6c85b56d2c-pdo-macdonald2005.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Nonparametric Bayes Comparisons</title>
	 <link href="/2012/12/15/nonparametric-bayes-comparisons.html"/>
   <updated>2012-12-15T00:00:00+00:00</updated>
   <id>/12/15/nonparametric-bayes-comparisons</id>
   <content type="html">&lt;h2 id=&quot;notes-on-structure-of-examples&quot;&gt;Notes on structure of examples&lt;/h2&gt;
&lt;p&gt;Externalized code so that different example scripts call identical commands for fitting and plotting to avoid duplication of code. Example scripts tend to be pretty text poor at the moment, would probably benefit by better descriptions in the markdown. May still involve redundant and potentially out of date descriptions though.&lt;/p&gt;
&lt;p&gt;Currently, externalized code for GP comparison experiments is in &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/526b54b09e23f550198863741bce9e9cb52e9325/inst/examples/gaussian-process-control.R&quot;&gt;gaussian-process-control.R&lt;/a&gt;, and is called by &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/cac79bcc42433a6b8720d5d4c5824c57a850a56c/inst/examples/may79-example.Rmd&quot;&gt;may79-example.Rmd&lt;/a&gt;, &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/cac79bcc42433a6b8720d5d4c5824c57a850a56c/inst/examples/myer-example.Rmd&quot;&gt;myer-example.Rmd&lt;/a&gt;, and &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/cac79bcc42433a6b8720d5d4c5824c57a850a56c/inst/examples/reed-example.Rmd&quot;&gt;reed-example.Rmd&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Also fixed &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; to at least include citations in markdown files.&lt;/p&gt;
&lt;h2 id=&quot;performance-of-gp-compared-to-ricker-on-an-underlying-allee-model&quot;&gt;Performance of GP compared to Ricker on an underlying Allee model&lt;/h2&gt;
&lt;h3 id=&quot;using-stationary-data-only&quot;&gt;Using stationary data only&lt;/h3&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-f42127cba3-gp-plot.png&quot; alt=&quot;Inferred GP&quot; /&gt;&lt;figcaption&gt;Inferred GP&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-f42127cba3-policy_plot.png&quot; alt=&quot;plot of policy functions&quot; /&gt;&lt;figcaption&gt;plot of policy functions&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-f42127cba3-sim-fish.png&quot; alt=&quot;fish stock dynamics&quot; /&gt;&lt;figcaption&gt;fish stock dynamics&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-f42127cba3-sim-harvest.png&quot; alt=&quot;harvest dynamics&quot; /&gt;&lt;figcaption&gt;harvest dynamics&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;(see &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/a3aad15b159aae10264e39ccf3cbe0cdb8aec279/inst/examples/myer-example.md&quot;&gt;myer-example.md&lt;/a&gt; for code and more graphs &amp;amp; details)&lt;/p&gt;
&lt;h3 id=&quot;using-more-data&quot;&gt;Using more data&lt;/h3&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-003da6e98e-gp-plot.png&quot; alt=&quot;Inferred GP&quot; /&gt;&lt;figcaption&gt;Inferred GP&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-003da6e98e-policy_plot.png&quot; alt=&quot;plot of policy functions&quot; /&gt;&lt;figcaption&gt;plot of policy functions&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-003da6e98e-sim-fish.png&quot; alt=&quot;plot of sim-fish&quot; /&gt;&lt;figcaption&gt;plot of sim-fish&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-003da6e98e-sim-harvest.png&quot; alt=&quot;plot of sim-harvest&quot; /&gt;&lt;figcaption&gt;plot of sim-harvest&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;(from &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/a1bc09a4a7a2edabbd63916416db6b095d1ead6b/inst/examples/myer-example.md&quot;&gt;earlier myer-example.md&lt;/a&gt;)&lt;/p&gt;
&lt;h2 id=&quot;comparing-gp-to-estimated-ricker-on-bh-dynamics&quot;&gt;Comparing GP to estimated Ricker on BH dynamics:&lt;/h2&gt;
&lt;p&gt;GP performs well, but Ricker performs adequately as well: &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/cac79bcc42433a6b8720d5d4c5824c57a850a56c/inst/examples/reed-example.md&quot;&gt;reed-example.md&lt;/a&gt; (shows an example with stationary data).&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-8b057f1f24-gp-plot.png&quot; alt=&quot;plot of chunk gp-plot&quot; /&gt;&lt;figcaption&gt;plot of chunk gp-plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-8b057f1f24-policy_plot.png&quot; alt=&quot;plot of chunk policy_plot&quot; /&gt;&lt;figcaption&gt;plot of chunk policy_plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-8b057f1f24-sim-fish.png&quot; alt=&quot;plot of chunk sim-fish&quot; /&gt;&lt;figcaption&gt;plot of chunk sim-fish&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-8b057f1f24-sim-harvest.png&quot; alt=&quot;plot of chunk sim-harvest&quot; /&gt;&lt;figcaption&gt;plot of chunk sim-harvest&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;other-advances&quot;&gt;Other advances&lt;/h2&gt;
&lt;p&gt;Approaches shown above address a variety of issues as well:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compares to a Ricker estimated by MLE (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/8&quot;&gt;#8&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Considers fewer non-stationary observations, but include 0,0 as observation (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/13&quot;&gt;#13&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Includes scrap value (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/10&quot;&gt;#10&lt;/a&gt;), though this does not guarentee no fishing under non-persistence estimation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A few next steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;measurement error should be introduced in the simulations (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/11&quot;&gt;#11&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Evaluate GP performance under larger noise conditions. (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/14&quot;&gt;#14&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See issues log for further issues to explore and more details on closed issues. See commit log for full details, this entry summarizes progress over the latter half of the week.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Nonparametric Bayes Notes</title>
	 <link href="/2012/12/11/nonparametric-bayes-notes.html"/>
   <updated>2012-12-11T00:00:00+00:00</updated>
   <id>/12/11/nonparametric-bayes-notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Code &lt;code&gt;gp_transition_matrix&lt;/code&gt; for generic multi-dimensional case&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;understanding-gaussian-process-performance&quot;&gt;Understanding Gaussian Process performance&lt;/h2&gt;
&lt;p&gt;If the estimated recruitment dynamics correspond to population dynamics that are non-persistent (might call this non self-sustaining, but in a rather stricter sense than when Reed (1979) introduced that term), and if no reward is offered at the terminal time point for a standing stock (zero scrap value), the GP dictates the rather counter-intuitive practice of simply removing the stock entirely.&lt;/p&gt;
&lt;p&gt;Exploring this by comparing evolution of the probability density for the population size under the transition function. Consider this example from a May1979 model (full run in &lt;a href=&quot;&quot;&gt;may1979-example.md&lt;/a&gt;): The Gaussian process infers a rather pessemistic evolution of the probabilty density (grey distribution becomes black distribution when unharvested, 20 years (OptTime)):&lt;/p&gt;
&lt;h4 id=&quot;gp-transition-function&quot;&gt;GP transition function&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-a3aad15b15-gp-F-sim.png&quot; alt=&quot;plot of chunk gp-F-sim&quot; /&gt;&lt;figcaption&gt;plot of chunk gp-F-sim&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Whereas the actual transition function moves the stock to a tight window around the high carrying capacity:&lt;/p&gt;
&lt;h4 id=&quot;true-transition-function&quot;&gt;true transition function&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-15-a3aad15b15-par-F-sim.png&quot; alt=&quot;plot of chunk par-F-sim&quot; /&gt;&lt;figcaption&gt;plot of chunk par-F-sim&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Often this results in a policy function that harvests all the fish, since they won’t persist. Exploring approaches to avoid such solutions, such as adding a reward for leaving some standing stock at the boundary time (issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/10&quot;&gt;#10&lt;/a&gt;).&lt;/p&gt;
&lt;h2 id=&quot;multi-species-examples-issue-7&quot;&gt;Multi-species examples (issue &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/7&quot;&gt;#7&lt;/a&gt;)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/b5b1d3300497399fb364a40c9f4523203944702d/inst/examples/multidimensional.md&quot;&gt;multidimensional.md&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;fragility-of-parametric-rigidity-examples&quot;&gt;Fragility of parametric rigidity examples&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;infer under BH and simulate under allee&lt;/li&gt;
&lt;li&gt;Infer ricker, simulate under BH&lt;/li&gt;
&lt;li&gt;Other examples?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;mcmc&quot;&gt;MCMC&lt;/h2&gt;
&lt;p&gt;Examples of controlling priors, resulting posteriors. &lt;a href=&quot;http://www.carlboettiger.info/2012/12/10/prior-distributions-for-tgp-mcmc.html&quot;&gt;See yesterday’s notes for details&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;additional-r-software-support&quot;&gt;additional R software support&lt;/h2&gt;
&lt;p&gt;Have been focusing recently on the MCMC implementation for treed Gaussian Processes, provided in the &lt;a href=&quot;http://cran.r-project.org/web/packages/tgp&quot;&gt;&lt;code&gt;tgp&lt;/code&gt;&lt;/a&gt; package.&lt;/p&gt;
&lt;p&gt;Lots of various implementations of Gaussian Proccesses in R in &lt;a href=&quot;http://cran.r-project.org/web/views/Spatial.html&quot;&gt;geospatial stats packages&lt;/a&gt; (e.g. Kriging implementations) including some the offer fully heirachical Bayesian approaches with a variety of twists:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/psgp/index.html&quot;&gt;&lt;code&gt;psgp&lt;/code&gt;&lt;/a&gt; Projected Spatial Gaussian Process (psgp) methods, Implements projected sparse Gaussian process kriging for the intamap package&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/gstat/&quot;&gt;&lt;code&gt;gstat&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/geoR/&quot;&gt;&lt;code&gt;geoR&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/spBayes/index.html&quot;&gt;&lt;code&gt;spBayes&lt;/code&gt;&lt;/a&gt; spBayes fits univariate and multivariate spatial models with Markov chain Monte Carlo (MCMC).&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/ramps/index.html&quot;&gt;&lt;code&gt;ramps&lt;/code&gt;&lt;/a&gt; Bayesian geostatistical modeling of Gaussian processes using a reparameterized and marginalized posterior sampling (RAMPS) algorithm designed to lower autocorrelation in MCMC samples. Package performance is tuned for large spatial datasets.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;from-the-commit-log&quot;&gt;From the commit log…&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;another example (includes some data in the higher range) #7 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/b5b1d3300497399fb364a40c9f4523203944702d&quot;&gt;06:49 pm 2012/12/11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;a simple multi-demensional example (no policy function yet) #7 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/b74ccc45667d4e20790acca3c5947d9a23fc5e95&quot;&gt;06:43 pm 2012/12/11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;updated notes on mcmc approach #6 &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/19bbd1028b702ab9243cb525e3a8b441324408c7&quot;&gt;03:51 pm 2012/12/11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;transition matrix method for GP takes Ef, Cf explicitly now. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/49cea150618907f48b058e45bbbc01a43c44f8c5&quot;&gt;03:50 pm 2012/12/11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GP that results in scorched earth fishing strategy &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/6fc937211b6c5381b46dc0e8ffff6092545d7519&quot;&gt;02:19 pm 2012/12/11&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Prior Distributions For Tgp Mcmc</title>
	 <link href="/2012/12/10/prior-distributions-for-tgp-mcmc.html"/>
   <updated>2012-12-10T00:00:00+00:00</updated>
   <id>/12/10/prior-distributions-for-tgp-mcmc</id>
   <content type="html">&lt;p&gt;I am trying to understand the interface for tgp method, but much of it is not well documented (yes, despite reading through the package R manual, two nice vignettes, and a the PhD Thesis describing it.)&lt;/p&gt;
&lt;p&gt;Just to get some consistent notation down: consider the case of a Gaussian process with a Gaussian/radial basis function kernel, parameterized as:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[K(X, X&amp;#39;) = \sigma^2 e^{\frac{(X-X&amp;#39;)^2}{d}}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;And observations from &lt;span class=&quot;math&quot;&gt;\(Z = f(X) + \varepsilon\)&lt;/span&gt;, for which we seek to approximate &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; as a (multivariate) Gaussian process, &lt;span class=&quot;math&quot;&gt;\(Z | X ~ N(\mu, C)\)&lt;/span&gt;. The covariance matrix &lt;span class=&quot;math&quot;&gt;\(C\)&lt;/span&gt; is given by our kernel &lt;span class=&quot;math&quot;&gt;\(K\)&lt;/span&gt;, conditioned on our observations; the mean &lt;span class=&quot;math&quot;&gt;\(\mu\)&lt;/span&gt; is given by a constant or linear model, likewise conditioned on our observations. If the multivariate normal of observed and predicted points is,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\begin{align}\begin{pmatrix} y_{\textrm{obs}} \ y_{\textrm{pred}} \end{pmatrix} \sim \mathcal{N}\left( \mathbf{0}, \begin{bmatrix} cov(X_o,X_o) &amp;amp; cov(X_o, X_p) \ cov(X_p,X_o) &amp;amp; cov(X_p, X_p) \end{bmatrix} \right)\end{align}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;the conditional probability is&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[x|y \sim \mathcal{N}(E,C)\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[E = \operatorname{cov}(X_p, X_o) (\operatorname{cov}(X_o,X_o) + \varepsilon \mathbb{I}) ^{-1} y\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[C= \operatorname{cov}(X_p, X_p) - \operatorname{cov}(X_p, X_o) (\operatorname{cov}(X_o,X_o)+ \varepsilon \mathbb{I} )^{-1} \operatorname{cov}(X_o, X_p)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Our hyperparameters are &lt;span class=&quot;math&quot;&gt;\(d\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(\varepsilon\)&lt;/span&gt;, for which we need priors. We’ll use the inverse gamma,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[P(x; a, g) = \frac{g^a}{\Gamma(a)} x^{-a - 1}\exp\left(-\frac{g}{x}\right)\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The distribution arises as the marginal posterior distribution for the unknown variance of a normal distribution if an uninformative prior is used; and as a useful conjugate prior if a less uninformative prior is preferred. However, it is common among Bayesians to consider an alternative parametrization of the normal distribution in terms of the precision, defined as the reciprocal of the variance, which allows the gamma distribution to be used directly as a conjugate prior.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt; is &lt;code&gt;X&lt;/code&gt;, &lt;span class=&quot;math&quot;&gt;\(Z\)&lt;/span&gt; is &lt;code&gt;Z&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt; is the parameter &lt;code&gt;s2&lt;/code&gt; in the &lt;code&gt;tgp&lt;/code&gt; package, coming from inverse gamma prior with parameters &lt;span class=&quot;math&quot;&gt;\(a = a_0\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(g = g_0\)&lt;/span&gt;, which are set by &lt;code&gt;s2.p = c(a_0, g_0)&lt;/code&gt;. Optionally, &lt;span class=&quot;math&quot;&gt;\(a_0\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(g_0\)&lt;/span&gt; can be taken from an exponential prior &lt;span class=&quot;math&quot;&gt;\(\lambda e^{-\lambda x}\)&lt;/span&gt;, in which the value of &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; is given by &lt;code&gt;s2.lam = c(lambda_a, lambda_g)&lt;/code&gt;. Setting &lt;code&gt;s2.lam = &amp;quot;fixed&amp;quot;&lt;/code&gt; “turns off” the use of a hyperprior.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(d\)&lt;/span&gt; I believe is &lt;code&gt;d&lt;/code&gt;, which Grammarcy calls the range parameter (other terms include the “lengthscale”). I am not sure what either &lt;code&gt;d&lt;/code&gt; or &lt;code&gt;s2&lt;/code&gt; correspond to if the covariance function &lt;code&gt;corr&lt;/code&gt; is something other than the radial basis function. I’m also not clear how to set the correlation function to a strictly Gaussian covariance – &lt;code&gt;corr&lt;/code&gt; is set to the &lt;code&gt;exp&lt;/code&gt; family, which leaves the power as a parameter &lt;code&gt;p_0&lt;/code&gt;:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[K(X, X&amp;#39;) =  e^{\frac{-(X-X&amp;#39;)^p_0}{d}}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(from equation 4 in the Vignette (1)). The parameter &lt;code&gt;p_0&lt;/code&gt; is fixed at &lt;code&gt;2&lt;/code&gt;, and not treated as a hyperparameter.&lt;/p&gt;
&lt;p&gt;The length-scale comes from a hyperparameter that is the sum (mixture) of two Gamma distributions, with prior parameter &lt;code&gt;c(a1,g1,a2,g2)&lt;/code&gt; where &lt;code&gt;g1&lt;/code&gt; and &lt;code&gt;g2&lt;/code&gt; are scale (1/rate) parameters. As before, these parameters &lt;code&gt;c(a1, g1, a2, g2)&lt;/code&gt; can be drawn from an exponential distribution hyperprior whose &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt; values are given by &lt;code&gt;d.lam&lt;/code&gt;, or turned off.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(\varepsilon\)&lt;/span&gt; is &lt;code&gt;nug&lt;/code&gt;. It seems to have same shape prior as &lt;span class=&quot;math&quot;&gt;\(d\)&lt;/span&gt;, specified by &lt;code&gt;c(a1,g1,a2,g2)&lt;/code&gt;, and optional hyperprior as well. Additionally it can be fixed to a constant by setting &lt;code&gt;nug.p = 0&lt;/code&gt; and specifying the staring value as &lt;code&gt;gd[1]&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The mean is not fixed at zero but is instead a linear model, we need hyperparameters for it as well. The key parameter there is the slope &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt;. The functional form for it’s prior is specified as &lt;code&gt;bprior&lt;/code&gt;, which takes values &lt;code&gt;bflat&lt;/code&gt;, &lt;code&gt;b0&lt;/code&gt;, &lt;code&gt;bmzt&lt;/code&gt;, or &lt;code&gt;bmznot&lt;/code&gt;. A sensible choice is as a Gaussian &lt;code&gt;b0&lt;/code&gt;, as shown in Equation 1 of the vignette&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[
\begin{align} 
Z | \beta, \sigma^2, K &amp;amp;\sim N_n(\mathbf{F} \beta, \sigma^2 \mathbf{K}) \\
\beta | \sigma^2, \tau^2, \mathbf{W}, \beta_0 &amp;amp;\sim N_m(\beta_0, \sigma^2 \tau^2 \mathbf{W} )  \\
\beta_0 &amp;amp;\sim N_m(\mathbf{\mu}, \mathbf{B})
\end{align}
\]&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;example-comparison&quot;&gt;Example comparison&lt;/h2&gt;
&lt;p&gt;Say, given some observed data pairs &lt;span class=&quot;math&quot;&gt;\(x,y\)&lt;/span&gt; and predictions desired on a grid &lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt;,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;X =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
x =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
y =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Manually I could just do:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;d =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;; epsilon =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;; sigma =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;co&quot;&gt;#fixed hyperparamaters&lt;/span&gt;
SE &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(Xi,Xj, d) sigma *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(Xi -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xj) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;d ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, d) 
cov_xx_inv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x, x) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;epsilon *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x)))
Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, x) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y
Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, x)  %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x, X)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And &lt;code&gt;Ef&lt;/code&gt; and &lt;code&gt;Cf&lt;/code&gt; are the estimated (krieging) mean and covariance.&lt;/p&gt;
&lt;h2 id=&quot;priors&quot;&gt;Priors&lt;/h2&gt;
&lt;p&gt;Note: it appears that the mixed gammas for &lt;code&gt;d&lt;/code&gt; and &lt;code&gt;nug&lt;/code&gt; actually treat the second argument, &lt;code&gt;g1&lt;/code&gt; and &lt;code&gt;g2&lt;/code&gt;, as the rate instead of the scale, so I invert the desired scale:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;s2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
tau2.p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
d.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;)
nug.p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Define as curves and plot the priors:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;s2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, s2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], s2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
tau2_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dinvgamma&lt;/span&gt;(x, tau2.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], tau2.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
d_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, d.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; d.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
nug_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dgamma&lt;/span&gt;(x, nug.p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;scale =&lt;/span&gt; nug.p[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
beta0_prior &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, tau) &lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(x, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, tau)

xx &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(.&lt;span class=&quot;dv&quot;&gt;0001&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length.out=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; xx, &lt;span class=&quot;dt&quot;&gt;s2 =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;s2_prior&lt;/span&gt;(xx), &lt;span class=&quot;dt&quot;&gt;tau2 =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;tau2_prior&lt;/span&gt;(xx), &lt;span class=&quot;dt&quot;&gt;beta0 =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;beta0_prior&lt;/span&gt;(xx, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;nug =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;nug_prior&lt;/span&gt;(xx), &lt;span class=&quot;dt&quot;&gt;d =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;d_prior&lt;/span&gt;(xx))
priors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(priors, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(priors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, &lt;span class=&quot;dt&quot;&gt;scale=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-10-9b2d792442-unnamed-chunk-5.png&quot; alt=&quot;plot of chunk unnamed-chunk-5&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-5&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bgp&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;X=&lt;/span&gt;x, &lt;span class=&quot;dt&quot;&gt;XX=&lt;/span&gt;X, &lt;span class=&quot;dt&quot;&gt;Z=&lt;/span&gt;y, &lt;span class=&quot;dt&quot;&gt;verb=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;meanfn=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;constant&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;bprior=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;b0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;BTE=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;6000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;m0r1=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, 
          &lt;span class=&quot;dt&quot;&gt;corr=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;exp&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;trace=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;beta =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,
          &lt;span class=&quot;dt&quot;&gt;s2.p =&lt;/span&gt; s2.p, &lt;span class=&quot;dt&quot;&gt;d.p =&lt;/span&gt; d.p, &lt;span class=&quot;dt&quot;&gt;nug.p =&lt;/span&gt; nug.p,
          &lt;span class=&quot;dt&quot;&gt;s2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;d.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nug.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, 
          &lt;span class=&quot;dt&quot;&gt;tau2.lam =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau2.p =&lt;/span&gt; tau2.p)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Extract the posterior Gaussian process mean and the &lt;span class=&quot;math&quot;&gt;\(\pm 2\)&lt;/span&gt; standard deviations over the predicted grid from the fit:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;gp$ZZ.ks2
tgp_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x   =&lt;/span&gt; gp$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], 
                  &lt;span class=&quot;dt&quot;&gt;y   =&lt;/span&gt; gp$ZZ.km, 
                 &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; gp$ZZ.km -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp$ZZ.ks2), 
                 &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; gp$ZZ.km +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp$ZZ.ks2))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and likewise for our manual data:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;manual_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, 
                         &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; Ef, 
                         &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; (Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf))), 
                         &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; (Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf))))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compare the GP posteriors:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(tgp_dat) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; ymin, &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ymax), &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; .&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# Var&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# mean&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; y), &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# raw data&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;dat =&lt;/span&gt; manual_dat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; ymin, &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ymax), &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; .&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# Var&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;dat =&lt;/span&gt; manual_dat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;)  +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#MEAN    &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;plot.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;,&lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-10-9b2d792442-gp-plot.png&quot; alt=&quot;plot of chunk gp-plot&quot; /&gt;&lt;figcaption&gt;plot of chunk gp-plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;posteriors-of-hyperparameters&quot;&gt;Posteriors of hyperparameters&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
hyperparameters &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;s2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;tau2&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;beta0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;nug&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;d&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ldetK&amp;quot;&lt;/span&gt;)
posteriors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(gp$trace$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][,hyperparameters], &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(posteriors) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-10-9b2d792442-unnamed-chunk-9.png&quot; alt=&quot;plot of chunk unnamed-chunk-9&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-9&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Github Issues Tracker: The Perfect Research Todo List</title>
	 <link href="/2012/12/06/github-issues-tracker:-the-perfect-research-todo-list.html"/>
   <updated>2012-12-06T00:00:00+00:00</updated>
   <id>/12/06/github-issues-tracker:-the-perfect-research-todo-list</id>
   <content type="html">&lt;p&gt;Github issues tracker has increasingly become my research to-do list. Far beyond bugs and features of the code associated with the project, the issues sign-post different directions for investigation and the progress I’ve made in each. Tags serve to group issues related to a common sub-project (as in my &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues&quot;&gt;pdg-control&lt;/a&gt;) repo or priotize tasks (as in my &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues&quot;&gt;nonparametric-bayes&lt;/a&gt; repo.&lt;/p&gt;
&lt;p&gt;Issues not only have title and tags, but support a comment thread for progress and discussion of the issue. Thanks to github-flavored-markdown, issues can reference each other simply by number, and can be updated or closed automatically by mentioning the issue number in a commit.&lt;/p&gt;
&lt;p&gt;Issues can also be grouped into shared deadlines, or milestones; a feature I haven’t fully exploited (but see our &lt;a href=&quot;https://github.com/cboettig/ews-review/issues/milestones&quot;&gt;ews-review&lt;/a&gt; paper). In any collaborative project the issues can be assigned to different people, (though currently this requires they have a Github account).&lt;/p&gt;
&lt;p&gt;A consequence of this workflow is a conveniently numbered, color-coded and cross-linked collection of steps involved in a given research project. This tends to be a higher-level overview than the individual commit log, particularly as I often use commits to track multiple runs with different parameters, or move code across to different supercomputers that do the actual runs.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8490/8250376085_09f734c6f1.jpg&quot; alt=&quot;Example from closed issues on pdg-control&quot; /&gt;&lt;figcaption&gt;Example from closed issues on &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues?labels=&amp;amp;milestone=&amp;amp;page=1&amp;amp;state=closed&quot;&gt;&lt;code&gt;pdg-control&lt;/code&gt;&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;I am still figuring out the right level or “resolution” on which to create and track issues.&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; On one extreme, almost every commit could be seen as resolving an issue. The ideal use for me is probably nearer the other extreme, where individual issues are rather big-picture, and may be referenced by many commits. Perhaps the right way to think about it is that the questions addressed by resolving an issue are on the level of &lt;em&gt;what is interesting to others&lt;/em&gt;, while changes in individual commits are more for me. Hopefully I get better at finding this relevant level.&lt;/p&gt;
&lt;p&gt;Another nice feature of issues is that they can be closed when a particular line of investigation hits a dead-end, or stalls, or when the problem is resolved. Unlike the resulting paper from an investigation which essentially summarizes the issues that were closed successfully, the issues tracker also reveals the dead-ends, as well as those issues that were not closed a time of publication (but perhaps left to “further research”). Hopefully I will have some decent examples of this in the repositories accompanying my next papers.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;Unlike issues, commits do not have a native tag structure (so-called “tags” mark important events in the commit history rather than grouping common commits). So at least this would group commits by the tag of the associated issue.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/12/05/notes.html"/>
   <updated>2012-12-05T00:00:00+00:00</updated>
   <id>/12/05/notes</id>
   <content type="html">&lt;h2 id=&quot;pdg-control-call&quot;&gt;pdg-control Call&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Send Figure 3 and 4 with stock dynamics to Paul.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Detailed to do items coming out of talk filed as Github Issues for &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues?labels=policy+costs&amp;amp;page=1&amp;amp;state=open&quot;&gt;pdg-control (policycosts)&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/41&quot;&gt;Comparisons between assumed and true policy costs (Figure 5 style but as a Table)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/40&quot;&gt;Snappier, more meaningful names for “L1”, “L2” etc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/39&quot;&gt;Write real-world context/significance of L1, L2, fixed, etc.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/38&quot;&gt;Add graph &amp;amp; discussion of stock dynamics for Fig 3 &amp;amp; 4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/37&quot;&gt;Figure 5 interpretation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/36&quot;&gt;Fix boundary issues in Figure 4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/35&quot;&gt;Resolve confusion about apples-to-apples / definition of NPV0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/34&quot;&gt;Resolve cost structure question&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/33&quot;&gt;On functional forms, drop ALL asymmetric cases for now.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;comment-piece&quot;&gt;Comment piece&lt;/h2&gt;
&lt;p&gt;Round 1 revisions sent to Lucy and Alan.&lt;/p&gt;
&lt;h3 id=&quot;workflow-workshop&quot;&gt;Workflow Workshop&lt;/h3&gt;
&lt;p&gt;At Simone’s invitation, I’m running a little session on workflow in git/Github, Rstudio, and knitr for the Mangel lab group. A quick brainstorm for an outline:&lt;/p&gt;
&lt;h4 id=&quot;a-first-tutorial&quot;&gt;A first tutorial&lt;/h4&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Create a new repository on Github&lt;/li&gt;
&lt;li&gt;launch an RStudio session, select create new project&lt;/li&gt;
&lt;li&gt;Add the &lt;code&gt;git@&lt;/code&gt; url to the project, select a local directory, hit “create”&lt;/li&gt;
&lt;li&gt;In Rstudio, create new R Markdown file.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Editing the file. Hit “Knit HTML” button.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;add the files to git: git tab, check boxes.&lt;/li&gt;
&lt;li&gt;commit the .Rmd and md files, and push files to Github.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Viewing files on github.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Navigating Github: Project directory, viewing &lt;code&gt;.md&lt;/code&gt; files, raw mode, viewing history of a file, getting permanent links to specific versions.&lt;br /&gt;10: Github extras: using issues. (Referencing issues in commits)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Recovering a deleted file.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;git-more-advanced&quot;&gt;Git More Advanced&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Create a gh-pages branch and add the html generated from the Rstudio/knitr. (Covers branching &amp;amp; webpage hosting on github)&lt;/li&gt;
&lt;li&gt;Create a github homepage&lt;/li&gt;
&lt;li&gt;Merging changes, resolving conflicts.&lt;/li&gt;
&lt;li&gt;collaborating via github.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;why sha hashes are awesome&lt;/li&gt;
&lt;li&gt;private repositories&lt;/li&gt;
&lt;li&gt;Repo Readmes&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;other-topics&quot;&gt;Other topics&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Managing references. Sharing collections (Mendeley)&lt;/li&gt;
&lt;li&gt;References in markdown. Pandoc. (knitcitations?)&lt;/li&gt;
&lt;li&gt;Managing data. Figshare.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Social media for science.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Tgp Mcmc For Gaussian Processes</title>
	 <link href="/2012/12/04/tgp-mcmc-for-gaussian-processes.html"/>
   <updated>2012-12-04T00:00:00+00:00</updated>
   <id>/12/04/tgp-mcmc-for-gaussian-processes</id>
   <content type="html">&lt;p&gt;Exploring implementation through &lt;code&gt;tgp&lt;/code&gt; package MCMC routine and background reading (manual, vignettes, thesis).&lt;/p&gt;
&lt;p&gt;Example call:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bgp&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;X=&lt;/span&gt;X, &lt;span class=&quot;dt&quot;&gt;XX=&lt;/span&gt;XX, &lt;span class=&quot;dt&quot;&gt;Z=&lt;/span&gt;Z, &lt;span class=&quot;dt&quot;&gt;meanfn=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;constant&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;bprior=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;b0&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;BTE=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;6000&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;m0r1=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;verb=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;corr=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;exp&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;trace=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;s2.p=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;tau2.p=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;s2.lam=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau2.lam=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verbose return:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;n=39, d=1, nn=101
BTE=(1000,6000,2), R=1, linburn=0
RNG state RK using rk_seed
preds: data krige
T[alpha,beta,nmin,smin,bmax]=[0,0,10,1,1]
mean function: constant
beta prior: b0 hierarchical
s2[a0,g0]=[5,10]
s2 prior fixed
tau2[a0,g0]=[5,10]
tau2 prior fixed
corr prior: isotropic power
nug[a,b][0,1]=[1,1],[1,1]
nug prior fixed
gamlin=[0,0.2,0.7]
d[a,b][0,1]=[1,20],[10,10]
d prior fixed&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The parameters in this run are constant across the trace points (because hyperparameters are fixed).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;X&lt;/code&gt; is the observed X values (or matrix of appropriate dimension)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XX&lt;/code&gt; the desired predicted grid. (will also predict on X)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Z&lt;/code&gt; is observed Y values (or matrix of appropriate dimension)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;m0r1&lt;/code&gt; means scale data to mean zero and unit range&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bprior&lt;/code&gt; is the prior distribution, defaulting to &lt;code&gt;bfalt&lt;/code&gt;. &lt;code&gt;b0&lt;/code&gt; is a Gaussian. This prior is for the Gaussian process and is not to be confused with the hyperpriors describing the distribution of various parameters.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BTE&lt;/code&gt; Burn-in B steps, Terminate after T steps, sample Every E steps.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;verb&lt;/code&gt; Very verbose output&lt;/li&gt;
&lt;li&gt;Other options (for adaptive/query learning, etc, igored for now. Focus on priors).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The priors for the hyperparameters are given by &lt;code&gt;s2.p&lt;/code&gt;, &lt;code&gt;tau.p&lt;/code&gt; etc (both are Inverse Gammas). Their parameters can vary hiearchically in general, but we hold them fixed, &lt;code&gt;s2.lam = &#39;fixed&#39;&lt;/code&gt;, etc.)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;s2&lt;/code&gt; is &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt; in Gramacy and &lt;span class=&quot;math&quot;&gt;\(\tau\)&lt;/span&gt; in Rassmussen and Williams, is the scale of the noise. Comes from an inverse gamma prior. Set by inverse-gamma parameters &lt;code&gt;a0&lt;/code&gt; and &lt;code&gt;g0&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;tau2&lt;/code&gt; Also comes from an inverse gamma prior. It is also set by inverse-gamma parameters &lt;code&gt;a0&lt;/code&gt; and &lt;code&gt;g0&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[Z | \beta, \sigma^2, K \sim N_n(\mathbf{F} \beta, \sigma^2 \mathbf{K}) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ \beta | \sigma^2, \tau^2, \mathbf{W}, \beta_0 ~ N_m(\beta_0, \sigma^2 \tau^2 \mathbf{W} )  \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[\beta_0 | N_m(\mathbf{\mu}, \mathbf{B})\]&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;We keep the heirachical priors fixed in the &lt;code&gt;tau.lm&lt;/code&gt;, &lt;code&gt;s2.lm&lt;/code&gt;, etc. &lt;code&gt;nug&lt;/code&gt; fixed by default. Note this results in the the priors from which these are sampled are fixed: e.g. &lt;code&gt;gp$trace$hier$s2.a0&lt;/code&gt;, &lt;code&gt;gp$trace$hier$s2.g0&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;nug.p&lt;/code&gt; This is the “nugget,” the measurement error. Comes from a mixture of gamma prior parameter (initial values) for the nugget parameter &lt;code&gt;c(a1,g1,a2,g2)&lt;/code&gt; where &lt;code&gt;g1&lt;/code&gt; and &lt;code&gt;g2&lt;/code&gt; are scale (&lt;code&gt;1/rate&lt;/code&gt;) parameters. &lt;em&gt;Default reduces to simple exponential prior.&lt;/em&gt; Specifying &lt;code&gt;nug.p = 0&lt;/code&gt; fixes the nugget parameter to the “starting” value in &lt;code&gt;gd[1]&lt;/code&gt;, i.e., it is excluded from the MCMC&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;index&lt;/code&gt; is the sampling point (from &lt;code&gt;BTE&lt;/code&gt;, we see we sample starting at step 1000 and ending at step 6000, recording every 2 steps, so there are &lt;span class=&quot;math&quot;&gt;\((T-B)/E = 2500\)&lt;/span&gt; index points).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lambda&lt;/code&gt; possibly a mixing parameter in the importance sampler temperature??&lt;/li&gt;
&lt;li&gt;&lt;code&gt;beta0&lt;/code&gt; No mention in the manual&lt;/li&gt;
&lt;li&gt;&lt;code&gt;d&lt;/code&gt; The parameter for priors using the hierachical exponential distribution for the parameters &lt;code&gt;a1&lt;/code&gt;, &lt;code&gt;a2&lt;/code&gt;, &lt;code&gt;g1&lt;/code&gt;, &lt;code&gt;g2&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;b&lt;/code&gt; ??&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Where are the hyperparameters for the correlation function (e.g. the length-scale for the Gaussian??)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;traces&quot;&gt;Traces&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(gp$trace$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(pars, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(index, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-unnamed-chunk-5.png&quot; alt=&quot;plot of chunk unnamed-chunk-5&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-5&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;It is possible to calculate summary statistics and check out the distribution of these fellows.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(gp$trace$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]][,&lt;span class=&quot;st&quot;&gt;&amp;quot;nug&amp;quot;&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 0.009755&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(pars, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_histogram&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-unnamed-chunk-6.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-6&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;extracting-the-estimated-process&quot;&gt;Extracting the estimated process&lt;/h2&gt;
&lt;p&gt;(The &lt;strong&gt;MAP&lt;/strong&gt;, maximum a posteriori expected mean and variance).&lt;/p&gt;
&lt;p&gt;Extract the posterior Gaussian process mean and the &lt;span class=&quot;math&quot;&gt;\(\pm 2\)&lt;/span&gt; standard deviations over the predicted grid from the fit:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;gp$ZZ.ks2
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x   =&lt;/span&gt; gp$XX[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], 
                 &lt;span class=&quot;dt&quot;&gt;y    =&lt;/span&gt; gp$ZZ.km, 
                 &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; gp$ZZ.km -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp$ZZ.ks2), 
                 &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; gp$ZZ.km +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.96&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(gp$ZZ.ks2))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot the posterior Gaussian Process:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  p1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat) +
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;y, &lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;ymin, &lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;ymax), &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# Var&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;y), &lt;span class=&quot;dt&quot;&gt;size=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#MEAN&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;gp$obs,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;llik =&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;prettyNum&lt;/span&gt;(gp$llik)))
  if(!&lt;span class=&quot;kw&quot;&gt;is.null&lt;/span&gt;(true))
    p1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; true, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) 
p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theme_notebook&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-gp-plot.png&quot; alt=&quot;plot of chunk gp-plot&quot; /&gt;&lt;figcaption&gt;plot of chunk gp-plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Find the actual optimum policy from the true parametric model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat$x
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
matrices_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f_transition_matrix&lt;/span&gt;(f, p, x_grid, h_grid)
opt_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(matrices_true, x_grid, h_grid, &lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;01&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Estimate a policy from the Gaussian Process:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;rownorm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(M) &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(M, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, function(x) x/&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x)))
matrices_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(h_grid, function(h){
    S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat$y -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h
    F_ &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(S), function(i){
      if(S[i]&amp;gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) {
        out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dlnorm&lt;/span&gt;(x_grid/S[i], &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, V[i])
      } else {
        out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_grid))
        out[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
        out
      }
    }))
    F_ &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownorm&lt;/span&gt;(F_)
  })
opt_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(matrices_gp, x_grid, h_grid, &lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;01&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and plot&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; x_grid[opt_gp$D[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;Exact =&lt;/span&gt; x_grid[opt_true$D[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
policy_plot &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;) 
policy_plot +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theme_notebook&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-policy_plot.png&quot; alt=&quot;plot of chunk policy_plot&quot; /&gt;&lt;figcaption&gt;plot of chunk policy_plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We can see what happens when we attempt to manage a stock using this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
sim_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, K, opt_gp$D, z_g, &lt;span class=&quot;dt&quot;&gt;profit=&lt;/span&gt;profit)
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
sim_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, K, opt_true$D, z_g, &lt;span class=&quot;dt&quot;&gt;profit=&lt;/span&gt;profit)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; sim_gp$time, &lt;span class=&quot;dt&quot;&gt;stock_gp =&lt;/span&gt; sim_gp$fishstock, &lt;span class=&quot;dt&quot;&gt;stock_true =&lt;/span&gt; sim_true$fishstock, &lt;span class=&quot;dt&quot;&gt;harvest_gp =&lt;/span&gt; sim_gp$harvest, &lt;span class=&quot;dt&quot;&gt;havest_true =&lt;/span&gt; sim_true$harvest)
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(df, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
simplot &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time,value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable))
simplot +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;theme_notebook&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-simplot.png&quot; alt=&quot;plot of chunk simplot&quot; /&gt;&lt;figcaption&gt;plot of chunk simplot&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Figures 3 And 4 For Policycosts</title>
	 <link href="/2012/12/03/Figures-3-and-4-for-policycosts.html"/>
   <updated>2012-12-03T00:00:00+00:00</updated>
   <id>/12/03/Figures-3-and-4-for-policycosts</id>
   <content type="html">&lt;p&gt;Straight-forward tasks can sometimes take forever. In advance of our upcoming conference call for the Pretty Darn Good Control (&lt;code&gt;pdg-control&lt;/code&gt;) NIMBioS working group, I had a few remaining issues to touch up in Figures 3 and 4.&lt;/p&gt;
&lt;p&gt;Figure 3 shows harvest and stock dynamics under the different functional forms fo the cost. The goal is to provide a very intuitive, visual sense of how the policies differ under these different functional forms, such as a fixed “transaction fee” (fixed) or a cost that is proportional to the size of the change in policy (L1), or the square of that change (L2), etc. I had already cobbled together the code for this, but simply had to run over the same set of replicates and pick a window length appropriate to see the differences. The trick was make sure we were comparing functional forms that had the same overall net impact on the Net Present Value of the stock. In this way, the differences observed are due only to differences in the form of the cost, and not the total magnitude of the cost. Figure 2 already provided a way to do this scaling, I simply needed to back out the scaling programmatically.&lt;/p&gt;
&lt;p&gt;Finding these “apples-to-apples” levels is something of a computational brute force excercise, computing the costs along a grid of coefficients for each method. Otherwise the idea is pretty straight forward. One trick was being able to use the policies calculated in this step to generate the Figure 3 simulations, rather than recalculating the policy once the right scaling value &lt;code&gt;c2&lt;/code&gt; is known.&lt;/p&gt;
&lt;p&gt;Figure 4 provides a more quantitative way to look at the comparison. I had already created a version of this graph that showed how variance and autocorrelation in the policy and state variable dynamics changed as the total magnitude of the cost increased. Unfortunately this suffered from the apples-to-oranges problem for comparing between functional forms. The x-axis needed to be calculated in terms of the reduction of the NPV, rather then the coefficients (&lt;code&gt;c2&lt;/code&gt;, which mean different things in the different forms), for a proper apples-to-apples comparison.&lt;/p&gt;
&lt;p&gt;Okay, straight forward exercise. 47 commits and 19 hours later, I have what I need. And it is 5am. Oh well, this post is still going down as “Monday”.&lt;/p&gt;
&lt;h3 id=&quot;figure-3&quot;&gt;Figure 3&lt;/h3&gt;
&lt;h4 id=&quot;stock-state-variable-dynamics&quot;&gt;Stock (state variable) dynamics&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-p1.png&quot; /&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;harvest-control-variable-dynamics&quot;&gt;Harvest (control variable) dynamics&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-Figure3.png&quot; /&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;figure-4&quot;&gt;Figure 4&lt;/h3&gt;
&lt;h4 id=&quot;stock-state-variable-dynamics-1&quot;&gt;Stock (state variable) dynamics&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-Figure4S1.png&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-Figure4S2.png&quot; /&gt;
&lt;/figure&gt;
&lt;h5 id=&quot;harvest-control-variable-dynamics-1&quot;&gt;Harvest (control variable) dynamics&lt;/h5&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-Figure41.png&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-Figure42.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/25e6f1c1a599440be790a7ec047b8b63540255c5/inst/examples/policycosts/writeup.md&quot;&gt;full knitr file here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;These are calculated with &lt;code&gt;c0 = 30&lt;/code&gt;. There’s corresponding figures when fishing effort itself is cost-free, &lt;code&gt;c0 = 0&lt;/code&gt;. See &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/cccec55a8ac2ef47dea99d45fdb732e5028aec98/inst/examples/policycosts/costfree.md&quot;&gt;costfree.md&lt;/a&gt;. Looks like the &lt;code&gt;c2&lt;/code&gt; range needs to be extended for this run.&lt;/p&gt;
&lt;h3 id=&quot;figure-2&quot;&gt;Figure 2&lt;/h3&gt;
&lt;p&gt;The apples-to-apples illustration is also generated in this script.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-05-72dc8741fb-apples_plot.png&quot; /&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;misc-notes&quot;&gt;Misc notes&lt;/h3&gt;
&lt;p&gt;Caching is pretty helpful in fiddling with these slow computations. Sometimes it helps to copy the cache of the intensive part of a run over from the supercomputer to the local machine, and load the whole cache into an interactive R session. Loading the whole cache can be done as such:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;e &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;environment&lt;/span&gt;()
files &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;.rdb&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;system&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;ls *.rdb&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;intern=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(files, lazyLoad, &lt;span class=&quot;dt&quot;&gt;env=&lt;/span&gt;e)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;providied the target chache directory doesn’t have caches of different commits.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Note On Notebook Figures</title>
	 <link href="/2012/11/30/Note-on-notebook-figures.html"/>
   <updated>2012-11-30T00:00:00+00:00</updated>
   <id>/11/30/Note-on-notebook-figures</id>
   <content type="html">&lt;h2 id=&quot;plots-for-the-notebook&quot;&gt;plots for the notebook&lt;/h2&gt;
&lt;p&gt;I have started uploading images to my own server, rather than flickr. Programmatically, this is just a matter of switching the knitr upload function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; socialR::notebook.url)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;from my custom &lt;a href=&quot;https://github.com/cboettig/socialR/blob/299f4aeb8cc1a9b31c761dc7c9b14b1d73f7ef25/R/custom_knit.R&quot;&gt;flickr.url&lt;/a&gt; function (a wrapper to &lt;code&gt;Rflickr&lt;/code&gt;) to a custom function &lt;a href=&quot;https://github.com/cboettig/socialR/blob/e9a30fd6381c1a8147cbaec0e3886d559de6d48c/R/notebook.R&quot;&gt;notebook.url&lt;/a&gt; using a system call to &lt;code&gt;cp&lt;/code&gt; (to my local jekyll notebook) and &lt;code&gt;rsync&lt;/code&gt; (so the figure displays before my next jekyll push).&lt;/p&gt;
&lt;p&gt;The new script names image by date and the first 10 characters of the sha hash, as well as the knitr chunk name. This way multiple runs tweaking an individual file are not recorded as separate files if no commits are made to the repository, but every commit is guaranteed to link to a unique set of figures (unless the chunk is loaded from cache and does not generate a new image). All figures also &lt;a href=&quot;http://www.carlboettiger.info/2012/assets/figures/&quot;&gt;appear sorted by date on the webserver&lt;/a&gt; in the manner. I could probably put some lightweightphotobrowser on the server, if browsing images serves any purpose.&lt;/p&gt;
&lt;p&gt;The real reason for the change is to maintain the images in my labnotebook directory, such that the directory is a complete archive that can exist independent of web services such as flickr. The images aren’t included in the git management for obvious reasons. My current archiving on figshare has simple involved zipping up the markdown versions of all my posts by year (in _posts). If I continue in this way, I should need to archive the &lt;code&gt;figures/&lt;/code&gt; directory along with it. Perhaps I should archive the entire Jekyll directory instead.&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An alternative strategy would be to upload each figure to figshare directly in the same way I was doing with flickr. While this has the advantage of clockss archiving, mostly I’m not sure that I should flood my figshare account in this way. I really don’t need a different doi for every attempt to create a figure (just as I’ve decided not to archive each notebook entry as a separate figshare object.)&lt;/p&gt;
&lt;h3 id=&quot;plot-appearance-transparency-in-the-notebook&quot;&gt;Plot appearance (transparency) in the notebook&lt;/h3&gt;
&lt;p&gt;It’s not easy to generate figures that display nicely in both dark and light themes (well, I should just tell ggplot to use a solarized set of theme colors, but I’m too lazy to write that). Meanwhile, just setting the transparent background to the plot, and transparent grid lines against the grey boxes seems to do pretty well:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-12-04-046b509f8d-unnamed-chunk-6.png&quot; alt=&quot;Example transparent plot&quot; /&gt;&lt;figcaption&gt;Example transparent plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This is accomplished with the codeblock below. Note that we need to tell &lt;code&gt;knitr&lt;/code&gt; chunks to set the background of the png device to transparent, as well as telling ggplot what we want to be transparent:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opts_chunk$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;dev.args=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;bg=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;))
theme_notebook &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_grey&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme&lt;/span&gt;(
    &lt;span class=&quot;dt&quot;&gt;plot.background =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;),
    &lt;span class=&quot;dt&quot;&gt;panel.grid.major =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;element_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;)),
    panel.grid.minor =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;element_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;colour =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;transparent&amp;quot;&lt;/span&gt;)&lt;span class=&quot;er&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;theme_set&lt;/span&gt;(theme_notebook)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(It appears this makes the gridlines invisible, since they appear over the grey &lt;code&gt;panel.background&lt;/code&gt;. For now, best to leave them white, which shows up against the grey background in any event).&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;One challenge this introduces is private posts (such as the reviews I write in peer review, which I sign but cannot publicly disclose). Currently these are ignored by github (&lt;code&gt;.gitignore&lt;/code&gt;) and by Jekyll (&lt;code&gt;exclude:&lt;/code&gt; in &lt;code&gt;_config.yml&lt;/code&gt;). I suppose I could likewise simply tell tarball to ignore &lt;code&gt;_posts/private&lt;/code&gt;.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
 </entry>
 
 <entry>
   <title>early results in nonparametric-bayes approaches to optimal policy</title>
	 <link href="/2012/11/28/nonparametric-bayes-work.html"/>
   <updated>2012-11-28T00:00:00+00:00</updated>
   <id>/11/28/nonparametric-bayes-work</id>
   <content type="html">&lt;h2 id=&quot;resolving-numerical-and-computational-issues&quot;&gt;Resolving Numerical and Computational issues&lt;/h2&gt;
&lt;h4 id=&quot;sequential-approach-issue-4&quot;&gt;Sequential approach? (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/4&quot;&gt;issue #4&lt;/a&gt;)&lt;/h4&gt;
&lt;p&gt;Thinking through whether or not it is worth optimizing the computational performance of the sequential approach.&lt;/p&gt;
&lt;p&gt;Can it be demonstrated that this actually has higher numerical stability? Alternatively, can it be demonstrated that this is (or is not) equivalent to the calculation performed by the direct inversion? What is the difference in computational complexity between these approaches? e.g. the inverse ends up effectively O(n^3), but what is the recursion?&lt;/p&gt;
&lt;p&gt;If we assume measurement noise, is stability an issue? e.g. introducing such small noise or jitter apparently a standard method to address stability; see pg 12 and citations there-in (Matheron, 1963; Cressie, 1991, Neal, 1997).&lt;/p&gt;
&lt;p&gt;How much accuracy is lost with reasonable grids? Compared to adding jitter?&lt;/p&gt;
&lt;p&gt;Is there any evidence of use for this approach in the substantial GP literature of computational experts?&lt;/p&gt;
&lt;p&gt;With large data sets, the determinant does get close to zero, but solutions appear stable with direct (DGESV) inversion. See &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/4&quot;&gt;issue #4&lt;/a&gt; for a discussion.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;seeing if I get singular matrices in the inversion &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/7faf6791cb386db48687144937868f976814dc65&quot;&gt;09:55 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;print determinant value &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/71f2443754193910bd20af1e9659848d5de1dc86&quot;&gt;10:00 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;choleski-issue-2&quot;&gt;Choleski, (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/2&quot;&gt;issue #2&lt;/a&gt;)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;basic example comparing methods &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/113df7a98a46e0fb91443a60867c887a76f3ccb6&quot;&gt;08:10 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;choleski approach using backsolve &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/5c332aa3ade026973fa5cb873f7ec3c7b5c6f7d3&quot;&gt;05:49 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some explaining to do here.&lt;/p&gt;
&lt;h3 id=&quot;hyperparameter-optimization-issue-3&quot;&gt;Hyperparameter optimization (&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/issues/3&quot;&gt;issue #3&lt;/a&gt;)&lt;/h3&gt;
&lt;p&gt;Added necessary hyperparameter for variance in the covariance kernel &lt;span class=&quot;math&quot;&gt;\(\tau\)&lt;/span&gt;, in kernel &lt;span class=&quot;math&quot;&gt;\(\tau e^{-(x-x&amp;#39;)^2/\ell}\)&lt;/span&gt;. Alternatively should be scaling data s.t. variance is unity. Manually tuning this does allow for better fits. Need to try optimization still. Have added a method to condition on the function going through (0,0) with negligible error, currently in a somewhat direct/inelegant code (and potential for numerical instability).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reed example using tau not set to 1 and conditioning on going through (0,0) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/0de731ae0924ea649549dafebb4914f2da3269a6&quot;&gt;05:34 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;allow for tau as hyperparameter &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ca583db171b79f732c00ce8acd5b902942619c4e&quot;&gt;02:55 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now getting reasonable performance of the Gaussian process relative to the optimal policy (also see earlier examples below). Comforting to see that the Gaussian Process results in slightly larger uncertainty and manages slightly more conservatively (higher standing stock, lower harvests). Very conservative outside range of data – resulting in a policy function deviating strongly from Reed’s constant escapement.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-ca583db171-unnamed-chunk-2.png&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-ca583db171-policy_plot.png&quot; alt=&quot;plot of chunk policy_plot&quot; /&gt;&lt;figcaption&gt;plot of chunk policy_plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-ca583db171-simplot.png&quot; alt=&quot;plot of chunk simplot&quot; /&gt;&lt;figcaption&gt;plot of chunk simplot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;functionalize-package&quot;&gt;Functionalize package&lt;/h3&gt;
&lt;p&gt;Existing methods now all implemented in package function &lt;code&gt;gp_fit&lt;/code&gt;, and method for SDP via GP in &lt;code&gt;gp_transition_matrices&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;as before but with kernlab fit (underestimates lengthscale) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/16892e97b750b8d2e0bf7e31cf05cdaae592e979&quot;&gt;02:16 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Identical to previous reed-example commit but with kernlab engine (not fit) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ba98931d271492ff1b819b558dceefcc04c444f2&quot;&gt;02:14 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Example of direct method using subroutines from &lt;code&gt;R/&lt;/code&gt; &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/158fae025441495527c58dda627756ff54d9862f&quot;&gt;02:11 pm 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Different GP fitting routines can all be called with gp_fit and plotted with plot.gpfit. transition matrices for GP can be estimated with &lt;code&gt;gp_transition_matrices&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;See example use in reed-example.R &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/8fa49628f1969eab457109c7364382649e87143e&quot;&gt;01:48 pm 2012/11/28&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Policy Costs Work</title>
	 <link href="/2012/11/27/policy-costs-work.html"/>
   <updated>2012-11-27T00:00:00+00:00</updated>
   <id>/11/27/policy-costs-work</id>
   <content type="html">&lt;p&gt;Scripts to estimate apples to apples comparisons for different penalty functions and plot instances of the resulting policy. Example run with fixed linear costs on effort.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Double the actual variance leads to terminal overfishing &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/ee608e9a5dc94f98c7cb97e13133e01bd0823815&quot;&gt;11:16 am 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;use fixed seed. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/22930fb2a81b2e89d848516b6bbca4278fc1e59b&quot;&gt;09:45 am 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Compare GP to Reed optimum for BH (successful run this time) &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/59d864f621fbe6926407fb2e9adf7a255f8b84a7&quot;&gt;09:37 am 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;basic GP example in BH system, compared to Reed Optimum &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/05e096fce1f65155b7b288be39d983717069edef&quot;&gt;09:17 am 2012/11/28&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Content of current working example, run on server &lt;em&gt;zero&lt;/em&gt;. See commit &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/942b2faa91d4930622133f7c9385ef2c65e976f1/inst/examples/policycosts/policycosts_writeup_c0_30.md&quot;&gt;942b2faa91&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;seed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# Random seed (replicable results)&lt;/span&gt;
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# economic discounting rate&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# stopping time&lt;/span&gt;
gridsize &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# grid size for fish stock and harvest rate (discretized population)&lt;/span&gt;
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
reward &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# bonus for satisfying the boundary condition&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)  &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# No measurement noise,&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# No implemenation noise&lt;/span&gt;
f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;BevHolt  &lt;span class=&quot;co&quot;&gt;# Select the state equation&lt;/span&gt;
pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;)  &lt;span class=&quot;co&quot;&gt;# parameters for the state equation&lt;/span&gt;
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]  &lt;span class=&quot;co&quot;&gt;# Carrying capacity (for reference&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# boundary conditions&lt;/span&gt;
x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c0 =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c1 =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; gridsize)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; gridsize)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, pars, x_grid, h_grid, sigma_g)
opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, delta, &lt;span class=&quot;dt&quot;&gt;reward =&lt;/span&gt; reward)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;L1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(c2) function(h, h_prev) c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(h -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_prev)
free_increase &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(c2) function(h, h_prev) c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(h -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_prev, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))  &lt;span class=&quot;co&quot;&gt;# increasing harvest is free&lt;/span&gt;
free_decrease &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(c2) function(h, h_prev) c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(h -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_prev, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)  &lt;span class=&quot;co&quot;&gt;# decreasing harvest is free&lt;/span&gt;
fixed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(c2) function(h, h_prev) c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(!(h ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_prev))
L2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(c2) function(h, h_prev) c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(h -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_prev)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
none &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(h, h_prev) &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
penaltyfns &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;L2 =&lt;/span&gt; L2, &lt;span class=&quot;dt&quot;&gt;L1 =&lt;/span&gt; L1, &lt;span class=&quot;dt&quot;&gt;free_decrease =&lt;/span&gt; free_decrease, &lt;span class=&quot;dt&quot;&gt;fixed =&lt;/span&gt; fixed, 
    &lt;span class=&quot;dt&quot;&gt;free_increase =&lt;/span&gt; free_increase)
c2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length.out =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;apples-to-apples-levels&quot;&gt;Apples to Apples levels&lt;/h2&gt;
&lt;p&gt;This can take a while, so we use explicit parallelization,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(snowfall)
&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;cpu =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;parallel =&lt;/span&gt; T)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;R Version:  R version 2.15.2 (2012-10-26) 
&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sfLibrary&lt;/span&gt;(pdgControl)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Library pdgControl loaded.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sfExportAll&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;loop-over-penalty-functions-and-magnitudes&quot;&gt;Loop over penalty functions and magnitudes&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sfSapply&lt;/span&gt;(penaltyfns, function(penalty) {
    policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(c2, function(c2) {
        policycost &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, 
            delta, reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;penalty&lt;/span&gt;(c2))
        i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(x_grid &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
        &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(policycost$penalty_free_V[i, ])
    })
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that &lt;code&gt;optim_policy&lt;/code&gt; has been updated to return the equilibrium value of profits from fish harvests before the adjustment costs have been paid, &lt;code&gt;penalty_free_V&lt;/code&gt;. This containst the values for all possible states, we simply evaluate it at the carrying capacity (which is our initial condition.) The index in &lt;code&gt;x_grid&lt;/code&gt; that corresponds to the carrying capacity (initial condition) &lt;code&gt;i&lt;/code&gt; indicates this.&lt;/p&gt;
&lt;p&gt;Quadratic costs on fishing effort have to be done separately,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;quad &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(c2, function(c2) {
    effort_penalty =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, h) &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;c2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h/x
    policycost &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, 
        delta, reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;fixed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;), effort_penalty)
    i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(x_grid &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K)[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
    &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(policycost$penalty_free_V[i, ])  &lt;span class=&quot;co&quot;&gt;# chooses the most sensible harvest in t=1&lt;/span&gt;
})
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(policies, quad)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tidy up the data and plot the net present value (before the penalty has been paid) relative to that achieved when managed without a penalty.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;npv0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]
npv0&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;free_decrease 
        709.7 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;c2 =&lt;/span&gt; c2, dat)
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;c2&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(c2, value, &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-5e6d8d80ac-npv-plot.png&quot; alt=&quot;plot of chunk npv-plot&quot; /&gt;&lt;figcaption&gt;plot of chunk npv-plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Find the value of &lt;code&gt;c2&lt;/code&gt; that brings each penalty closest to 75% of the cost-free adjustment value:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(c2, (npv0 -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value)/npv0, &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-5e6d8d80ac-apples_plot.png&quot; alt=&quot;plot of chunk apples_plot&quot; /&gt;&lt;figcaption&gt;plot of chunk apples_plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;closest &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, v) {
    &lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(v -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x))
}
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[, &lt;span class=&quot;kw&quot;&gt;closest&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;, (npv0 -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value)/value), by =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable]
apples &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;c2[index$V1]
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(apples) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;index$variable
apples&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;           L2            L1 free_decrease         fixed free_increase 
        1.034         1.724         0.000         8.276         0.000 
         quad 
        1.034 &lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;
&lt;p&gt;Solve the policy cost for the specified penalty function&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;L2_policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, delta, 
    reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;L2&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;L2&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;fixed_policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, delta, 
    reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;fixed&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;L1_policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, delta, 
    reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;L1&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;free_increase_policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, 
    delta, reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;free_increase&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;free_increase&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;free_decrease_policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, 
    delta, reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;free_decrease&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;free_decrease&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We also compare to the case in which costs of harvesting increase quadratically with effort; a common approach to create smoother policies.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;quad_profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c0 =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c1 =&lt;/span&gt; apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;quad&amp;quot;&lt;/span&gt;])
quad_costs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;optim_policy&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, quad_profit, 
    delta, reward, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; none)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;L1 =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, L1_policy$D, z_g, 
    z_m, z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;L1&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;]), &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed), 
    &lt;span class=&quot;dt&quot;&gt;L2 =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, L2_policy$D, z_g, z_m, 
        z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;L2&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;L2&amp;quot;&lt;/span&gt;]), &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed), 
    &lt;span class=&quot;dt&quot;&gt;fixed =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, fixed_policy$D, z_g, 
        z_m, z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;fixed&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;fixed&amp;quot;&lt;/span&gt;]), 
        &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed), &lt;span class=&quot;dt&quot;&gt;increase =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, 
        free_increase_policy$D, z_g, z_m, z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;free_increase&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;increase&amp;quot;&lt;/span&gt;]), 
        &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed), &lt;span class=&quot;dt&quot;&gt;decrease =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, 
        free_decrease_policy$D, z_g, z_m, z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;free_decrease&lt;/span&gt;(apples[&lt;span class=&quot;st&quot;&gt;&amp;quot;decrease&amp;quot;&lt;/span&gt;]), 
        &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed), &lt;span class=&quot;dt&quot;&gt;quad =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;simulate_optim&lt;/span&gt;(f, pars, x_grid, h_grid, x0, free_decrease_policy$D, 
        z_g, z_m, z_i, opt$D, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; quad_profit, &lt;span class=&quot;dt&quot;&gt;penalty =&lt;/span&gt; none, &lt;span class=&quot;dt&quot;&gt;seed =&lt;/span&gt; seed))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# Make data tidy (melt), fast (data.tables), and nicely labeled.&lt;/span&gt;
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(sims, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sims[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]))
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;penalty_fn&amp;quot;&lt;/span&gt;)  &lt;span class=&quot;co&quot;&gt;# names are nice&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;plots&quot;&gt;Plots&lt;/h1&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, alternate), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;grey20&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lwd =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; penalty_fn, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; penalty_fn)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Stock Dynamics&amp;quot;&lt;/span&gt;)
p0&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-5e6d8d80ac-p0.png&quot; alt=&quot;plot of chunk p0&quot; /&gt;&lt;figcaption&gt;plot of chunk p0&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, alternate), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;grey20&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lwd =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;rgb&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~penalty_fn) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Stock Dynamics&amp;quot;&lt;/span&gt;)
p1&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-5e6d8d80ac-p1.png&quot; alt=&quot;plot of chunk p1&quot; /&gt;&lt;figcaption&gt;plot of chunk p1&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, harvest_alt), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;grey20&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lwd =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, harvest), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;rgb&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~penalty_fn) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;havest intensity (fish taken)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Harvest Policy Dynamics&amp;quot;&lt;/span&gt;)
p2&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-28-5e6d8d80ac-p2.png&quot; alt=&quot;plot of chunk p2&quot; /&gt;&lt;figcaption&gt;plot of chunk p2&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Citing Lab Notebook Entries</title>
	 <link href="/2012/11/23/citing-lab-notebook-entries.html"/>
   <updated>2012-11-23T00:00:00+00:00</updated>
   <id>/11/23/citing-lab-notebook-entries</id>
   <content type="html">&lt;p&gt;C. Titus Brown has an excellent &lt;a href=&quot;http://ivory.idyll.org/blog/posting-blog-entries-to-figshare.html&quot;&gt;post&lt;/a&gt; discussing his exploration into the merits and technicalities cross-posting his blog posts to figshare. The &lt;a href=&quot;https://github.com/ropensci/rfigshare&quot;&gt;&lt;code&gt;rfigshare&lt;/code&gt; package&lt;/a&gt; written by &lt;a href=&quot;http://emhart.github.com/&quot;&gt;Ted Hart&lt;/a&gt; and myself can do just this, once we puzzled out some of the same challenges (Notes to Titus: though the documentation doesn’t mention it, you can get a programmatic list of available categories from &lt;a href=&quot;http://api.figshare.com/v1/categories&quot; class=&quot;uri&quot;&gt;http://api.figshare.com/v1/categories&lt;/a&gt;. Figshare can also take code as a fileset or dataset, and may soon add a type for it. The coolest thing about figshare is perhaps the way they add types in response to how they see users using the service).&lt;/p&gt;
&lt;p&gt;The real discussion, though, is not about &lt;em&gt;how&lt;/em&gt;, but &lt;em&gt;why&lt;/em&gt;? Currently figshare doesn’t render the html or markdown/restructured-text source (other than as plain text), so it’s not a great place to &lt;em&gt;read&lt;/em&gt; the posts. This may change in the near future as well, but the primary motivation for doing this seems to be on the ability to get an honest-to-goodness DOI for your entry. So why a DOI?&lt;/p&gt;
&lt;p&gt;The answer most often put forward is that “a DOI facilitates citing a paper in the formal literature.” I think that’s not entirely accurate. For one, the formal literature has no trouble citing things that do not have a DOI. Perhaps the answer is meant to mean track citations to my content, &lt;em&gt;e.g.&lt;/em&gt; for statistical/impact purposes. This may be closer to the mark, but it still needs work. What counts depends on whose doing the counting. Anyone browsing the citation counts of a work through different mediums has surely encountered Thompson-Reuters has very specific criteria to be included, so I don’t believe they are tracking citations to anything with a DOI. Nor, I think is Scopus. Perhaps the target is Google then?&lt;/p&gt;
&lt;p&gt;If you want Google Scholar to count the number of citations to your blog post, I have good news for you. You do not need a DOI and cross-posting to figshare. You just need to follow the &lt;a href=&quot;http://scholar.google.com/intl/en/scholar/inclusion.html#indexing&quot;&gt;metadata requirements&lt;/a&gt; as outlined by Google Scholar itself. This will help Google Scholar identify your blog post as a academic object, and add it to your profile. Anything indexed by Google scholar that cites your blog post will count as a reference. The basics are really simple. Have metadata such as:&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;resource_type&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Lab Notebook&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;citation_journal_title&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Lab Notebook&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;citation_publication_date&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;2012-11-23 00:00:00 +0000&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;citation_date&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;2012-11-23 00:00:00 +0000&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;citation_author&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;citation_title&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Citing Lab Notebook Entries&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Just replace &lt;code&gt;Lab Notebook&lt;/code&gt; etc. with the correct values for your site. The example above will do so automatically if you use Jekyll using information specified in the YAML header. It seems the entry also needs a section called either “References” or “Bibliography” followed by a list of references. Not sure what format Google Scholar will do best at disambiguating. (Note that what I refer to as “Google Scholar” metadata looks like it was originally the convention adopted by HireWire Press.)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.russet.org.uk&quot;&gt;Phil Lord&lt;/a&gt; and colleagues have written the fantastic API called &lt;a href=&quot;http://knowledgeblog.org/greycite&quot;&gt;greycite&lt;/a&gt; [Lord 2012], which can be used to generate citation data from any website that has semantic markup (including HTML5 semantics, also Dublin Core or OpenGraph ontologies and Google Scholar metadata). The API can return citations formatted in bibtex or JSON. Try it out at &lt;a href=&quot;http://greycite.knowledgeblog.org&quot;&gt;greycite.knowledgeblog.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Now there is another reason to use DOIs and figshare, which is, I think, entirely independent – archival preservation (decoupled journal, anyone?). DOIs are potentially more permanent than URLs (though I’ll leave that debate to the experts). Figshare content is backed up by &lt;a href=&quot;http://clockss.org/&quot;&gt;CLOCKSS&lt;/a&gt;. Forever is a long time, but this certainly sounds like a better archiving strategy. Figshare should be providing the necessary Google Scholar metadata on each object now. My current practice has been to archive my notebook in annual chunks on figshare (posting entries individually feels fragmented and cluttered to me), and rely on the more native web solution of HTML metadata to allow my entries to “citable”. Perhaps this is not ideal, but for the short term, the content is discoverable and citable via Google Scholar, which points to my address. If my site vanishes from the web, one might hope that an academic search for my lab notebook might recover the content from the archived version.&lt;/p&gt;
&lt;h2 id=&quot;edit-thoughts-examples-and-disclaimer&quot;&gt;Edit: thoughts, examples and disclaimer&lt;/h2&gt;
&lt;p&gt;I stumbled across Google’s indexing of some of my lab notebook entries somewhat by accident. For instance, one of my &lt;a href=&quot;http://www.carlboettiger.info/2011/10/28/optimal-control-examples-continued-bellman-dynamic-programming.html&quot;&gt;entries&lt;/a&gt; on optimal control in which I had listed some references started turning up &lt;a href=&quot;http://scholar.google.com/citations?view_op=view_citation&amp;amp;hl=en&amp;amp;user=zj2rRtEAAAAJ&amp;amp;citation_for_view=zj2rRtEAAAAJ:4TOpqqG69KYC&quot;&gt;in Google Scholar&lt;/a&gt; Being able to engage in a scholarly exchange through blogs that can cite and be cited by the formal literature certainly sounds like an important step forward in generating new publishing models. Of course it is also obvious that the procedure I have outlined could be trivially exploited for some rather blatant gaming of Google Scholar’s citation statistics. This post certainly is not an endorsement of gaming such statistics. If nothing else, perhaps this once again underscores the weakness of reliance on metrics of quantity when trying to infer quality. Will we ever let go of that fallacy?&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Titus Brown (2012) Posting blog entries to figshare, Living in an Ivory Basement. http://ivory.idyll.org/blog/posting-blog-entries-to-figshare.html&lt;/li&gt;
&lt;li&gt;Phillip Lord (2012) Greycite. Knowledge Blog. http://knowledgeblog.org/greycite&lt;/li&gt;
&lt;li&gt;Carl Boettiger (2011) Optimal Control examples continued: Bellman, Dynamic Programming, Lab Notebook http://www.carlboettiger.info/2011/10/28/optimal-control-examples-continued-bellman-dynamic-programming.html&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/11/22/notes.html"/>
   <updated>2012-11-22T00:00:00+00:00</updated>
   <id>/11/22/notes</id>
   <content type="html">&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;multiple-uncertainty&lt;/h2&gt;
&lt;p&gt;Working out the multiple uncertainty computational performance and noise forms. Fixing a few things in the way log-normal noise was calculated. Uniform noise in particular can still give rather non-smooth policy, needs a bit of digging. Uniform noise doesn’t show the non-monotonicity of the log-normal noise in measurement uncertainty though.&lt;/p&gt;
&lt;h2 id=&quot;uniform&quot;&gt;Uniform&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-23-bcf87363db-policyfunctions.png&quot; alt=&quot;uniform noise policy functions&quot; /&gt;&lt;figcaption&gt;uniform noise policy functions&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;lognormal&quot;&gt;lognormal&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-22-11f7d70977-policyfunctions.png&quot; alt=&quot;log-normal noise policy functions&quot; /&gt;&lt;figcaption&gt;log-normal noise policy functions&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;log&quot;&gt;log&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;A few small tweaks to probability calculations&lt;/li&gt;
&lt;/ul&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Handle the case of mu = grid zero, not just exactly zero, to avoid introducing NAs&lt;/li&gt;
&lt;li&gt;Calculate dlnorm as &lt;code&gt;(x_grid/mu, 0, sigma)&lt;/code&gt;, rather than as &lt;code&gt;(x_grid, mu, sigma)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Transpose of measurement error in &lt;code&gt;M %*% F&lt;/code&gt;. Because now we want to treat x as given, integrate over range of y? (no, probably not?)&lt;/li&gt;
&lt;li&gt;standardize noise level between old and g &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/0f7889f9ce483735228e708b1f0770f295343d1d&quot;&gt;12:52 pm 2012/11/22&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;With transposed M time F. (include image) &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/e277e624334e7f6d2e3367676b032cac3eea26c2&quot;&gt;01:04 pm 2012/11/22&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And now without transpose, M %*% F &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/11f7d709775769c6f1cb1dca38b73d0b3b395742&quot;&gt;01:07 pm 2012/11/22&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Larger (log-normal in all variables) noise, weirder results. &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/ae6f7ff220a566c76330b8204529f3a5ec8aea8c&quot;&gt;01:39 pm 2012/11/22&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Changes improving performance of F calculation (rate-limiting step)&lt;/li&gt;
&lt;/ul&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;vectorized calculation of mu.&lt;/li&gt;
&lt;li&gt;matrix-based calc of deterministic part of growth rate &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/d5f2509c5341dc3be2706dd42caaa7642ec6e782&quot;&gt;02:13 pm 2012/11/22&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Another efficiency change. Not identical but appears to be a decent approximation: Snap mu to the x_grid, and look up the pdfn value rather than calculating it each time in F. &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/f151258fe146199dd34cc0194fea55515e3f8716&quot;&gt;03:00 pm 2012/11/22&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now pretty efficient. Matrix multiplication is dominant time sink, followed by the applys. &lt;code&gt;snap_to_grid&lt;/code&gt; is probably the slowest functional contribution.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/11/21/notes.html"/>
   <updated>2012-11-21T00:00:00+00:00</updated>
   <id>/11/21/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;writing comment piece. writing writing writing.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;also-today-misc&quot;&gt;Also today (misc):&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Check in with Peter re: Labrids paper&lt;/li&gt;
&lt;li&gt;Fix issue #32 rfigshare&lt;/li&gt;
&lt;li&gt;Follow up with Nina about improved FishBase API&lt;/li&gt;
&lt;li&gt;pay ESA and SSE dues&lt;/li&gt;
&lt;li&gt;Santa Cruz SOE email lists&lt;/li&gt;
&lt;li&gt;uniform growth noise version on corrected multiple-uncertainty run&lt;/li&gt;
&lt;li&gt;transparent plots in new ggplot theme? Set in &lt;code&gt;dev.args=list(bg=&amp;quot;transparent&amp;quot;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Consider SOE AMS lecturer pool? &lt;a href=&quot;http://apo.ucsc.edu/academic_employment/jobs/T02-01rev2011.pdf&quot;&gt;Description&lt;/a&gt;, &lt;a href=&quot;https://intranet.soe.ucsc.edu/employment/application/lecturer&quot;&gt;Application&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CV, Letter of application with course list.&lt;/li&gt;
&lt;li&gt;Optional: Teaching evaluations. Sample course material.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;multiple uncertainty&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Whoops, not preventing negative harvest values can lead to some weird results. &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/c5e857ebeab2f73eff9afaf6d56d0e5dabd81e14&quot;&gt;06:16 pm 2012/11/21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;numerical instabilities in uniform noise case? &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/9dc17dc56494b9e2f998e3992e4c891573d80570&quot;&gt;04:01 pm 2012/11/21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;notes on policycost manuscript &lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/81df88cc50ac0c7c2448e55b42dc2bfe8fd15299&quot;&gt;01:34 pm 2012/11/21&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Sequential Updating</title>
	 <link href="/2012/11/19/sequential-updating.html"/>
   <updated>2012-11-19T00:00:00+00:00</updated>
   <id>/11/19/sequential-updating</id>
   <content type="html">&lt;p&gt;Fixed the sequential updating algorithm (avoids numerical instabilities associated with matrix inversion). Currently defined as the function recursion:&lt;/p&gt;
&lt;p&gt;for the covariance:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;C_seq &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, X_prime, i){
    if(i &amp;lt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
          &lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, X_prime) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mmult&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X,x[i]), &lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x[i], X_prime)) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x[i], x[i]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
            else
                  &lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(X, X_prime,   i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mmult&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(X,x[i],   i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(x[i], X_prime,   i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(x[i], x[i],   i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)  +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;  )
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;for the mean:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mu_seq &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, i){
    if(i &amp;lt;=&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
          &lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x[i], X) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(y[i]-mu[i]) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x[i], x[i]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
            else
                  &lt;span class=&quot;kw&quot;&gt;mu_seq&lt;/span&gt;(X, i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(x[i], X,  i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(y[i]-mu[i]) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;C_seq&lt;/span&gt;(x[i], x[i], i&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;)  +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; )
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that this needed a custom matrix multiplication to handle scalar by vector cases:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mmult &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x,y){
  if(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x) ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;){
    x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(x) 
    x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y
  } else if(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(y) ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;){ 
    y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(y)
    x *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y
  }  else 
  x %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And probably needs to be written in C at least to have any hope of scaling. See implementation in &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/e19802885c6ddf2a30807e6b3addf2b9fa3e2ff0/inst/examples/sequential-method.md&quot;&gt;sequential-method&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Match is perfect (jittered to avoid overplotting the lazy way):&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-19-58073767b5-unnamed-chunk-6.png&quot; alt=&quot;Sequential vs direct calculation of the mean&quot; /&gt;&lt;figcaption&gt;Sequential vs direct calculation of the mean&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Now should rewrite to use a grid for the covariance matrices of each data point. Memory intensive but should be much faster than function recursion.&lt;/p&gt;
&lt;p&gt;(Should also confirm variance calculation in comparison, and test on larger grid sizes)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Multiple uncertainty corrected</title>
	 <link href="/2012/11/16/mult-uncertainty.html"/>
   <updated>2012-11-16T00:00:00+00:00</updated>
   <id>/11/16/mult-uncertainty</id>
   <content type="html">&lt;p&gt;Fixed the &lt;a href=&quot;http://www.carlboettiger.info/2012/11/01/multiple-uncertainty-corrections.html&quot;&gt;multiple uncertainty calculation&lt;/a&gt; implementation. Code had transposed &lt;span class=&quot;math&quot;&gt;\(\mathbb{I}\)&lt;/span&gt;, also one of the &lt;span class=&quot;math&quot;&gt;\(\mathbb{M}\)&lt;/span&gt; matrices. Should still confirm final implementation. In the below example each case has log-normal growth noise present. The non-monotonic section of the measurement uncertainty&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-17-f6c225f69f-policyfunctions.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/954cea9310063150bb42567b19caa272b34d32c2&quot;&gt;See notes on code changes inline.&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;additional-notes-from-walking-through-algoritm-step-by-step.&quot;&gt;Additional notes from walking through algoritm step by step.&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; index in the true state space&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; index in the observed state space&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; index in the true action&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; index in the policy/decision space&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(V[y,q]\)&lt;/span&gt; the Expected value of policy &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; and observed state &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(\Pi[x,h]\)&lt;/span&gt; the profit of a harvest of &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; given a true stock of &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(M[y,x]\)&lt;/span&gt; is the probability of a true state &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; given an observed stock &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;. (How does this relate to the probability the observed stock is &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; given the true stock is &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;? Should be the transpose? Is &lt;span class=&quot;math&quot;&gt;\(M\)&lt;/span&gt; symmetric?)&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math&quot;&gt;\(I[h,q]\)&lt;/span&gt; is the probability of implementing a harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;, given a quota set to &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\(Q[y,q]\)&lt;/span&gt; the Expected profit from a policy &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; and observed state &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;. In Einstein summation, &lt;span class=&quot;math&quot;&gt;\(Q[y_k,q_l] = M[y_k, x_i] \Pi[x_i,h_j] I[h_j, q_l]\)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[M(y_1, x_1) (\Pi(x_1,h_1)I(h_1, q_1) + \Pi(x_1,h_2)I(h_2, q_1) + \dots) +  M(y_1, x_2) (\Pi(x_2,h_1)I(h_1, q_1) + \Pi(x_2,h_2)I(h_2, q_1) + \dots)  +\dots\]&lt;/span&gt; - &lt;span class=&quot;math&quot;&gt;\([\tilde{y}_t, y_k, q_l] = M[\tilde{y}_t, \tilde{x}_s] M[y_k, x_i] f[\tilde{x}_s, x_i, h_j] I[h_j, q_l]\)&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://flowingdata.com/2010/01/21/how-to-make-a-heatmap-a-quick-and-easy-solution/&quot;&gt;heatmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/&quot;&gt;ggplot version&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/11/15/notes.html"/>
   <updated>2012-11-15T00:00:00+00:00</updated>
   <id>/11/15/notes</id>
   <content type="html">&lt;h2 id=&quot;stuck-on-many-things&quot;&gt;Stuck on many things&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Have not correctly defined the recursion in the sequential updating approach. Can I really calculate &lt;span class=&quot;math&quot;&gt;\(P(y_3 | (y2 | y_1))\)&lt;/span&gt; in place of &lt;span class=&quot;math&quot;&gt;\(P(y_3 | y2, y1)\)&lt;/span&gt;? e.g. instead of calculating:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_3 = K(y_3, y_3) - K(y_{1:2}, y_3) K(y_{1:2}, y_{1:2})^{-1} ) K(y_3, y_{1:2}) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Is there some scalar &lt;span class=&quot;math&quot;&gt;\(v_2\)&lt;/span&gt; such that&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_3 = K(y_3, y_3) - K(y_{1:2}, y_3) K(y_3, y_{1:2}) / v_2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;e.g. a term like:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_2 = K(y_2, y_2) - K(y_1, y_2) K(y_1, y_1)^{-1} ) K(y_2, y_1) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and a similar recursion for the mean?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cannot get posterior covariance matrix from kernlab’s &lt;code&gt;gausspr&lt;/code&gt;. Can this be reconstructed from &lt;code&gt;alpha&lt;/code&gt;? (&lt;a href=&quot;http://stats.stackexchange.com/questions/43713/how-do-i-access-or-compute-the-posterior-covariance-matrix-returned-by-kernlab&quot;&gt;question posted to cross-validated&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Likelihood optimization does not handle the noise term. Examples in Rasmussen and Wiliams suggest this should work. (See commit log below)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;nonparametric-bayes-log&quot;&gt;nonparametric-bayes log&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;re-run example with updated plots, but otherwise as before. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/73396d797b8398f25dcfe8307befafb7546c1097&quot;&gt;07:40 pm 2012/11/15&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Question on how to get the covariance matrix back from the kernlab gausspr method. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/80fcefbc391e5d75fa63300f95e60c98af7bcb2c&quot;&gt;07:39 pm 2012/11/15&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Attempted to fix the sequential method example.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Still incorrect. See sequential-method.Rmd &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/01307f5c36060a07fdbb9f3ba6b83b8660f88103&quot;&gt;07:37 pm 2012/11/15&lt;/a&gt; - Attempting to write the sequential method algorithm.&lt;/p&gt;
&lt;p&gt;Not correct at the moment, need to understand the recursion properly. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e732f74985def53677478f6f0e10e8f931201252&quot;&gt;07:36 pm 2012/11/15&lt;/a&gt; - Stick with direct method.&lt;/p&gt;
&lt;p&gt;Current version of sequential method is not correct. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/14821223d59b6f68e9e0b6f962476b8c5119e2ce&quot;&gt;07:34 pm 2012/11/15&lt;/a&gt; - Updated hyperparameter-optimization example&lt;/p&gt;
&lt;p&gt;Shows that we can estimate l appropriately but fails to get sigma_n; instead estimating the upper boundary. &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/c28d09929f3765fff8a7b82e2d9b84d2f9cc8fa6&quot;&gt;07:32 pm 2012/11/15&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Better Tagging Practices</title>
	 <link href="/2012/11/09/better-tagging-practices.html"/>
   <updated>2012-11-09T00:00:00+00:00</updated>
   <id>/11/09/better-tagging-practices</id>
   <content type="html">&lt;h2 id=&quot;better-tagging-practices&quot;&gt;Better tagging practices&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Standardize use of tags: Match tags in notebook to project repository name. Tag papers in Mendeley by these tags as well.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have also started tracking the medium of discovery for each paper I add to my Mendeley collection through a little set of Mendeley tags. I am curious to see through which mediums I obtain the most content, and what content. As with any ontology, I will struggle to select a vocabulary that is precise enought to be useful without being too verbose (b) to bother to continue to use this. We’ll see how I do.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;tag&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:reader&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Google Reader (RSS feed)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:twitter&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Mentioned on twitter stream (or G+ stream)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:search&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Searched for this article directly or by some keyword&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:bibliography&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;In the reference list of something I’m reading&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:conference&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Discussed at a conference&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:blog&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Mentioned in a blog I read&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:human&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Directly recommended to me (in person or email, from reviewer, adviser, etc)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:journal-club&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Something we read in a journal club&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;source:wikipedia&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Cited in a wikipedia article I read&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/11/08/notes.html"/>
   <updated>2012-11-08T00:00:00+00:00</updated>
   <id>/11/08/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Complete IACUC training for fish room. File forms: http://ehs.ucsc.edu/programs/research-safety/animal-research/index.html&lt;/li&gt;
&lt;li&gt;Online training – possibly see https://www.citiprogram.org/Default.asp?&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shiny: http://www.rstudio.com/shiny/&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Comment piece&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Prep exit seminar&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Applied math club: Networks. Reading http://dx.doi.org/10.1155/2011/284909&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Discussion of when network structure has made an important difference on our understanding of a problem. When have the common summary statistics of a network (degree-distribution) allowed us to compte network dynamics without fully resolving the network?&lt;/p&gt;
&lt;h2 id=&quot;nonparametric-bayes&quot;&gt;nonparametric-bayes&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/5e4df576d70358b8049d6ee412f45de17a20cd38/inst/examples/testing-gp-sdp.md&quot;&gt;Comparing methods for Gaussian process fits&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mlegp package appears more carefully constructed, but notation is terrible. Also unclear how to change covariance kernel. Example shows fitting with zero noise only, though somehow that should be adjusted (in the nugget parameters?). Has a vignette but it has not been particularly enlightening for me. Seems &lt;code&gt;kernlab::gausspr&lt;/code&gt; may be the only intelligent package function for GP I’ve seen.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;What explains the descrepancy in the Cholesky approach?&lt;/li&gt;
&lt;li&gt;&lt;p&gt;What explains the descrepancy in the sequential approach?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sequential updating algorithm avoids inverting the matrix, which can become unstable as state space becomes large. Instead of dealing with the vector of observations &lt;span class=&quot;math&quot;&gt;\(\vec y\)&lt;/span&gt; at states &lt;span class=&quot;math&quot;&gt;\(\vec x\)&lt;/span&gt; simultaneously, we update the GP mean &lt;span class=&quot;math&quot;&gt;\(m_i\)&lt;/span&gt; and covariance &lt;span class=&quot;math&quot;&gt;\(c_i\)&lt;/span&gt; at each observed point &lt;span class=&quot;math&quot;&gt;\((x_i, y_i)\)&lt;/span&gt; sequentially. Because we can compute this over the desired prediction grid &lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt; simultaneously still, &lt;span class=&quot;math&quot;&gt;\(m_i\)&lt;/span&gt; is a vector of the same length as the prediction grid (&lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt;), and the &lt;span class=&quot;math&quot;&gt;\(c_i\)&lt;/span&gt; is a matrix of dimension &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt;. Let &lt;span class=&quot;math&quot;&gt;\(K(x_i, x_j)\)&lt;/span&gt; be the covariance function of &lt;span class=&quot;math&quot;&gt;\(x_i, x_j\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(y = \mathcal{N(m, c)} + \sigma_n^2 \mathbb{I}\)&lt;/span&gt; be the noise model of the GP, then&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ m_{i+1} = m_i + \frac{K(X, x_i) y_i}{ K(x_i,x_i)+\sigma_n^2}  \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ c_{i+1} = c_i + K(X, X) - \frac{K(X, x_i) K(x_i, X)}{K(x_i,x_i)+\sigma_n^2}  \]&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Work out the multi-dimensional Gaussian process algorithm&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;multiple-uncertainty&quot;&gt;Multiple uncertainty&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Verify orientation of each matrix?&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/a4d9af4260dd5bebf61d2cd57672338daaa2a235/inst/examples/mult_uncertainty_test.md&quot;&gt;higher resolution grid example (same problem)&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/11/06/notes.html"/>
   <updated>2012-11-06T00:00:00+00:00</updated>
   <id>/11/06/notes</id>
   <content type="html">&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;altmetrics post&lt;/li&gt;
&lt;li&gt;post for multiple uncertainty, email to Steve, Marc&lt;/li&gt;
&lt;li&gt;Marc meeting&lt;/li&gt;
&lt;li&gt;ropensci proposals&lt;/li&gt;
&lt;li&gt;Phylotastic&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;notebook-configuration&quot;&gt;Notebook configuration&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;trying out http://greycite.knowledgeblog.org/. Add to knitcitations.&lt;/li&gt;
&lt;li&gt;Add Greycite recommended opengraph and google scholar metadata &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/3a977cca64b852574f16ca63fe66308d4af6b2ed/_includes/metadata.html&quot;&gt;metadata.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Import metadata from &lt;code&gt;_config.yml&lt;/code&gt;. Any custom variable defined in config can be accessed at &lt;code&gt;site.varname&lt;/code&gt;. See updated &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/b0749aac9dec7fbe08af3768e29b24724d378763/_config.yml&quot;&gt;&lt;code&gt;_config.yml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Schnitzler, J., Graham, C. H., Dormann, C. F., Schiffers, K., &amp;amp; Peter Linder, H. (2012). Climatic niche evolution and species diversification in the Cape flora, South Africa. (S. Higgins, Ed.)Journal of Biogeography, n/a-n/a. doi:10.1111/jbi.12028&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Clark, T., Dale, R., Waard, A. D., Herman, I., Hovy, E. H., Shotton, D., Birukou, A., et al. (2012). Force11 White Paper : Improving The Future of Research Communications and e-Scholarship, 11.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shotton, D. (2009). Semantic publishing: the coming revolution in scientific journal publishing. Learned Publishing, 22(2), 85-94. doi:10.1087/2009202&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shotton, D. (2011). The Five Stars of Online Journal Articles-an article evaluation framework. Nature Preceedings. doi:10101/npre.2011.6542.1&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;FishBase paper is out&lt;/li&gt;
&lt;li&gt;Dissertation on FigShare&lt;/li&gt;
&lt;li&gt;Updated &lt;a href=&quot;http://www.carlboettiger.info/assets/data&quot;&gt;geospatial life history data list&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reading-1&quot;&gt;Reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Allesina, S. (2012). Modeling peer review: an agent-based approach. Ideas in Ecology and Evolution, 5(2), 27-35. doi:10.4033/iee.2012.5b.8.f&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Costello, C., Ovando, D., Hilborn, R., Gaines, S. D., Deschenes, O., &amp;amp; Lester, S. E. (2012). Status and solutions for the world’s unassessed fisheries. Science (New York, N.Y.), 338(6106), 517-20. doi:10.1126/science.1223389&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Palumbo, M. J., Johnson, S. A., Mundim, F. M., Lau, A., Wolf, A. C., Arunachalam, S., Gonzalez, O., et al. (2012). Harnessing Smartphones for Ecological Education, Research, and Outreach. Bulletin of the Ecological Society of America, 93(4), 390-393. doi:10.1890/0012-9623-93.4.390&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Sibert, J., Senina, I., Lehodey, P., &amp;amp; Hampton, J. (2012). Shifting from marine reserves to maritime zoning for conservation of Pacific bigeye tuna (Thunnus obesus). Proceedings of the National Academy of Sciences of the United States of America, 109(44), 1-5. doi:10.1073/pnas.1209468109&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Altmetrics Conference</title>
	 <link href="/2012/11/03/altmetrics-conference.html"/>
   <updated>2012-11-03T00:00:00+00:00</updated>
   <id>/11/03/altmetrics-conference</id>
   <content type="html">&lt;p&gt;From Thursday Nov 1 through Saturday Nov 3 I attended the PLoS Altmetrics workshop as a member of the ROpensci project. An exciting meeting driven mostly by the opportunity to interact with a small and incredibly creative and innovative group of science publishers, funders, start-ups, and other researchers. Details of the event are largely recorded on the &lt;a href=&quot;https://sites.google.com/site/altmetricsworkshop&quot;&gt;altmetrics 2012 workshop website&lt;/a&gt;. We also have a few slides addressing the &lt;a href=&quot;http://ropensci.org/alm/&quot;&gt;ropensci slant&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The workshop followed up with a hackathon which produced prototypes of several ideas. I worked in the &lt;a href=&quot;https://github.com/karthikram/almviz&quot;&gt;altviz&lt;/a&gt; team. Also completed the first release of &lt;a href=&quot;https://github.com/ropensci/rfigshare&quot;&gt;rfigshare&lt;/a&gt; to &lt;a href=&quot;http://cran.at.r-project.org/web/packages/rfigshare/&quot;&gt;CRAN&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Another side goal of the conference for me was to discuss some of the ideas that had arisen in the BeyondThePDF workshop over a year ago in regards to semantic markup, an idea I’ve recently explored in this notebook. To this end it was useful talking with Martin Fenner, Paul Groth, and John Kunze about semantic issues, implicit/inferred semantics vs explicit markup, etc. Also some progress in incorporating these ideas into &lt;a href=&quot;://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt;. For more in this space, see the &lt;a href=&quot;http://force11.org/white_paper&quot;&gt;Force11 project&lt;/a&gt; (successor/outcoem of the BeyondThePDF).&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Multiple Uncertainty Corrections</title>
	 <link href="/2012/11/01/multiple-uncertainty-corrections.html"/>
   <updated>2012-11-01T00:00:00+00:00</updated>
   <id>/11/01/multiple-uncertainty-corrections</id>
   <content type="html">&lt;p&gt;Consider a stock &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; at time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt; that recruits stochastically following harvest &lt;span class=&quot;math&quot;&gt;\(h_t\)&lt;/span&gt; from the escaped population (&lt;span class=&quot;math&quot;&gt;\(s_t := x_t - h_t\)&lt;/span&gt;), &lt;span class=&quot;math&quot;&gt;\(x_{t+1} = z_g f(s_t)\)&lt;/span&gt;, where &lt;span class=&quot;math&quot;&gt;\(z_g\)&lt;/span&gt; is a multiplicative stochastic shock to the growth. We imagine the decision maker sets a policy determining the harvest quota &lt;span class=&quot;math&quot;&gt;\(q_t\)&lt;/span&gt; each year, which is implemented as the real harvest with some error &lt;span class=&quot;math&quot;&gt;\(z_i\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(h_t = z_i q_t\)&lt;/span&gt;. Before setting a quota, the decision maker assesses the stock &lt;span class=&quot;math&quot;&gt;\(y_t = z_m x_t\)&lt;/span&gt;, so &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; is a noisy measurement of the true stock &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;. The decision maker seeks to maximize the expected present-value of profits &lt;span class=&quot;math&quot;&gt;\(\Pi(x_t,h_t)\)&lt;/span&gt; that are a function of both the actual stock &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; and the realized harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; over some long term period &lt;span class=&quot;math&quot;&gt;\(T_{\textrm{max}}\)&lt;/span&gt; subject to some discount rate &lt;span class=&quot;math&quot;&gt;\(\delta\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ max_{\{q_1 \ldots q_{t_{\textrm{max}}} \}} \sum_{t=1}^{t=t_{\textrm{max}}} \operatorname{E}\left( \Pi(x_t,h_t) \right) \]&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;discrete-formulation&quot;&gt;Discrete formulation&lt;/h2&gt;
&lt;p&gt;We consider this problem in a discrete state space where &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; all take values on grids of &lt;span class=&quot;math&quot;&gt;\(n_y\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(n_q\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(n_h\)&lt;/span&gt; points respectively.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Let &lt;span class=&quot;math&quot;&gt;\(\mathbf{P}\)&lt;/span&gt; be the &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_h\)&lt;/span&gt; matrix of all possible profits in a time step, as given by &lt;span class=&quot;math&quot;&gt;\(\Pi(x_i, h_j)\)&lt;/span&gt;, where rows represent possible stock sizes and columns possible harvests.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Let &lt;span class=&quot;math&quot;&gt;\(\mathbf{M}\)&lt;/span&gt; be the row-normalized &lt;span class=&quot;math&quot;&gt;\(n_y\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt; matrix whose elements are &lt;span class=&quot;math&quot;&gt;\(z_m(y_i, x_j)\)&lt;/span&gt;, the probability of observing a stock size &lt;span class=&quot;math&quot;&gt;\(y_i\)&lt;/span&gt; from a true size &lt;span class=&quot;math&quot;&gt;\(x_j\)&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Let &lt;span class=&quot;math&quot;&gt;\(\mathbf{I}\)&lt;/span&gt; be the row-normalized &lt;span class=&quot;math&quot;&gt;\(n_h\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_q\)&lt;/span&gt; matrix whose elements are &lt;span class=&quot;math&quot;&gt;\(z_i(h_i, q_j)\)&lt;/span&gt;, the probability of implementing a harvest &lt;span class=&quot;math&quot;&gt;\(h_i\)&lt;/span&gt; given a quota &lt;span class=&quot;math&quot;&gt;\(q_j\)&lt;/span&gt; &lt;strong&gt;Edit&lt;/strong&gt;: I had been created in the code as &lt;span class=&quot;math&quot;&gt;\(n_q\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_h\)&lt;/span&gt;, so had to be transposed.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Let &lt;span class=&quot;math&quot;&gt;\(\mathbf{F}_q\)&lt;/span&gt; be the tensor of row-normalized &lt;span class=&quot;math&quot;&gt;\(n_q\)&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_x\)&lt;/span&gt; transition matrices given by &lt;span class=&quot;math&quot;&gt;\(z_g(x_j, \sum_i \sum_j f(x_i, h_j) \mathbf{M}[y_k, x_i] \mathbf{I}[h_j, q_l] )\)&lt;/span&gt;. By summing over the uncertainty in measurement and implementation, &lt;span class=&quot;math&quot;&gt;\(\mathbf{F}_q\)&lt;/span&gt; is in the space of observed state &lt;span class=&quot;math&quot;&gt;\(y_t\)&lt;/span&gt; into the true stock at the next timestep &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt;, given quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt;. We transfer into the future measured state through another application of &lt;span class=&quot;math&quot;&gt;\(\mathbf{M} \mathbf{F}_q\)&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The profits expected given a measurement of the stock &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; for a quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; are &lt;span class=&quot;math&quot;&gt;\(\sum_j \sum_i \Pi(x_i, h_j) p(x_i | y) p(h_j | q)\)&lt;/span&gt;. Hence the matrix of expected profits for each possible combination of &lt;span class=&quot;math&quot;&gt;\(y_i\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(q_j\)&lt;/span&gt; is given by the matrix product &lt;span class=&quot;math&quot;&gt;\(\mathbf{M} \mathbf{P} \mathbf{I} =: \mathbf{Q}\)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Let &lt;span class=&quot;math&quot;&gt;\(\mathbf{V}_t\)&lt;/span&gt; be the &lt;span class=&quot;math&quot;&gt;\(n_y\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n_q\)&lt;/span&gt; matrix at time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt; giving the value of choosing quota &lt;span class=&quot;math&quot;&gt;\(q_j\)&lt;/span&gt; having observed stock &lt;span class=&quot;math&quot;&gt;\(y_i\)&lt;/span&gt; and having selected the optimal &lt;span class=&quot;math&quot;&gt;\(q_{t+1} \ldots q_{t_{\textrm{max}}}\)&lt;/span&gt;, that is:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \mathbf{V}_t = \mathbf{Q} + \delta \mathbf{V}_{t+1}(y_t) \]&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Let &lt;span class=&quot;math&quot;&gt;\(\vec{v}_t\)&lt;/span&gt; be the &lt;span class=&quot;math&quot;&gt;\(n_y\)&lt;/span&gt; vector with the maximum value of the each row (i.e. for each state &lt;span class=&quot;math&quot;&gt;\(y_i\)&lt;/span&gt;) of the matrix &lt;span class=&quot;math&quot;&gt;\(\mathbf{V}_t\)&lt;/span&gt;, and&lt;/li&gt;
&lt;li&gt;let &lt;span class=&quot;math&quot;&gt;\(\vec{d}_t\)&lt;/span&gt; be the &lt;span class=&quot;math&quot;&gt;\(n_y\)&lt;/span&gt; vector whose elements give the column number (e.g. the &lt;span class=&quot;math&quot;&gt;\(j\)&lt;/span&gt; determine the choice &lt;span class=&quot;math&quot;&gt;\(q_j\)&lt;/span&gt;) of the quota that corresponds to that value.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thus &lt;span class=&quot;math&quot;&gt;\(\operatorname{max}_q V_t(y_t) = v_t\)&lt;/span&gt;. Starting from the final timepoint, we know the ending value &lt;span class=&quot;math&quot;&gt;\(v_T\)&lt;/span&gt; as a function of the ending state &lt;span class=&quot;math&quot;&gt;\(y_T\)&lt;/span&gt;. The probability of ending up in each possible state for &lt;span class=&quot;math&quot;&gt;\(y_T\)&lt;/span&gt;, given a choice of quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; and the current state &lt;span class=&quot;math&quot;&gt;\(y_{T-1}\)&lt;/span&gt; is given by the transition matrix &lt;span class=&quot;math&quot;&gt;\(\mathbf{M}\mathbf{F}_q\)&lt;/span&gt;. The Bellman recursion becomes&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \mathbf{V}_t[,q] = \mathbf{Q}[,q] + \delta \mathbf{M} \mathbf{F}_q v_{t+1} \]&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;r-code-algorithm&quot;&gt;R code algorithm:&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    Ep &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;M %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;P %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I
    V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Ep
    for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tmax){                                 
      D[,(Tmax-t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(V, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, which.max)        
      v_t &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(V, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, max)                        
      V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n_h, function(j){               
        Ep[,j] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;-delta) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;M %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;F[[j]] %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;v_t  
      })
    }
    D&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Where&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    P &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(x_grid, h_grid, profit) 
    M &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownorm&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(x_grid, x_grid, pdfn, sigma_m) )
    I &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownorm&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(h_grid, h_grid, pdfn, sigma_i) )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;F is a bit more complicated:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    F &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n_h, function(q){  
      &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n_x, function(y){
        out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(n_x)
        mu &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n_x, function(x)
          &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x_grid[x],h_grid,p) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;            &lt;/span&gt;I[q,] *&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# Implementation error&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;            &lt;/span&gt;M[x,y])) &lt;span class=&quot;co&quot;&gt;# Measurement error&lt;/span&gt;
        if(mu==&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
          out[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
        else 
          out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dlnorm&lt;/span&gt;(x_grid/mu, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)
        out/&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(out)
      }))
    })&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Something seems to be a mistake, since the optimal policy under uncertainty does not make sense:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7132/8158258480_972c8543e6.jpg&quot; alt=&quot;policy function under each source of uncertainty&quot; /&gt;&lt;figcaption&gt;policy function under each source of uncertainty&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/bbef99ec43c75ff1dca959c1511b44c5159f4f4c/inst/examples/mult_uncertainty_test.md&quot;&gt;example script&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Updated Edit&lt;/strong&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/2012-11-17-f6c225f69f-policyfunctions.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/954cea9310063150bb42567b19caa272b34d32c2&quot;&gt;See notes on code changes inline&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/10/31/notes.html"/>
   <updated>2012-10-31T00:00:00+00:00</updated>
   <id>/10/31/notes</id>
   <content type="html">&lt;p&gt;I enjoyed an excellent meeting with Annette Thomas, CEO of MacMillian Publishing and Nature Publishing group at UC Davis. It was impressive to here that Annette wanted to meet with UC Davis faculty and graduate students interested in open access and open science to discuss our opinions, desires and frustrations in the scientific publishing process. It was particularly valuable to discuss some of the failed experiments in open science at Nature. Following this event I sent the letter below to Annette recording my reflections on those experiments and what I think they might have revealed. The 2 hour discussion with four graduate students, two faculty members and members of UC Davis and Cal Digital Libraries hit on many other topics as well, and these reflections capture just a few of the issues discussed.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Yesterday we discussed the failure of the 2004 experiment in open peer review and the failure of the pre-print server, Nature Precedings. In my humble opinion, both of these were doomed by insufficient incentives to participate.&lt;/p&gt;
&lt;p&gt;A more successful model to open up peer review has been that practiced by EMBO, as discussed in a Nature Comment in 2010 (doi: 10.1038/468029a). As we are already doing the work of peer review, their is an immediate incentive to get credit for that work through this mechanism, and more journals should consider it. (Biology Direct has a slightly more extreme take on this policy. Both have been far more successful than either the Nature experiment, comments sections of PLoS, or F1000 approaches to post-publication peer review).&lt;/p&gt;
&lt;p&gt;Precedings was a bold and powerful idea that addressed many real gaps in the current publishing infrastructure – a preprint server for fields not represented in arXiv, support for posters and presentations, dois (okay, EZID handles; crossref DOIs might have been better), and a more modern interface than arXiv provided. I was sad to see this close. As you both surely know, preprints run strongly counter to the grain of mainstream biology and their concept of precedence (unlike physics, economics and other fields where the opposite is true). As recent genomic examples have illustrated, the value of faster communication and a broader pre-publication review may slowly shift that culture, but journals such as Nature could play a key role in easing the transition, as your 2004 experiment showed.&lt;/p&gt;
&lt;p&gt;What is needed here is a button to submit work to the preprint server integrated into the normal submission form to the journal. This will dispel the persistent myth that the journal is not okay with it, and will meet with much larger uptake than simply providing the server separately would do. I would bet your own data from the 2004 experiment shows this pattern – more authors choose to participate in that, as a fraction of the total submissions, than have independently uploaded work to a preprint server. As you both observed, the failure of the 2004 experiment was in the breadth and depth of comments received, but as a study in willingness to use a preprint, it was an important positive discovery about promoting preprint culture that would only strengthen the final journal copies.&lt;/p&gt;
&lt;/blockquote&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/10/29/notes.html"/>
   <updated>2012-10-29T00:00:00+00:00</updated>
   <id>/10/29/notes</id>
   <content type="html">&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Mostly writing application today…&lt;/li&gt;
&lt;li&gt;Review for EcoLet&lt;/li&gt;
&lt;li&gt;looking over pomdp/momdp&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Notebook archives now &lt;a href=&quot;http://figshare.com/authors/Carl%20Boettiger/96387&quot;&gt;on figshare&lt;/a&gt; (plain-txt versions). Can now also cite entries by doi, e.g.: Lab Notebook (2010) doi:10.6084/m9.figshare.96916, and Lab Notebook, (2011) doi:10.6084/m9.figshare.96919. Would publishing individual entries and individual figshare objects be preferable or just annoying?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Meeting tomorrow with Annette Thomas, CEO NPG/MacMillian. review &lt;a href=&quot;http://www.youtube.com/watch?v=djFs1p_4r-Y&amp;amp;feature=related&quot;&gt;interview with David Worlock&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;munch-data-project&quot;&gt;Munch data project&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Data extraction for geospatial life history project (&lt;a href=&quot;http://www.carlboettiger.info/assets/data&quot;&gt;file&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R script for converting place names into latitude/longitude:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RCurl)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RJSONIO)
construct.geocode.url &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(address, &lt;span class=&quot;dt&quot;&gt;return.call =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;json&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sensor =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;) {
    root &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;http://maps.google.com/maps/api/geocode/&amp;quot;&lt;/span&gt;
    u &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(root, return.call, &lt;span class=&quot;st&quot;&gt;&amp;quot;?address=&amp;quot;&lt;/span&gt;, address, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;amp;sensor=&amp;quot;&lt;/span&gt;, sensor, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;URLencode&lt;/span&gt;(u))
}
gGeoCode &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(address,&lt;span class=&quot;dt&quot;&gt;verbose=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;) {
  if(verbose) &lt;span class=&quot;kw&quot;&gt;cat&lt;/span&gt;(address,&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
  u &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;construct.geocode.url&lt;/span&gt;(address)
  doc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getURL&lt;/span&gt;(u)
  x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;fromJSON&lt;/span&gt;(doc,&lt;span class=&quot;dt&quot;&gt;simplify =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
  if(x$status==&lt;span class=&quot;st&quot;&gt;&amp;quot;OK&amp;quot;&lt;/span&gt;) {
    lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x$results[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$geometry$location$lat
    lng &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x$results[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$geometry$location$lng
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(lat, lng))
  } else {
  &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;,&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;))
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;xml-compliance-in-html5&quot;&gt;XML compliance in HTML5&lt;/h2&gt;
&lt;p&gt;See &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/21&quot;&gt;labnotebook/issues/21&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;HTML5 allows tags to be unclosed, e.g. &lt;code&gt;&amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;&lt;/code&gt; instead of &lt;code&gt;&amp;lt;meta charset=&amp;quot;utf-8&amp;quot; /&amp;gt;&lt;/code&gt; but this is not valid XML.&lt;/p&gt;
&lt;p&gt;See: * &lt;a href=&quot;http://dev.w3.org/html5/html-xhtml-author-guide/&quot;&gt;Polyglot/xhtml5 author guide&lt;/a&gt; * &lt;a href=&quot;http://www.xmlplease.com/xhtml/xhtml5polyglot/#s1&quot;&gt;Benefits of XML&lt;/a&gt; * &lt;a href=&quot;http://www.w3.org/TR/xhtml-media-types/#C_2&quot;&gt;W3C XHTML media type&lt;/a&gt; * &lt;a href=&quot;http://www.w3.org/TR/html5/syntax.html#optional-tags&quot;&gt;Optional tags in html5&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Note that tags with no content must be closed with &lt;code&gt;/&amp;gt;&lt;/code&gt; (like the &lt;code&gt;meta&lt;/code&gt; example) while tags with content must get a normal closing (&lt;code&gt;&amp;lt;li&amp;gt; item &amp;lt;/li&amp;gt;&lt;/code&gt; etc). Despite this, the HTML5 spec is kinda logical since closing is syntax redundant even though not closing is not valid XML, see &lt;a href=&quot;http://stackoverflow.com/questions/3008593/html-include-or-exclude-optional-closing-tags&quot;&gt;SO question&lt;/a&gt; for discussion.&lt;/p&gt;
&lt;h3 id=&quot;example&quot;&gt;example&lt;/h3&gt;
&lt;p&gt;Basic XML parsing is now possible, e.g. in R:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(XML)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(RCurl)
tt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getURLContent&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info/2012/10/25/stochastic-dynamic-programming-with-gaussian-process-approx.html&amp;quot;&lt;/span&gt;)
doc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xmlParse&lt;/span&gt;(tt)
&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(doc, &lt;span class=&quot;st&quot;&gt;&amp;quot;//x:meta&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespace=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Validation requires &lt;code&gt;meta&lt;/code&gt; tags only appear in &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt; and not &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; (but still do use &lt;code&gt;property&lt;/code&gt; and not &lt;code&gt;name&lt;/code&gt; for RDFa properties). Validation also requries all images have alt-text, which means I should remember to use anchor text om pandoc images (e.g. also name my graph knitr chunks intelligently). Otherwise the site validates as HTML5.&lt;/p&gt;
&lt;p&gt;Ignoring the declared content-type will nearly validate as XML. Had to make the attribute &lt;code&gt;onClick&lt;/code&gt; from the Google tracker javascript lowercase &lt;code&gt;onclick&lt;/code&gt;, like all other attributes. Now th only challenge is that HTML5 needs &lt;code&gt;lang=&lt;/code&gt; declared in &lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt; tag, (while is tolerant of &lt;code&gt;xml:lang&lt;/code&gt;), but &lt;code&gt;XML&lt;/code&gt; doesn’t want to see &lt;code&gt;lang&lt;/code&gt; in the &lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt; tag. Perhaps can go somewhere else and be valid HTML5? (Using a &lt;code&gt;meta&lt;/code&gt; tag for this is now &lt;a href=&quot;http://nimbupani.com/declaring-languages-in-html-5.html&quot;&gt;obsolete&lt;/a&gt;).&lt;/p&gt;
&lt;h3 id=&quot;mathml&quot;&gt;MathML&lt;/h3&gt;
&lt;p&gt;Mathml namespace is loaded by default in HTML5 (a native namespace). Currently using the javascript MathJax which has very nice display and interactive toggles (including getting the latex or mathml source). It looks like MathJax can take either latex input or mathml input, and Pandoc can render the latex source (much much nicer to type) into mathml. Just need to get pandoc to convert the source to mathml and then have the mathml rendered pretty by MathJax css, e.g. http://www.mathjax.org/demos/mathml-samples/. This may also load faster than javascript-based rendering of MathJax(?)&lt;/p&gt;
&lt;h2 id=&quot;alm-goals&quot;&gt;ALM goals&lt;/h2&gt;
&lt;p&gt;Headed to the PLOS ALM conference with ropensci next week. Should be a good chance to catch up on projects:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rfigshare to CRAN&lt;/li&gt;
&lt;li&gt;semantic knitcitations&lt;/li&gt;
&lt;li&gt;Mark Hahnel: figshare archiving of notebook – archive the markdown? archive code? archive git repos?&lt;/li&gt;
&lt;li&gt;Martin Fenner: Scholarly HTML standards, notebook standards (can we get John Kunze involved?)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Stochastic Dynamic Programming With Gaussian Process Approx</title>
	 <link href="/2012/10/25/stochastic-dynamic-programming-with-gaussian-process-approx.html"/>
   <updated>2012-10-25T00:00:00+00:00</updated>
   <id>/10/25/stochastic-dynamic-programming-with-gaussian-process-approx</id>
   <content type="html">&lt;p&gt;Here we work out an SDP solution of the Reed (1979) using a Gaussian process approximation. In this example the Gaussian process hyper-parameters haven’t been tuned, so in principle the solution would perform even better, but this is just for illustrative purposes.&lt;/p&gt;
&lt;p&gt;We simulate 40 points under a stochastic growth (lognormal multiplicative noise) Beverton-Holt model and infer the Gaussian process. We start the simulation from a low stock value, giving reasonable but not perfect coverage of the state-space. The prior still has a strong influence outside these regions, so the GP doesn’t quite match the Beverton-Holt curve, as seen in the first figure.&lt;/p&gt;
&lt;p&gt;We solve for the optimal policy function by discretizing the system and using the Gaussian process to fill out the stochastic transition matrix, which we pass to my little stochastic dynamic programming library to determine the policy function. We compare this policy function to the solution for the true F (Beverton-Holt) in the second figure, and note somewhat substantial differences (in particular a clear deviation from the constant escapement rule that emerges, which in itself is quite interesting, all though clearly non optimal in this case.&lt;/p&gt;
&lt;p&gt;The GP doesn’t learn during the actual test period when the management is being implemented, though of course it could easily do so (after accounting for the application of the control). A single replicate simulation compares the optimal management under the true model to the GP management, which does less well (obviously), but not by a dramatic amount.&lt;/p&gt;
&lt;p&gt;Code provides explicit statements of the models and should generate a reproducible example.&lt;/p&gt;
&lt;p&gt;Next steps should optimize the GP and compare against the more realistic test case where the parameterized model is estimated from the simulation data (possibly under different functional forms, etc).&lt;/p&gt;
&lt;h3 id=&quot;coded-example-below-from-reed-example.md&quot;&gt;Coded example below, from &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/a40d56af2e0f3be58e1b92347c96b829cadb130a/inst/examples/reed-example.md&quot;&gt;reed-example.md&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;load my libraries and plotting lib.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(nonparametricbayes)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(pdgControl)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(push images to flickr)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; socialR::flickr.url)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;beverton-holt-function&quot;&gt;Beverton-Holt function&lt;/h3&gt;
&lt;p&gt;Simulate some training data under a stochastic growth function with standard parameterization,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;BevHolt
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parameter definitions&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;101&lt;/span&gt;)
T &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;
x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(T)
x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Noise function, profit function&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)  &lt;span class=&quot;co&quot;&gt;#1+(2*runif(1, 0,  1)-1)*sigma_g #&lt;/span&gt;
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Simulation&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;for (t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) x[t +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;() *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; p)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Predict the function over the target grid&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)], &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:T])
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(nonparametricbayes)
gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_fit&lt;/span&gt;(obs, X, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;sigma_n =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;l =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Gaussian Process inference from this model. True model shown in red.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; gp$Ef, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; (gp$Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))), 
    &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; (gp$Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))))
true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(X, f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, p))
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; ymin, &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ymax), &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;gray80&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; obs, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; true, 
    &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8464/8123212898_904aa88749_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;stochastic-dynamic-programming-solution-based-on-the-posterior-gaussian-process&quot;&gt;Stochastic Dynamic programming solution based on the posterior Gaussian process:&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;rownorm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(M) &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(M, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, function(x) x/&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x)))
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Define a transition matrix &lt;span class=&quot;math&quot;&gt;\(F\)&lt;/span&gt; from the Gaussian process, giving the probability of going from state &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; to &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt;. We already have the Gaussian process mean and variance predicted for each point &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; on our grid, so this is simply:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf))
matrices_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(h_grid, function(h) {
    F &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, function(x) &lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(x, gp$Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h, V))
    F &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownorm&lt;/span&gt;(F)
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;True &lt;span class=&quot;math&quot;&gt;\(f(x)\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;matrices_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(h_grid, function(h) {
    mu &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, f, h, p)
    F_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, function(x) &lt;span class=&quot;kw&quot;&gt;dnorm&lt;/span&gt;(x, mu, sigma_g))
    F_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownorm&lt;/span&gt;(F_true)
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Calculate the policy function using the true F:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opt_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(matrices_true, x_grid, h_grid, &lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, profit, 
    &lt;span class=&quot;dt&quot;&gt;delta =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Calculate using the inferred GP&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opt_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(matrices_gp, x_grid, h_grid, &lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, profit, 
    &lt;span class=&quot;dt&quot;&gt;delta =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policies &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock =&lt;/span&gt; x_grid, &lt;span class=&quot;dt&quot;&gt;GP =&lt;/span&gt; x_grid[opt_gp$D[, 
    &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;Exact =&lt;/span&gt; x_grid[opt_true$D[, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]), &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
q1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policies, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;value, &lt;span class=&quot;dt&quot;&gt;color =&lt;/span&gt; variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;() +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;stock size&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;)
q1&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8053/8123196485_a3dc43986f_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;We can see what happens when we attempt to manage a stock using this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
sim_gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, K, opt_gp$D, z_g, 
    &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit)
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
sim_true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, p, x_grid, h_grid, K, opt_true$D, 
    z_g, &lt;span class=&quot;dt&quot;&gt;profit =&lt;/span&gt; profit)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; sim_gp$time, &lt;span class=&quot;dt&quot;&gt;stock_gp =&lt;/span&gt; sim_gp$fishstock, 
    &lt;span class=&quot;dt&quot;&gt;stock_true =&lt;/span&gt; sim_true$fishstock, &lt;span class=&quot;dt&quot;&gt;harvest_gp =&lt;/span&gt; sim_gp$harvest, &lt;span class=&quot;dt&quot;&gt;havest_true =&lt;/span&gt; sim_true$harvest)
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(df, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value, &lt;span class=&quot;dt&quot;&gt;color =&lt;/span&gt; variable))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8191/8123196619_5b8ab8d81d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Total Profits&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(sim_gp$profit)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 25.43&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(sim_true$profit)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 29.95&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Multiple Uncertainty Value Function Iteration</title>
	 <link href="/2012/10/24/multiple-uncertainty-value-function-iteration.html"/>
   <updated>2012-10-24T00:00:00+00:00</updated>
   <id>/10/24/multiple-uncertainty-value-function-iteration</id>
   <content type="html">&lt;h3 id=&quot;multiple-uncertainty-algorithm&quot;&gt;Multiple Uncertainty algorithm&lt;/h3&gt;
&lt;p&gt;Define each of the transition matrices:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    D &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;matrix&lt;/span&gt;(&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nrow=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_grid), &lt;span class=&quot;dt&quot;&gt;ncol=&lt;/span&gt;Tmax)  
    P &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(x_grid, h_grid, profit)
    F &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(x_grid, &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x_grid, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, p), pdfn, sigma_g)
    M &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(x_grid, x_grid, pdfn, sigma_m)
    I &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(h_grid, h_grid, pdfn, sigma_i)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Probably row-normalize each:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;rownorm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(M) &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(M, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, function(x) x/&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(x))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(Note the transpose is needed since the silly function of a vector turns the column into a row. Not an issue of margin 2)&lt;/p&gt;
&lt;p&gt;If we have no uncertainty in measurement or implementation, then the algorithm is:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;P
    for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tmax){
      D[,(Tmax-t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(V, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, which.max)
      V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;P +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;delta *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;F %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;D[, (Tmax-t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)]  
    }
    D&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With uncertainty&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Ep &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;M %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;P %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I
U &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(M) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;F %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;M 
V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Ep
  for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:Tmax){
    D[,(Tmax-t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(V, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, which.max)
    V &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Ep +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;delta *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;U %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;D[, (Tmax-t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;)]  
  }&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;description&quot;&gt;Description&lt;/h3&gt;
&lt;p&gt;** rambling thinking while working out the above **&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;http://www.carlboettiger.info/2012/10/01/multiple-uncertainty.html&quot;&gt;October 1st entry&lt;/a&gt; derives the rule for updating the state (measured stock),&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ Y_{t+1} = \mathbb{F} \mathbb{M} \mathbb{I}_h \vec Y_t, \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;but this isn’t sufficient to complete the value iteration. Recall from the Bellman recursion,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[V_t = \max_h \operatorname{E}\left( \Pi(Y_t, h_t) + V(Y_{t+1}, h_{t+1}) \right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In the final timestep with no scrap value, we assert that the vector of values for each possible state, &lt;span class=&quot;math&quot;&gt;\(\vec V_T = {0}\)&lt;/span&gt;. The previous year is then the first year that can have profits, given by &lt;span class=&quot;math&quot;&gt;\(\Pi(Y_{T-1}, h_{T-1})\)&lt;/span&gt;. Of course &lt;span class=&quot;math&quot;&gt;\(Y_{T-1}\)&lt;/span&gt; is unknown, but is given by the recursion in (1).&lt;/p&gt;
&lt;p&gt;Our strategy in discrete space is to work backwards from &lt;span class=&quot;math&quot;&gt;\(T\)&lt;/span&gt;, keeping track of the &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; that maximizes the value-to-go for each possible state. So at &lt;span class=&quot;math&quot;&gt;\(T-1\)&lt;/span&gt;, we put each possible state &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; and each possible havest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; into &lt;span class=&quot;math&quot;&gt;\(\Pi(y,h)\)&lt;/span&gt; and select the &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; that maximizes the profit. In the case of a deterministic harvest and a lack of measurement error this first iteration is trivial: harvest what you see &lt;span class=&quot;math&quot;&gt;\(h=y\)&lt;/span&gt; (unless &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; is bounded or there is a cost on effort), yielding the value &lt;span class=&quot;math&quot;&gt;\(V_{T-1}\)&lt;/span&gt; for each state &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; is &lt;span class=&quot;math&quot;&gt;\(\Pi(y,y)\)&lt;/span&gt;. When profits are proportional to harvest, up to a constant this is simply &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;For a generic profit function that may have a cost on effort, we must store the map of which &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; is optimal for each &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;. In discrete space, call this the decision vector &lt;span class=&quot;math&quot;&gt;\(D_{T-1}\)&lt;/span&gt; where the indices correspond to the states &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; and the values correspond to the harvest (or harvest index) that is optimal for that state, and we write &lt;span class=&quot;math&quot;&gt;\(\Pi(y_{T-1}, D_{T-1}(y_{T-1}))\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If there is uncertainty in either implementation of the harvest or measurement of the stock, or both, then we must integrate over this in determining the optimal &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;. The expected profit derived from choosing a harvest quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; and having measured a stock at &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; is given by&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \Pi(y,q) = \int \int \Pi(x,h) P(x) dx P(h) dh \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In matrix form, if &lt;span class=&quot;math&quot;&gt;\(\mathbb{P}\)&lt;/span&gt; is the matrix of profits where element &lt;span class=&quot;math&quot;&gt;\(p_{ij} = \Pi(x_i, h_j)\)&lt;/span&gt; and vector &lt;span class=&quot;math&quot;&gt;\(\vec H\)&lt;/span&gt; with elements &lt;span class=&quot;math&quot;&gt;\(H_i\)&lt;/span&gt; give the probability of harvesting &lt;span class=&quot;math&quot;&gt;\(h_i\)&lt;/span&gt; fish given the quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt;, then &lt;span class=&quot;math&quot;&gt;\(\mathbb{P} \vec H\)&lt;/span&gt; is a vector of profits for each &lt;span class=&quot;math&quot;&gt;\(x_i\)&lt;/span&gt;. Representing distribution in the measurement similarly as &lt;span class=&quot;math&quot;&gt;\(\vec X\)&lt;/span&gt;, the integration for the expected profit is &lt;span class=&quot;math&quot;&gt;\(\vec X^T \mathbb{P} \vec H\)&lt;/span&gt; (giving the scalar value &lt;span class=&quot;math&quot;&gt;\(\Pi(y,q)\)&lt;/span&gt;).&lt;/p&gt;
&lt;p&gt;We can store &amp;amp; lookup &lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt; using a matrix whose columns give &lt;span class=&quot;math&quot;&gt;\(\vec X\)&lt;/span&gt; for each value &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;, and similarly for &lt;span class=&quot;math&quot;&gt;\(H\)&lt;/span&gt; given &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt;. These are our matrices &lt;span class=&quot;math&quot;&gt;\(\mathbb{M}\)&lt;/span&gt; (each row is a fixed observed &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;, maps true &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; into observed &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;, elements &lt;span class=&quot;math&quot;&gt;\(P_m(y, x)\)&lt;/span&gt;) &lt;span class=&quot;math&quot;&gt;\(\mathbb{I}\)&lt;/span&gt; (mapping quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; (columns) to implemented harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;, elements &lt;span class=&quot;math&quot;&gt;\(P_I(h_i, q_j)\)&lt;/span&gt;) from before. Then we can write &lt;span class=&quot;math&quot;&gt;\(\operatorname{E}(\Pi(x,h) | y,q)\)&lt;/span&gt; as a matrix resulting from the product of matrices:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\tilde{\mathbb{P}} =  \mathbb{M} \mathbb{P} \mathbb{I} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In the next iteration, &lt;span class=&quot;math&quot;&gt;\(T-2\)&lt;/span&gt;, we realize that our choice of &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; impacts the value we could get a time &lt;span class=&quot;math&quot;&gt;\(T-1\)&lt;/span&gt; as well. In choosing the harvest quota in this interval we must also consider what value it introduces in the &lt;span class=&quot;math&quot;&gt;\(T-1\)&lt;/span&gt; interval. We already have the matrix above giving the profits for each &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;, we just need to transition from the space of the current &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; to the future &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; through application of the transition matrix &lt;span class=&quot;math&quot;&gt;\(T: y_t \to y_{t+1}\)&lt;/span&gt;. &lt;span class=&quot;math&quot;&gt;\(F: x_t \to x_{t+1}\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(F(x_{t+1}, x_t)\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(M: x \to y\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(I: q \to h\)&lt;/span&gt;, so&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\mathbb{T} = M^T F M \tilde{P} I D_t \]&lt;/span&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Evolutionary Covariance</title>
	 <link href="/2012/10/24/evolutionary-covariance.html"/>
   <updated>2012-10-24T00:00:00+00:00</updated>
   <id>/10/24/evolutionary-covariance</id>
   <content type="html">&lt;p&gt;&lt;em&gt;Thinking through disparity measures while writing my thoughts in R…&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Load some sample data&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(geiger)
&lt;span class=&quot;kw&quot;&gt;data&lt;/span&gt;(geospiza)
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;treedata&lt;/span&gt;(geospiza$geospiza.tree, geospiza$geospiza.data$wingL)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To find the disparity relative to a particular model, we must compute the variance-covariance matrix for that model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dat$data
V_bm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;vcv&lt;/span&gt;(dat$phy)
mean_X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;geiger:::&lt;span class=&quot;kw&quot;&gt;phylogMean&lt;/span&gt;(V_bm, X)
bm_disparity &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(X-mean_X) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V_bm %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(X-mean_X)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I believe this needs to be scaled by the Brownian rate parameter of the trait, e.g.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;bm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;fitContinuous&lt;/span&gt;(dat$phy, dat$data)
bm_disparity &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bm[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$beta *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bm_disparity
OU would be similar, but transform the tree&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ou &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;fitContinuous&lt;/span&gt;(dat$phy, dat$data, &lt;span class=&quot;dt&quot;&gt;model=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;OU&amp;quot;&lt;/span&gt;)
alpha &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;ou[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$alpha
V_ou &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;vcv&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;ouTree&lt;/span&gt;(dat$phy, alpha))
ou_var &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ou[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$beta/(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*alpha)
X_mean &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;phylogMean&lt;/span&gt;(V_ou, X)
ou_disparity &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(X-X_mean) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;V_ou %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(X-X_mean) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ou_var&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There’s a few things I’m unsure about off the top of my head in this. I should double-check that &lt;code&gt;beta&lt;/code&gt; in geiger is the same as &lt;span class=&quot;math&quot;&gt;\(\sigma^2\)&lt;/span&gt;, and I should double check the ou variance-covariance formula (e.g. compare to the un-numbered equation after equation 5 in Butler &amp;amp; King). I also not sure I quite have the right &lt;code&gt;X_mean&lt;/code&gt; in the OU case.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Semantic Markup Examples For The Lab Notebook</title>
	 <link href="/2012/10/23/semantic-markup-examples-for-the-lab-notebook.html"/>
   <updated>2012-10-23T00:00:00+00:00</updated>
   <id>/10/23/semantic-markup-examples-for-the-lab-notebook</id>
   <content type="html">&lt;p&gt;All notebook entries are formatted with XHTML compliant (polyglot) HTML5 semantic structure. This means that any entry can be parsed with a generic XML parser to extract the entry content in &lt;code&gt;&amp;lt;article&amp;gt;&lt;/code&gt;, the &lt;code&gt;&amp;lt;header&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;footer&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;aside&amp;gt;&lt;/code&gt;, etc. The &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt; section provides &lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt; and essential &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; tags declaring the character encoding (which also sets the MIME type for HTML5).&lt;/p&gt;
&lt;h3 id=&quot;head&quot;&gt;Head&lt;/h3&gt;
&lt;p&gt;In &lt;code&gt;_includes/header.html&lt;/code&gt; we introduce some basic academic archive metadata using the Dublin Core ontology. The html5 &lt;code&gt;&amp;lt;header&amp;gt;&lt;/code&gt; seems like a good place for &lt;code&gt;dc:title&lt;/code&gt;. Other metadata is added invisibly using &lt;code&gt;content&lt;/code&gt; in a &lt;code&gt;meta&lt;/code&gt; tag.&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;head&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; prefix=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc: http://purl.org/dc/terms/&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;&amp;lt;!-- HTML5 metadata --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; charset=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;&amp;lt;!--same as &amp;lt;meta http-equiv=&amp;#39;Content-Type&amp;#39; content=&amp;#39;Type=text/html; charset=utf-8&amp;#39;&amp;gt; --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;author&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;keywords&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Ecology, Evolution, Open Science, Reproducible Research&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;My open lab notebook: research in theoretical ecology and evolution&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;width=device-width, initial-scale=1.0&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;{{ page.title }}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;&amp;lt;!-- RDFa Metdata (in Dublin Core) --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:creator&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl Boettiger&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:title&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;{{ page.title }}&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:type&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Lab Notebook&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:format&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;text/html&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;meta&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:language&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; content=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;en&amp;quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;sidebar&quot;&gt;Sidebar&lt;/h3&gt;
&lt;p&gt;More metadata is displayed in the sidebar (in an html5 &lt;code&gt;aside&lt;/code&gt; element), including date, tags and category. I’ve added the following RDFa to describe these (see examples with the Jekyll liquid code in &lt;code&gt;_includes/sidebar.html&lt;/code&gt;)&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;aside&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; prefix=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc: http://purl.org/dc/terms/&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
Posted on
&lt;span class=&quot;kw&quot;&gt;&amp;lt;time&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; datetime=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;{{ page.date | date_to_xmlschema }}&amp;quot;&lt;/span&gt; 
&lt;span class=&quot;ot&quot;&gt;      property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:created&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;{{ page.date | date_to_string }}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/time&amp;gt;&lt;/span&gt;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This puts the date in an HTML5 time element described as the &lt;code&gt;dc.created&lt;/code&gt; time of the publication. Tags and categories use a little Liquid code so Jekyll can import them from the YAML header. The link to the tag page is described with the HTML &lt;code&gt;rel&lt;/code&gt; attribute for tag, while the tag itself is given the RDFa property of a blog keyword from schema.org. Categories are given the more formal &lt;code&gt;dc:subject&lt;/code&gt; property. (See &lt;code&gt;_includes/pagetags.html&lt;/code&gt; for Jekyll/Liquid code for looping over multiple tags, etc).&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tag&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tag&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/tags.html#{{ tag | cgi_escape }}&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;#&lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt; 
&lt;span class=&quot;ot&quot;&gt;  property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://schema.org/BlogPosting/keywords&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;{{ tag }}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; rel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;tag&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;category&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/categories.html#{{ category | cgi_escape }}&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;dc:subject&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;{{ category }}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next and previous buttons get the HTML5 &lt;code&gt;rel&lt;/code&gt; values &lt;code&gt;next&lt;/code&gt; and &lt;code&gt;prev&lt;/code&gt; (see &lt;a href=&quot;http://diveintohtml5.info/semantics.html&quot;&gt;HTML5 semantics&lt;/a&gt;). Note that all the Dublin Core elements are properties of the page on which they occur.&lt;/p&gt;
&lt;h3 id=&quot;footer&quot;&gt;Footer&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;&amp;lt;footer&amp;gt;&lt;/code&gt; contains licenses and contact information through social media. I’ve used the FOAF vocabulary to indicate my membership to the various social networks provided in the links. The social networks are properties of a &lt;code&gt;FOAF:person&lt;/code&gt;, (me), which is indicated in the RDFa &lt;code&gt;resource&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;span4&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; vocab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Person&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info#me&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;mailto:cboettig@gmail.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/assets/img/icon-email.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;https://twitter.com/cboettig&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/assets/img/icon-twitter.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;twitter&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;https://github.com/cboettig&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info/assets/img/icon-github.png&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;github&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.mendeley.com/profiles/carl-boettiger&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;  src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/assets/img/icon-mendeley.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;mendeley&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/atom.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;/assets/img/icon-rss.png&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;feed&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It might be worth adding more FOAF terms describing the relationship of these networks (such as distinguishing my profile name and the base url) using meta elements to avoid adding clutter text. I use the Creative Commons namespace to identify my CC0 license. The license is a property of the page on which it is found, like the Dublin Core metadata.&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://creativecommons.org/ns#license&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://creativecommons.org/publicdomain/zero/1.0/&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://i.creativecommons.org/l/zero/1.0/88x31.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; alt=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;CC0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;float:right&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/post-rdfa.png&quot; alt=&quot;When these elements are combined in a given entry, the RDFa generates this structure&quot; /&gt;&lt;figcaption&gt;When these elements are combined in a given entry, the RDFa generates this structure&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;easily-entering-rdfa&quot;&gt;Easily entering RDFa&lt;/h3&gt;
&lt;p&gt;All of this markup content is either generally static or filled in programatically by Jekyll from the YAML headers (e.g. title, categories, tags, date), leaving me free to put the RDFa into the template files just once and forget about it. In this way I can continue to write everything in Markdown, rather than the more cumbersome HTML riddled by the addition of RDFa attributes. Unfortunately there is no easy way to escape this in writing the Homepage markup, described below, but a single case isn’t so bad.&lt;/p&gt;
&lt;p&gt;Another obvious candidate for linked data in the posts is the citation information. This markup can probably be automatically generated for each post using scripts (see &lt;a href=&quot;http://www.carlboettiger.info/2012/10/05/notes.html&quot;&gt;Automated feeds in notebook entries&lt;/a&gt;), so I plan to add this to my knitcitations package when I get a chance (including CiTO support!).&lt;/p&gt;
&lt;h3 id=&quot;homepage&quot;&gt;Homepage&lt;/h3&gt;
&lt;p&gt;My homepage contains a brief description about me that is ripe for FOAF and schema.org. While this content is reasonably static, it does mean writing directly in HTML+RDFa, with the markup making the source almost unreadable. (It might be possible to force more of this data into YAML header and have it added through the invisible &lt;code&gt;meta&lt;/code&gt; tags, but that seems rather convoluted). Capturing the “buisness card” information as well as the “social” information requires mixing ontologies, which can lead to some interesting complications. To make a long story short:&lt;/p&gt;
&lt;ol type=&quot;a&quot;&gt;
&lt;li&gt;Implicit logic &lt;em&gt;is possible&lt;/em&gt; with linked data: we can infer that &lt;code&gt;schema:jobTitle&lt;/code&gt; can be a property of a &lt;code&gt;foaf:Person&lt;/code&gt; because it is a property of a &lt;code&gt;schema:Person&lt;/code&gt; and someone declares them as &lt;code&gt;owl:equivalentProperty&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;In practice it may be most robust to explicitly declare the relation by exploiting the fact that we can give multiple arguments to attributes like &lt;code&gt;property&lt;/code&gt; and &lt;code&gt;typeof&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;me&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; prefix=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf: http://xmlns.com/foaf/0.1/&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; prefix=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;schema:&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;http://schema.org/Person&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:Person schema:Person&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;resource=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info#me&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; 
I am  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:homepage schema:url&amp;quot;&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:name&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;schema:name&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:givenName schema:givenName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Carl&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;foaf:familyName schema:familyName&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Boettiger&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;
&lt;span class=&quot;ot&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;schema:jobTitle&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;a graduate student&lt;span class=&quot;kw&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(This excerpt gives the general flavor, see the html source of &lt;a href=&quot;http://www.carlboettiger.info&quot;&gt;index.html&lt;/a&gt; for a full example.)&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/2012/assets/figures/homepage-rdfa.png&quot; alt=&quot;The homepage generates this RDFa structured graph (from rdfa.info/play)&quot; /&gt;&lt;figcaption&gt;The homepage generates this RDFa structured graph (from rdfa.info/play)&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt;
&lt;p&gt;Some background reading on semantics&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nice &lt;a href=&quot;http://scholarlyhtml.org/faq/&quot;&gt;collection of posts on scholarly html&lt;/a&gt;, but too little mention of the serious linked data stuff coming out of biscol, ievobio/nescent, etc. In particular, Martin’s &lt;a href=&quot;http://blogs.plos.org/mfenner/2011/03/19/a-very-brief-history-of-scholarly-html/&quot;&gt;history&lt;/a&gt; gives some nice perspective.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The war for schema. Which ontologies should we choose? (e.g. &lt;a href=&quot;http://blogs.plos.org/mfenner/2011/06/07/schema-org-for-scholarly-html/&quot;&gt;schema.org’s take&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;On &lt;a href=&quot;http://manu.sporny.org/2011/false-choice/&quot;&gt;the good &amp;amp; the bad of schema.org and the role of search giants&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mixing ontologies had me very confused.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How do we &lt;a href=&quot;http://stackoverflow.com/questions/12983766&quot;&gt;mix ontologies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;How do we meet &lt;a href=&quot;http://answers.semanticweb.com/questions/19200/satisfy-google-rich-snippets-person-standard-using-foaf&quot;&gt;Google Rich Snippets requirements using FOAF?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;How do we &lt;a href=&quot;http://answers.semanticweb.com/questions/19275/what-to-do-about-redundant-rdfa-or-machines-that-speak-only-one-language&quot;&gt;avoid redundant vocabulary terms?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;We can avoid the redundancy using implicit reasoning (exploiting the logic of linked data), but we may prefer to be explict. &lt;a href=&quot;http://vimeo.com/28667500&quot;&gt;This video&lt;/a&gt; does a nice job of explaining these concepts. If we do semantics right, we should be able to “dereference” an object away from a particular ontology.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tools-and-resources&quot;&gt;Tools and Resources&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.google.com/webmasters/tools/richsnippets&quot;&gt;Google rich snippets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://getschema.org/rdfaliteextractor/about&quot;&gt;rdfa extractor&lt;/a&gt; (into RDF, JSON, n3). Also has validator, but doesn’t point to the &lt;code&gt;nu&lt;/code&gt; variant for html5.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://rdfa.info/play/&quot;&gt;RDFa Play&lt;/a&gt;. Wow, very nice.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sameas.org&quot;&gt;sameAs.org&lt;/a&gt; – search onotologies for an existing term, identify identical terms in different ontologies, etc. Simply brilliant, what I’ve always wanted!&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;knitcitations-update-adding-formats-an-semantics.&quot;&gt;knitcitations update: adding formats an semantics.&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Looking at citeproc / &lt;a href=&quot;http://citationstyles.org/&quot;&gt;CSL&lt;/a&gt; &lt;a href=&quot;https://github.com/citation-style-language&quot;&gt;github page&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Raw citeproc is an XML stylesheet, XSLT, which can render XML into HTML (and much more). Possible other options are using something like citeproc-js or citeproc-ruby, or writing citeproc-R.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Not quite clear how to take a CSL and a set of references and generate HTML; aforementioned packages may address this.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;For the moment, probably easier to convert R &lt;code&gt;bibitem&lt;/code&gt; to display with RDFa with scholarlyhtml recommended ontology than to enter raw XML reference and format via citeproc. Should also support adding in the cito tags. With full addresses in property, should be able to avoid any need for namespace/header modifications.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Gaussian process inference on sample functions</title>
	 <link href="/2012/10/23/notes.html"/>
   <updated>2012-10-23T00:00:00+00:00</updated>
   <id>/10/23/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;This example uses the direct inversion of the covariance function. I have also been exploring the potentially faster Cholksy decomposition without success. Sometimes the match is very good, other times not, see &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/c0624f95ece642dbcfa7d7bbeb8fd43c84354a3a/inst/examples/compare-cholsky.md&quot;&gt;compare-cholsky.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;This example also on github as &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/c0624f95ece642dbcfa7d7bbeb8fd43c84354a3a/inst/examples/reed-example.md&quot;&gt;reed-example.md&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Basic likelihood optimization needs to be checked. See commits &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/e35135230f92c5ee646225cdb4b0c3fa47dd8ead&quot;&gt;estimating &lt;code&gt;sigma_n&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/commit/d03db9312f7bbdacb451022f1e83ed11c682841d&quot;&gt;estimating &lt;code&gt;l&lt;/code&gt;&lt;/a&gt;. Compare the example below to &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes/blob/11666fb029ef213854065d86d08f03723d2cd828/inst/examples/reed-example.md&quot;&gt;a different set of fixed hyperparameters here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(pdgControl)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Simulate some training data under a stochastic growth function with standard parameterization,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;BevHolt
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Noise function&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(sigma_g) &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g)  &lt;span class=&quot;co&quot;&gt;#1+(2*runif(1, 0,  1)-1)*sigma_g #&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parameter definitions&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
T &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;
x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;numeric&lt;/span&gt;(T)
x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Simulation&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;for (t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) x[t +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;(sigma_g) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; p)

&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(x)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8190/8117649167_f5002b7024_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Predict the function over the target grid&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)], &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:T])
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(nonparametricbayes)
gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_fit&lt;/span&gt;(obs, X, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;sigma_n =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;l =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Gaussian Process inference from this model. True model shown in red.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; gp$Ef, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; (gp$Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))), 
    &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; (gp$Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))))
true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(X, f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, p))
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; ymin, &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ymax), &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;gray80&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; obs, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; true, 
    &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8336/8117660178_beeca82760_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;another-example-using-the-may-model&quot;&gt;Another example using the May model&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;May
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.75&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;k =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;1.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;H =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Q =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;co&quot;&gt;# approx&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Model dynamics look like this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;birth &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) p[&lt;span class=&quot;st&quot;&gt;&amp;quot;r&amp;quot;&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x/p[&lt;span class=&quot;st&quot;&gt;&amp;quot;k&amp;quot;&lt;/span&gt;])
death &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) p[&lt;span class=&quot;st&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x^(p[&lt;span class=&quot;st&quot;&gt;&amp;quot;Q&amp;quot;&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/(x^p[&lt;span class=&quot;st&quot;&gt;&amp;quot;Q&amp;quot;&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;st&quot;&gt;&amp;quot;H&amp;quot;&lt;/span&gt;])
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid, &lt;span class=&quot;dt&quot;&gt;b =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, birth), &lt;span class=&quot;dt&quot;&gt;d =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, 
    death))
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, b), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, 
    d), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8046/8117660240_31c8d052c4_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Simulation&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;2.5&lt;/span&gt;
for (t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) x[t +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;z_g&lt;/span&gt;(sigma_g) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x[t], &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; p)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(x)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8330/8117649515_59c703d880_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Predict the function over the target grid&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(T -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)], &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; x[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;:T])
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(nonparametricbayes)
gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gp_fit&lt;/span&gt;(obs, X, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;sigma_n =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;l =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Gaussian Process inference from this model&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; gp$Ef, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; (gp$Ef -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))), 
    &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; (gp$Ef +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(gp$Cf)))))
true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; X, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(X, f, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, p))
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(df) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;ymin =&lt;/span&gt; ymin, &lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ymax), &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;gray80&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; obs, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; true, 
    &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y), &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8325/8117660460_a53eb7c10c_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Comparing numerical methods</title>
	 <link href="/2012/10/22/notes.html"/>
   <updated>2012-10-22T00:00:00+00:00</updated>
   <id>/10/22/notes</id>
   <content type="html">&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(MASS)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(kernlab)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parameterization-specific&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dt&quot;&gt;len=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;),
                  &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))
l &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
sigma_n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Radial basis function/Gaussian kernel:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  SE &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(Xi,Xj, l) &lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(Xi -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xj) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;l ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
  cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, l) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Cholksy method&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(obs$x)
  K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, obs$x)
  I &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, n)

  L &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;chol&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;I)
  alpha &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(L), &lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(L, obs$y))
  k_star &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, X)
  Y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(k_star) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;alpha
  v &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(L, k_star)
  Var &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X,X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(v) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;v
  loglik &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;-.&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(obs$y) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;alpha -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(L))) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pi) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Direct method&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;  cov_xx_inv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(K +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*I)
  Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, obs$x) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y
  Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(X, obs$x)  %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, X)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gausspr&lt;/span&gt;(obs$x, obs$y, &lt;span class=&quot;dt&quot;&gt;kernel=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;rbfdot&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;kpar=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;sigma=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;/(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*l^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;fit=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;scaled=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;var=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;)
y_p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;predict&lt;/span&gt;(gp, X)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Things that should be equivelent but aren’t quite:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;X, &lt;span class=&quot;dt&quot;&gt;Ef=&lt;/span&gt;Ef, &lt;span class=&quot;dt&quot;&gt;Y=&lt;/span&gt;Y, &lt;span class=&quot;dt&quot;&gt;y_p =&lt;/span&gt; y_p))+&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,Ef), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;red&amp;#39;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,Y)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x,y_p))&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8391/8589945615_b107599da4_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-8&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;        [,1]
[1,] -1.4059
[2,]  0.5010
[3,]  0.1288
[4,]  1.2275
[5,] -0.7119&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;alpha&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] -1.21293  0.46074  0.07548  1.44144 -0.73949&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;alpha&lt;/span&gt;(gp)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;        [,1]
[1,] -1.2475
[2,]  0.4011
[3,]  0.1661
[4,]  1.1010
[5,] -0.6394&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/10/19/notes.html"/>
   <updated>2012-10-19T00:00:00+00:00</updated>
   <id>/10/19/notes</id>
   <content type="html">&lt;h2 id=&quot;semantic-notebook-notes&quot;&gt;Semantic Notebook notes&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Reading&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nice &lt;a href=&quot;http://scholarlyhtml.org/faq/&quot;&gt;collection of posts on scholarly html&lt;/a&gt;, but too little mention of the serious linked data stuff coming out of biscol, ievobio/nescent, etc. In particular, Martin’s [history] (http://blogs.plos.org/mfenner/2011/03/19/a-very-brief-history-of-scholarly-html/) gives some nice perspective.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The war for schema. Which ontologies should we choose? (e.g. &lt;a href=&quot;http://blogs.plos.org/mfenner/2011/06/07/schema-org-for-scholarly-html/&quot;&gt;schema.org’s take&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Puzzles&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How do we &lt;a href=&quot;http://stackoverflow.com/questions/12983766&quot;&gt;mix ontologies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;How do we meet &lt;a href=&quot;http://answers.semanticweb.com/questions/19200/satisfy-google-rich-snippets-person-standard-using-foaf&quot;&gt;Google Rich Snippets requirements using FOAF?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;How do we &lt;a href=&quot;http://answers.semanticweb.com/questions/19275/what-to-do-about-redundant-rdfa-or-machines-that-speak-only-one-language&quot;&gt;avoid redundant vocabulary terms?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Basically we can do this using implicit reasoning (exploiting the logic of linked data), but we may prefer to be explict. &lt;a href=&quot;http://vimeo.com/28667500&quot;&gt;This video&lt;/a&gt; does a nice job of explaining these concepts. Basically, if we do this right, we should be able to “dereference” an object away from a particular ontology.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On &lt;a href=&quot;http://manu.sporny.org/2011/false-choice/&quot;&gt;the good &amp;amp; the bad of schema.org and the role of search giants&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;resources&quot;&gt;Resources&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://getschema.org/rdfaliteextractor/about&quot;&gt;rdfa extractor&lt;/a&gt; (into RDF, JSON, n3). Also has validator, but doesn’t point to the &lt;code&gt;nu&lt;/code&gt; variant for html5.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://rdfa.info/play/&quot;&gt;RDFa Play&lt;/a&gt;. Wow, very nice.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sameas.org&quot;&gt;sameAs.org&lt;/a&gt; - search onotologies for an existing term, identify identical terms in different ontologies, etc. Simply brilliant, what I’ve always wanted!&lt;/li&gt;
&lt;li&gt;Still not clear on rdfa vs html5. Why in the world should &lt;code&gt;dc:title&lt;/code&gt; be preferable to &lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt; ?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;knitcitations-update-adding-formats-an-semantics.&quot;&gt;knitcitations update: adding formats an semantics.&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Looking at citeproc / &lt;a href=&quot;http://citationstyles.org/&quot;&gt;CSL&lt;/a&gt; &lt;a href=&quot;https://github.com/citation-style-language&quot;&gt;github page&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Raw citeproc is an XML stylesheet, XSLT, which can render XML into HTML (and much more). Possible other options are using something like citeproc-js or citeproc-ruby, or writing citeproc-R.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Not quite clear how to take a CSL and a set of references and generate HTML; aforementioned packages may address this.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;For the moment, probably easier to convert R &lt;code&gt;bibitem&lt;/code&gt; to display with RDFa with scholarlyhtml recommended ontology than to enter raw XML reference and format via citeproc. Should also support adding in the cito tags. With full addresses in property, should be able to avoid any need for namespace/header modifications.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/10/17/talkingpoints.html"/>
   <updated>2012-10-17T00:00:00+00:00</updated>
   <id>/10/17/talkingpoints</id>
   <content type="html">&lt;h2 id=&quot;talking-points&quot;&gt;Talking points&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;for phone interview with Lucy&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Finding warning signals in the wild&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gold standard – experimental group, control group&lt;/li&gt;
&lt;li&gt;Real world: We have no control group.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Would we know a warning signal when we saw it?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;From statistics to models: We fit a generalized models of the processes that &lt;em&gt;are&lt;/em&gt; and &lt;em&gt;aren’t&lt;/em&gt; approaching a tipping point, and compare the models. The modeling approach is also more sensitive than the simple statistics.&lt;/p&gt;
&lt;p&gt;In another recent paper we consider the alternative ground-truth approach – historical data. There’s a problem in using historical data though, which is a bit subtle. It has tricked juries, confounded medical doctors, and confused scientists. We call it the Prosecutor’s fallacy (Thompson &amp;amp; Schumann 87). We need the probability the “accused pattern” is “innocent” of heading for a critical transition, given the data. We calculate instead the probability of data, given that pattern is innocent, is small. By itself, that is not enough to “convict” our data of being a warning signal.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Critical transitions in networks vs early warning signals – more must be done to map the connections.&lt;/li&gt;
&lt;li&gt;Be careful not to mistate generality – we know systems can collapse without transition, and warning signals can be seen without transitions&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Basic regression in Gaussian processes</title>
	 <link href="/2012/10/17/basic-regression-in-gaussian-processes.html"/>
   <updated>2012-10-17T00:00:00+00:00</updated>
   <id>/10/17/basic-regression-in-gaussian-processes</id>
   <content type="html">&lt;p&gt;Working out coded examples for basic Gaussian process regression using R. I’ve just read through the first few chapters of &lt;a href=&quot;http://www.GaussianProcess.org/gpml&quot;&gt;Rasmussen &amp;amp; Williams (2006)&lt;/a&gt;, this implements the examples discussed in Chapter 2.1-2.5.&lt;/p&gt;
&lt;!-- Also motivated by [James Keirstead](http://www.jameskeirstead.ca/r/gaussian-process-regression-with-r/), with cleaner code.  --&gt;
&lt;p&gt;Required R libraries (for multivariate normal, also for plotting):&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(MASS)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Set a seed for repeatable plots&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;12345&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Define the points at which we want to compute the function values (x values of the prediction points or test points), and the scale parameter for the covariance function &lt;span class=&quot;math&quot;&gt;\(\ell=1\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_predict &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;dt&quot;&gt;len=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;)
l &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will use the squared exponential (also called radial basis or Gaussian, though it is not this that gives Gaussian process it’s name; any covariance function would do) as the covariance function, &lt;span class=&quot;math&quot;&gt;\(\operatorname{cov}(X_i, X_j) = \exp\left(-\frac{(X_i - X_j)^2}{2 \ell ^ 2}\right)\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SE &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(Xi,Xj, l) &lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(Xi -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Xj) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;l ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
cov &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, Y) &lt;span class=&quot;kw&quot;&gt;outer&lt;/span&gt;(X, Y, SE, l)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;COV &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, x_predict)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Generate a number of functions from the process&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;values &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mvrnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x_predict)), COV)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reshape the data into long (tidy) form, listing x value, y value, and sample number&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict, &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(values))
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(dat)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;       x variable   value
1 -5.000       X1 -0.6450
2 -4.796       X1 -0.9227
3 -4.592       X1 -1.1587
4 -4.388       X1 -1.3277
5 -4.184       X1 -1.4139
6 -3.980       X1 -1.4103&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot the result&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;fig2a &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;value)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_rect&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;xmin=&lt;/span&gt;-&lt;span class=&quot;ot&quot;&gt;Inf&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xmax=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;Inf&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;theme_bw&lt;/span&gt;() +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_y_continuous&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;lim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;output, f(x)&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;input, x&amp;quot;&lt;/span&gt;)
fig2a&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8377/8591045456_0f9f7191d5_o.png&quot; alt=&quot;plot of draws from the null distribution&quot; /&gt;&lt;figcaption&gt;plot of draws from the null distribution&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;posterior-distribution-given-the-data&quot;&gt;Posterior distribution given the data&lt;/h3&gt;
&lt;p&gt;Imagine we have some data,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;obs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;),
                  &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In general we aren’t interested in drawing from the prior, but want to include information from the data as well. We want the joint distribution of the observed values and the prior is:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[\begin{pmatrix} y_{\textrm{obs}} \\ y_{\textrm{pred}} \end{pmatrix} \sim \mathcal{N}\left( \mathbf{0}, \begin{bmatrix} cov(X_o,X_o) &amp;amp; cov(X_o, X_p) \\ cov(X_p,X_o) &amp;amp; cov(X_p, X_p) \end{bmatrix} \right)\]&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;no-observation-noise&quot;&gt;No observation noise&lt;/h2&gt;
&lt;p&gt;Assuming the data are known without error and conditioning on the data, and given &lt;span class=&quot;math&quot;&gt;\(x \sim \mathcal{N}(0, cov(X_o, X_o))\)&lt;/span&gt;, then the conditional probability of observing our data is easily solved by exploiting the nice properties of Gaussians,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[x|y \sim \mathcal{N}\left(E,C\right)\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[E = cov(X_p, X_o) cov(X_o,X_o)^{-1} y\]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[C= cov(X_p, X_p) - cov(X_p, X_o) cov(X_o,X_o)^{-1} cov(X_o, X_p) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(We use &lt;code&gt;solve(M)&lt;/code&gt; which with no second argument will simply invert the matrix &lt;code&gt;M&lt;/code&gt;, but should use the Cholsky decomposition instead for better numerical stability)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;cov_xx_inv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, obs$x))
Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y
Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, x_predict) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x)  %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, x_predict)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now lets take 3 random samples from the posterior distribution,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;values &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mvrnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, Ef, Cf)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and plot our solution (mean, 2 standard deviations, and the ranom samples.)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict, &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(values))
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)

fig2b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;value)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;, 
              &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;Ef, &lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;(Ef&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf))), &lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;(Ef&lt;span class=&quot;dv&quot;&gt;+2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf)))),
              &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#REPLICATES&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;Ef), &lt;span class=&quot;dt&quot;&gt;size=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#MEAN&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;obs,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;y)) +&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#OBSERVED DATA&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_y_continuous&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;lim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;output, f(x)&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;input, x&amp;quot;&lt;/span&gt;)
fig2b&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8237/8591045344_918138a53a_o.png&quot; alt=&quot;plot of draws from the posterior, with no proces noise&quot; /&gt;&lt;figcaption&gt;plot of draws from the posterior, with no proces noise&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;additive-noise&quot;&gt;Additive noise&lt;/h2&gt;
&lt;p&gt;In general the model may have process error, and rather than observe the deterministic map &lt;span class=&quot;math&quot;&gt;\(f(x)\)&lt;/span&gt; we only observe &lt;span class=&quot;math&quot;&gt;\(y = f(x) + \varepsilon\)&lt;/span&gt;. Let us assume for the moment that &lt;span class=&quot;math&quot;&gt;\(\varepsilon\)&lt;/span&gt; are independent, normally distributed random variables with variance &lt;span class=&quot;math&quot;&gt;\(\sigma_n^2\)&lt;/span&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma.n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;
cov_xx_inv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;solve&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, obs$x) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma.n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(obs$x)))
Ef &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x) %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;obs$y
Cf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, x_predict) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(x_predict, obs$x)  %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;cov_xx_inv %*%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cov&lt;/span&gt;(obs$x, x_predict)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now lets take 3 random samples from the posterior distribution,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;values &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mvrnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, Ef, Cf)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and plot&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict, &lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(values))
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(dat, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;)

fig2c &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;value)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;, 
              &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict, &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;Ef, &lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;(Ef&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf))), &lt;span class=&quot;dt&quot;&gt;ymax=&lt;/span&gt;(Ef&lt;span class=&quot;dv&quot;&gt;+2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;diag&lt;/span&gt;(Cf)))),
              &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;grey80&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;# Var&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#REPLICATES&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;NULL&lt;/span&gt;,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x_predict,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;Ef), &lt;span class=&quot;dt&quot;&gt;size=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#MEAN&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;obs,&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;x,&lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;y)) +&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;#OBSERVED DATA&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_y_continuous&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;lim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;output, f(x)&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;input, x&amp;quot;&lt;/span&gt;)
fig2c&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8380/8589945565_174d4ac88a_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-16&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-16&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Note that unlike the previous case, the posterior no longer collapses completely around the neighborhood of the test points.&lt;/p&gt;
&lt;p&gt;We can also compute the likelihood (and marginal likelihood over the prior) of the data directly from the inferred multivariate normal distribution, which can allow us to tune the hyperparameters such as the characteristic length scale &lt;span class=&quot;math&quot;&gt;\(\ell\)&lt;/span&gt; and the observation noise &lt;span class=&quot;math&quot;&gt;\(\sigma_n\)&lt;/span&gt;. The most obvious approach would be to do so by maximum likelihood, giving point estimates of the hyper-parameters, though presumably we could be Bayesian about these as well.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Gaussian processes</title>
	 <link href="/2012/10/16/gaussian-processes.html"/>
   <updated>2012-10-16T00:00:00+00:00</updated>
   <id>/10/16/gaussian-processes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Great methods tutorial/overview with Steve. Now getting up to speed on background reading in both Gaussian processes and embedding dimensions.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Will also want to look into basis approximations for SDP acceleration.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;gaussian-processes&quot;&gt;Gaussian Processes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;New project, New tag: nonparametric-bayes, and &lt;a href=&quot;https://github.com/cboettig/nonparametric-bayes&quot;&gt;associated github repostitory&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Rasmussen &amp;amp; Williams (2006) 2nd ed, &lt;a href=&quot;http://www.GaussianProcess.org/gpml&quot;&gt;full text avialable online&lt;/a&gt;. read Ch 1 &amp;amp; 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Can be thought of as a Bayesian version of Support Vector Machines&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Who knew? Working through basic regression scenarios.&lt;/p&gt;
&lt;p&gt;Also reading:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Deisenroth, M. P., Rasmussen, C. E., &amp;amp; Peters, J. (2009). Gaussian process dynamic programming. Neurocomputing, 72(7-9), 1508-1524. doi:10.1016/j.neucom.2008.12.019&lt;/li&gt;
&lt;li&gt;Kocijan, J., &amp;amp; Girard, A. (2005). Dynamic systems identification with Gaussian processes. … of Dynamical Systems. doi:10.1080/13873950500068567&lt;/li&gt;
&lt;li&gt;Turner, R. (2010). State-space inference and learning with Gaussian processes. Proceedings of 13th …, 868-875.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;r-support&quot;&gt;R support:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://rss.acs.unt.edu/Rdoc/library/kernlab/html/gausspr.html&quot;&gt;gausspr&lt;/a&gt;, see also the &lt;a href=&quot;http://cran.at.r-project.org/web/packages/kernlab/vignettes/kernlab.pdf&quot;&gt;package vignette&lt;/a&gt; (From the core team, probably a reasonable starting point).&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/gptk/&quot;&gt;gptk&lt;/a&gt; (crude choice, poor software development practices)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/mlegp/vignettes/mlegp.pdf&quot;&gt;mlegp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.r-bloggers.com/gaussian-process-regression-with-r/&quot;&gt;manually&lt;/a&gt; (e.g. for learning rather than performance)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;embedding-dimensions&quot;&gt;Embedding dimensions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Takens&amp;#39;_theorem&quot;&gt;Taken’s Theorem&lt;/a&gt; But how about the stochastic case?&lt;/li&gt;
&lt;li&gt;Convergent cross-mapping paper, &lt;a href=&quot;http://dx.doi.org/10.1126/science.1227079&quot;&gt;Sugihara et al. 2012&lt;/a&gt;, recently in &lt;em&gt;Science&lt;/em&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Stochastic Takens: perhaps see &lt;a href=&quot;http://www.ucl.ac.uk/cnda/about/papers/Random_Embed.pdf&quot;&gt;Stark et al 2003&lt;/a&gt;, doi:10.1007/s00332-003-0534-4&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci&quot;&gt;rOpenSci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Checked &lt;code&gt;ritis&lt;/code&gt;, Scott submitted to CRAN&lt;/li&gt;
&lt;li&gt;More requests for increased functionality on &lt;code&gt;rfishbase&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Contact with Roy about developing an API for FishBase. Contacted Deng&lt;/li&gt;
&lt;li&gt;&lt;code&gt;httr&lt;/code&gt; 0.2 is on CRAN! Updated &lt;code&gt;rfigshare&lt;/code&gt; dependency, plan to release soon.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook&quot;&gt;Notebook&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Contacted Ben about documentation and use of EML.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Posted updated semantic notebook&lt;/li&gt;
&lt;li&gt;Hmm, FOAF person types don’t seem to contain enough data to be valid Person objects according to Google Rich Snippets. Unfortunately this cannot be easily solved by &lt;a href=&quot;http://answers.semanticweb.com/questions/19200&quot;&gt;mixing “Person” types&lt;/a&gt;. Note that &lt;a href=&quot;http://answers.semanticweb.com/questions/3667/can-dctermsrightsholder-be-used-with-foafperson&quot;&gt;Dublin Core and FOAF agree&lt;/a&gt; on what a person/agent is, but it seems data-vocabulary.org rdf does not?&lt;/li&gt;
&lt;li&gt;Tools for discovery and navigating ontologies? http://www.ebi.ac.uk/ontology-lookup/&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Semantic Lab Notebook</title>
	 <link href="/2012/10/14/semantic-lab-notebook.html"/>
   <updated>2012-10-14T00:00:00+00:00</updated>
   <id>/10/14/semantic-lab-notebook</id>
   <content type="html">&lt;p&gt;As the lab notebook grows, to make the maximum use of content it would be particularly useful to maximize the ability for a computer to understand the content, allowing us to identify, manipulate, and connect data using scripts and software. This is the concept of &lt;em&gt;linked data&lt;/em&gt;, or a &lt;em&gt;semantic notebook&lt;/em&gt;. I have explored this this idea before in the context of a &lt;a href=&quot;2011/05/08/building-a-semantic-notebook.html&quot;&gt;wordpress-based platform&lt;/a&gt;, but now that Jekyll has let me strip away some of the abstraction of Wordpress it seems a good time to revisit this idea.&lt;/p&gt;
&lt;h2 id=&quot;semantics-in-html5&quot;&gt;Semantics in HTML5&lt;/h2&gt;
&lt;p&gt;Already the notebook is written in HTML5, which has considerable semantic structure compared to it’s predecessors. HTML5 introduces the structural elements&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;nav&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;header&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;article&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;section&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;aside&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;footer&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;that intuitively define the organization of an page, setting off the important content from the window-dressing. HTML5 also defines inline elements &lt;code&gt;&amp;lt;time&amp;gt;&lt;/code&gt; (see the links in Caveats), and &lt;code&gt;&amp;lt;mark&amp;gt;&lt;/code&gt;, and the existing tags for metadata, which let us specify &lt;code&gt;&amp;lt;title&amp;gt;&lt;/code&gt;, and basic &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; tags for metadata such as author, &lt;code&gt;&amp;lt;meta name=&amp;quot;author&amp;quot; content=&amp;quot;Author Name&amp;quot;&amp;gt;&lt;/code&gt;, encoding, description, and keywords. Links &lt;code&gt;&amp;lt;link&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; use the &lt;code&gt;rel&lt;/code&gt; attribute to describe the link target. Though one can write anything at all in this text, HTML5 defines a small vocabulary with recognized meaning, some old, some new, such as &lt;code&gt;&amp;lt;a rel=&amp;quot;tag&amp;quot;&lt;/code&gt;, &lt;code&gt;rel=&amp;quot;license&amp;quot;&lt;/code&gt; as well as the older &lt;code&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;style.css&amp;quot;&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;a rel=&amp;quot;nofollow&amp;quot;&lt;/code&gt;. &lt;a href=&quot;http://diveintohtml5.info/semantics.html&quot;&gt;Here is a great overview of the semantics in HTML5&lt;/a&gt;, with a bit more about the available . To expand our vocabulary beyond these elements, however, we will need more tools.&lt;/p&gt;
&lt;h2 id=&quot;linked-data&quot;&gt;Linked Data&lt;/h2&gt;
&lt;p&gt;W3C confusingly provides two standards for formally defining semantic content using an external vocabulary or ontology. The first is microdata, introduced as a simpler alternative to the second, RDFa, an HTML-adaptation of the RDF XML standard (originally developed for the now-defunct XHTML 2.0).&lt;/p&gt;
&lt;h3 id=&quot;microdata&quot;&gt;Microdata&lt;/h3&gt;
&lt;p&gt;Microdata introduces new attributes into HTML tags like &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;span&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt;. The first of these is &lt;code&gt;itemtype&lt;/code&gt;, which points to an external resource such as schema.org to define the vocabulary. To have this vocabulary apply to child elements, we just add the attribute &lt;code&gt;itemscope&lt;/code&gt;. Then we can set the value of attribute &lt;code&gt;itemprop&lt;/code&gt; in this or following elements to give it semantically defined meaning, such as&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; itemscope itemtype=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://data-vocabulary.org/Person&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;h1&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; itemprop=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Carl Boettiger&lt;span class=&quot;kw&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; itemprop=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;url&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;http://carlboettiger.info&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;img&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; itemprop=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;photo&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;https://en.gravatar.com/userimage/12904315/7edea703b826fbbe07f2ae4d95b8416b.jpg?16&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;where the terms such as &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;url&lt;/code&gt; have precise meanings attached to “Person”, as specified at the “http://data-vocabulary.org/Address”. This ability to point to an external vocabulary is really the key concept of linked data. In the spirit of HTML5, microdata is much simpler than RDFa, but also more limited. &lt;a href=&quot;http://manu.sporny.org/2011/uber-comparison-rdfa-md-uf/&quot;&gt;Here is an excellent comparison&lt;/a&gt;, but for our purposes we will use RDFa as it is more common in academic use and will more seamlessly allow us to use academic ontologies. (While microdata has a clear mapping to RDF, it is not clear that any ontology that can be expressed in RDF can also be expressed in microdata).&lt;/p&gt;
&lt;h3 id=&quot;rdfa&quot;&gt;RDFa&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/xhtml-rdfa-primer/&quot;&gt;RDFa&lt;/a&gt; can be written in a very similar manner. The &lt;code&gt;itemprop&lt;/code&gt; attribute is replaced by the &lt;code&gt;property&lt;/code&gt; attribute, and &lt;code&gt;vocab&lt;/code&gt; replaces &lt;code&gt;itemtype&lt;/code&gt; and automatically implies &lt;code&gt;itemscope&lt;/code&gt; to child nodes.&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; vocab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://xmlns.com/foaf/0.1/&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; typeof=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Person&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;h1&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;Carl Boettiger&lt;span class=&quot;kw&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;homepage&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.carlboettiger.info&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;http://carlboettiger.info&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;img&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; property=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;depiction&amp;quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;https://en.gravatar.com/userimage/12904315/7edea703b826fbbe07f2ae4d95b8416b.jpg?16&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We could have used only the &lt;code&gt;property&lt;/code&gt; attribute along with the complete URI to the term definition instead of this structure. &lt;code&gt;typeof&lt;/code&gt; indicates that the child elements are all of the same type (in this case, all belong to the same “Person”). If we were omitting &lt;code&gt;vocab&lt;/code&gt; and writing out all URIs, we would have had &lt;code&gt;&amp;lt;div typeof=&amp;quot;http://xmlns.com/foaf/0.1/Person&amp;quot;&amp;gt;&lt;/code&gt; as well. In RDFa, we also have the &lt;code&gt;resource&lt;/code&gt; attribute, which allows us to specify a URI for the element being described. This could be a relative or absolute URL. If the object is a link, using &lt;code&gt;resource&lt;/code&gt; is not necessary, and the property is taken to describe the URL given in &lt;code&gt;href&lt;/code&gt; or &lt;code&gt;src&lt;/code&gt; rather than the anchor text.&lt;/p&gt;
&lt;p&gt;Two older options lie at either extreme: the most basic is the older technique of &lt;a href=&quot;http://microformats.org/wiki/html5&quot;&gt;microformatting&lt;/a&gt;, basically relying on standard &lt;code&gt;class&lt;/code&gt; and &lt;code&gt;rel&lt;/code&gt; attributes to convey semantic information. Simple and without new attributes, but probably too limited for our purposes so we won’t concern ourselves with it further. The other venerable approach is serve the page as XHTML, which renders in the browser in much the same way but can be parsed by a machine as XML, with all the power and extensibility that presents. Unlike earlier HTML standards, HTML5 is already valid XML (already “serialized”), so the same page can be served in either format (earlier specs were SGML, standardized general markup languages, of which XML is just a subset). To allow parsing of the HTML5 pages as either type (see &lt;a href=&quot;http://en.wikipedia.org/wiki/Polyglot_markup&quot;&gt;polyglot&lt;/a&gt;), we need only add the language and namespace to the opening &lt;code&gt;&amp;lt;html&amp;gt;&lt;/code&gt; tag,&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;html lang=&amp;quot;en&amp;quot; xmlns=&amp;quot;http://www.w3.org/1999/xhtml&amp;quot; xml:lang=&amp;quot;en&amp;quot;&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;caveats&quot;&gt;Caveats&lt;/h3&gt;
&lt;p&gt;An essential caveat is that these are all new approaches which may not render well in legacy browsers, particularly Windows Internet Explorer. Some of these, like recognizing and styling the HTML5 semantic elements in IE, can be addressed in CSS, for which Twitter Bootstrap does a decent job. Another caveat The HTML5 spec has not been finalized, and some things are still in flux, as the &lt;a href=&quot;http://html5doctor.com/time-and-data-element/&quot;&gt;removal&lt;/a&gt; and &lt;a href=&quot;http://www.brucelawson.co.uk/2012/best-of-time/&quot;&gt;reinstatement&lt;/a&gt; of the &lt;code&gt;&amp;lt;time&amp;gt;&lt;/code&gt; element illustrates.&lt;/p&gt;
&lt;h3 id=&quot;useful-tools-for-checking-implementation&quot;&gt;Useful tools for checking implementation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://validator.w3.org/nu&quot;&gt;W3C HTML5 Validator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.google.com/webmasters/tools/richsnippets&quot;&gt;Google rich snippets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sparql.captsolo.net/browser/browser.py?url=http://www.w3.org/2007/08/pyRdfa/extract?uri=http://www.carlboettiger.info&quot;&gt;RDF extraction tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;scholarly-semantic-markup-for-the-notebook&quot;&gt;Scholarly Semantic Markup for the Notebook&lt;/h1&gt;
&lt;p&gt;Now that we’ve familiarized ourselves with the options, it’s time to see what semantic content we can implement.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;Content/Data&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;Example types&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;Links to Potential vocabularies&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Page structure&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;&amp;lt;header&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://diveintohtml5.info/semantics.html&quot;&gt;HTML5&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Post metadata&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;keywords, timestamps&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://schema.org/BlogPosting&quot;&gt;Schema.org microdata&lt;/a&gt; or &lt;a href=&quot;http://purl.org/terms/dc&quot;&gt;Dublin Core&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Author metadata&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Name, contact, networks,&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://xmlns.com/foaf/0.1/&quot;&gt;FOAF&lt;/a&gt;, &lt;a href=&quot;http://purl.org/terms/dc&quot;&gt;Dublin Core&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;interests, publications)&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Licenses&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;CC0&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://creativecommons.org/ns&quot;&gt;CreativeCommons&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Citations&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bib info, reason for citing&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://purl.org/spar/cito&quot;&gt;CiTO&lt;/a&gt;, &lt;a href=&quot;http://purl.org/spar/biro&quot;&gt;BiRO&lt;/a&gt;,&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://purl.org/ontologies/bibo&quot;&gt;bibo&lt;/a&gt;, &lt;a href=&quot;http://purl.org/terms/dc&quot;&gt;Dublin Core&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Taxonomic data&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;species names&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://rs.tdwg.org/dwc/terms/index.htm&quot;&gt;Darwin Core&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Ecological data&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;measurements, units, etc&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;del&gt;&lt;a href=&quot;http://knb.ecoinformatics.org/software/eml/&quot;&gt;EML&lt;/a&gt;&lt;/del&gt; &lt;a href=&quot;http://ecoinformatics.org/oboe/oboe.1.0/oboe-core.owl&quot;&gt;OBOE&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;In another entry I will try and highlight where and what semantic content I have added (work in progress), with examples of each vocabulary. The first four types are relatively static content that can be easily woven into the Jekyll template files. Using Jekyll &amp;amp; Liquid to pull in template information from the &lt;code&gt;_config.yaml&lt;/code&gt; should help avoid repetitive entry and make updating the linked data easier. The last three are entry-specific content, and will be more challenging. I hope to add semantic support to &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt;, including the option for CiTO types, which should make entry of citation data quick and easy (&lt;a href=&quot;http://stackoverflow.com/questions/12867586&quot;&gt;SO question illustrating semantic citation&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;The last two are much richer, specific vocabularies. For the moment, it might be best to use these to give more precise meaning to tags, which are already used as metadata on posts. This would allow posts to be still created in simple markdown without the burden of adding in lines of RDFa and cluttering the markup. Meanwhile full datasets provided in EML are likely to live as separate files, rather than as a random table in the middle of a notebook entry.&lt;/p&gt;
&lt;p&gt;As always, feedback, corrections or suggestions are appreciated!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title></title>
	 <link href="/2012/10/11/notes.html"/>
   <updated>2012-10-11T00:00:00+00:00</updated>
   <id>/10/11/notes</id>
   <content type="html">&lt;h2 id=&quot;ews-review&quot;&gt;EWS review&lt;/h2&gt;
&lt;p&gt;Composing a simple EWS review highlighting where signals are and are not expected and what this means for the system dynamics. With Alan and Noam. See manuscript repository, &lt;a href=&quot;https://github.com/cboettig/ews-review&quot;&gt;cboettig/ews-review&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;pdg-control&quot;&gt;pdg control&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Does the matrix formulation fail to account for the treating profits as a function of realized harvest and true stock size rather than quota and measured size?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;notebook&quot;&gt;notebook&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fixing some inline equations &lt;a href=&quot;https://github.com/cboettig/labnotebook/commit/262b8d284b34162780ab5e62402a2763aa4e6a09&quot;&gt;04:34 pm 2012/10/09&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Updated Readme &lt;a href=&quot;https://github.com/cboettig/labnotebook/commit/789ba68b31a87e2427a67bab58312de162e9bc96&quot;&gt;02:57 pm 2012/10/09&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;scicomp-discussions-on-reproducibility&quot;&gt;scicomp discussions on reproducibility&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Asked about &lt;a href=&quot;http://scicomp.stackexchange.com/questions/3462/increasing-the-archival-longevity-of-code&quot;&gt;longevity of code&lt;/a&gt; (re: data managment plan)&lt;/li&gt;
&lt;li&gt;Replied to best practices for &lt;a href=&quot;http://scicomp.stackexchange.com/questions/661/how-to-link-code-to-publications/3463#3463&quot;&gt;linking code to publications&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;discussionstweets&quot;&gt;discussions/tweets&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt; &lt;span class=&quot;citation&quot; data-cites=&quot;mwpennell&quot;&gt;@mwpennell&lt;/span&gt; thanks - I always find it tricky to explain conditional probabilities clearly, so that’s nice to hear&lt;img src=&quot;http://twitter.com/cboettig/statuses/256208169267785731&quot; alt=&quot;06:42 2012/10/10&quot; /&gt;&lt;/li&gt;
&lt;li&gt;Nice paper by +Matt Pennell, Saver &amp;amp;&lt;span class=&quot;citation&quot; data-cites=&quot;lukejharmon&quot;&gt;@lukejharmon&lt;/span&gt; on biases in inferring early bursts of evolution. http://t.co/ltRAQcCM&lt;a href=&quot;http://twitter.com/cboettig/statuses/256119709290860546&quot;&gt;12:51 2012/10/10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;figshare&quot;&gt;@figshare&lt;/span&gt; thoughts on supporting code and relevant licenses? http://t.co/042Zreni&lt;a href=&quot;http://twitter.com/cboettig/statuses/256096537367674880&quot;&gt;11:19 2012/10/10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;my answer to: How to link code to publications http://t.co/9bsazYSj&lt;a href=&quot;http://twitter.com/cboettig/statuses/256080435346546688&quot;&gt;10:15 2012/10/10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Know any tips for increasing the archival longevity of scientific code? http://t.co/PPdzsxfK&lt;a href=&quot;http://twitter.com/cboettig/statuses/256068512227926016&quot;&gt;09:27 2012/10/10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Thanks! RT &lt;span class=&quot;citation&quot; data-cites=&quot;noamross&quot;&gt;@noamross&lt;/span&gt; Out now in PRSB: Early warning signals and the prosecutor’s fallacy, by &lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt; &amp;amp; Alan Hastings http://t.co/dAq6tlmC&lt;a href=&quot;http://twitter.com/cboettig/statuses/256067344357548032&quot;&gt;09:23 2012/10/10&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>My Prosecutor's Fallacy paper and other recent warning signals literature</title>
	 <link href="/2012/10/10/prosecutors-fallacy.html"/>
   <updated>2012-10-10T00:00:00+00:00</updated>
   <id>/10/10/prosecutors-fallacy</id>
   <content type="html">&lt;p&gt;My recent paper with Alan Hastings, “Early warning signals and the prosecutor’s fallacy”, is now &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot;&gt;out in PRSB&lt;/a&gt;. An open access preprint can be found on the (&lt;a href=&quot;http://arxiv.org/abs/1210.1204&quot;&gt;arXiv&lt;/a&gt;) and accompanying (&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/prosecutor/inst/examples/fallacy.md&quot;&gt;source code&lt;/a&gt;) for the analysis can be found on Github.&lt;/p&gt;
&lt;h2 id=&quot;recent-papers-in-early-warning-signals&quot;&gt;Recent papers in early warning signals&lt;/h2&gt;
&lt;p&gt;This invistigation is in a very similar spirit to two other recent papers on the subject. Kéfi et al. addresses a different kind of false positive for early warning signals, arising in systems approaching other transitions or bifurcations than the intended culprit, the saddle-node bifurcation. Peretti and Munch address the flip side, in which detection fails when it should work due to commonly-observed levels of noise.&lt;/p&gt;
&lt;p&gt;Model-based approaches are clearly on the rise (following my own 2012 paper in PRSI and Lade and Gross 2012), with Brock and Carpenter (2012) putting forward a very similar model, and Ives &amp;amp; Dakos (2012) bringing in temporally heterogenous ARMA models.&lt;/p&gt;
&lt;p&gt;Unfortunately such model-based approaches are too new to make it into either of the recent review-like comparisons of existing approaches to a common set of simulated data (Dakos et al. 2012) or empirical data (Lindegren et al. 2012).&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Boettiger, C., &amp;amp; Hastings, A. (2012). Early warning signals and the prosecutor’s fallacy. Proceedings of the Royal Society B: Biological Sciences, (October). doi:10.1098/rspb.2012.2085&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Kéfi, S., Dakos, V., Scheffer, M., Van Nes, E. H., &amp;amp; Rietkerk, M. (2012). Early warning signals also precede non-catastrophic transitions. Oikos, (June), no-no. doi:10.1111/j.1600-0706.2012.20838.x&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Perretti, C. T., &amp;amp; Munch, S. B. (2012). Regime shift indicators fail under noise levels commonly observed in ecological systems. Ecological Applications, 22(6), 1772-1779. doi:10.1890/11-0161.1&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Boettiger, Carl, &amp;amp; Hastings, A. (2012). Quantifying limits to detection of early warning for critical transitions. Journal of The Royal Society Interface, 9(75), 2527 - 2539. doi:10.1098/rsif.2012.0125&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Lade, S. J., &amp;amp; Gross, T. (2012). Early Warning Signals for Critical Transitions: A Generalized Modeling Approach. (M. Pascual, Ed.)PLoS Computational Biology, 8(2), e1002360. doi:10.1371/journal.pcbi.1002360* Brock, W. A., &amp;amp; Carpenter, S. R. (2012). Early Warnings of Regime Shift When the Ecosystem Structure Is Unknown. (R. V. Solé, Ed.)PLoS ONE, 7(9), e45586. doi:10.1371/journal.pone.0045586&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ives, A., &amp;amp; Dakos, V. (2012). Detecting dynamical changes in nonlinear time series using locally linear state-space models. Ecosphere, 3(June). Retrieved from http://www.esajournals.org/doi/abs/10.1890/ES11-00347.1&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Dakos, V., Carpenter, S. R., Brock, W. a., Ellison, A. M., Guttal, V., Ives, A. R., Kéfi, S., et al. (2012). Methods for Detecting Early Warnings of Critical Transitions in Time Series Illustrated Using Simulated Ecological Data. (B. Yener, Ed.)PLoS ONE, 7(7), e41010. doi:10.1371/journal.pone.0041010&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Lindegren, M., Dakos, V., Gröger, J. P., Gårdmark, A., Kornilovs, G., Otto, S. a., &amp;amp; Möllmann, C. (2012). Early Detection of Ecosystem Regime Shifts: A Multiple Method Evaluation for Management Application. (S. Thrush, Ed.)PLoS ONE, 7(7), e38410. doi:10.1371/journal.pone.0038410&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Data Management Plan</title>
	 <link href="/2012/10/09/data-management-plan.html"/>
   <updated>2012-10-09T00:00:00+00:00</updated>
   <id>/10/09/data-management-plan</id>
   <content type="html">&lt;p&gt;Writing out a &lt;a href=&quot;#&quot; rel=&quot;http://purl.org/spar/fabio/DataMangementPlan&quot;&gt;data management plan&lt;/a&gt; for myself. Suggestions and feedback welcome.&lt;/p&gt;
&lt;h2 id=&quot;data-types-and-structure&quot;&gt;Data Types and Structure&lt;/h2&gt;
&lt;p&gt;All source code, documentation, scripts and data for the analyses performed in the course of this research shall be maintained in a digital compendium using the &lt;a href=&quot;http://cran.r-project.org/doc/manuals/R-exts.html#Package-structure&quot;&gt;R package structure&lt;/a&gt; as recommended in Gentleman and Lang (2007). The progress and results of this research shall be regularly chronicled in an electronic lab notebook, maintained openly at &lt;a href=&quot;http://www.carlboettiger.info/lab-notebook.html&quot;&gt;carlboettiger.info/lab-notebook.html&lt;/a&gt;. Figures and other results are maintained with the source-code required to reproduce them by writing these analyses using &lt;a href=&quot;http://yihui.name/knitr&quot;&gt;knitr&lt;/a&gt; dynamic documentation.&lt;/p&gt;
&lt;h2 id=&quot;data-acquisition-integrity-and-quality&quot;&gt;Data Acquisition, Integrity and Quality&lt;/h2&gt;
&lt;p&gt;The lab notebook is written and maintained in plain text (UTF-8) and rendered in HTML5. Likewise, the R package compendium will maintain all source code, scripts and documentation in plain-text (UTF-8) files. Plain-text files with standard encodings help retain compatibility independent of software. Both the notebook entries and the compendium will be maintained in unique &lt;a href=&quot;http://git-scm.com/&quot;&gt;git&lt;/a&gt; repositories.&lt;/p&gt;
&lt;p&gt;Git repositories use unique SHA hashes to protect against corruption. Synchronized backups of the git repositories are maintained on local and remote servers (RAID 6) to protect against hardware failures, as well as on the public international software repository, Github &lt;a href=&quot;https://github.com/cboettig&quot;&gt;github.com/cboettig&lt;/a&gt;. Version history preserves a time-line of changes and protects against user error.&lt;/p&gt;
&lt;p&gt;Archival copies of notebook entries shall be published annually to &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt; where they are assigned DOIs and preserved by the &lt;a href=&quot;http://www.clockss.org/clockss/Home&quot;&gt;CLOCKSS&lt;/a&gt; geopolitically distributed 12 node global archive. Likewise an archival copy of the R compendium shall be published to figshare at the time of each peer-reviewed publication.&lt;/p&gt;
&lt;p&gt;Any data produced by simulations used in these analyses will be archived accordingly in the compendium. Any data associated with a peer-reviewed publication will be deposited in plain text csv files in the &lt;a href=&quot;http://datadryad.org/&quot;&gt;Dryad digital repository&lt;/a&gt; for the biosciences, unless provided by a third party whose terms of use forbid this. No generation of empirical data is anticipated.&lt;/p&gt;
&lt;h2 id=&quot;rights-management-dissemination&quot;&gt;Rights Management &amp;amp; Dissemination&lt;/h2&gt;
&lt;p&gt;All products generated by this research will be licensed under permissive licenses supporting reuse, re-distribution, and derivatives for free for any purpose without request from a major online repository; Table 1.&lt;/p&gt;
&lt;table&gt;
&lt;caption&gt;Licenses reflect the &lt;a href=&quot;http://pantonprinciples.org/&quot;&gt;Panton Principles&lt;/a&gt; for open data and the &lt;a href=&quot;http://sciencecodemanifesto.org/&quot;&gt;Science Code Manifesto&lt;/a&gt;. Distribution uses internationally recognized and freely accessible public repositories best suited for the dissemination of each product.&lt;/caption&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;Product&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;License&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;Distribution&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;publications&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://creativecommons.org/licenses/by/3.0/&quot;&gt;cc-by&lt;/a&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://arxiv.org&quot;&gt;arXiv&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;software&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/BSD_licenses&quot;&gt;FreeBSD&lt;/a&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://github.com/cboettig&quot;&gt;Github&lt;/a&gt;, &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;data&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0/&quot;&gt;cc-zero&lt;/a&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://datadryad.org&quot;&gt;Dryad&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;research notebook&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0/&quot;&gt;cc-zero&lt;/a&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;http://github.com/cboettig/labnotebook&quot;&gt;Github&lt;/a&gt;, &lt;a href=&quot;http://figshare.com&quot;&gt;figshare&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Peer-reviewed publications will target preprint-friendly publishers and an author’s preprint will be posted on the arXiv under a Creative Commons Attribution license to facilitate access and distribution.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;p&gt;Gentleman R and Temple Lang D (2007). “Statistical Analyses And Reproducible Research.” &lt;em&gt;Journal of Computational And Graphical Statistics&lt;/em&gt;, &lt;em&gt;16&lt;/em&gt;. ISSN 1061-8600, doi: 10.1198/106186007X178663&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Automated feeds in notebook entries</title>
	 <link href="/2012/10/05/notes.html"/>
   <updated>2012-10-05T00:00:00+00:00</updated>
   <id>/10/05/notes</id>
   <content type="html">&lt;p&gt;Exploring the use of automated feeds in my notebook entries, which would make writing posts both faster and more complete. I had recently modified my Jekyll plugins to include commits on the day of the post. Consequently, I could add a bit of liquid code to any post, such as:&lt;/p&gt;
&lt;pre class=&quot;liquid&quot;&gt;&lt;code&gt;  {% octokit_commits pdg_control%}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(or even to the post template) and have the commit log for the specified repository automatically imported. While such liquid tags are very handy for pages that are otherwise static and generate their updated content on compile (e.g. my &lt;a href=&quot;lab-notebook.html&quot;&gt;lab-notebook homepage&lt;/a&gt;, this approach makes less sense for day-to-day entries (as Noam points out to me). For such entries, the content is already being composed from scratch, but is designed to be fixed once written. (In fact, that was one of the challenges in updating the plugin to pull in the commit log from the day of the post instead of the most recent updates to the repository). Generating this content for every post every time the site is build would be unnecessarily intensive, since it does not change. Further, I like to keep the post entries in pure markdown as much as possible. This makes the actual content not dependent on Jekyll (or on outside databases), which means the content displays fine by browsing the markdown, or using pandoc to compile to pdf or some other format.&lt;/p&gt;
&lt;p&gt;To get the same time-savings from automatic imports, I followed Noam’s suggestion and added a little wrapper around my ruby scripts that would import the text of a commit log using a few vi commands. vi, my editor of choice, makes calling arbitrary scripts really easy. In fact one can just write out the bash script command as a line on the editor, and hit &lt;code&gt;!!sh&lt;/code&gt;, which replaces the command with its output. So for this purpose I just type the command out into the entry like so,&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;   &lt;span class=&quot;kw&quot;&gt;commits.rb&lt;/span&gt; pdg_control today&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I get a listing the commits for that day (defaults to the current day if no day is given). Thanks to the &lt;code&gt;Chronic&lt;/code&gt; gem, the script recognizes a variety of &lt;a href=&quot;https://github.com/mojombo/chronic&quot;&gt;natural language commands&lt;/a&gt; for the time, such as “3 days ago”. This pulls in all commits made at any point on the day given. For more background, see my vim &lt;a href=&quot;http://stackoverflow.com/questions/12753302&quot;&gt;SO question&lt;/a&gt; to pass visual blocks to a function.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Solarized Colors with Twitter-Bootstrap?</title>
	 <link href="/2012/10/02/solarized-colors.html"/>
   <updated>2012-10-02T00:00:00+00:00</updated>
   <id>/10/02/solarized-colors</id>
   <content type="html">&lt;p&gt;Trying out rendering my notebook using Ethan Schoonover’s Solarized color scheme. The solarized palette has been selected according to Ethan’s exacting &lt;a href=&quot;http://ethanschoonover.com/solarized#features&quot;&gt;standards&lt;/a&gt; for contrast, symmetry, and readability.&lt;/p&gt;
&lt;p&gt;My site CSS is built with &lt;a href=&quot;http://twitter.github.com/bootstrap/&quot;&gt;Twitter-Bootstrap&lt;/a&gt;, which uses LESS to generate CSS files. Normal CSS is valid LESS code too, but doesn’t have the concept of a variable. So changing colors in CSS requires changing each and every occurance of some hex colorcode. LESS just lets you define the color as a variable, such as &lt;code&gt;@red: #dc322f;&lt;/code&gt; or &lt;code&gt;@background: #fdf6e3;&lt;/code&gt;, and then use &lt;code&gt;@red&lt;/code&gt; or &lt;code&gt;@background&lt;/code&gt; throughout the CSS. It helps you avoid repetition in lots of other ways too, but having variables was enough to get me going.&lt;/p&gt;
&lt;p&gt;I mapped all the twitter-bootstrap color variables to the 16-color Solarized palette in my &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/assets/less/variables.less&quot;&gt;variables.less&lt;/a&gt; file. I wanted the ability to render the site with either the dark or light background schemes, which required customizing quite a few of the other Twitter Bootstrap LESS files – it seems Bootstrap was build with exclusively light backgrounds in mind. Solarized accent colors are chosen to provide identical contrast on either background, but the base gray colors are slightly different for light and dark. The Solarized palette indicates which colors are designed for body text, comments and secondary text, background highlights, and optionally, for emphasized content, as described in the &lt;a href=&quot;http://ethanschoonover.com/solarized#usage-development&quot;&gt;usage and development documentation&lt;/a&gt;. Overall it’s nice to have a new look to the site, but it has raised a couple questions on which I’d be happy to hear more opinions.&lt;/p&gt;
&lt;h2 id=&quot;questions&quot;&gt;Questions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Links in blue? yellow? Or a more subtle base color?&lt;/li&gt;
&lt;li&gt;Light or dark background prefered?&lt;/li&gt;
&lt;li&gt;Should code blocks be rendered in the inverse background scheme, or a matching one?&lt;/li&gt;
&lt;li&gt;Do the navbar colors work? should they come from the inverse scheme?&lt;/li&gt;
&lt;li&gt;Would a stronger contrast in colors be more readable?&lt;/li&gt;
&lt;li&gt;other reactions?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here are a few screenshots in the different themes, varying the codeblock colors as well:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8182/8049035809_cbd35a6a8f_n.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8455/8049041504_ef37c20a8d_n.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8311/8049041556_c6c454b7b1_n.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8315/8049041400_8de7a9ba94_n.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;challenges&quot;&gt;Challenges&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;My black icons in the footer and lab-notebook homepage do not render well in the dark theme.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Button text doesn’t render well in the dark theme&lt;/li&gt;
&lt;li&gt;My flickr-hosted figures render with a white background even if I generate transparent-background pngs, since flickr converts them to jpg.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;updates&quot;&gt;Updates&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I have added a little javascript to allow the user to toggle the theme between dark and light (see &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/assets/js/switch-css.js&quot;&gt;switch-css.js&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Multiple Uncertainty</title>
	 <link href="/2012/10/01/multiple-uncertainty.html"/>
   <updated>2012-10-01T00:00:00+00:00</updated>
   <id>/10/01/multiple-uncertainty</id>
   <content type="html">&lt;p&gt;Let&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;y&lt;/code&gt; be measured stock size, subject to measurement error from true stock &lt;code&gt;x&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;q&lt;/code&gt; be harvest quota, subject to implementation error from actual harvest, &lt;code&gt;h&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Stock next year is also subject to stochastic growth shock &lt;span class=&quot;math&quot;&gt;\(z_g\)&lt;/span&gt;, (note that &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; will also depend on the harvest, &lt;code&gt;h&lt;/code&gt;, unless &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; is taken as the escapement population, &lt;span class=&quot;math&quot;&gt;\(x-h\)&lt;/span&gt;).&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ x_{t+1} = z_g f(x_t) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In discrete space, let &lt;code&gt;X&lt;/code&gt; be a vector representing the probability distribution of having stock &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; at time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt;, restricted to some finite grid of dimension &lt;span class=&quot;math&quot;&gt;\(n\)&lt;/span&gt;. Let &lt;span class=&quot;math&quot;&gt;\(P_g(x | \mu, \sigma_g)\)&lt;/span&gt; be the probability density function of the shock &lt;span class=&quot;math&quot;&gt;\(z_g\)&lt;/span&gt; over states &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;, given parameter &lt;span class=&quot;math&quot;&gt;\(\sigma\)&lt;/span&gt; and mean &lt;span class=&quot;math&quot;&gt;\(\mu\)&lt;/span&gt;. We can write the distribution &lt;span class=&quot;math&quot;&gt;\(X_{t+1}\)&lt;/span&gt; as the result of a matrix-vector product, &lt;span class=&quot;math&quot;&gt;\(X_{t+1} = \mathbb{F} X_t\)&lt;/span&gt; where the elements of F are given by&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ F_{ij} = P_g(x_i, f(x_j), \sigma_g) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and &lt;span class=&quot;math&quot;&gt;\(\mathbb{F}\)&lt;/span&gt; is also a function of the harvest level, &lt;span class=&quot;math&quot;&gt;\(\mathbb{F_h}\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;When we consider measurement uncertainty, we allow the vector &lt;span class=&quot;math&quot;&gt;\(\vec Y\)&lt;/span&gt; to represent the measured stock size, and the true stock size &lt;span class=&quot;math&quot;&gt;\(\vec X\)&lt;/span&gt; is a random variable distributed around it. In the discrete space we may represent this as &lt;span class=&quot;math&quot;&gt;\(X = \mathbb{M} \vec Y\)&lt;/span&gt;, where &lt;span class=&quot;math&quot;&gt;\(M\)&lt;/span&gt; is an &lt;span class=&quot;math&quot;&gt;\(n\)&lt;/span&gt; by &lt;span class=&quot;math&quot;&gt;\(n\)&lt;/span&gt; grid representing the role of measurement uncertainty, &lt;span class=&quot;math&quot;&gt;\(M_{ij} = P_m(x_i, x_j, \sigma_m)\)&lt;/span&gt;. The state equation now evolves in belief space,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ Y_{t+1} = \mathbb{F}_h \mathbb{M} \vec Y_t \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If there is implementation uncertainty as well and &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; is a function of the escapement population (those remaining after a harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;), we can impliment this as an additional transition matrix &lt;span class=&quot;math&quot;&gt;\(I_{ij} = P_i(x_i, x_j-h, \sigma_i)\)&lt;/span&gt;, and the state equation becomes&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ Y_{t+1} = \mathbb{F} \mathbb{M} \mathbb{I}_h \vec Y_t \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Note that the implementation matrix is a function of the harvest level, so that we need a different matrix for each &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;, whether or not we introduce measurement uncertainty (instead of a different &lt;span class=&quot;math&quot;&gt;\(\mathbb{F}\)&lt;/span&gt; matrix for each harvest as before.)&lt;/p&gt;
&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;
&lt;p&gt;See github log&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Welcome to my Lab Notebook - Reloaded</title>
	 <link href="/2012/09/28/Welcome-to-my-lab-notebook.html"/>
   <updated>2012-09-28T00:00:00+00:00</updated>
   <id>/09/28/Welcome-to-my-lab-notebook</id>
   <content type="html">&lt;p&gt;Welcome to my lab notebook, version 3.0. My &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger/Notebook&quot;&gt;original open lab notebooks&lt;/a&gt; began on the wiki platform &lt;a href=&quot;http://openwetware.org&quot;&gt;OpenWetWare&lt;/a&gt;, moved to a personally hosted Wordpress platform, and now run on a Jekyll-powered platform (&lt;a href=&quot;http://www.carlboettiger.info/README.html&quot;&gt;site-config&lt;/a&gt;), but the basic idea remains the same. For completeness, earlier entries from both platforms have been migrated here. Quoting from &lt;a href=&quot;http://www.carlboettiger.info/archives/211&quot;&gt;my original introduction&lt;/a&gt; to the Wordpress notebook:&lt;/p&gt;
&lt;blockquote&gt;
&lt;h2&gt;Disclaimer: Not a Blog&lt;/h2&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/twid/3013680713/in/faves-cboettig/&quot;&gt;&lt;img src=&quot;http://farm4.staticflickr.com/3053/3013680713_cfcebbd403_t.jpg&quot; alt=&quot;floatright&quot; /&gt;&lt;/a&gt; Welcome to my open lab notebook. This is the active, permanent record of my scientific research, standing in place of the traditional paper bound lab notebook. The notebook is primarily a tool for me to &lt;em&gt;do&lt;/em&gt; science, not communicate it. I write my entries with the hope that they are intelligible to my future self; and maybe my collaborators and experts in my field. Only the occasional entry will be written for a more general audience. […] In these pages you will find not only thoughts and ideas, but references to the literature I read, the codes or manuscripts I write, derivations I scribble and graphs I create and mistakes I make. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;why-an-open-notebook-is-it-working&quot;&gt;Why an open notebook? Is it working?&lt;/h2&gt;
&lt;p&gt;My original introduction to the notebook from November 2010 dodged this question by suggesting the exercise was merely an experiment to see if any of the purported benefits or supposed risks were well-founded. Nearly three years in, can I draw any conclusions from this open notebook experiment?&lt;/p&gt;
&lt;p&gt;In that time, the notebook has seen six projects go from conception to &lt;a href=&quot;http://www.carlboettiger.info/vita.html&quot;&gt;publication&lt;/a&gt;, and a seventh founder on a null result (see &lt;a href=&quot;http://carlboettiger.info/tags.html#tribolium&quot;&gt;#tribolium&lt;/a&gt;). Several more projects continue to unfold. I have often worked on several projects simultaneously, and some projects branch off while others merge, making it difficult to capture all the posts associated with a single paper into a single tag or category. Of course not all ideas make it into the paper, but they remain captured in the notebook. I often return to my earlier posts for my own reference, and frequently pass links to particular entries to collaborators or other colleagues. On occasion I have pointed reviewers of my papers to certain entries discussing why we did &lt;code&gt;y&lt;/code&gt; instead of &lt;code&gt;x&lt;/code&gt;, and so forth. Both close colleagues and researchers I’ve never met have emailed me to follow up on something they had read in my notebook. This evidence suggests that the practice of open notebook science can faciliate both the performance and dissemination of research while remaining compatible and even synergistic with academic publishing.&lt;/p&gt;
&lt;p&gt;I am both proud and nervous to know of a half dozen other researchers who have credited me for inspiring them to adopt open or partially open lab notebooks online. I am particularly grateful for the examples, interactions, and ideas from established practitioners of open notebook science in other fields. My collaborators have been largely been somewhere between favorable and agnostic towards the idea, with the occasional request for delayed or off-line notes. More often gaps arise from my own lapses in writing (or at least being intelligible), though the automated records from Github in particular, as well as Flickr (image log), Mendeley (reading log), and Twitter and the like help make up for some of the gaps.&lt;/p&gt;
&lt;p&gt;&lt;!-- Liam Revell, Scott Chamberlain, Alistair Boettiger, Noam Ross, Nick Fabina, Lee Worden, Mario Pineda-Krch--&gt;&lt;/p&gt;
&lt;h2 id=&quot;the-integrated-notebook-becomes-the-knitted-notebook&quot;&gt;The Integrated Notebook becomes the Knitted Notebook&lt;/h2&gt;
&lt;p&gt;In creating my wordpress lab notebook, &lt;a href=&quot;http://www.carlboettiger.info/archives/211&quot;&gt;I put forward the idea of an “Integrated Lab Notebook”&lt;/a&gt;, a somewhat convoluted scheme in which I would describe my ideas and analyses in Wordpress posts, embed figures from Flickr, and link them to code on Github. &lt;a href=&quot;http://yihui.name/knitr/&quot;&gt;Knitr&lt;/a&gt; simplified all that. I can now write code, analysis, figures, equations, citations, etc, into a single &lt;code&gt;Rmarkdown&lt;/code&gt; format and track it’s evolution through git version control. The &lt;code&gt;knitr&lt;/code&gt; markdown format goes smoothly on Github, the lab notebook, and even into generating pdf or word documents for publication, never seperating the code from the results. For details, see “&lt;a href=&quot;http://www.carlboettiger.info/2012/04/07/writing-reproducibly-in-the-open-with-knitr.html&quot;&gt;writing reproducibly in the open with knitr&lt;/a&gt;.”&lt;/p&gt;
&lt;h2 id=&quot;navigating-the-open-notebook&quot;&gt;Navigating the Open Notebook&lt;/h2&gt;
&lt;p&gt;You can page through the notebook chronologically just like any paper notebook using the “Next” and “Previous” buttons on the sidebar. The notebook also leverages all of the standard features of a blog:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the ability to search,&lt;/li&gt;
&lt;li&gt;browse the archives &lt;a href=&quot;http://www.carlboettiger.info/archives.html&quot;&gt;by date&lt;/a&gt;,&lt;/li&gt;
&lt;li&gt;browse by &lt;a href=&quot;http://www.carlboettiger.info/tags.html&quot;&gt;tag&lt;/a&gt; or&lt;/li&gt;
&lt;li&gt;browse by &lt;a href=&quot;http://www.carlboettiger.info/categories.html&quot;&gt;category&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;follow the &lt;a href=&quot;http://www.carlboettiger.info/atom.xml&quot;&gt;RSS feed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;add and share comments in Disqus&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I use categories as the electronic equivalent of separate paper notebooks, dividing out my ecological research projects, evolutionary research topics, my teaching notebook, and a few others. As such, each entry is (usually) made into exactly one category. I use tags for more flexible topics, usually refecting particular projects or methods, and entries can have zero or multiple tags.&lt;/p&gt;
&lt;p&gt;It can be difficult to get the big picture of a project by merely flipping through entries. The chronological flow of a notebook is a poor fit to the very nonlinear nature of research. Reproducing particular results frequently requires additional information (also data and software) that are not part of the daily entries. Github repositories have been the perfect answer to these challenges.&lt;/p&gt;
&lt;h2 id=&quot;the-real-notebook-is-github&quot;&gt;(The real notebook is Github)&lt;/h2&gt;
&lt;p&gt;My Github repositories offer a kind of inverted version of the lab notebook, grouped by project (tag) rather than chronology. Each of my research projects is now is given it’s own public Github repository. I work primarily in R because it is widely used by ecologists and statisicians, and has a strong emphasis on reproducible research. The “R package” structure turns out to be brilliantly designed for research projects, which specifies particular files for essential metadata (title, description, authors, software dependencies, etc), data, documentation, and source code (see &lt;a href=&quot;http://www.carlboettiger.info/2012/05/06/research-workflow.html&quot;&gt;my workflow&lt;/a&gt; for details). Rather than have each analysis described in full in my notebook, they live as seperate &lt;code&gt;knitr&lt;/code&gt; markdown files in the &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/examples&quot;&gt;&lt;code&gt;inst/examples&lt;/code&gt;&lt;/a&gt; directory of the R package, where their &lt;a href=&quot;https://github.com/cboettig/pdg_control/commits/master/inst/examples&quot;&gt;history&lt;/a&gt; can be browsed on Github, complete with their commit logs. Long or frequently used blocks of code are written into functions with proper documentation in the package source-code directory &lt;code&gt;/R&lt;/code&gt;, keeping the analysis files cleaner and consistent.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues?state=closed&quot;&gt;issues tracker&lt;/a&gt; connected to each Github repository provides a rich TO DO list for the project. Progress on any issue often takes the form of subsequent commits of a particular analysis file, and that commit log can automatically be appended to the issue.&lt;/p&gt;
&lt;h2 id=&quot;the-social-lab-notebook&quot;&gt;The social lab notebook&lt;/h2&gt;
&lt;p&gt;When scripting analyses or writing papers, pretty much everything can be captured on Github. I have recently added a short &lt;a href=&quot;https://github.com/cboettig/jekyll-labnotebook-plugins&quot;&gt;script&lt;/a&gt; to Jekyll which will pull the relevant commit logs into that day’s post automatically. Other activities fit less neatly into this mold (reading, math, notes from seminars and conferences), so these things get traditional notebook entries. I’m exploring automated integration for other activities, such as pulling my current reading from Mendeley or my recent discussions from Twitter into the notebook as well. For now, feed for each of these appear at the top of my &lt;a href=&quot;http://www.carlboettiger.info/lab-notebook.html&quot;&gt;notebook homepage&lt;/a&gt;, with links to the associated sites.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Migrating Oww Posts To Jekyll</title>
	 <link href="/2012/09/27/Migrating-OWW-posts-to-Jekyll.html"/>
   <updated>2012-09-27T00:00:00+00:00</updated>
   <id>/09/27/Migrating-OWW-posts-to-Jekyll</id>
   <content type="html">&lt;p&gt;This Open Lab Notebook started on a public MediaWiki-based site, &lt;a href=&quot;http://openwetware.org&quot;&gt;OpenWetWare&lt;/a&gt; (OWW), which was created with the ambitious vision of having a single wiki for biological sciences (or at least, synthetic microbiology, since such the wiki grew out of a collection of such labs). Users could have their own pages that served as a personal website or lab group site, contribute pages on specific protocols, host course websites, and most interestingly, were encouraged to create open lab notebooks using specially designed templates for the purpose. From January through October of 2010, I kept all my notes in two separate OWW notebooks: one for entries on my &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger/Notebook/Comparative_Phylogenetics&quot;&gt;Comparative Phylogenetics&lt;/a&gt; research, and a seperate one for entries in &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger/Notebook/Stochastic_Population_Dynamics&quot;&gt;Stochastic Population Dynamics&lt;/a&gt;. Each notebook had a cover page and then entries by day, linked by the calendar box on the cover page. This was a neat idea an excellent introduction into the world of open lab notebooks.&lt;/p&gt;
&lt;p&gt;In September of 2010 I began to leave the OpenWetWare platform to start my own lab notebook based on a privately hosted copy Wordpress. The benefits of being on a shared community platform were minimized by the relatively small number of active users mostly belonging to a different field. Downtime on the site and a lack of any easy way to access my content off-line or back up content also made me increasingly nervous, while the difficulty in adding additional tools or functionality (such as RSS feeds to new entries, personal tags, improved search) collectively spurred my decision to move to Wordpress. At the time I had knew of no easy way to migrate my OWW posts, so I allowed them to remain where they were while I continued further notes in my newly minted Wordpress installation.&lt;/p&gt;
&lt;p&gt;In April of 2012 I began to experiment with the static-blogging engine, Jekyll. My adoption of markdown, facilitated by my discovery of pandoc and the advent of &lt;code&gt;knitr&lt;/code&gt;, together with my complete submersion into a Github-based workflow led me to first consider Jekyll. Wordpress was slow and heavy, both for creating entries in the online editor (though I did start pushing markdown-based entries to Wordpress through it’s API and the associated R package). Though Jekyll has a slightly steeper learning curve to start, once you have the basics down complicated things aren’t any harder than easy ones, whereas on Wordpress the basics are trivial but complex customization becomes a full-time web-developer challenge. In Jekyll, it was rather easy to migrate all my old entries from the previous platforms onto the new one.&lt;/p&gt;
&lt;p&gt;In the &lt;a href=&quot;http://www.carlboettiger.info/2012/09/19/migrating-from-wordpress-to-jekyll.html&quot;&gt;previous post&lt;/a&gt; I describe exporting my Wordpress-based entries using a python script from Thomas Frossman. To export my OpenWetWare entries I relied on the rather excellent MediaWiki API. While I began by grabbing the content of each post in MediaWiki syntax, I soon realized it was easier to grab the content already parsed as HTML (using a different API call) and then parse the HTML into markdown using Pandoc. (Pandoc’s developmental version does have experimental support for reading MediaWiki syntax now). I then added a few substitutions to standardize my tags and categories. Here’s my R call to the MediaWiki API (see &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/1efa80e913006051083544275f6af9b5ab9ccb0a/wiki_get.R&quot;&gt;wiki_get.R&lt;/a&gt;):&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;wiki_parse &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(page, baseurl, &lt;span class=&quot;dt&quot;&gt;format=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;json&amp;quot;&lt;/span&gt;, ...){
  &lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(httr)
  action =&lt;span class=&quot;st&quot;&gt; &amp;quot;parse&amp;quot;&lt;/span&gt;
  addr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(baseurl, &lt;span class=&quot;st&quot;&gt;&amp;quot;/api.php?format=&amp;quot;&lt;/span&gt;, format, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;amp;action=&amp;quot;&lt;/span&gt;, action, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;amp;page=&amp;quot;&lt;/span&gt;, page, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
  config &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;add_headers&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;User-Agent&amp;quot;&lt;/span&gt; =&lt;span class=&quot;st&quot;&gt; &amp;quot;rwiki&amp;quot;&lt;/span&gt;), ...)
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;GET&lt;/span&gt;(addr, &lt;span class=&quot;dt&quot;&gt;config=&lt;/span&gt;config)
  &lt;span class=&quot;kw&quot;&gt;parsed_content&lt;/span&gt;(out)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I create a few helper functions for parsing the html into markdown, and also extracting and adding the metadata into Jekyll’s YAML headers (see &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/1efa80e913006051083544275f6af9b5ab9ccb0a/export_oww.R&quot;&gt;export_oww.R&lt;/a&gt;)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(httr)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(gsubfn)

oww_to_md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pages, &lt;span class=&quot;dt&quot;&gt;user=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl_Boettiger&amp;quot;&lt;/span&gt;,  &lt;span class=&quot;dt&quot;&gt;baseurl =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://openwetware.org&amp;quot;&lt;/span&gt;){
  &lt;span class=&quot;co&quot;&gt;# Store filenames (with dates) and categories for each page, for reference later&lt;/span&gt;
  filenames &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_filenames&lt;/span&gt;(pages)
  categories &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_categories&lt;/span&gt;(pages)
  ## Use the API function to extract the content
  parsed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;export_oww&lt;/span&gt;(pages, user, baseurl)
  ## Add the baseurl back into all the links
  htmls &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;add_baseurl&lt;/span&gt;(parsed)
  ## Create YAML header text
  headers &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;add_header_txt&lt;/span&gt;(parsed, categories)
  ## Use pandoc to convert the html to markdown
  mds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;html_to_md&lt;/span&gt;(htmls, filenames) 
  ## Delete the OWW header info we don&amp;#39;t want in the markdown
  mds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;clean_md&lt;/span&gt;(mds)
  ## Stick headers onto markdown files and name them according to filenames
  &lt;span class=&quot;kw&quot;&gt;write_mds&lt;/span&gt;(mds, headers, filenames) 
}

get_filenames &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pages){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(pages, function(p){
    p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;_&amp;quot;&lt;/span&gt;, p)
    filename &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;, p)
    filename &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;(.*)-(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+-&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+-&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;2-&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&amp;quot;&lt;/span&gt;, filename)
  })
}

&lt;span class=&quot;co&quot;&gt;#&amp;#39; Take a list of page titles to a user&amp;#39;s OWW notebooks and export them as Jekyll markdown entries.  &lt;/span&gt;
get_categories &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pages){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(pages, function(p){
    p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;_&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;, p)
    filename &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;, p)
    category &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;(.*)-(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+-&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+-&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&amp;quot;&lt;/span&gt;, filename)
  })
}


&lt;span class=&quot;co&quot;&gt;#&amp;#39; Take a list of page titles to a user&amp;#39;s OWW notebooks and export them as Jekyll markdown entries.  &lt;/span&gt;
export_oww &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(pages, &lt;span class=&quot;dt&quot;&gt;user=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Carl_Boettiger&amp;quot;&lt;/span&gt;,  &lt;span class=&quot;dt&quot;&gt;baseurl=&lt;/span&gt;  &lt;span class=&quot;st&quot;&gt;&amp;quot;http://openwetware.org&amp;quot;&lt;/span&gt;){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(pages, function(p){
    p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;_&amp;quot;&lt;/span&gt;, p)
    page &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;User:&amp;quot;&lt;/span&gt;, user, &lt;span class=&quot;st&quot;&gt;&amp;quot;/Notebook/&amp;quot;&lt;/span&gt;, p, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;wiki_parse&lt;/span&gt;(page, &lt;span class=&quot;dt&quot;&gt;baseurl=&lt;/span&gt;baseurl)
  })
}

add_baseurl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(parsed,  &lt;span class=&quot;dt&quot;&gt;baseurl =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://openwetware.org&amp;quot;&lt;/span&gt;){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(parsed, function(out){
    html &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;out$parse$text[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]
    html &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsubfn&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;src=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;/images/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;src=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
                   baseurl,&lt;span class=&quot;st&quot;&gt;&amp;quot;/images/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), html)
    html &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsubfn&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;href=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;/wiki/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;src=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
                   baseurl,&lt;span class=&quot;st&quot;&gt;&amp;quot;/wiki/&amp;quot;&lt;/span&gt;, 
                    &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), html)
  })
}

add_header_txt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(parsed, mycategories){
  &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(parsed), function(i){
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;parsed[[i]]
    category &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mycategories[[i]]
    if(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(out$parse$categories)&amp;gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
      categories &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(out$parse$categories, function(x) x$&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;`&lt;/span&gt;)
      &lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;_&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;, categories)
      ## Standarize some of my tags, called &amp;quot;categories&amp;quot; on OWW
      tags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;tags: &amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;[&amp;quot;&lt;/span&gt;, 
                          &lt;span class=&quot;kw&quot;&gt;paste0&lt;/span&gt;(categories, &lt;span class=&quot;dt&quot;&gt;collapse =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;, &amp;quot;&lt;/span&gt;),
                          &lt;span class=&quot;st&quot;&gt;&amp;quot;]&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)  
    } else {
      tags &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;&amp;quot;&lt;/span&gt;
    }
    
    header &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;---&amp;quot;&lt;/span&gt;, 
                &lt;span class=&quot;st&quot;&gt;&amp;quot;layout: post&amp;quot;&lt;/span&gt;,
                tags, 
                &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;categories: &amp;quot;&lt;/span&gt;, category),
                &lt;span class=&quot;st&quot;&gt;&amp;quot;---&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
  })
}


html_to_md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(htmls, filenames){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(htmls), function(html){
    &lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(htmls[[i]], &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(filenames[i], &lt;span class=&quot;st&quot;&gt;&amp;quot;.html&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;))
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;system&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;pandoc &amp;quot;&lt;/span&gt;, filenames[i], &lt;span class=&quot;st&quot;&gt;&amp;quot;.html -w markdown&amp;quot;&lt;/span&gt;, 
                       &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;intern=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
  })
}


clean_md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(mds){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(mds, function(md){
    ## Remove OWW header
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;!&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;[image&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;(http://openwetware.org/images/f/f8/Owwnotebook_icon.png&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;!&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;[image&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;(http://openwetware.org/images/9/94/Report.png&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;)&amp;quot;&lt;/span&gt;,  &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Main project&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;page&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;!&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;[image&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;(http://openwetware.org/images/c/c3/Resultset_previous.png&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;)&amp;quot;&lt;/span&gt;,  &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Previous$&amp;quot;&lt;/span&gt;,  &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;^entry Next$&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;!&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;[image&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;(http://openwetware.org/images/5/5c/Resultset_next.png&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;^entry$&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;^Stochastic Population Dynamics&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;^Comparative Phylogenetics$&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
    md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;^Teaching$&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, md)
  })
}



write_md &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(mds, headers, filenames){
  &lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(mds), function(i){
    &lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(headers[[i]], mds[[i]]), &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(filenames[i], &lt;span class=&quot;st&quot;&gt;&amp;quot;.markdown&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)) 
  })
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If or when I change platform again, it should be even easier. With all my posts in markdown, I can easily move them into an ebook or pdf using Pandoc (currently requires stripping the YAML headers first, though it would be great if Pandoc eventually supported metadata headers in YAML). Github renders the markdown of each post automatically, so the content of most posts can be read directly from the Github repository, &lt;a href=&quot;https://github.com/cboettig/labnotebook/tree/master/_posts&quot;&gt;cboettig/labnotebook&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;misc-tricks&quot;&gt;Misc tricks&lt;/h2&gt;
&lt;p&gt;The unix &lt;code&gt;rename&lt;/code&gt; utility comes in handy:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rename &amp;#39;s/Comparative_Phylogenetics/Comparative-Phylogenetics-Notebook-(from-OWW)/&amp;#39; *Comparative_Phylogenetics.markdown
rename &amp;#39;s/Stochastic_Population_Dynamics/Stochastic-Population-Dynamics-Notebook-(from-OWW)/&amp;#39; *Stochastic_Population_Dynamics.markdown&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And a vim mapping to flip through 100s of source files quickly:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:map &amp;lt;F2&amp;gt; :N&amp;lt;CR&amp;gt;
:map &amp;lt;F3&amp;gt; :n&amp;lt;CR&amp;gt;&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Prosecutors Fallacy</title>
	 <link href="/2012/09/19/prosecutors-fallacy.html"/>
   <updated>2012-09-19T00:00:00+00:00</updated>
   <id>/09/19/prosecutors-fallacy</id>
   <content type="html">&lt;p&gt;Two years ago, I scribbled an entry into my notebook entitled &lt;a href=&quot;http://carlboettiger.info/2010/10/25/wrong-picture-wrong-model-why-warning-signals-dont-look-like-rare-events.html&quot;&gt;Wrong Picture, Wrong Model: Why warning signals don’t look like rare events&lt;/a&gt;. Months later I made some off-hand remark to Alan (my Ph.D. mentor) about how transitions found in historical records, such as the Climate examples in &lt;span class=&quot;showtooltip&quot; title=&quot;Dakos V, Scheffer M, van Nes E, Brovkin V, Petoukhov V and Held H
(2008). Slowing Down as an Early Warning Signal For Abrupt
Climate Change. _Proceedings of The National Academy of
Sciences_, *105*. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.0802430105.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0802430105&quot; rel=&quot;http://purl.org/spar/cito/critiques&quot; &gt;Dakos &lt;em&gt;et. al.&lt;/em&gt; (2008)&lt;/a&gt;&lt;/span&gt;, could actually be selecting for stochastic transitions, and this selection process might make them look like traditional warning signals – i.e. mining historical cases could actually lead to false positives rather than useful benchmarks. Alan encouraged me to demonstrate this; and when I had, to write it up. He also suggested a clever title, and with his advice the offhand remark became the recently published paper, the Prosecutor’s Fallacy, (&lt;span class=&quot;showtooltip&quot; title=&quot;Boettiger C and Hastings A (2012). Early Warning Signals And The
Prosecutor&amp;#39;S Fallacy. _Proceedings of The Royal Society B:
Biological Sciences_, *279*. ISSN 0962-8452, 
http://dx.doi.org/10.1098/rspb.2012.2085.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Boettiger &amp;amp; Hastings, 2012&lt;/a&gt;&lt;/span&gt;).&lt;/p&gt;
&lt;p&gt;In the review process, another question came up as to whether the stationary point (minumum of the potential) can be accurately identified successfully in this situation. Instead of some handwaving statement about things we’d tried, I was able to point to the spot in my notes where I’d this same question; a post the following day entitled &lt;a href=&quot;http://carlboettiger.info/2010/10/26/correcting-for-the-mean-dynamics.html&quot;&gt;Correcting for the mean dynamics&lt;/a&gt;. A win for open notebooks.&lt;/p&gt;
&lt;p&gt;Most of the work for this was done over a short period of time in the &lt;a href=&quot;https://github.com/cboettig/earlywarning/tree/prosecutor/&quot;&gt;&lt;code&gt;prosecutor&lt;/code&gt;&lt;/a&gt; branch of my &lt;a href=&quot;https://github.com/cboettig/earlywarning/&quot;&gt;&lt;code&gt;earlywarning&lt;/code&gt;&lt;/a&gt; repository, often with little more than passing reference in my notebook entries. At the beginning I didn’t think of this as a separate project, hence the lack of a separate repository, notebook tags, etc. A branch seemed like a convenient way to manage the diverging code-base. The primary scripts for the analysis presented can be found there, along with the data files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/013805c706eecc7d1d14c3f83017369ecab76a5b/inst/examples/Figure1.md&quot;&gt;Figure 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/9ff8d5c17fa1ae54a7b1d8672c5f33981aed0f1c/inst/examples/Figure2.md&quot;&gt;Figure 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/33586d816918bc4261b864fd0e0a2e854c62802d/inst/examples/Figure2_dat.csv&quot;&gt;data for the conditional_samples&lt;/a&gt; &lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/33586d816918bc4261b864fd0e0a2e854c62802d/inst/examples/Figure2_nulldat.csv&quot;&gt;data for the null_distribution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/b938c383521bafa4e91cb2eda020f50f11f41509/inst/examples/Figure3.Rmd&quot;&gt;Figure 3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/33586d816918bc4261b864fd0e0a2e854c62802d/inst/examples/Figure3_dat.csv&quot;&gt;data for the conditional_samples&lt;/a&gt; &lt;a href=&quot;https://raw.github.com/cboettig/earlywarning/33586d816918bc4261b864fd0e0a2e854c62802d/inst/examples/Figure3_nulldat.csv&quot;&gt;data for the null_distribution&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now that it is it’s own publication, perhaps I should move this into a separate repository?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Historical Note&lt;/strong&gt;: A draft of this post was started on 2012-09-19 to accompany the apperance of the paper in PRSB, but never finished. As I have had occassion to revisit this project recently, I have taken the opportunity today to flush out the rest of this post, as I had intended it to be. Some links and features of the notebook may thus be newer than 2012-09-19. See the sidebar for the post revision history and modification timestamps.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;C. Boettiger, A. Hastings, (2012) Early Warning Signals And The Prosecutor’S Fallacy. &lt;em&gt;Proceedings of The Royal Society B: Biological Sciences&lt;/em&gt; &lt;strong&gt;279&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2012.2085&quot;&gt;10.1098/rspb.2012.2085&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;V. Dakos, M. Scheffer, E. H. van Nes, V. Brovkin, V. Petoukhov, H. Held, (2008) Slowing Down as an Early Warning Signal For Abrupt Climate Change. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;105&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0802430105&quot;&gt;10.1073/pnas.0802430105&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Migrating From Wordpress To Jekyll</title>
	 <link href="/2012/09/19/migrating-from-wordpress-to-jekyll.html"/>
   <updated>2012-09-19T00:00:00+00:00</updated>
   <id>/09/19/migrating-from-wordpress-to-jekyll</id>
   <content type="html">&lt;p&gt;Thanks to a recent bugfix in the &lt;a href=&quot;https://github.com/thomasf/exitwp&quot;&gt;exitwp&lt;/a&gt; scripts I was able to export all my Wordpress entries. The script pulls the entries from the Wordpress database and formats them in markdown, along with extracting all metadata such as timestamp, tags, categories, publication status, and Wordpress id number, which are all embedded as YAML header information.&lt;/p&gt;
&lt;h3 id=&quot;why-migrate-the-old-entries&quot;&gt;Why migrate the old entries?&lt;/h3&gt;
&lt;p&gt;When I moved to the Jekyll notebook, I left the Wordpress site standing with all its existing content and simply remapped the home pages. While it was nice to have the Wordpress system as a fall back while I got used to Jekyll, it meant that I couldn’t benefit from the faster and lighter nature of Jekyll while much of my traffic occurred on the Wordpress pages. I was running a dedicated virtual private server for the Wordpress hosting, and still the site wasn’t very responsive. To get an idea, try “flipping through the pages” of the new Jekyll notebook using the “next” and “previous” post buttons. The new pages load immediately, making it easy to flip through looking for some word or image I can’t find with tags or searches. Flipping through pages is the time-honored way of interacting with paper notebooks, so I’m glad that the new system is responsive enough to imitate this well.&lt;/p&gt;
&lt;h3 id=&quot;converting-shortcodes-from-wordpress-plugins&quot;&gt;Converting shortcodes from Wordpress Plugins&lt;/h3&gt;
&lt;p&gt;Migrating files using &lt;code&gt;exitwp&lt;/code&gt; is a relatively seamless affair. Unfortunately, my Wordpress posts make rather heavy use of plugins, which work through shortcodes that still appear in the converted files, such as &lt;code&gt;[flickr]&lt;/code&gt;, &lt;code&gt;[latex]&lt;/code&gt;, &lt;code&gt;[code lang=&amp;quot;r&amp;quot;]&lt;/code&gt;, and &lt;code&gt;[cite]&lt;/code&gt;, for image embedding, equation embedding, syntax highlighting, and citations by DOI, respectively. While a suite of Jekyll plugins exist for each of these tasks, I’d like my regular posts to be pure markdown (other than the YAML header), making it easy to migrate or reuse the content in the future in different platforms. Here is the &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/c489da83ca7a78345b7981be4de5933ae7d63ac0/shortcodes.R&quot;&gt;R script I used for converting my shortcodes&lt;/a&gt;, as described below.&lt;/p&gt;
&lt;h4 id=&quot;syntax-highlighting-short-codes&quot;&gt;Syntax Highlighting short-codes&lt;/h4&gt;
&lt;p&gt;For instance, several markdown extension languages including, Github-flavored markdown, already allow for syntax-highlighting with fenced code blocks. I wrote a short script to replace all (most) of the shortcodes in use on my Wordpress site. (Over the years, I’d actually used a variety of different syntax highlighting plugins, making it necessary to match a variety of different shortcodes). Other than matching a lot of patterns, this was pretty straight forward.&lt;/p&gt;
&lt;h4 id=&quot;flickr-images&quot;&gt;flickr images&lt;/h4&gt;
&lt;p&gt;My workflow pushes all the images and graphs I create to flickr when the script runs. (I could also automatically push the images to Wordpress, or simply to my own site, but started using flickr pretty early on for this. The SOAP API is excellent, as is the Rflickr R package) Images were embedded into my Wordpress site using the shortcode and image ID number. To generate stand-alone markdown, I wanted tp replace all the image codes with the flickr URLs to the images, which is a trivial task with the API and Rflickr.&lt;/p&gt;
&lt;h4 id=&quot;latexmathjax-equations&quot;&gt;LaTeX/Mathjax Equations&lt;/h4&gt;
&lt;p&gt;Again I had used a variety of shortcodes for latex plugins before discovering MathJax, so I had to handle a variety of syntaxes here. Previously I’ve tried to write equations in a manner compatible with the redcarpet markdown parser that powers Github-Flavored Markdown (see the &lt;a href=&quot;https://github.com/nono/Jekyll-plugins&quot;&gt;corresponding Jekyll plugin&lt;/a&gt;), e.g. surrounding equations with &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; blocks to avoid the parser mangling them. Instead, I’ve found it easier now to switch to pandoc for my markdown parser (and &lt;a href=&quot;https://github.com/dsanson/jekyll-pandoc-plugin&quot;&gt;corresponding Jekyll Plugin&lt;/a&gt;). Pandoc uses the basic TeX &lt;code&gt;$&lt;/code&gt; and &lt;code&gt;$$&lt;/code&gt; for inline and display equations, rendering it into the MathJax (and modern LaTeX standard) &lt;code&gt;\(&lt;/code&gt; and &lt;code&gt;\[&lt;/code&gt; on conversion. Being pandoc-compatible is quite nice, making it easy to create an e-book, epub, or latex-based pdf of my notebook. I hate having to use a markdown syntax that isn’t compatible with most other extended markdown parsers, but with so many different, inconsistent parsers this cannot be easily avoided. Regardless, replacing the various shortcodes to the Pandoc syntax is just a simple regexpr step.&lt;/p&gt;
&lt;h4 id=&quot;citations&quot;&gt;Citations&lt;/h4&gt;
&lt;p&gt;Many of my posts relied on kcite to generate bibliographies for the post using DOIs. A short call to my &lt;a href=&quot;http://www.carlboettiger.info/2012/05/30/knitcitations.html&quot;&gt;knitcitations&lt;/a&gt; package allowed me to generate the parenthetical citations and bibliographies instead. In principle this step could be run at the time I compile the site with Jekyll. Pages would be valid &lt;code&gt;.Rmd&lt;/code&gt;, needing knitr as “markdown” interpreter. This is an intriguing way to go, but probably too complicated for the moment. Running additional R code would be nice, but could slow the time needed to build the site, even with knitr’s caching. Meanwhile, converted pages simply have the citations already processed and the bibliography added in as HTML at the end of the post.&lt;/p&gt;
&lt;h3 id=&quot;url-redirects&quot;&gt;URL Redirects&lt;/h3&gt;
&lt;p&gt;My Jekyll site uses the SEO recommended structure of year/month/day/page-title for URLs, while my Wordpress site used simple random id numbers. To ensure that links to the old Wordpress pages resolve to the newly migrated pages, I added a little Jekyll plugin, &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/_plugins/redirects.rb&quot;&gt;redirects.rb&lt;/a&gt;. One of the elegant things about Jekyll is the ability to create such plugins that do this just the way you would image doing so – creating auxiliary pages at each of the redirect URLs with a simple redirect command. To install, place &lt;code&gt;redirects.rb&lt;/code&gt; in &lt;code&gt;_plugins&lt;/code&gt;, &lt;code&gt;redirects.html&lt;/code&gt; in &lt;code&gt;_layouts&lt;/code&gt;, and in &lt;code&gt;_config.yml&lt;/code&gt; add the line &lt;code&gt;redirects: yes&lt;/code&gt; (see &lt;a href=&quot;https://github.com/cboettig/labnotebook&quot;&gt;site source&lt;/a&gt;).&lt;/p&gt;
&lt;h3 id=&quot;comments&quot;&gt;Comments&lt;/h3&gt;
&lt;p&gt;I am using Disqus as the comment engine for entries. Since URLs change in the above step and I do not provide a unique disqus code to each page, I am attempting to migrate comments using the &lt;a href=&quot;http://help.disqus.com/customer/portal/articles/286778-using-the-migration-tools&quot;&gt;Disqus “migrate threads” tool&lt;/a&gt;, which simply takes a csv file listing old and new urls in consecutive columns. Will have to wait and see if this works.&lt;/p&gt;
&lt;h3 id=&quot;private-entries&quot;&gt;Private entries&lt;/h3&gt;
&lt;p&gt;Several entries on the Wordpress site were marked private, and only visible after administrative login. Most of these entries are actually solicited journal reviews of various manuscripts which I cannot make public. &lt;code&gt;exitwp&lt;/code&gt; marks these posts as &lt;code&gt;published: false&lt;/code&gt; in the metadata, so it is easy to remove them from the Jekyll source site. They can be managed in a separate Github-excluded directory (so that they cannot be seen on the website source pages on Github either) that can be &lt;code&gt;.htaccess&lt;/code&gt; password protected.&lt;/p&gt;
&lt;h3 id=&quot;categories-and-tags&quot;&gt;Categories and Tags&lt;/h3&gt;
&lt;p&gt;Categories and tags are handled automatically in the conversion. One of the greatest things about having all the content on a common system is the ability to share a common tag-pool.&lt;/p&gt;
&lt;h3 id=&quot;rss&quot;&gt;RSS&lt;/h3&gt;
&lt;p&gt;If you follow the notebook through RSS feeds, all the migrated posts will be showing up as new unread entries, as the atom feed dates entries by when they appear, not the stated post date. My apologies!&lt;/p&gt;
&lt;h3 id=&quot;rough-edges&quot;&gt;Rough edges&lt;/h3&gt;
&lt;p&gt;A couple posts have rare shortcodes which are probably easier to correct by hand. My apologies for any rough edges resulting from the conversion (or the exchange of markdown parsers). Hopefully I’ll get these ironed out in the near future, but feel free to leave a comment on the page or the issues tracker on any such errors.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Analytic Solution To Multiple Uncertainty</title>
	 <link href="/2012/09/14/analytic-solution-to-multiple-uncertainty.html"/>
   <updated>2012-09-14T00:00:00+00:00</updated>
   <id>/09/14/analytic-solution-to-multiple-uncertainty</id>
   <content type="html">&lt;p&gt;&lt;em&gt;No idea where I went wrong, but the final graphs are not what I expected&lt;/em&gt; &lt;em&gt;Update: Integrated out some uncertainty in the expectation step, need to preserve full set of transtions&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;We consider adding additional sources of noise through observation error and implementation error to the orginal model of Reed (1979), which considers only growth error. This follows in the line of exploration taken by Clark and Kirkwood (1987), Roughgarden (1996) and Sethi (2006).&lt;/p&gt;
&lt;p&gt;In adding these two sources of error, our state variable becomes our &lt;em&gt;measured&lt;/em&gt; (or believed) stock &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;, rather than the true stock size &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;, and our control variable becomes the quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt; set, rather than the realized harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id=&quot;analytical-integrals&quot;&gt;Analytical integrals&lt;/h2&gt;
&lt;p&gt;The central calculation to accomodating additional sources of uncertainty is the determination of the transition matrix; the probability of going from state &lt;span class=&quot;math&quot;&gt;\(x_t\)&lt;/span&gt; at time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt; to state &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt; in the next interval, for each possible value of the control variable (quota). We discritize the statespace onto a fine grid of values &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; to seek a stochastic dynamic programming solution.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;xmin &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xmax &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;150&lt;/span&gt;
grid_n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We seek a harvest policy which maximizes the discounted profit from the fishery using a stochastic dynamic programming approach over a discrete grid of stock sizes from &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;150&lt;/code&gt; on a grid of &lt;code&gt;100&lt;/code&gt; points, and over an identical discrete grid of possible harvest values.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(xmin, xmax, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; grid_n)
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With purely growth noise, a row of the matrix is given by the probability density of the growth noise with mean &lt;span class=&quot;math&quot;&gt;\(f(x,h)\)&lt;/span&gt;, that is, the probability of tranistion from &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; to &lt;span class=&quot;math&quot;&gt;\(x_{t+1}\)&lt;/span&gt; at harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt; is given by the function &lt;span class=&quot;math&quot;&gt;\(P(x_t+1, f(x,h))\)&lt;/span&gt; for some probability density function &lt;span class=&quot;math&quot;&gt;\(P\)&lt;/span&gt;. In the case of uncertainty in stock &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt; and harvest &lt;span class=&quot;math&quot;&gt;\(h\)&lt;/span&gt;, we must integrate over the probability distributions for possible harvests and possible stock sizes,&lt;/p&gt;
&lt;div&gt;
&lt;span class=&quot;math&quot;&gt;\[ \int dh \int dy P(x_{t+1}, f(y, h))P(y)P(h) \]&lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;In general this convolution can be non-trivial to compute, but in the case of uniformly distributed harvest error of &lt;span class=&quot;math&quot;&gt;\(\pm \sigma_i\)&lt;/span&gt; around some quota &lt;span class=&quot;math&quot;&gt;\(q\)&lt;/span&gt;, and uniform measurement error of &lt;span class=&quot;math&quot;&gt;\(\pm \sigma_m\)&lt;/span&gt; around the true stock size &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt;, the integrals can be written as,&lt;/p&gt;
&lt;div&gt;
&lt;span class=&quot;math&quot;&gt;\[ \frac{\int_{\max(q-\sigma_i,0)}^{q+\sigma_i} dh \int_{\max(y-\sigma_h,0)}^{y+\sigma_h} dy P(x_{t+1}, f(y, h))}{\left((q+\sigma_i) - \max(q-\sigma_i,0)\right) \left((x+\sigma_m) - \max(x-\sigma_m,0)\right)} \]&lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;Note we enforce the simple non-negative boundary on stock and harvest.&lt;/p&gt;
&lt;p&gt;So now we are left to merely integrate the &lt;span class=&quot;math&quot;&gt;\(f(y,h)\)&lt;/span&gt; over these finite intervals. We can do this for arbitrary &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt; through multidimensional numerical integration (In fact we could have done this in the first place, but it is too slow for the convolutions of arbitrary probability densities)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;int_f&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;function(f, x, q, sigma_m, sigma_i, pars){
  K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
  sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K*sigma_m
  sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K*sigma_i &lt;span class=&quot;co&quot;&gt;# scale noise into units of K&lt;/span&gt;
  
  if(sigma_m &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
    g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X) &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(X[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], X[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;], pars)
    lower &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
    upper &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(x +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m, q +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i)
    A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;adaptIntegrate&lt;/span&gt;(g, lower, upper)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$integral/((q+sigma_i-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q-sigma_i, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))*(x+sigma_m-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x-sigma_m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)))
  } else if(sigma_m ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){ 
    g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(h) &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x, h, pars)
    lower &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
    upper &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;q +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_i
    A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;adaptIntegrate&lt;/span&gt;(g, lower, upper)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$integral/(q+sigma_i-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q-sigma_i, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
  } else if(sigma_i ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){ 
    g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(y) &lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(y, q, pars)
    lower &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
    upper &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_m
    A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;adaptIntegrate&lt;/span&gt;(g, lower, upper)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;A$integral/(x+sigma_m-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x-sigma_m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
  } else if (m ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(x,q,pars)
  } else {
    &lt;span class=&quot;kw&quot;&gt;stop&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;distribution widths cannot be negative&amp;quot;&lt;/span&gt;)
  }
  out
}
&amp;lt;environment:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;namespace:pdgControl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If we assume a simple function like logistic growth, \(f(s) = r s (1-s/K) + s \), where \(s = x - h\),&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, h, p) {
    &lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x, function(x) {
        S =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
        p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S/p[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S
    })
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With parameters&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;r &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;
pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(r, K)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;r&lt;/code&gt; = &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;K&lt;/code&gt; = &lt;code&gt;100&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Following Sethi et al, we can do this in closed form,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;function(x,q, m, n, pars){
  K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]
  m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K*m
  n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K*n &lt;span class=&quot;co&quot;&gt;# scale noise by K&lt;/span&gt;
  if(m &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
  out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;((q+n-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n))*(x+m-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m))*(&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;*x*K&lt;span class=&quot;dv&quot;&gt;-6&lt;/span&gt;*q*K&lt;span class=&quot;dv&quot;&gt;-6&lt;/span&gt;*n*K&lt;span class=&quot;dv&quot;&gt;+6&lt;/span&gt;*m*K&lt;span class=&quot;dv&quot;&gt;+6&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*K&lt;span class=&quot;dv&quot;&gt;-6&lt;/span&gt;*
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*K&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*x^&lt;span class=&quot;dv&quot;&gt;2+3&lt;/span&gt;*q*x&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*n*x&lt;span class=&quot;dv&quot;&gt;-4&lt;/span&gt;*m*x&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*x&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*x&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*q^&lt;span class=&quot;dv&quot;&gt;2-4&lt;/span&gt;*n*q&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*m*q&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*q&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*q&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*n^&lt;span class=&quot;dv&quot;&gt;2+3&lt;/span&gt;*m*n&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*n&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*n&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*m^&lt;span class=&quot;dv&quot;&gt;2-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*m&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*m&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)^&lt;span class=&quot;dv&quot;&gt;2+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)-&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;))/(&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;*K)/((q+n-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q-n, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))*(x+m-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x-m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)))
  } else if(m ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) {
    y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(((&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;*q&lt;span class=&quot;dv&quot;&gt;+6&lt;/span&gt;*n&lt;span class=&quot;dv&quot;&gt;-6&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n))*y&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*q^&lt;span class=&quot;dv&quot;&gt;2-6&lt;/span&gt;*n*q&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*n^&lt;span class=&quot;dv&quot;&gt;2+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)*K+(-&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*q&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*n&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n))*
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;y^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*q^&lt;span class=&quot;dv&quot;&gt;2+6&lt;/span&gt;*n*q&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*n^&lt;span class=&quot;dv&quot;&gt;2-3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)*y-q^&lt;span class=&quot;dv&quot;&gt;3-3&lt;/span&gt;*n*q^&lt;span class=&quot;dv&quot;&gt;2-3&lt;/span&gt;*n^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*q-n^&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;+&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,q-n)^&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)/(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*K*(q+n-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(q-n, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)))
  } else if(n ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;m &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
    h &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;q
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;((&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*x^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;*m&lt;span class=&quot;dv&quot;&gt;-6&lt;/span&gt;*h)*x&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*m^&lt;span class=&quot;dv&quot;&gt;2-6&lt;/span&gt;*h*m&lt;span class=&quot;dv&quot;&gt;+6&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*h&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)*K-x^&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;+(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*h&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*m)*x^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;+
&lt;span class=&quot;st&quot;&gt;      &lt;/span&gt;(-&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*m^&lt;span class=&quot;dv&quot;&gt;2+6&lt;/span&gt;*h*m&lt;span class=&quot;dv&quot;&gt;-3&lt;/span&gt;*h^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)*x-m^&lt;span class=&quot;dv&quot;&gt;3+3&lt;/span&gt;*h*m^&lt;span class=&quot;dv&quot;&gt;2-3&lt;/span&gt;*h^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*m&lt;span class=&quot;dv&quot;&gt;+3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)*h^&lt;span class=&quot;dv&quot;&gt;2-3&lt;/span&gt;*&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;*h+&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,x-m)^&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)/(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;*K*(x+m-&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x-m, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)))
  } else if (m ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;){
    S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(x -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;q, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S/K) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S
  } else {
    &lt;span class=&quot;kw&quot;&gt;stop&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;distribution widths cannot be negative&amp;quot;&lt;/span&gt;)
  }
  &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(out,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
}
&amp;lt;environment:&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;namespace:pdgControl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can compare timing and equivalence of these two expressions:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(cubature)
&lt;span class=&quot;co&quot;&gt;# Confirm that these give the same value, and time performance&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(a &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, function(x) &lt;span class=&quot;kw&quot;&gt;int_f&lt;/span&gt;(f, x, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, 
    pars)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;   user  system elapsed 
  7.444   0.000   7.394 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(x_grid, function(x) &lt;span class=&quot;kw&quot;&gt;F&lt;/span&gt;(x, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, pars)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;   user  system elapsed 
  0.012   0.000   0.015 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; x_grid, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; a, &lt;span class=&quot;dt&quot;&gt;b =&lt;/span&gt; b)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, a), 
    &lt;span class=&quot;dt&quot;&gt;col =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, b), &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8443/7986666475_3fce0b9e96_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-6&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Note that as the uncertainy gets small, we recover the original transition probability &lt;span class=&quot;math&quot;&gt;\(f\)&lt;/span&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;F&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, pars)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 67.01&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;F&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1e-04&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1e-04&lt;/span&gt;, pars)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 70.84&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;f&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, pars)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 70.84&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When the noise width is much smaller than the bin width we may have trouble, particularly with the uniform distribution, since part of the bin corresponds to zero density, part to high density.&lt;/p&gt;
&lt;h2 id=&quot;numerical-implementation&quot;&gt;Numerical implementation&lt;/h2&gt;
&lt;p&gt;We consider a profits from fishing to be a function of harvest &lt;code&gt;h&lt;/code&gt; and stock size &lt;code&gt;x&lt;/code&gt;, \( (x,h) = h - ( c_0 + c_1  )  \), conditioned on \( h &amp;gt; x \) and \(x &amp;gt; 0 \),&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;price &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
c0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
c1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price =&lt;/span&gt; price, &lt;span class=&quot;dt&quot;&gt;c0 =&lt;/span&gt; c0, &lt;span class=&quot;dt&quot;&gt;c1 =&lt;/span&gt; c1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;with price = &lt;code&gt;1&lt;/code&gt;, &lt;code&gt;c0&lt;/code&gt; = &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;c1&lt;/code&gt; = &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Additional parameters&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The uniform distribution must be careful for noise sizes smaller than binwidth&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pdfn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(P, s) &lt;span class=&quot;kw&quot;&gt;dunif&lt;/span&gt;(P, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;s)
&lt;span class=&quot;co&quot;&gt;# pdfn &amp;lt;- function(P, s) dlnorm(P, 0, s)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will determine the optimal solution over a &lt;code&gt;25&lt;/code&gt; time step window with boundary condition for stock at &lt;code&gt;0&lt;/code&gt; and discounting rate of &lt;code&gt;0.05&lt;/code&gt;.&lt;/p&gt;
&lt;h1 id=&quot;scenarios&quot;&gt;Scenarios:&lt;/h1&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sdp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;SDP_uniform&lt;/span&gt;(f, pars, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;sigma_g =&lt;/span&gt; sigma_g, pdfn, 
    &lt;span class=&quot;dt&quot;&gt;sigma_m =&lt;/span&gt; sigma_m, &lt;span class=&quot;dt&quot;&gt;sigma_i =&lt;/span&gt; sigma_i, F)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;uniform &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(sdp, x_grid, h_grid, OptTime, xT, profit, 
    delta, &lt;span class=&quot;dt&quot;&gt;reward =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Do the deterministic exactly,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, pars, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;sigma_g =&lt;/span&gt; sigma_g, 
    pdfn)
det &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, profit, 
    delta, &lt;span class=&quot;dt&quot;&gt;reward =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Determine the policies for each of the scenarios (noise combinations).&lt;/p&gt;
&lt;h3 id=&quot;plots&quot;&gt;plots&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
&lt;span class=&quot;co&quot;&gt;# policy &amp;lt;- melt(data.frame(stock = x_grid, deterministic=det$D[,1],&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# uniform = uniform$D[,1], mc=opt$D[,1]), id = &amp;#39;stock&amp;#39;)&lt;/span&gt;
policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock =&lt;/span&gt; x_grid, &lt;span class=&quot;dt&quot;&gt;deterministic =&lt;/span&gt; det$D[, 
    &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;dt&quot;&gt;uniform =&lt;/span&gt; uniform$D[, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)

&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policy) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_jitter&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid[value], &lt;span class=&quot;dt&quot;&gt;color =&lt;/span&gt; variable), 
    &lt;span class=&quot;dt&quot;&gt;shape =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;+&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8456/7986667113_28574bc620_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(policy, stock &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;140&lt;/span&gt;)
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
linear &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[, &lt;span class=&quot;kw&quot;&gt;approx&lt;/span&gt;(stock, stock -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid[value], &lt;span class=&quot;dt&quot;&gt;xout =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, 
    &lt;span class=&quot;dv&quot;&gt;150&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;15&lt;/span&gt;)), by =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable]
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(linear) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_smooth&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(x, y, &lt;span class=&quot;dt&quot;&gt;color =&lt;/span&gt; variable), &lt;span class=&quot;dt&quot;&gt;degree =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;se =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;span =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.3&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xlab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Measured Stock&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Optimal Expected Escapement&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8031/7986675144_095fd50f94_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/09/12/notes.html"/>
   <updated>2012-09-12T00:00:00+00:00</updated>
   <id>/09/12/notes</id>
   <content type="html">&lt;p&gt;See github for pdg_control&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Esa Changes Arxiv Policy Following Community Comments</title>
	 <link href="/2012/09/05/ESA-changes-ArXiv-policy-following-community-comments.html"/>
   <updated>2012-09-05T00:00:00+00:00</updated>
   <id>/09/05/ESA-changes-ArXiv-policy-following-community-comments</id>
   <content type="html">&lt;p&gt;Earlier today, Scott Collins, the president of the Ecological Society of America has &lt;a href=&quot;https://twitter.com/ESA_Prez2013/status/243335363693797376&quot;&gt;announced&lt;/a&gt; that the society will now accept articles that have previously been posted on preprint servers. This comes on the heels of a growing discussion in our community. Ethan White has a good summary over on &lt;a href=&quot;http://jabberwocky.weecology.org/2012/09/05/esa-journals-will-now-allow-papers-with-preprints/&quot;&gt;Jabberwocky Ecology&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Many voices have joined the discussion over the past month, and it is exciting and vindicating to see the Society engage and discuss these questions. With this announcement out, I thought I might share my original letter. Here’s the text of an email I sent on August 1st to Don Strong, editor-in-chief of Ecology and a friend to open science known for his bottom-up view that ecologists should show their publication preferences by their actions. Don kindly forwarded this email to other members of the board.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Dear Don,&lt;/p&gt;
&lt;p&gt;Perhaps you have already seen the perspective appearing in Nature this week, “&lt;a href=&quot;http://www.nature.com/news/geneticists-eye-the-potential-of-arxiv-1.11091&quot;&gt;Geneticists eye the potential of Arxiv&lt;/a&gt;.” I must say it is particularly saddening to see the Ecological Society of America being singled out in the discussion as a professional society that opposes pre-prints, particularly given that ESA is not beholden to corporate publishers, and in the face a rising swell of interest in pre-print server capacity, as evidenced by the Nature article (which quotes our own Graham Coop), the emergence of an NCEAS working group to bring about a preprint server, and the extensive online discussions about ESA’s stance against pre-prints which was no doubt responsible for bringing ESA into the negative limelight of this perspective.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;The &lt;a href=&quot;http://jabberwocky.weecology.org/2012/07/18/esa-journals-do-not-allow-papers-with-preprints/&quot;&gt;discussion launched by Professor Ethan White&lt;/a&gt; on his blog suggests that ESA has in fact only recently removed a clause in the policies explicitly permitting the use of the arXiv. Meanwhile members of the &lt;a href=&quot;http://www.nceas.ucsb.edu/projects/12651&quot;&gt;NCEAS working group&lt;/a&gt; had considered approaching ESA to partner in their efforts to bring about a preprint server and culture, hoping to take advantage of the agility ESA has as a respected and independent society publisher. Ecology as a field has been a leading example of pushing for innovative and open publishing practices such as mandatory data archiving, and ESA has led this front for decades with innovations such as Ecological Archives and more recent Ecosphere. It shames me to see our society and our field painted as a backwater of regressive policies in such prominent magazines when even journals such as Nature, Science, &amp;amp; PNAS permit and encourage the use of preprint servers such as the arXiv. I would hate to see our most innovative research migrate away from the Society at a time when ESA could be leading our field through this academic publishing transition that is now discussed broadly in the NY Times, Guardian, Economist, &amp;amp; USA Today. This is a chance for the Ecological Society to both lead and flourish.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;I hope that these issues can be discussed in some fashion with the input of our community at the annual meeting in Portland. The British Ecological Society already plans to use the meeting to discuss a digital future of their journals, surely ESA will be doing as much at it’s own meeting, formally or informally?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Thank you for your time and consideration. Please let me know if there is anything I can do to help.&lt;/p&gt;
&lt;p&gt;Cheers,&lt;/p&gt;
&lt;p&gt;Carl&lt;/p&gt;
&lt;/blockquote&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/09/04/notes.html"/>
   <updated>2012-09-04T00:00:00+00:00</updated>
   <id>/09/04/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Fallacy paper done&lt;/li&gt;
&lt;li&gt;Dissertation filing&lt;/li&gt;
&lt;li&gt;Decision theory from the ROC curve.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Working group paper&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Jim/Mike paper&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wrightscape paper?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Signature page two copies, archival paper?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;ropensci emails: Position paper: Goals&lt;/li&gt;
&lt;li&gt;&lt;p&gt;misc emails&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;fallacy-paper-finalizing-appendices&quot;&gt;Fallacy paper finalizing appendices&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Commit images and runs from yesterday (ibm simulation still running…)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;clean up appendix code&lt;/li&gt;
&lt;li&gt;&lt;p&gt;clean up appendix text&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;code-tricks-for-today&quot;&gt;Code tricks for today&lt;/h2&gt;
&lt;p&gt;vim set sytnax language, useful for getting R highlighting in &lt;code&gt;.Rmd&lt;/code&gt; files: &lt;code&gt;setf r&lt;/code&gt;, or equivalently, &lt;code&gt;set filetype=r&lt;/code&gt; (must be lowercase r). &lt;code&gt;set filetype&lt;/code&gt; with no argument gives the current filetype.&lt;/p&gt;
&lt;h3 id=&quot;coding&quot;&gt;Coding&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
cboettig pushed to master at cboettig/2012: &lt;em&gt;Merge branch ‘master’ of github.com:cboettig/2012 fix figure links for 2012&lt;/em&gt; &lt;a href=&quot;https://github.com/cboettig/2012/compare/a5d9c78a23...a254029c78&quot;&gt;09:44 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig pushed to handle-json-errors at ropensci/fishbaseapi: &lt;em&gt;check that JSON parses (explicitly if a bit crudely)&lt;/em&gt; &lt;a href=&quot;https://github.com/ropensci/fishbaseapi/compare/890757a294...0a796ccf54&quot;&gt;06:58 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig created branch handle-json-errors at ropensci/fishbaseapi: &lt;em&gt;&lt;/em&gt; &lt;a href=&quot;https://github.com/ropensci/fishbaseapi/compare/handle-json-errors&quot;&gt;06:15 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig commented on issue ropensci/fishbaseapi#42: &lt;em&gt;nice. Do we also have a offset parameter then? I’m not quite clear how this works in the context of the table join (for the /taxa endpoint). It se…&lt;/em&gt; &lt;a href=&quot;https://github.com/ropensci/fishbaseapi/issues/42#issuecomment-76016135&quot;&gt;05:48 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig commented on issue ropensci/fishbaseapi#41: &lt;em&gt;Scott, good point, though on the server MySQL is connected to the api container via a network (TCP ip) port, not a socket like you are using locall…&lt;/em&gt; &lt;a href=&quot;https://github.com/ropensci/fishbaseapi/issues/41#issuecomment-75979175&quot;&gt;03:23 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig pushed to master at cboettig/cboettig.github.io: &lt;em&gt;Site updated from cron&lt;/em&gt; &lt;a href=&quot;https://github.com/cboettig/cboettig.github.io/compare/0df6d9bc66...323a3d4e99&quot;&gt;08:02 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig pushed to master at cboettig/regimeshifts: &lt;em&gt;Merge branch ‘master’ of github.com:cboettig/regimeshifts add coveralls&lt;/em&gt; &lt;a href=&quot;https://github.com/cboettig/regimeshifts/compare/c5985f2be4...351c3b41db&quot;&gt;05:09 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
cboettig pushed to master at cboettig/regimeshifts: &lt;em&gt;Update README.md&lt;/em&gt; &lt;a href=&quot;https://github.com/cboettig/regimeshifts/compare/57c7507e42...c5985f2be4&quot;&gt;05:03 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reading&quot;&gt;Reading&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
An efficient method for stochastic simulation of biological populations in continuous time: BioSystems (2009). Pages: 37-42. George Edward Allen, Calvin Dytham et al. &lt;a href=&quot;/catalog/efficient-method-stochastic-simulation-biological-populations-continuous-time-1/&quot;&gt;12:37 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
Theory of early warning signals of disease emergenceand leading indicators of elimination: Theoretical Ecology (2013). Pages: 333-357. Suzanne M. O’Regan, John M. Drake et al. &lt;a href=&quot;/catalog/theory-early-warning-signals-disease-emergenceand-leading-indicators-elimination/&quot;&gt;12:37 2015/02/25&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
Self-organization of vegetation in arid ecosystems.: The American naturalist (2002). Volume: 160, Issue: 4. Pages: 524-530. Max Rietkerk, Maarten C Boerlijst, Frank van Langevelde, Reinier Hillerislambers, Johan van de Koppel, Lalit Kumar, Herbert H T Prins, André M de Roos et al. &lt;a href=&quot;/research/selforganization-vegetation-arid-ecosystems/&quot;&gt;05:02 2015/02/13&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Santa Cruz Postdoc</title>
	 <link href="/2012/08/29/Santa-Cruz-Postdoc.html"/>
   <updated>2012-08-29T00:00:00+00:00</updated>
   <id>/08/29/Santa-Cruz-Postdoc</id>
   <content type="html">&lt;p&gt;Spent Monday and Tuesday visiting Santa Cruz, where I have recently accepted a post-doctoral position with &lt;a href=&quot;http://www.somas.stonybrook.edu/people/munch.html&quot;&gt;Steve Munch&lt;/a&gt;, &lt;a href=&quot;http://users.soe.ucsc.edu/~msmangel/&quot;&gt;Marc Mangel&lt;/a&gt;, and &lt;a href=&quot;http://swfsc.noaa.gov/staff.aspx?id=689&quot;&gt;Alec MacCall&lt;/a&gt;. I will be based primarily at the National Marine Fisheries Service building, here: ` &lt;img src=&quot;https://lh4.googleusercontent.com/-hOqjhixOLYA/UD5hoCJu7LI/AAAAAAAACLc/JitBtQAjADg/s1158/2012-08-28_14-53-14_598.jpg&quot; alt=&quot;A view of my new office: NMFS&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Five fantastic years of graduate school are coming to an end: I will start officially later this fall, where I will&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;join an exciting team of ecologists and applied mathematicians who work collaboratively on cutting-edge problems in ecological and evolutionary modeling through the &lt;a href=&quot;http://www.soe.ucsc.edu/~msmangel/CSTAR.html&quot;&gt;Center for Stock Assessment Research&lt;/a&gt;. I will work with us to develop non-parametric approaches to ecosystem-based management based on semi-parametric Bayesian methods for nonlinear time-series modeling …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;or so the job description goes. I am looking forward to it.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/08/23/notes.html"/>
   <updated>2012-08-23T00:00:00+00:00</updated>
   <id>/08/23/notes</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/issues/5&quot;&gt;Fallacy with May model runs&lt;/a&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = X_t \exp\left( r \left(1 - \frac{ X_t }{ K } \right) - \frac{ a * X_t ^ {Q - 1} }{s ^ Q + H ^ Q} \right) \]&lt;/span&gt;
&lt;/div&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8435/7846795570_87ac2e71fd_o.png&quot; alt=&quot;plot of chunk figure2&quot; /&gt;&lt;figcaption&gt;plot of chunk figure2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Working on unmanaged warning. (see &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/21&quot;&gt;#21&lt;/a&gt;)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Warning Signals In Management</title>
	 <link href="/2012/08/22/warning-signals-in-management.html"/>
   <updated>2012-08-22T00:00:00+00:00</updated>
   <id>/08/22/warning-signals-in-management</id>
   <content type="html">&lt;p&gt;Tour of existing files (version stable links)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e6aaf0ba27e4280cbbb04d5ecfeb9b18f158ca77/inst/examples/managed_warning.md&quot;&gt;managed warning&lt;/a&gt; is the current direct test of this, but needs decently ranged input example where detection has a good chance to succeed.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e6aaf0ba27e4280cbbb04d5ecfeb9b18f158ca77/inst/examples/criticaltransition.md&quot;&gt;criticaltransition&lt;/a&gt; Statistics across replicate crashes that don’t show much promise for detection.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A heuristic implementation in response to the detection of a signal might use a simple rule like a fraction of the optimal harvest of a stable system. &lt;a href=&quot;&quot;&gt;cautious.md&lt;/a&gt; simply shows the economic cost associated with this fractional harvest.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e6aaf0ba27e4280cbbb04d5ecfeb9b18f158ca77/inst/examples/resilience_assessment.Rmd&quot;&gt;resilience_assessment&lt;/a&gt; not run&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also compare to&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e6aaf0ba27e4280cbbb04d5ecfeb9b18f158ca77/inst/examples/stability.md&quot;&gt;Stability assessment&lt;/a&gt;, estimating coefficient \( \); surprisingly difficult to distinguish the fished from the unfished by this metric.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Revisions on Prosecutors Fallacy</title>
	 <link href="/2012/08/22/notes.html"/>
   <updated>2012-08-22T00:00:00+00:00</updated>
   <id>/08/22/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Email Alan re: Prosecutor’s fallacy manuscript. Schedule meeting.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Proof corrections for rfishbase manuscript. Done.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Fallacy simulations: calibration range for May model: expect small fraction of runs to transition by chance from stable state.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here we’re getting a bit less than 2% chance transitions in 5000 steps.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
+&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, function(rep){
  +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;vector&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;mode=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;double&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;n)
  +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# positive equilibrium&lt;/span&gt;
  +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;z &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(n, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, .&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
  +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;r =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;75&lt;/span&gt;; k =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;; a=&lt;span class=&quot;fl&quot;&gt;1.55&lt;/span&gt;; H=&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;; Q =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;
  +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;for(t in &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:n){
    +&lt;span class=&quot;st&quot;&gt;       &lt;/span&gt;x[t&lt;span class=&quot;dv&quot;&gt;+1&lt;/span&gt;] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;z[t] *&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;x[t] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[t] /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;k) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;a *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[t] ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(Q -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(x[t] ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Q +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;H ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Q)) 
    +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;}
    +&lt;span class=&quot;st&quot;&gt;     &lt;/span&gt;x
    +&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;})
&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;crashed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(sn[n,] &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
&amp;gt;&lt;span class=&quot;st&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(crashed)/&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;
[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &lt;span class=&quot;fl&quot;&gt;0.017&lt;/span&gt;
&amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;er&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;n
[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Fallacy simulation analysis running on farm using May model. &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/prosecutor/inst/examples/fallacy.Rmd&quot;&gt;See fallacy.Rmd, prosecutor branch&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;rerun using different point to indicate transition. Tracking runs on &lt;a href=&quot;https://github.com/cboettig/earlywarning/issues/5&quot;&gt;Issue 5&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;add figure plotting b and d curves, or at least b-d curve. Likewise for May model.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/emhart/ImpacTwit/issues/2&quot;&gt;Exploring&lt;/a&gt; twitteR finding publications under discussion&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Migrated labnotebook plugins to &lt;a href=&quot;https://github.com/cboettig/jekyll-labnotebook-plugins&quot;&gt;separate repository&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Updated vimrc to preview pandoc:&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;map \md : call PreviewMarkdown()&amp;lt;CR&amp;gt;
func! PreviewMarkdown()
exec &amp;quot;w&amp;quot;
exec &amp;quot;! pandoc -s % -o .temp.html&amp;quot;
exec &amp;quot;! google-chrome .temp.html&amp;quot;
endfunc&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Should add css templates from my notebook or github.&lt;br /&gt;Could also parse with github’s own API instead of pandoc, e.g. with ruby:&lt;/p&gt;
&lt;pre class=&quot;sourceCode ruby&quot;&gt;&lt;code class=&quot;sourceCode ruby&quot;&gt;&lt;span class=&quot;kw&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;# Example usage &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# ./render_gfm.rb input.md &amp;gt; output.html&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;# &lt;/span&gt;

require &lt;span class=&quot;st&quot;&gt;&amp;#39;octokit&amp;#39;&lt;/span&gt;
puts &lt;span class=&quot;dt&quot;&gt;Octokit&lt;/span&gt;.markdown(&lt;span class=&quot;dt&quot;&gt;File&lt;/span&gt;.read(&lt;span class=&quot;dt&quot;&gt;ARGV&lt;/span&gt;.first))&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;twitteR authentication keys configured in .Rprofile&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Pdg Control Updates</title>
	 <link href="/2012/08/21/pdg-control-updates.html"/>
   <updated>2012-08-21T00:00:00+00:00</updated>
   <id>/08/21/pdg-control-updates</id>
   <content type="html">&lt;h2 id=&quot;resolving-s-d&quot;&gt;Resolving S &amp;lt; D&lt;/h2&gt;
&lt;h2 id=&quot;code-updates&quot;&gt;Code updates&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/pengwynn/octokit/issues/127&quot;&gt;octokit&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Macksamie, K., Cockburn, J., &amp;amp; Wagner, J. (2012). Robust control amidst stock and flow benefits: The case of wolf-elk-hunting dynamics in the US Mountain West. 2012 AERE Summer Conference, Asheville, NC (pp. 1-33). Retrieved from http://www.webmeets.com/files/papers/AERE/2012/3/AEREConfPaper05172012.pdf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;The Linear parameter varying (LPV) approach which allows this problem to leverage a standard LMI (linear matrix inequality) solver seeems like a clever route, but unclear if this would be restricted to the additive noise models such as they consider?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Some background on LPV:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Becker, G., &amp;amp; Packard, A. (1994). Robust performance of linear parametrically varying systems using parametrically-dependent linear feedback. Systems &amp;amp; Control Letters, 23(3), 205-215. doi:10.1016/0167-6911(94)90006-X&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brock, W. a., &amp;amp; Durlauf, S. N. (2005). Local robustness analysis: Theory and application. Journal of Economic Dynamics and Control, 29(11), 2067-2092. doi:10.1016/j.jedc.2005.06.001&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An interesting example handling Knightian uncertainty about the model directly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Athanassoglou, S., &amp;amp; Xepapadeas, A. (2012). Pollution control with uncertain stock dynamics: When, and how, to be precautious. Journal of Environmental Economics and Management, 63(3), 304-320. doi:10.1016/j.jeem.2011.11.001&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/08/20/notes.html"/>
   <updated>2012-08-20T00:00:00+00:00</updated>
   <id>/08/20/notes</id>
   <content type="html">&lt;h2 id=&quot;writing&quot;&gt;Writing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Draft outline of &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/doc/policycosts&quot;&gt;policy costs paper&lt;/a&gt; sent to Paul.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ropensci &lt;a href=&quot;https://github.com/ropensci/docs/blob/master/nceas/nceas_working_group_proposal.md&quot;&gt;NCEAS proposal&lt;/a&gt; - contacts&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MEE supplement follow-up: Wow, MEE promotes &lt;a href=&quot;http://www.methodsinecologyandevolution.org/view/0/podcasts.html&quot;&gt;video podcasts along with publications&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://blog.rstudio.org/2012/08/20/welcome-hadley-winston-and-garrett/&quot;&gt;Hadley to join RStudio&lt;/a&gt; full time.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://gist.github.com/3379144&quot;&gt;A gist by Hadley on storing things like API keys across R packages&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Joined &lt;a href=&quot;http://segate.sunet.se/cgi-bin/wa&quot;&gt;fisheries-science mailing list&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;h3 id=&quot;warning-signals&quot;&gt;Warning signals&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://afs.confex.com/afs/2012/webprogram/Paper9299.html&quot;&gt;Critical transitions at Amer Fisheries Society&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ives, A., &amp;amp; Dakos, V. (2012). Detecting dynamical changes in nonlinear time series using locally linear state-space models. Ecosphere, 3(June). Retrieved from http://www.esajournals.org/doi/abs/10.1890/ES11-00347.1&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Feng, J., Dakos, V., &amp;amp; van Nes, E. H. (2012). Does predator interference cause alternative stable states in multispecies communities? Theoretical population biology. doi:10.1016/j.tpb.2012.06.003&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Katz, R. W., Brush, G. S., &amp;amp; Parlange, M. B. (2005). Statistics of Extremes : Modeling Ecological Disturbances, 86(5), 1124-1134.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;more-abc-methods-in-evolution&quot;&gt;More ABC methods in Evolution&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Kutsukake, N., &amp;amp; Innan, H. (2012). Simulation-Based Likelihood Approach for Evolutionary Models of Phenotypic Traits on Phylogeny. Evolution, (1), no-no. doi:10.1111/j.1558-5646.2012.01775.x&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;methods&quot;&gt;Methods&lt;/h3&gt;
&lt;p&gt;Might be a good paper for algorithms group to read.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wu, X., Kumar, V., Ross Quinlan, J., Ghosh, J., Yang, Q., Motoda, H., McLachlan, G. J., et al. (2007). Top 10 algorithms in data mining. Knowledge and Information Systems (Vol. 14, pp. 1-37). doi:10.1007/s10115-007-0114-2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And a good one for theory tea?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;De Boer, R. J. (2012). Which of Our Modeling Predictions Are Robust? (R. Antia, Ed.)PLoS Computational Biology, 8(7), e1002593. doi:10.1371/journal.pcbi.1002593&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;papers-following-up-from-esa&quot;&gt;Papers following up from ESA&lt;/h3&gt;
&lt;p&gt;Regime shifts in disease models&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Chaves, L. F., Hashizume, M., Satake, A., &amp;amp; Minakawa, N. (2012). Regime shifts and heterogeneous trends in malaria time series from Western Kenya Highlands. Parasitology, 139(1), 14-25. doi:10.1017/S0031182011001685&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Davies, T. D., &amp;amp; Baum, J. K. (2012). Extinction Risk and Overfishing: Reconciling Conservation and Fisheries Perspectives on the Status of Marine Fishes. Scientific Reports, 2, 1-9. doi:10.1038/srep00561&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Fries, R. S. D., Chapin, F. S., &amp;amp; Syvitski, J. (2012). Planetary Opportunities: A Social Contract for Global Change Science to Contribute to a Sustainable Future. BioScience, 62(6), 603-606. doi:10.1525/bio.2012.62.6.11&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shelton, a. O., &amp;amp; Mangel, M. (2011). Reply to Sugihara et al: The biology of variability in fish populations. Proceedings of the National Academy of Sciences, 108(48), E1226-E1226. doi:10.1073/pnas.1115765108&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shelton, A., Dick, E., &amp;amp; Pearson, D. (2012). species composition and quantifying uncertainty in multispecies fisheries: hierarchical Bayesian models for stratified sampling protocols with missing data. … Journal of Fisheries …, 246(5007), 231-246. doi:10.1139/F2011-152&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Shelton, A. O., &amp;amp; Mangel, M. (2011). Fluctuations of fish populations and the magnifying effects of fishing. Proceedings of the National Academy of Sciences of the United States of America, 108(17), 7075-80. doi:10.1073/pnas.1100334108&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Esa 2012 Conference</title>
	 <link href="/2012/08/10/ESA-2012-Conference.html"/>
   <updated>2012-08-10T00:00:00+00:00</updated>
   <id>/08/10/ESA-2012-Conference</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;/assets/files/ESA2012_cboettig_schedule.pdf&quot;&gt;My Schedule&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Meetings/discussion with Don Strong, Tony Ives, Marten Scheffer, Justin Yeakel, Karen Abbott, Jarrett Byrnes, Christopher Lortie.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Check in with Paul Armsworth on working group&lt;/li&gt;
&lt;li&gt;rOpenSci tutorial session (below)&lt;/li&gt;
&lt;li&gt;tweetup&lt;/li&gt;
&lt;li&gt;My contributed talk (below)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci-tutorial-thursday&quot;&gt;rOpenSci tutorial, Thursday&lt;/h2&gt;
&lt;p&gt;A year out from our launch at ESA last year, we presented an introduction and tutorial on rOpenSci. Slides and links to more information are all available at &lt;a href=&quot;http://esa.ropensci.org&quot;&gt;esa.ropensci.org&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;slides-from-my-talk-friday&quot;&gt;Slides from my talk, Friday&lt;/h2&gt;
&lt;iframe src=&quot;http://www.slideshare.net/slideshow/embed_code/13962709?hostedIn=slideshare&amp;amp;page=upload&quot; width=&quot;476&quot; height=&quot;400&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot;&gt;
&lt;/iframe&gt;
&lt;h2 id=&quot;twitter-notes-generated-from-r&quot;&gt;Twitter Notes (generated from R)&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(twitteR)
hashtag &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;#ESA2012&amp;quot;&lt;/span&gt;
user &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;cboettig&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Generate a list of a user’s conference tweets&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;tweets &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;twListToDF&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;userTimeline&lt;/span&gt;(user, &lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;))
tagged &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(hashtag, tweets$text, &lt;span class=&quot;dt&quot;&gt;ignore.case =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Write to file, making links appear as links&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;text &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;tweets$text[tagged]
text &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;(@[A-Za-z0-9_]+)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;lt;a href=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;http://twitter.com/&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;, 
    text)
text&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;my-twitter-notes&quot;&gt;My twitter notes&lt;/h3&gt;
&lt;p&gt;[1] “.&lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; uses GAMM for species response from time since fire, interval, intensity, etc, then solves SDP for optimal policy #esa2012”&lt;br /&gt; [2] “.&lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; optimizes distrib of time since fire to maximize geom mean of biodiversity - better than arithmetic or shannon. #esa2012”&lt;br /&gt; [3] “.&lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; on optimal fire histories for conserving biodiversity #esa2012 w/ amazing images from down under”&lt;br /&gt; [4] “Armsworth’s analysis in eco let http://t.co/w5W8Ubsa #esa2012”&lt;br /&gt; [5] “Armswortth shows paying farmers for biodiversity gains is best when spatially targeted &amp;amp; worse with multispecies targets #esa2012”&lt;br /&gt; [6] “Fun at #esa2012 where a physics PhD student presents the experimental study testing the mathematical theories presented by the ecology PhD”&lt;br /&gt; [7] “Yet another Science paper described at #esa2012 resilience session: warning signals in yeast dynamics http://t.co/QRGwSH2x”&lt;br /&gt; [8] “Michael Pace shows early warning in zooplankton levels in lake ecosystem experiment. #esa2012 Why is cv=1 a special value?”&lt;br /&gt; [9] “David Seekell speaking on conditional #heteroskedacity as an early warning signal of sudden shifts #esa2012”&lt;br /&gt;[10] “See Will’s recent paper for correct link to Doak et al http://t.co/fVclkNM9 #esa2012 (link pdfs from homepages &amp;amp; help a tweep out!)”&lt;br /&gt;[11] “Notes that portfolio effect is inevitable, cites Dan Doak paper: http://t.co/3RDcyI8L need different null #esa2012”&lt;br /&gt;[12] “96% of returning CA salmon come from hatcheries #esa2012”&lt;br /&gt;[13] “Portfolio effects in salmon stocks: do fish manage risk better than bankers? Will Satterthwaite up now #esa2012”&lt;br /&gt;[14] “Alex Perkins examines impact of poor mixing in disease dynamics, draws analogy to #esa2012 mixers. Transmission is a very local process!”&lt;br /&gt;[15] “Learn how 2 get data &amp;amp; full text open access literature/metadata through R/#rstats w/ &lt;a href=\&quot;http://twitter.com/@ropensci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ropensci&quot;&gt;@ropensci&lt;/span&gt;&lt;/a&gt; 11:30a F150 http://t.co/zkifSTuU #esa2012”&lt;br /&gt;[16] “de Roos just showed how total biomass can increase with &lt;em&gt;increased&lt;/em&gt; mortality. #Wow. #esa2012”&lt;br /&gt;[17] “de Roos: asymmetry/differences in age/size responses (e.g. biomass production) leads to alternate stable states #esa2012”&lt;br /&gt;[18] “Andrre de Roos shows how ontogenetic assymetry (size structure) breaks basic pop dyn predictions #esa2012”&lt;br /&gt;[19] “Check out &lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; ’s talk at #esa2012 Friday (10:20a?) #notetoself”&lt;br /&gt;[20] “#esa2012 Come to the &lt;a href=\&quot;http://twitter.com/@nceas\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;nceas&quot;&gt;@nceas&lt;/span&gt;&lt;/a&gt; &amp;amp; &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; mixer, 6:30 PM-8:00 PM, in conference center rm F150”&lt;br /&gt;[21] “In case you missed the talk or the links, see &lt;a href=\&quot;http://twitter.com/@jebyrnes\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jebyrnes&quot;&gt;@jebyrnes&lt;/span&gt;&lt;/a&gt; slides online http://t.co/nCcrvAYE #esa2012”&lt;br /&gt;[22] “.&lt;a href=\&quot;http://twitter.com/@jebyrnes\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jebyrnes&quot;&gt;@jebyrnes&lt;/span&gt;&lt;/a&gt; mentions Nielsen’s book on online #openscience. Also see his TED talk http://t.co/UkCYR7xV #esa2012”&lt;br /&gt;[23] “.&lt;a href=\&quot;http://twitter.com/@jebyrnes\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jebyrnes&quot;&gt;@jebyrnes&lt;/span&gt;&lt;/a&gt; reminds us that we live in the 21st century. &amp;quot;Taking the science conversation online&amp;quot; #esa2012”&lt;br /&gt;[24] “Ruckelshaus &lt;a href=\&quot;http://twitter.com/@NatCapProject\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;NatCapProject&quot;&gt;@NatCapProject&lt;/span&gt;&lt;/a&gt; echoes Kareiva’s theme of collaborating with groups you don’t agree with: &amp;quot;I’m with stupid&amp;quot; #esa2012”&lt;br /&gt;[25] “Karevia: Best levers for change are private sector, not public. Don’t testify before congress, but before Walmart &amp;amp; DOW #esa2012”&lt;br /&gt;[26] “Karieva cites G. West on cities and creativity, possibly this paper: http://t.co/WBGJtLTl #esa2012”&lt;br /&gt;[27] “Karevia channels Sarah Palin: how’s that &amp;quot;hope-y change-y thing going?&amp;quot; #esa2012 need more than talking to congress about ecology”&lt;br /&gt;[28] “Olsen: problem isn’t information, it’s informatics (making sense of information) #esa2012”&lt;br /&gt;[29] “Olsen: cites Karevia, biggest problem is scientists cease to be good listeners. #esa2012 Buisnesses hire improv actors to learn this”&lt;br /&gt;[30] “Randy Olsen: scientists evolved from humans. Split was pretty recent. Still have vestiges of story-telling. Don’t lose them! #esa2012”&lt;br /&gt;[31] “Can find the room by the line going deep into the hallway RT &lt;a href=\&quot;http://twitter.com/@carlystrasser\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;carlystrasser&quot;&gt;@carlystrasser&lt;/span&gt;&lt;/a&gt;: .&lt;a href=\&quot;http://twitter.com/@se_hampton\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;se_hampton&quot;&gt;@se_hampton&lt;/span&gt;&lt;/a&gt; is TEARING IT UP. join the fun A106 #ESA2012” [32] “to be accessible to reviewers RT &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt;: Ecological Monographs now requires data to be deposited prior to publication #esa2012”&lt;br /&gt;[33] “Ben Bolker on the need for off-the-shelf methods: not enough staticians for every ecologist to have a stats buddy 4 custom methods #esa2012”&lt;br /&gt;[34] “#esa2012 stats discussion: &amp;quot;all modeling is exploratory. If you think AIC confirms your hypothesis, you’re wrong&amp;quot;”&lt;br /&gt;[35] “Yeakel uses perturbations/return rate to estimate elasticity, more senstive to fun. form, see http://t.co/AX3ds7uR #esa2012 #mustread”&lt;br /&gt;[36] “Yeakel cites http://t.co/UYaDso0d on nonpar bayes, compares to generalized models #esa2012”&lt;br /&gt;[37] “Excellent #esa2012 session understand vs predict in modelling. Explores ecologist’s v of Breiman’s &amp;quot;Two Cultures&amp;quot; http://t.co/TIDL87hZ”&lt;br /&gt;[38] “Kellner: Multispecies modelling has biggest impact when including non-consumptive value http://t.co/lj3NN0Be #esa2012”&lt;br /&gt;[39] “Kellner presents rich model for multispecies management of fisheries, see http://t.co/fdopymKB #esa2012”&lt;br /&gt;[40] “Bobby describing disease modeling: humans are essentially widgets that eventually fail #esa2012”&lt;br /&gt;[41] “Not nearly enough room for the crowd outside Karen Abbott’s talk: what’s so special about alternative stable states? #esa2012”&lt;br /&gt;[42] “#esa2012 &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; panel live peer-review of audience-submitted ideas. Levin: &amp;quot;It should count: I view social science as subset of ecology&amp;quot;”&lt;br /&gt;[43] “Ray Hilborn &amp;quot;fisheries management is people management&amp;quot; need socio-econ context of ecology. &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; #esa2012”&lt;br /&gt;[44] “Molly discusses &amp;quot;most important number you’ve never heard of&amp;quot; - Social cost of carbon #esa2012 &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; ($25/ton is current est)”&lt;br /&gt;[45] “Lopez-Hoffman explores equitable water-rights that conserve ecosystem services, e.g. Colarado river use &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; #esa2012”&lt;br /&gt;[46] “Levin: cites common-pool resources example from African cattle http://t.co/j35iY3MO #esa2012”&lt;br /&gt;[47] “Simon Levin speaking &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; panel: polycentric appches to international agreements on enviro resources #esa2012”&lt;br /&gt;[48] “#esa2012 &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt; will focus on &amp;quot;wicked problems&amp;quot; (technical term) using theme-driven, interdisciplinary approaches”&lt;br /&gt;[49] “Excellent #esa2012 session intro 2 &lt;a href=\&quot;http://twitter.com/@sesync\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sesync&quot;&gt;@sesync&lt;/span&gt;&lt;/a&gt;: &amp;quot;if you’re familiar with &lt;a href=\&quot;http://twitter.com/@nceas\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;nceas&quot;&gt;@nceas&lt;/span&gt;&lt;/a&gt;, you’re familiar w/ synthesis&amp;quot;. Now focus on socio-econ + uncert”&lt;br /&gt;[50] “#esa2012 &lt;a href=\&quot;http://twitter.com/@biocreativity\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;biocreativity&quot;&gt;@biocreativity&lt;/span&gt;&lt;/a&gt; Speaking of art-science collab, don’t forget Dr. Scheffer’s &amp;quot;Critical Transitions, the Movie&amp;quot; http://t.co/2nM6RxL9”&lt;br /&gt;[51] “Lubchenco discusses NOAA’s effort to create climate services like their drought forecasting software: http://t.co/zSRN3Y2U #esa2012”&lt;br /&gt;[52] “Lubchenco’s Q&amp;amp;A brings with disclaimer about Hatch Act: she is speaking for the agency, not the campaign, and can’t answer some Q’s #esa2012”&lt;br /&gt;[53] “At #esa2011 plenary, Pacala encouraged us to spend some time on policy-rel issues. #esa2012 Lubchenco raises the bar: run for office!”&lt;br /&gt;[54] “For instance, to promote outreach, NOAA workers are encouraged to use social media, see their policy: http://t.co/SqSw6UeK #esa2012”&lt;br /&gt;[55] “Lubchenco trumpets success of Magnuson-Stevens Act of 2007 (http://t.co/bOqdasVT) as the policy which will end overfishing #esa2012”&lt;br /&gt;[56] “Lubchenco discusses examples of ecosystem thinking in policy such as the Ocean Policy Task Force: http://t.co/XeyAkQVc #ESA2012”&lt;br /&gt;[57] “#esa2012 Lubchenco on the challenge of scale across ecological, social + econ contexts: highlights DeFries 2012 http://t.co/NEU3AdiQ”&lt;br /&gt;[58] “Jane Lubchenco, opening plenary of #esa2012, dedicates her talk to economics Nobel Laureate Elinor Ostrom http://t.co/XZLEeUnQ”&lt;br /&gt;[59] “.&lt;a href=\&quot;http://twitter.com/@mickresearch\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;mickresearch&quot;&gt;@mickresearch&lt;/span&gt;&lt;/a&gt; speaker ready rooms are D134 &amp;amp; F152 7a-7p, by reservation(?) (program pg 7). Looking forward to your talk btw #esa2012”&lt;br /&gt;[60] “#esa2012 is trying to facilitate networking for young scientists by labeling cocktail tables by sub-field during tonight’s reception”&lt;br /&gt;[61] “Off to Portland for #esa2012”&lt;/p&gt;
&lt;h3 id=&quot;mentions-at-conference-other-than-retweets&quot;&gt;Mentions at conference, (other than retweets)&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mentions &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;twListToDF&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;searchTwitter&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;@&amp;quot;&lt;/span&gt;, user, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), 
    &lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;))
with_hashtag &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(hashtag, mentions$text, &lt;span class=&quot;dt&quot;&gt;ignore.case =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
rt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;RT&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;s&amp;quot;&lt;/span&gt;, mentions$text)
me_not_rt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;with_hashtag[!(with_hashtag %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;rt)]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again, write the output&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;text2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;mentions$text[me_not_rt]
text2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;(@[A-Za-z0-9_]+)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;lt;a href=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;http://twitter.com/&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;, 
    text2)
text2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “. &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; building cost of switching policies into models necessary &amp;amp; provide better outcomes that reduce costs of management #ESA2012”&lt;br /&gt; [2] “. &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; most optimal management strategies produce fluctuations that policy makers don’t like - we can model their dislike! #esa2012”&lt;br /&gt; [3] “.&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; enthusiastically uniting decision theory and resilience theory for management. Making math exciting! #esa2012”&lt;br /&gt; [4] “Go see &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; (Carl Boettiger’s) talk today in E143 at 920 - he gives a great engaging talk #esa2012”&lt;br /&gt; [5] “#FF #ESA2012 &lt;a href=\&quot;http://twitter.com/@DynamicEcology\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;DynamicEcology&quot;&gt;@DynamicEcology&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@labroides\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;labroides&quot;&gt;@labroides&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@qaecology\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;qaecology&quot;&gt;@qaecology&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@paulrehrlich\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;paulrehrlich&quot;&gt;@paulrehrlich&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@tessafrancis\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tessafrancis&quot;&gt;@tessafrancis&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@lizabio\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;lizabio&quot;&gt;@lizabio&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@gigi_rose\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;gigi_rose&quot;&gt;@gigi_rose&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@IngaPLaPuma\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;IngaPLaPuma&quot;&gt;@IngaPLaPuma&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@sarcozona\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sarcozona&quot;&gt;@sarcozona&lt;/span&gt;&lt;/a&gt;” [6] “Awesome! MT &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;: Fun at #esa2012 where physics student presents experiment testing the mathematical theories presented by ecology PhD”&lt;br /&gt; [7] “.&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; says readme.txt is the best way to keep track of dataset versions. Can version control that on github #ESA2012”&lt;br /&gt; [8] “&lt;a href=\&quot;http://twitter.com/@jasonpriem\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jasonpriem&quot;&gt;@jasonpriem&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; Don’t worry- you made an appearance earlier when &lt;a href=\&quot;http://twitter.com/@totalimpactdev\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;totalimpactdev&quot;&gt;@totalimpactdev&lt;/span&gt;&lt;/a&gt; was discussed! #ESA2012”&lt;br /&gt; [9] “&lt;a href=\&quot;http://twitter.com/@carlystrasser\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;carlystrasser&quot;&gt;@carlystrasser&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; Sorry to be missing that! #ESA2012”&lt;br /&gt;[10] “We’ve reached the part of the workshop where .&lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; and &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; slamming MATLAB now… #ESA2012”&lt;br /&gt;[11] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; - let db managers know that you would use a repository + API to share your data with them - move ecology data forward #esa2012”&lt;br /&gt;[12] “.&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;: R is a pain to learn. &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; packages and tools take advantage of your current knowledge base. #ESA2012”&lt;br /&gt;[13] “&lt;a href=\&quot;http://twitter.com/@ropensci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ropensci&quot;&gt;@ropensci&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;: scripting analyses makes science reproducible, repeatable, &amp;amp; creates an analytical workflow #esa2012”&lt;br /&gt;[14] “.&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; showing Michener’s Info Entropy Graph: more time passing means less remembered about data #ESA2012”&lt;br /&gt;[15] “&lt;a href=\&quot;http://twitter.com/@jacquelyngill\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jacquelyngill&quot;&gt;@jacquelyngill&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@treebiology\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;treebiology&quot;&gt;@treebiology&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@jenedavison\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jenedavison&quot;&gt;@jenedavison&lt;/span&gt;&lt;/a&gt; would you like to write about #ESA2012 for &lt;a href=\&quot;http://twitter.com/@Scitable\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;Scitable&quot;&gt;@Scitable&lt;/span&gt;&lt;/a&gt; http://t.co/tPzaPL2U”&lt;br /&gt;[16] “Fun #ESA2012 tweetup. Nice meeting you! &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@MiriamGoldste\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;MiriamGoldste&quot;&gt;@MiriamGoldste&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@SarahBisbing\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;SarahBisbing&quot;&gt;@SarahBisbing&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@bonebraking\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;bonebraking&quot;&gt;@bonebraking&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@JacquelynGill\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;JacquelynGill&quot;&gt;@JacquelynGill&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@msanclem\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;msanclem&quot;&gt;@msanclem&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@edyong209\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;edyong209&quot;&gt;@edyong209&lt;/span&gt;&lt;/a&gt;”&lt;br /&gt;[17] “Check out &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;’s talk at #ESA2012 Friday 9:20 in E143. Unknown unknowns: management strategies under uncertainty &amp;amp; alt stable states”&lt;br /&gt;[18] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@luketkelly\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;luketkelly&quot;&gt;@luketkelly&lt;/span&gt;&lt;/a&gt; is at 10:30 on Friday in E144 at #ESA2012. Optimal fire history for conserving biodiversity.”&lt;br /&gt;[19] “#ESA2012 tweetup was a great idea. Nice meeting you guys &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@MiriamGoldste\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;MiriamGoldste&quot;&gt;@MiriamGoldste&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@SarahBisbing\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;SarahBisbing&quot;&gt;@SarahBisbing&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@bonebraking\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;bonebraking&quot;&gt;@bonebraking&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@JacquelynGill\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;JacquelynGill&quot;&gt;@JacquelynGill&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@msanclem\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;msanclem&quot;&gt;@msanclem&lt;/span&gt;&lt;/a&gt; and co”&lt;br /&gt;[20] “Rt &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; in case you missed the talk or the links, see &lt;a href=\&quot;http://twitter.com/@jebyrnes\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jebyrnes&quot;&gt;@jebyrnes&lt;/span&gt;&lt;/a&gt; slides online http://t.co/cUiwTe23 #esa2012”&lt;br /&gt;[21] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@ropensci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ropensci&quot;&gt;@ropensci&lt;/span&gt;&lt;/a&gt; for all other journals too I mean. Why not share the data? #esa2012”&lt;br /&gt;[22] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@ropensci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ropensci&quot;&gt;@ropensci&lt;/span&gt;&lt;/a&gt; agreed. Or at least a subset of data for referees and the readership to access #esa2012”&lt;br /&gt;[23] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; which leads to the suggestion that we need stats mentors and editors in eeb. #esa2012”&lt;br /&gt;[24] “MT &lt;a href=\&quot;http://twitter.com/@forestdim\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;forestdim&quot;&gt;@forestdim&lt;/span&gt;&lt;/a&gt;: Inspired by &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; ’s stardom to tweet. Ppl mistaking me 4 &lt;a href=\&quot;http://twitter.com/@edyong209\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;edyong209&quot;&gt;@edyong209&lt;/span&gt;&lt;/a&gt;. Need 2 now ride the wave of false ID #ESA2012”&lt;br /&gt;[25] “Yay for Baysian stats! MT &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;: #esa2012 stats discussion: &amp;quot;If you think AIC confirms your hypothesis, you’re wrong&amp;quot;”&lt;br /&gt;[26] “Why code should be made avail: MT &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; Ben Bolker: not enuf staticians 4 each ecologst to have a stats buddy 4 custom methods #esa2012”&lt;br /&gt;[27] “Conversation at #esa2012 Hastings lab dinner: pole dancing at the 2016 Olympics? http://t.co/slpeBcNA &lt;a href=\&quot;http://twitter.com/@Dr_Bik\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;Dr_Bik&quot;&gt;@Dr_Bik&lt;/span&gt;&lt;/a&gt; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;”&lt;br /&gt;[28] “&lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; Thanks for the art-science tip! #ESA2012 #biocreativity &amp;quot;Critical Transitions, The Movie&amp;quot; TONIGHT Portland Blrm 251 8-10p”&lt;br /&gt;[29] “Let’s hear it for statistics! MT &lt;a href=\&quot;http://twitter.com/@ropensci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ropensci&quot;&gt;@ropensci&lt;/span&gt;&lt;/a&gt;: Check out &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; developer talks: &lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; Tues 840a, F150 &amp;amp; &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; 920a, E143. #esa2012”&lt;br /&gt;[30] “Not on rOpenSci… MT &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt;: Check out talks by &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; developers: &lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; Tues 8:40 am F150 - &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; 9:20 am E143 #esa2012”&lt;br /&gt;[31] “Check out talks by &lt;a href=\&quot;http://twitter.com/@rOpenSci\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; developers: &lt;a href=\&quot;http://twitter.com/@_inundata\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; Tues 8:40 am F150 - &lt;a href=\&quot;http://twitter.com/@cboettig\&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; 9:20 am E143 #esa2012”&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Deviations from S = D</title>
	 <link href="/2012/07/30/notes.html"/>
   <updated>2012-07-30T00:00:00+00:00</updated>
   <id>/07/30/notes</id>
   <content type="html">&lt;h3 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h3&gt;
&lt;h4 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h4&gt;
&lt;p&gt;Exploring causes for deviation from &lt;code&gt;S = D&lt;/code&gt; in the Reed model: arises from self-sustaining assumption. Working out the interpretation of the self-sustaining clause, which sounds like it needs to ensure that the stock is non-decreasing in the absence of harvest,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ P(X_{t+1} \geq x  | X_n = x ) = 1 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This sounds like a very awkward condition to enforce for a non-trivial escapement level \( x = S \). Why should the population be guarenteed to increase from it’s escapement population size?&lt;/p&gt;
&lt;p&gt;Given the definition&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ X_{t+1} = Z_t f(X_t) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;and the condition that we have to have&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \operatorname{E}(Z_t f(X_t) ) = f(X_t) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;that is, $ Z_t $ has to be mean unity, then some shocks must result in&lt;/p&gt;
&lt;p&gt;$ X_{t+1} f(X_t) $&lt;/p&gt;
&lt;p&gt;for any non-trivial &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt;. So how do we enforce that these decreases do not violate the self-sustaining principle?&lt;br /&gt;It would seem to require at least that &lt;span class=&quot;math&quot;&gt;\(Z_t\)&lt;/span&gt; is a function of &lt;span class=&quot;math&quot;&gt;\(X\)&lt;/span&gt; as well?&lt;/p&gt;
&lt;p&gt;Reed seems to imply that this is a much more trivial requirement, such as stating only that &lt;span class=&quot;math&quot;&gt;\(f(x)\)&lt;/span&gt; is compensating density dependence (such as Beverton Holt), and not overcompensating (such as the discrete logistic).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/23&quot;&gt;Write a flat tex outline for policy costs&lt;/a&gt; (&lt;font color=&quot;#02e10c&quot;&gt;policy costs&lt;/font&gt;)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/21&quot;&gt;Compare the probability of detection in managed and unmanaged models. &lt;/a&gt; (&lt;font color=\&quot;#02d7e1\&quot;&gt;resilience thinking&lt;/font&gt;)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/20&quot;&gt;Confirm Reed S==D theorem, evaluate in Sethi context&lt;/a&gt; (&lt;font color=&quot;#0b02e1&quot;&gt;value of information&lt;/font&gt;) See notes below.
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/18&quot;&gt;Run scenarios with very low noise, instead of deterministic&lt;/a&gt; (&lt;font color=&quot;#0b02e1&quot;&gt;value of information&lt;/font&gt;), running for &lt;code&gt;uniform_logistic&lt;/code&gt; now
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/17&quot;&gt;Re-run bias table with measurement noise&lt;/a&gt; (&lt;font color=&quot;#0b02e1&quot;&gt;value of information&lt;/font&gt;). Done, compare against history.
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;other&quot;&gt;Other&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PRSB review&lt;/li&gt;
&lt;li&gt;Send Hilmar the ropensci slides&lt;/li&gt;
&lt;li&gt;&lt;p&gt;treebase revisions&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ecolab.ou.edu/?conferencedescription&quot;&gt;Conference possibility?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Substantially updated octokit plugin, see labnotebook &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/11&quot;&gt;issue #11&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Csgf Conference</title>
	 <link href="/2012/07/27/CSGF-Conference.html"/>
   <updated>2012-07-27T00:00:00+00:00</updated>
   <id>/07/27/CSGF-Conference</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://lh5.googleusercontent.com/-4CHhNEHGoeo/UCLZOgy43GI/AAAAAAAAAa8/P2hgMdSR0Wg/s912/20120726_18_FellowsPosterSession_StevenChu%2520%252825%2529.jpg&quot;&gt;&lt;img src=&quot;https://lh5.googleusercontent.com/-4CHhNEHGoeo/UCLZOgy43GI/AAAAAAAAAa8/P2hgMdSR0Wg/s912/20120726_18_FellowsPosterSession_StevenChu%2520%252825%2529.jpg&quot; width=150px style=&quot;float:right; margin: 0 0 15px 15px;&quot; alt=&quot;Stephen-Chu&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.krellinst.org/csgf/conf/2012/agenda&quot;&gt;Conference Agenda&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Alumni-organized &lt;a href=&quot;https://docs.google.com/open?id=1Jbm9xQTzNx_uYUWcWNzruv9068oXcsiZ1_YqaMT3ZJlELSe4EtfqWX5JYs2I&quot;&gt;Plus-One Day Agenda&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Great chance to talk with US Secretary of the Department of Energy Stephen Chu&lt;/li&gt;
&lt;li&gt;Interesting leadership training session lead by improv acting professional Raquel Holmes of &lt;a href=&quot;http://www.improvscience.org/&quot;&gt;ImprovScience&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;video-recording-of-my-talk&quot;&gt;Video recording of my talk&lt;/h2&gt;
&lt;iframe width=&quot;420&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/xwIIVdyKe4o&quot; frameborder=&quot;0&quot; allowfullscreen&gt;
&lt;/iframe&gt;
&lt;h2 id=&quot;slides&quot;&gt;Slides:&lt;/h2&gt;
&lt;object id=&quot;__sse13817733&quot; width=&quot;212&quot; height=&quot;178&quot;&gt;
&lt;param name=&quot;movie&quot; value=&quot;http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=boettiger-120731130512-phpapp02&amp;stripped_title=regime-shifts-in-ecology-and-evolution&amp;userName=cboettig&quot; /&gt;&lt;param name=&quot;allowFullScreen&quot; value=&quot;true&quot;/&gt;&lt;param name=&quot;allowScriptAccess&quot; value=&quot;always&quot;/&gt;&lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;/&gt;
&lt;embed name=&quot;__sse13817733&quot; src=&quot;http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=boettiger-120731130512-phpapp02&amp;amp;stripped_title=regime-shifts-in-ecology-and-evolution&amp;amp;userName=cboettig&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; wmode=&quot;transparent&quot; width=&quot;425&quot; height=&quot;355&quot;&gt;
&lt;/embed&gt;
&lt;/object&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/07/23/notes.html"/>
   <updated>2012-07-23T00:00:00+00:00</updated>
   <id>/07/23/notes</id>
   <content type="html">&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;Vasilis’s PLoS ONE warning signals methods out, listing different methods and announcing the earlywarings R package: &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pone.0041010&quot;&gt;10.1371/journal.pone.0041010&lt;/a&gt;, and another comparing methods on some various data sets &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pone.0038410&quot;&gt;10.1371/journal.pone.0038410&lt;/a&gt;, which (like Drake) advocates for a mixed method approach.&lt;/p&gt;
&lt;p&gt;Modeling extreme risks in ecology &lt;a href=&quot;http://dx.doi.org/10.1111/j.1539-6924.2012.01871.x&quot;&gt;10.1111/j.1539-6924.2012.01871.x&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Which is kinda like Richard Katz’s extreme value theory in ecology &lt;a href=&quot;http://www.jstor.org/stable/10.2307/3450873&quot;&gt;article&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.nsf.gov/funding/pgm_summ.jsp?pims_id=5423&amp;amp;WT.mc_id=USNSF_39&amp;amp;WT.mc_ev=click&quot;&gt;NSF call for Decision, Risk and Management Science&lt;/a&gt;, see &lt;a href=&quot;http://www.nsf.gov/awardsearch/progSearch.do?WT.si_n=ClickedAbstractsRecentAwards&amp;amp;WT.si_x=1&amp;amp;WT.si_cs=1&amp;amp;WT.z_pims_id=5423&amp;amp;SearchType=progSearch&amp;amp;page=2&amp;amp;QueryText=&amp;amp;ProgOrganization=&amp;amp;ProgOfficer=&amp;amp;ProgEleCode=1321&amp;amp;BooleanElement=true&amp;amp;ProgRefCode=&amp;amp;BooleanRef=true&amp;amp;ProgProgram=&amp;amp;ProgFoaCode=&amp;amp;RestrictActive=on&amp;amp;Search=Search#results&quot;&gt;previously funded examples&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A paper in Eco Lett suggests model-guided field work &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2012.01836.x&quot;&gt;10.1111/j.1461-0248.2012.01836.x&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://disccrs.org/newsletter/2012_07_23_AsstProfUCDavis.pdf&quot;&gt;UC Davis postiion in enviro policy and governance&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;news&quot;&gt;News&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.usnews.com/news/articles/2012/07/23/is-the-academic-publishing-industry-on-the-verge-of-disruption&quot;&gt;Academic publishing issues get into US News and World Report&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.bis.gov.uk/news/topstories/2012/Jul/government-to-open-up-publicly-funded-research&quot;&gt;Britian to mandate open access&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.dataone.org/news/dataone-goes-live&quot;&gt;DataONE launch&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://t.co/q4Okabfv&quot;&gt;Nice open science perspective from Titus Brown&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://t.co/PVhl0FtP&quot;&gt;Great progress&lt;/a&gt; from our ropensci student.&lt;/p&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;github api as plugin for Jekyll. See &lt;a href=&quot;https://github.com/cboettig/labnotebook/issues/11&quot;&gt;#11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Increasing use of github issues tracker for research goals&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Evolution and iEvobio conference notes</title>
	 <link href="/2012/07/09/Evolution-Conf-Summary.html"/>
   <updated>2012-07-09T00:00:00+00:00</updated>
   <id>/07/09/Evolution-Conf-Summary</id>
   <content type="html">&lt;h2 id=&quot;saturday&quot;&gt;Saturday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Jeremy Brown&lt;/li&gt;
&lt;li&gt;Graham Slater&lt;/li&gt;
&lt;li&gt;(Education Data Symposium)&lt;/li&gt;
&lt;li&gt;Cecile Ane&lt;/li&gt;
&lt;li&gt;Joe Felsenstein&lt;/li&gt;
&lt;li&gt;Lars Schmitz&lt;/li&gt;
&lt;li&gt;Carl Boettiger&lt;/li&gt;
&lt;li&gt;Liam Revell&lt;/li&gt;
&lt;li&gt;Brian O’Meara (Leithan McGonigle)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;sunday&quot;&gt;Sunday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Marie-Josee Fortin&lt;/li&gt;
&lt;li&gt;Emma Goldberg 10:45 rm 209&lt;/li&gt;
&lt;li&gt;Networks Symposium&lt;/li&gt;
&lt;li&gt;Jeremy Fox 1.30p Rm 201 (Adaptation B)&lt;/li&gt;
&lt;li&gt;Schluter 2:15p Canada 2-3&lt;/li&gt;
&lt;li&gt;Rosie Redfield public lecture&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;9:00 Michael Landis, 203&lt;/li&gt;
&lt;li&gt;9:30 Dick Gumolkiowicz 214&lt;/li&gt;
&lt;li&gt;10:30 Dean Adams&lt;/li&gt;
&lt;li&gt;11 (Cavender-Bares, 214) (Bolnick, 213)&lt;/li&gt;
&lt;li&gt;11:30 Mark McPeek 214&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Luke Harmon 9am rm 214&lt;/li&gt;
&lt;li&gt;Luke Mahler 9am rm 210&lt;/li&gt;
&lt;li&gt;Rafael Maia 9:15a rm 210&lt;/li&gt;
&lt;li&gt;Sam Price 11:15a rm 210&lt;/li&gt;
&lt;li&gt;Liam Revell 11:30 Canada 2-3&lt;/li&gt;
&lt;li&gt;Dan Rabosky 2:30pm Canada 2-3&lt;/li&gt;
&lt;li&gt;Tanja Stadler 3pm Canada 2-3&lt;/li&gt;
&lt;li&gt;Chris Martin 3pm rm 213&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also: ievobio Day 1.&lt;/p&gt;
&lt;h2 id=&quot;wednesday&quot;&gt;Wednesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h1&gt;ievobio all day.&lt;/h1&gt;&lt;/li&gt;
&lt;li&gt;Slides for my #ievobio &lt;a href=&quot;http://cboettig.github.com/talks/ievobio2012/&quot;&gt;lightning talk on rOpenSci&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;sunday---tuesday-twitter-notes&quot;&gt;Sunday - Tuesday twitter notes&lt;/h2&gt;
&lt;h3 id=&quot;grabbing-my-twitter-notes-with-r&quot;&gt;Grabbing my twitter-notes with R&lt;/h3&gt;
&lt;p&gt;Extracted with a few twitter commands&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(twitteR)
me &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;userTimeline&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;n=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)
me &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;twListToDF&lt;/span&gt;(me)
evol2012 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;#evol2012&amp;quot;&lt;/span&gt;, me$text)
ievobio &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;grep&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;#ievobio&amp;quot;&lt;/span&gt;, me$text)
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;con=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;evol2012.txt&amp;quot;&lt;/span&gt;, me$text[evol2012])
&lt;span class=&quot;kw&quot;&gt;writeLines&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;con=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;ievobio.txt&amp;quot;&lt;/span&gt;, me$text[ievobio])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Should add some gsub commands to provide html markup. For the moment used vim:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:%s/@\([A-Za-z0-9_]\+\)/&amp;lt;a href=&amp;quot;http:\/\/twitter.com\/\1&amp;quot;&amp;gt;\1&amp;lt;\/a&amp;gt;/g&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;tweet-log&quot;&gt;Tweet log&lt;/h3&gt;
&lt;div&gt;
Wishing I had checked flight timezone earlier and not had to make hasty exit from #ievobio #whoops but #justmadeplane &lt;br/&gt;&lt;br/&gt; You’re right of course! #oversimplified 5min RT &lt;a href=&quot;http://twitter.com/snacktavish&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;snacktavish&quot;&gt;@snacktavish&lt;/span&gt;&lt;/a&gt; “Why R? - 99% of people are already there.”- &lt;a href=&quot;http://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt;. I disagree! #iEvoBio &lt;br/&gt;&lt;br/&gt; J Sachs gives us ontology and semantics 101, &amp;amp; quoting the referees critique followed by many acronyms… owl ?= rdf #ievobio &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/BetaScience&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;BetaScience&quot;&gt;@BetaScience&lt;/span&gt;&lt;/a&gt; brings us back to phylogenetic tools, but plugs his #openscience by mentioning biotorrents http://t.co/NiRtPuIr #ievobio &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/kcranstn&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kcranstn&quot;&gt;@kcranstn&lt;/span&gt;&lt;/a&gt;: .&lt;a href=&quot;http://twitter.com/tjvision&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tjvision&quot;&gt;@tjvision&lt;/span&gt;&lt;/a&gt; giving a shout-out to totalimpact http://t.co/RhGLCIry at #ievobio with &lt;a href=&quot;http://twitter.com/jasonpriem&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jasonpriem&quot;&gt;@jasonpriem&lt;/span&gt;&lt;/a&gt; and &lt;a href=&quot;http://twitter.com/researchremix&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;researchremix&quot;&gt;@researchremix&lt;/span&gt;&lt;/a&gt; &lt;br/&gt;&lt;br/&gt; Help &lt;a href=&quot;http://twitter.com/researchremix&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;researchremix&quot;&gt;@researchremix&lt;/span&gt;&lt;/a&gt; + &lt;a href=&quot;http://twitter.com/tjvision&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tjvision&quot;&gt;@tjvision&lt;/span&gt;&lt;/a&gt; hypothesize why sharing public data results in increased citation rates: http://t.co/Ka5nTleU #ievobio &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/neurocy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;neurocy&quot;&gt;@neurocy&lt;/span&gt;&lt;/a&gt; definitely. I can’t stay for the +1 day, but maybe get those guys involved too &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/tjvision&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tjvision&quot;&gt;@tjvision&lt;/span&gt;&lt;/a&gt; presents on “Data reuse and scholarly reward” study with &lt;a href=&quot;http://twitter.com/researchremix&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;researchremix&quot;&gt;@researchremix&lt;/span&gt;&lt;/a&gt;, discussing #PLoS paper http://t.co/iSyCRlkw #ievobio &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/pete_cowman&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;pete_cowman&quot;&gt;@pete_cowman&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/LSU_FISH&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;LSU_FISH&quot;&gt;@LSU_FISH&lt;/span&gt;&lt;/a&gt; rm 214 &lt;br/&gt;&lt;br/&gt; and my lightening talk coming up! RT &lt;a href=&quot;http://twitter.com/rOpenSci&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt;: Hey #ievobio, &lt;a href=&quot;http://twitter.com/_inundata&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;@_inundata&lt;/span&gt;&lt;/a&gt; explained &lt;a href=&quot;http://twitter.com/rOpenSci&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; at #rstats user group http://t.co/MgGYIYGS &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/neurocy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;neurocy&quot;&gt;@neurocy&lt;/span&gt;&lt;/a&gt; interesting idea! Could be very helpful both as a resource &amp;amp; a model of how to make these things mainstream science in diff fields? &lt;br/&gt;&lt;br/&gt; sounds like many similar ideas are in hypothes.is RT &lt;a href=&quot;http://twitter.com/omearabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt;&lt;/a&gt;: reputation seems to work well on #stackoverflow, imho #ievobio &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/neurocy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;neurocy&quot;&gt;@neurocy&lt;/span&gt;&lt;/a&gt; yup. but methods developers just took the 3 young investigator awards at main conference too… a promising sign? &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/neurocy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;neurocy&quot;&gt;@neurocy&lt;/span&gt;&lt;/a&gt; at least part of it is I think; on the informatics/developer side. Can only hope the rest of our community will follow. &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/neurocy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;neurocy&quot;&gt;@neurocy&lt;/span&gt;&lt;/a&gt;: &lt;a href=&quot;http://twitter.com/cboettig&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;&lt;/a&gt; is the #ievobio community really as forward-thinking as you make it sound? you may as well be at a science 2.0 conf! &lt;br/&gt;&lt;br/&gt; 50-90%, some refs here: http://t.co/t8GA0Q5y RT &lt;a href=&quot;http://twitter.com/hlapp&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hlapp&quot;&gt;@hlapp&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/omearabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt;&lt;/a&gt;: peer review not limiting vol of papers – gets out eventually #ievobio &lt;br/&gt;&lt;br/&gt; Whaley cites &lt;a href=&quot;http://twitter.com/mbeisen&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;mbeisen&quot;&gt;@mbeisen&lt;/span&gt;&lt;/a&gt; http://t.co/g7tnuxgu “Peer review is f**ed – let’s fix it&amp;quot; #ievobio &lt;br/&gt;&lt;br/&gt; “That is why arXiv readers are eager to nav the raw &lt;br/&gt;&lt;br/&gt; material, and value the accel avail over the filtering by the journal” Ginsberg #ievobio &lt;br/&gt;&lt;br/&gt; Dan is founder of http://t.co/Py8JSR03 and an established web entrepreneur #ievobio &lt;br/&gt;&lt;br/&gt; MT &lt;a href=&quot;http://twitter.com/kcranstn&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kcranstn&quot;&gt;@kcranstn&lt;/span&gt;&lt;/a&gt;: download Whaley’s presentation, “Re-imagining peer review” at #ievobio http://t.co/orQBtzyz &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/matstopel&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;matstopel&quot;&gt;@matstopel&lt;/span&gt;&lt;/a&gt; Hi! Yup: &lt;a href=&quot;http://twitter.com/RoseRedfield&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;RoseRedfield&quot;&gt;@RoseRedfield&lt;/span&gt;&lt;/a&gt; mentioned her open notebook and encouraged others, &amp;amp; Liam Revell mentioned his #ONS dev blog. &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/phylorich&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;phylorich&quot;&gt;@phylorich&lt;/span&gt;&lt;/a&gt; sounds like “sometimes?” Don’t think is doing quasse+auteur with dens dep model + exp scaling on tree? &lt;br/&gt;&lt;br/&gt; Stadler adapting her speciation-extinction models 2 SIR dynamics. Cool! but I missed what’s new here to the epi lit &amp;amp; can’t find the JTB pub &lt;br/&gt;&lt;br/&gt; Stadler: “cannot explain high imbalance” #evol2012 wouldn’t an explanation require a non-Markovian branching model? / &lt;a href=&quot;http://twitter.com/jembrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jembrown&quot;&gt;@jembrown&lt;/span&gt;&lt;/a&gt; &lt;br/&gt;&lt;br/&gt; Tanja (Gernhard) Stadler gives Maynard Smith award talk also describing phylo methods in #rstats: TreePar. #evol2012 http://t.co/odxYnD0j &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/richfitz&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;richfitz&quot;&gt;@richfitz&lt;/span&gt;&lt;/a&gt; know if Rabosky’s BAMM is est. trait + speciation together (diversitree style?) &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; Rabosky: BAMM: RJMCMC to identify shifts in diversification models in trees (incl time/density dpdt, incomp samp) #evol2012 &lt;br/&gt;&lt;br/&gt; Yay for self-updating! RT &lt;a href=&quot;http://twitter.com/matstopel&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;matstopel&quot;&gt;@matstopel&lt;/span&gt;&lt;/a&gt; RT &lt;a href=&quot;http://twitter.com/rob_beiko&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rob_beiko&quot;&gt;@rob_beiko&lt;/span&gt;&lt;/a&gt;: #ievobio Antonelli: goal is self-updating thingo that supports many downstream analyses &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/omearabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt;&lt;/a&gt; has also cloned himself to speed up writing of datelife #ievobio (writes code from two computers nearly simultaneously) &lt;br/&gt;&lt;br/&gt; who says #rstats can’t be a webserver? RT &lt;a href=&quot;http://twitter.com/rob_beiko&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rob_beiko&quot;&gt;@rob_beiko&lt;/span&gt;&lt;/a&gt;: #ievobio O’Meara just got possessed by the R daemon, I think. &lt;br/&gt;&lt;br/&gt; Datelife is running an #rstats server FastRWeb http://t.co/McBYogHl and http://t.co/6KDYtK8R on backend for computations #ievobio &lt;br/&gt;&lt;br/&gt; Link to API documentation? RT &lt;a href=&quot;http://twitter.com/rob_beiko&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rob_beiko&quot;&gt;@rob_beiko&lt;/span&gt;&lt;/a&gt;: #ievobio O’Meara: uses restful API, allows embargoed data with appropriate flag set / &lt;a href=&quot;http://twitter.com/rOpenSci&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;&lt;/a&gt; &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/omearabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt;&lt;/a&gt; Why not use http://t.co/lKICFiOm ? Not open software, not open data, forbids data mining. #ievobio. Use http://t.co/QSE9QO15 &lt;br/&gt;&lt;br/&gt; .#ievobio: &lt;a href=&quot;http://twitter.com/omearabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt;&lt;/a&gt;: why do this? Because one of the most popular ways is just to make it up. &lt;br/&gt;&lt;br/&gt; .#ievobio &lt;a href=&quot;http://twitter.com/omerabrian&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;omerabrian&quot;&gt;@omerabrian&lt;/span&gt;&lt;/a&gt; presents DateLife for the Challenge Entry on huge phylogenies. Check it out on http://t.co/IxJbAJoa &lt;br/&gt;&lt;br/&gt; Liam’s dev blog is a kind of open lab notebook; a reference source for himself and the community #evol2012 #openscience http://t.co/iKaRJjhn &lt;br/&gt;&lt;br/&gt; .#evol2012 #littleknownfact Liam has an active herp research program. (if he’s not replying on #r-sig-phylo in 20sec, he’s catching lizards) &lt;br/&gt;&lt;br/&gt; Liam Revell gives the &lt;a href=&quot;http://twitter.com/ASNAmNat&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ASNAmNat&quot;&gt;@ASNAmNat&lt;/span&gt;&lt;/a&gt; Young Investigator award, talking about “New phylo comparative methods” #evol2012 &lt;br/&gt;&lt;br/&gt; Price uses sgima^2/alpha ratio to estimate disparity, `cause alpha is better measure of phylo signal than lambda #evol2012 #verytrue &lt;br/&gt;&lt;br/&gt; Sam Price http://t.co/L0PNq599 asks: do vertebrate eyes evolve slower than teeth? Phylo methods to compare rates across traits #evol2012 &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/phylorich&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;phylorich&quot;&gt;@phylorich&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/michaelbarton&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;michaelbarton&quot;&gt;@michaelbarton&lt;/span&gt;&lt;/a&gt; agreed – I think ecologists prefer the messy syntax of #rstats to the sterile whitespace of python! #ievobio &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/michaelbarton&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;michaelbarton&quot;&gt;@michaelbarton&lt;/span&gt;&lt;/a&gt;: #bioinfsurvey python is the fastest growing in life sciences, while R is current most used. http://t.co/n3qo7Ufe #ievobio &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/michaelbarton&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;michaelbarton&quot;&gt;@michaelbarton&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; is being modest. folks I hear are raving about a nice presentation of so many cutting edge methods ;-) &lt;br/&gt;&lt;br/&gt; Ree chooses #python, despite 99% of phylogenetics being in #rstats. Notes natural sciences/industry python is widespread #ievobio &lt;br/&gt;&lt;br/&gt; Ree says current (&amp;amp; future) is in scripting. extensible. modular. API == #rstats. but needs more interactive &amp;amp; dynamic graphics. #ievobio &lt;br/&gt;&lt;br/&gt; Ree describes evolution of phylo software: console (no GUI, no interaction) -&amp;gt; desktop app (GUI, interactive) -&amp;gt; scripting #rstats #ievobio &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/hlapp&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hlapp&quot;&gt;@hlapp&lt;/span&gt;&lt;/a&gt;: . &lt;a href=&quot;http://twitter.com/kcranstn&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kcranstn&quot;&gt;@kcranstn&lt;/span&gt;&lt;/a&gt;: Remote participation using G+ hangouts worked quite well. #ievobio &lt;br/&gt;&lt;br/&gt; A well-named team for working on front-end UI! RT &lt;a href=&quot;http://twitter.com/rob_beiko&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;rob_beiko&quot;&gt;@rob_beiko&lt;/span&gt;&lt;/a&gt;: #ievobio Cranston: five subgroups including my favorite, “shiny” &lt;br/&gt;&lt;br/&gt; This time with targeted goals, worked well! RT &lt;a href=&quot;http://twitter.com/BrownJosephW&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;BrownJosephW&quot;&gt;@BrownJosephW&lt;/span&gt;&lt;/a&gt;: Phylotastic == lock a bunch of geeks in a room for 5 days. #evol2012 #ievobio &lt;br/&gt;&lt;br/&gt; .#ievobio &lt;a href=&quot;http://twitter.com/kcranstn&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;kcranstn&quot;&gt;@kcranstn&lt;/span&gt;&lt;/a&gt; visit phylotastic on github: https://t.co/W7tHJTNw or check out the demos: http://t.co/FoZUWEyB #evol2012 &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/pleunipennings&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;pleunipennings&quot;&gt;@pleunipennings&lt;/span&gt;&lt;/a&gt; The OneZoom huge tree visualization? not up yet, will be at http://t.co/FB2XfO8T &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; also uses musse approach to show these sexual color changes impact diversification rates #evol2012 &lt;br/&gt;&lt;br/&gt; Mahler used a mecca (stepwise AIC) approach to multi OU (ouch) model. #evol2012 &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/hylopsar&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;hylopsar&quot;&gt;@hylopsar&lt;/span&gt;&lt;/a&gt; looks at evolution of irridescent colors in african starlings (using OUwie &amp;amp; pmc!) &lt;br/&gt;&lt;br/&gt; Luke presents a mecca (stepwise AIC) approach to multi OU (ouch) model. #evol2012 &lt;br/&gt;&lt;br/&gt; Luke Mahler puts the replicated evolution story of the Anoles to the test: phylo analysis including weird taxa #evol2012 &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/phylorich&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;phylorich&quot;&gt;@phylorich&lt;/span&gt;&lt;/a&gt; he omitted the error bars… still makes you wonder how far purely phylo approach to diversification can go… #evol2012 &lt;br/&gt;&lt;br/&gt; In a bonus slide in the Q&amp;amp;A, Mark shows each speciation event matched to a glaciation event #evol2012 &lt;br/&gt;&lt;br/&gt; McPeek’s synthesis of detailed community ecology, habitat, behavior, phylogenetics &amp;amp; evolution is mindblowing. #evol2012 &lt;br/&gt;&lt;br/&gt; Mark McPeek Macroevolutionary ecology: a tale of woe and intrigue in Damselflies of N America. Lake systems make replicate #evol2012 expts &lt;br/&gt;&lt;br/&gt; The tree of millions of tips is, at it’s original scale, larger than the known universe. Feels like a flyby in Google earth. #evol2011 &lt;br/&gt;&lt;br/&gt; Rosindell: The Google Maps of the “Tree of Life” presented for the first time at #evol2012 zooming in with rich metadata &lt;br/&gt;&lt;br/&gt; Dick Gomulkiewicz: a pop gen look at evolution’s impact on community assembly (well, invasion when rare) #evol2011 &lt;br/&gt;&lt;br/&gt; Cavender-Bares: Oaks are a “worst case scenario for the biological species concept” Coyne &amp;amp; Orr #evol2012 &lt;br/&gt;&lt;br/&gt; I don’t get it Dean. How do we pick units to compare evolution in widely different traits? #evol2012 constrained Cholesky doesn’t address? &lt;br/&gt;&lt;br/&gt; Dean Adams packing the house at #evol2012; explores thorny question of comparing rates of evolution between different traits &lt;br/&gt;&lt;br/&gt; See the nice model of Gomulkiewicz &amp;amp; colleagues here http://t.co/boPzbVBV #evol2012 &lt;br/&gt;&lt;br/&gt; Dick Gomulkiewicz brings a pop gen view to evolution on invasion “Evolution doesn’t always matter – that’s what the theory says” #evol2012 &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/jembrown&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;jembrown&quot;&gt;@jembrown&lt;/span&gt;&lt;/a&gt; How’d I miss this! Does Landis have software or pub on this work out yet? &lt;br/&gt;&lt;br/&gt; &lt;a href=&quot;http://twitter.com/CMastication&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;CMastication&quot;&gt;@CMastication&lt;/span&gt;&lt;/a&gt; an Anolis grahami I’m told! Perhaps you are in Jamaica (where grahami is native) or Bermuda (where it is introduced)? &lt;br/&gt;&lt;br/&gt; Who says you can’t publish #openaccess null results or replications of previous studies in &lt;a href=&quot;http://twitter.com/sciencemagazine&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;sciencemagazine&quot;&gt;@sciencemagazine&lt;/span&gt;&lt;/a&gt;? http://t.co/Z5f4j5oL #evol2012 &lt;br/&gt;&lt;br/&gt; Here comes &lt;a href=&quot;http://twitter.com/RosieRedfield&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;RosieRedfield&quot;&gt;@RosieRedfield&lt;/span&gt;&lt;/a&gt; #openscience punchline, calling the bluff of Science and sharing her work before July 26 embargo #evol2012 &lt;br/&gt;&lt;br/&gt; .&lt;a href=&quot;http://twitter.com/john_s_wilkins&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;john_s_wilkins&quot;&gt;@john_s_wilkins&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/ironlisa&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ironlisa&quot;&gt;@ironlisa&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;http://twitter.com/Boraz&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;Boraz&quot;&gt;@Boraz&lt;/span&gt;&lt;/a&gt; exactly! as &lt;a href=&quot;http://twitter.com/RosieRedfield&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;RosieRedfield&quot;&gt;@RosieRedfield&lt;/span&gt;&lt;/a&gt; says, they reversed their thoughts on social media over this #evol2012 #irony &lt;br/&gt;&lt;br/&gt; .#arseniclife authors used social media to promote– &amp;amp; still do: check out lead author Felisa’s views on this story too: &lt;a href=&quot;http://twitter.com/ironlisa&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ironlisa&quot;&gt;@ironlisa&lt;/span&gt;&lt;/a&gt; #evol2012 &lt;br/&gt;&lt;br/&gt; RT &lt;a href=&quot;http://twitter.com/David_Dobbs&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;David_Dobbs&quot;&gt;@David_Dobbs&lt;/span&gt;&lt;/a&gt;: the #arseniclife saga continues to highlight and recast both problems &amp;amp; ops in scientific publishing and media. #evol2012
&lt;/div&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Evolution 2012 Conference, Day 1</title>
	 <link href="/2012/07/08/Evolution-Day1.html"/>
   <updated>2012-07-08T00:00:00+00:00</updated>
   <id>/07/08/Evolution-Day1</id>
   <content type="html">&lt;p&gt;Fantastic first day at Evolution. Spent the morning in the SSB Sympossium organized by Jeremy Brown, “Predictive approaches for assessing the fit of evolutionary models”. Really covered both methods assessing model fit (posterior predictive simulations) and approximate likelihood approaches, which are also simulation-based. Then the afternoon in the second SSB Symposium on emerging methods for comparative phylogenetics, organized by Liam Revell and Cecile Ane, which included my talk. Lots of great talks, but Cecile’s was perhaps the most striking results I saw presented all day.&lt;/p&gt;
&lt;h3 id=&quot;detecting-evolutionary-regime-shifts-with-comparative-phylogenetics&quot;&gt;Detecting evolutionary regime shifts with comparative phylogenetics&lt;/h3&gt;
&lt;p&gt;(my slides)&lt;/p&gt;
&lt;div id=&quot;__ss_13576088&quot; style=&quot;width:425px&quot;&gt;
&lt;strong style=&quot;display:block;margin:12px 0 4px&quot;&gt;&lt;a href=&quot;http://www.slideshare.net/cboettig/evolution-13576088&quot; title=&quot;Evolution&quot; target=&quot;_blank&quot;&gt;Evolution&lt;/a&gt;&lt;/strong&gt; &lt;iframe src=&quot;http://www.slideshare.net/slideshow/embed_code/13576088&quot; width=&quot;425&quot; height=&quot;355&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:1px solid #CCC;border-width:1px 1px 0&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;div style=&quot;padding:5px 0 12px&quot;&gt;
View more presentations from &lt;a href=&quot;http://www.slideshare.net/cboettig&quot; target=&quot;_blank&quot;&gt;Carl Boettiger&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&quot;notes-and-links-from-my-talk&quot;&gt;Notes and links from my talk&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;cran.r-project.org/web/packages/OUwie/index.html&quot;&gt;Download OUwie&lt;/a&gt; for estimating regime shift models in any parameters (on CRAN).&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/pmc/index.html&quot;&gt;Download pmc&lt;/a&gt; for phylogenetic monte carlo to evaluate model fit.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.carlboettiger.info/wordpress/archives/category/phylogenetics&quot;&gt;Open lab notebook entries&lt;/a&gt; Covers the four projects I discussed (release of constraint/OUwie, phylogenetic informativeness (pmc) and data access (rfishbase/treebase) over the past two years.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Notes pulled from twitter, in reverse-chronological order.&lt;/p&gt;
&lt;h3 id=&quot;ssb-symposium-on-comparative-phylogenetic-methods&quot;&gt;SSB Symposium on comparative phylogenetic methods&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;.&lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt; shows awesome visual of code for TreEvo ABC package evolving using gource: http://t.co/wAdUyhTg #git #evol2012&lt;/li&gt;
&lt;li&gt;Exciting possibilities, but the heuristic nature of the ABC is scary. Where are the convergence theorems? More sims please? #evol2012&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;lukejharmon&quot;&gt;@lukejharmon&lt;/span&gt; &lt;span class=&quot;citation&quot; data-cites=&quot;hyposlar&quot;&gt;@hyposlar&lt;/span&gt; my intuition is that the lamba est isn’t reliable? Would love to hear Cecile on microergodicity of lambda #evol2012&lt;/li&gt;
&lt;li&gt;Love that &lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt; writes eqns out on slides in #rstats form instead of greek math! #evol2012&lt;/li&gt;
&lt;li&gt;Now &lt;span class=&quot;citation&quot; data-cites=&quot;omearabrian&quot;&gt;@omearabrian&lt;/span&gt; tells us: we’re too slow at coming up w/ new models, &amp;amp; the new ones are basically the same as old! Very true! #evol2012&lt;/li&gt;
&lt;li&gt;Liam demonstrates essential role of simulations in knowing how our methods behave under real data #evol2012 #ironicbuttrue&lt;/li&gt;
&lt;li&gt;Liam shows sigma upward bias to topo error, Blomberg’s K falls, lambda unclear, phylo reg unbiased (Rolph2006) model selct more OU #evol2012&lt;/li&gt;
&lt;li&gt;RT &lt;span class=&quot;citation&quot; data-cites=&quot;k8hert&quot;&gt;@k8hert&lt;/span&gt; Excited about &lt;span class=&quot;citation&quot; data-cites=&quot;cboettig&quot;&gt;@cboettig&lt;/span&gt;’s discussion of &lt;span class=&quot;citation&quot; data-cites=&quot;rOpenSci&quot;&gt;@rOpenSci&lt;/span&gt;. Open science, data, and synthesis are my fav topics! http://t.co/dRBOFkil&lt;/li&gt;
&lt;li&gt;Excited to see Liam Revell finally take us beyond that onerous “First, assume the phylogeny &amp;amp; data are known without error…” #evol2012&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;phylorich&quot;&gt;@phylorich&lt;/span&gt; &lt;span class=&quot;citation&quot; data-cites=&quot;k8hert&quot;&gt;@k8hert&lt;/span&gt; perhaps a pure birth model, haven’t attempted a fit ;-)&lt;/li&gt;
&lt;li&gt;Lars Schmitz introduces the phylo comparative method he used to identify which dinosaurs were nocturnal #evol2012 in http://t.co/j2t4hSj8&lt;/li&gt;
&lt;li&gt;Note that room could hold &amp;gt;2000… RT &lt;span class=&quot;citation&quot; data-cites=&quot;lukejharmon&quot;&gt;@lukejharmon&lt;/span&gt; First time in a while: room for all at Felsenstein’s talk #evol2012&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;daisieclickie&quot;&gt;@daisieclickie&lt;/span&gt; &lt;span class=&quot;citation&quot; data-cites=&quot;conrbrien&quot;&gt;@conrbrien&lt;/span&gt; yup, http://t.co/Xekyy8F0 has the eff sample size / non-microergodic root for BM. Think the OU one isn’t out?&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;k8hert&quot;&gt;@k8hert&lt;/span&gt; thanks! Wish Cecile’s paper with Ho on the OU microergodic was out, seems to be in review still…&lt;/li&gt;
&lt;li&gt;Joe Felsenstein presents integrating fossils into the tree in his grand old style: nice diagrams &amp;amp; clean math “you know &amp;amp; love” #evol2012&lt;/li&gt;
&lt;li&gt;BM: microergodic: sigma, not X0. OU: microergodic: yes: sigma, sometimes: alpha (dep on topology), not: theta. #evol2012. #crypticbutkey&lt;/li&gt;
&lt;li&gt;Cecile’s effective sample size paper (why you’ll never get root states w/o fossils) http://t.co/Xekyy8F0 #evol2012&lt;/li&gt;
&lt;li&gt;Cecile introduces microergodicity: “identifiability” as tree size -&amp;gt; infty, do pars converge? (Larger tree != more indep samples) #evol2012&lt;/li&gt;
&lt;li&gt;Cecile highlights the statistical dangers of phylogenetic methods, whose data violate expectations #evol2012 #breakingclassicaltheory&lt;/li&gt;
&lt;li&gt;Cecile Ane sums up the radiation of comparative methods “take your fav statistical approach and stick phylogenetic in front” #evol2012&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ssb-symposium-on-predictive-simulation-methods&quot;&gt;SSB Symposium on predictive simulation methods&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;I’ll be speaking on detecting evolutionary regime shifts in the SSB on phylo methods at 3:15p in rm Canada 2-3 #evol2012&lt;/li&gt;
&lt;li&gt;SSE education symposium on timely issue: data access &amp;amp; scientific societies #evol2012, Tom Meagher. Repos good for research; good for edu&lt;/li&gt;
&lt;li&gt;Impressed that http://t.co/Gqj2i3Wi gets students to submit structured data to repo. We can’t do that with most researchers #evol2012&lt;/li&gt;
&lt;li&gt;Mark Beaumont on hierarchical models by an iterated vers of approx Bayes (ABC) #evol2012. Exciting, but are these sufficient stats?&lt;/li&gt;
&lt;li&gt;How about just “might”? RT &lt;span class=&quot;citation&quot; data-cites=&quot;lukejharmon&quot;&gt;@lukejharmon&lt;/span&gt; Graham Slater just edited the title of my paper during his talk #Evol2012.&lt;/li&gt;
&lt;li&gt;Graham shows max lik inference on early burst evolution fails when faced with even a few outliers. Uses weights to avoid. #evol2012&lt;/li&gt;
&lt;li&gt;Graham Slater shows importance of fossils in detecting early burst evolution #evol2012 by mle, disparity through time &amp;amp; node-height test&lt;/li&gt;
&lt;li&gt;Try out &lt;span class=&quot;citation&quot; data-cites=&quot;jembrown&quot;&gt;@jembrown&lt;/span&gt; method for posterior predictive assessment of phylogeny now in AMP: http://t.co/co8Lo5qp #evol2012&lt;/li&gt;
&lt;li&gt;.&lt;span class=&quot;citation&quot; data-cites=&quot;jembrown&quot;&gt;@jembrown&lt;/span&gt; discusses entropy stats &amp;amp; distance matrix distributions from post. simulation to identify how good our tree inference is.&lt;/li&gt;
&lt;li&gt;.&lt;span class=&quot;citation&quot; data-cites=&quot;jembrown&quot;&gt;@jembrown&lt;/span&gt; gives fantastic intro to posterior predictive seminar for #evol2012, addressing approx likelihood + model fit, 2 key issues.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/07/04/notes.html"/>
   <updated>2012-07-04T00:00:00+00:00</updated>
   <id>/07/04/notes</id>
   <content type="html">&lt;h2 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;bias table with measurement noise&lt;/li&gt;
&lt;li&gt;Fix deterministic.&lt;/li&gt;
&lt;li&gt;Run scenarios with very low noise rather than deterministic&lt;/li&gt;
&lt;li&gt;Reed S vs. D theorem&lt;/li&gt;
&lt;li&gt;Reed theorem extended to Sethi cases&lt;/li&gt;
&lt;li&gt;simulation values should import scenario list. (done for bias table).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reed-theorem&quot;&gt;Reed theorem&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Not showing S = D for cost free. hmm…&lt;/li&gt;
&lt;li&gt;Not showing S constant for different profit functions?!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;impact-of-management-on-warning-signals&quot;&gt;impact of management on warning signals&lt;/h2&gt;
&lt;p&gt;Compare the probability of detection in managed and unmanaged models.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;See pdg-control &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues&quot;&gt;Issues Tracker&lt;/a&gt; for details &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I’m trying to rely on the issues tracker to provide a more dynamic way to track progress than simply listing goals in the notebook. Hope to link these to the notebook through the Github API, ideally as static snapshots.&lt;/p&gt;
&lt;h2 id=&quot;evolution&quot;&gt;Evolution&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Evolution talk&lt;/li&gt;
&lt;li&gt;fishbase reply&lt;/li&gt;
&lt;li&gt;iEvoBio talk (rOpenSci)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ncfaculty.net/dogle/fishR/gnrlex/gnrlex.html&quot;&gt;fishR&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>wrightscape / release of constraint</title>
	 <link href="/2012/07/03/notes.html"/>
   <updated>2012-07-03T00:00:00+00:00</updated>
   <id>/07/03/notes</id>
   <content type="html">&lt;p&gt;Here’s a table of all the comparisons, indicating which is the preferred model in each pairwise comparison. (In &lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/doc/wrightscape_github.md&quot;&gt;my outline&lt;/a&gt;, Figure 4 shows the bm3 v a3 for KT and open lever ratio, and Fig 3 shows the actual parameter values for those models). This table is all for the case that allows shifts at both pharyngeal and the intramandibular transitions. I have &lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/d0cab00702be1e552be0ee63524f20da5395d53e/inst/examples/labrid_mc.md&quot;&gt;graphs of the actual parameter values&lt;/a&gt; as well (which we need to see if the constraint has increased or decreased at the transition, and by how much), but gets complex quickly.&lt;/p&gt;
&lt;p&gt;I focused on Brownie rather than OU with sigmas varying because it is a simpler model with a cleaner interpretation. It also has more significant results due to this simplicity. I focused on the KT and open because they have the most significant difference between the Brownie model (bm3) and the release of constraint model (a3).&lt;/p&gt;
&lt;p&gt;Note below that some comparisons are nested while others are not. Note that we rarely have the power to tell a3 from t3 (both are 6-parameter models). Results restricted to the parrotfish tree with the intramandibular tranisititon don’t usually have the power to get many significant differences.&lt;/p&gt;
&lt;p&gt;regimes = &lt;code&gt;two_shifts&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;comparison&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;bodymass&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;close&lt;/th&gt;
&lt;th style=&quot;text-align: right;&quot;&gt;open&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;kt&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;gape.y&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;prot.y&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;AM.y&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;SH.y&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;LP.y&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm v bm3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;bm***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3*** b&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;m3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm v ou&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;ou*&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou*** o&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;u**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou*&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3 v a3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;a3***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;a3***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;a3*&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3 v t3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;t3***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou v bm3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;ou***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou***&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3**&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3 v a3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3**&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;a3*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;key&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;model&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;brownian motion&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;ou&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Ornstein-Uhlenbeck&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;bm3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;“Brownie” with three regimes (intramandibular and pharyngeal shifts)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;a3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;OU with three regimes for alphas parameter&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;t3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;“ouch”, OU with three regimes for theta parameter&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;NS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Not significant difference in comparison&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;(&lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/798f57c18c84866456aafc864cf9b1fcd1ddef13/inst/examples/labrid_power.md&quot;&gt;code reproducing results&lt;/a&gt;)&lt;/p&gt;
&lt;h2 id=&quot;summary-results-as-figure&quot;&gt;summary results as figure&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7134/7074425683_d4704fd0b3_o.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-8&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>varying recruitment function, noise form, and harvesting cost</title>
	 <link href="/2012/07/02/notes.html"/>
   <updated>2012-07-02T00:00:00+00:00</updated>
   <id>/07/02/notes</id>
   <content type="html">&lt;p&gt;Seems that the level of caution observed in the deterministic scenario relative to the increasing noise scenarios comes, perhaps not surprisingly, from the addition of harvesting costs, rather than from overcompensatory dynamics or the asymmetric forms of the noise, which seem to have quantitative but not qualitative differences.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/793e531ea6a767245afa6b2e57681eb59fbbcfe6/inst/examples/bias_table.md&quot;&gt;Table for NPV under biased parameters&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/1f345fd819029d9c76d9186853fc04a40856f92e/inst/examples/bh_lognormal.md&quot;&gt;Beverton-Holt recruitment, lognormal noise, cost-free&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/4cc152a381a9463b4629885f11dc897f6bc7856d/inst/examples/bh_lognormal.md&quot;&gt;BH, lognormal, costs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/d6454fa845b0c7dd1c29a33282aaacf4e1fd473b/inst/examples/bh_uniform.md&quot;&gt;BH, uniform, free&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/4cc152a381a9463b4629885f11dc897f6bc7856d/inst/examples/bh_uniform.md&quot;&gt;BH, uniform, costs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/1f345fd819029d9c76d9186853fc04a40856f92e/inst/examples/logistic_lognormal.md&quot;&gt;logistic, lognormal, free&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e2bc26642dfe0287bfd5aae9e5cee8d5b8c2665b/inst/examples/logistic_lognormal.md&quot;&gt;logistic, lognormal, costs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;logistic, uniform, free&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e2bc26642dfe0287bfd5aae9e5cee8d5b8c2665b/inst/examples/logistic_uniform.md&quot;&gt;logistic, uniform, costs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Progress this week, by project</title>
	 <link href="/2012/06/29/notes.html"/>
   <updated>2012-06-29T00:00:00+00:00</updated>
   <id>/06/29/notes</id>
   <content type="html">&lt;h3 id=&quot;critical-transitions&quot;&gt;Critical transitions&lt;/h3&gt;
&lt;p&gt;Must determine the correct set of comparisons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Solve the SDP optim using the exact time dependent&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Simulate under an f with the same escapement policy but different functional form, i.e. logistic with K &amp;amp; r estimated from the May example, either analytically or directly from the data.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Considering the &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ef5148047563ca8e1bd05d4d946161cc64364f16/inst/examples/cautious.md&quot;&gt;costs of “cautious policy”&lt;/a&gt; (calculates optimal harvest recursively but always selects a fraction P of the optimal.) Results in non-constant escapement rules:&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8152/7455686164_d55ac0dde9_o.png&quot; alt=&quot;plot of chunk policyfn_plot&quot; /&gt;&lt;figcaption&gt;plot of chunk policyfn_plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Also has nonlinear (convex) impact on value.&lt;/p&gt;
&lt;p&gt;Filing out the boxes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the value of no action, no shift – NPV under assumed model&lt;/li&gt;
&lt;li&gt;the value of no action, shift – depends when shift occurs. Assume worst?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;value of action, no shift – Action is p = ?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;value of action, shift – action is p = ? Under what shift process?&lt;/li&gt;
&lt;li&gt;Consider the single-timestep decision first. Then the repeated decision.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/8373d9ae215cb49bceb5f8b2684078335ce68e44/inst/examples/logistic_lognormal.md&quot;&gt;logistic, lognormal&lt;/a&gt; (any measurement error is most conservative, then determinstic. gi the least)&lt;/li&gt;
&lt;li&gt;Beverton-Holt, lognormal (&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/0a43d3e60966b9af9ad6adfe7c3ff4a62638226a/inst/examples/value_of_information.md&quot;&gt;early version of figures&lt;/a&gt;) deterministic is &lt;em&gt;least&lt;/em&gt; conservative, measurement errors, combined errors most. (Rerunning as bh_lognormal.Rmd)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/2d6d42f04de6df2fdca6a16a67c8a665b202a8f6/inst/examples/voi_sethi_parameters.md&quot;&gt;logistic, uniform&lt;/a&gt; (deterministic is always most conservative. gi is least)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/2d6d42f04de6df2fdca6a16a67c8a665b202a8f6/inst/examples/bh_uniform.md&quot;&gt;Beverton-Holt, uniform&lt;/a&gt; (deterministic is most conservative, growth noise is least!)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;constructed bias table: optimal under low/med/high r by implement under low/med/high r. (&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/793e531ea6a767245afa6b2e57681eb59fbbcfe6/inst/examples/bias_table.md&quot;&gt;results&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;rfishbase-revisions&quot;&gt;rfishbase revisions&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;add fair use text, future development with fishbase.org. DONE&lt;/li&gt;
&lt;li&gt;add all dependencies. DONE&lt;/li&gt;
&lt;li&gt;Reply letter text, send to P and D. DONE&lt;/li&gt;
&lt;li&gt;switch to robust regression. DONE&lt;/li&gt;
&lt;li&gt;fix/tweak figure appearance. DONE&lt;/li&gt;
&lt;li&gt;Resubmit.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;treebase&quot;&gt;Treebase&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Finish updates based on Duncan’s suggestions. DONE&lt;/li&gt;
&lt;li&gt;Submit 0.0-6 to CRAN. DONE&lt;/li&gt;
&lt;li&gt;Submit manuscript. DONE&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;working-on-to-do&quot;&gt;Working on / To Do&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;rfishbase – revisions. DONE&lt;/li&gt;
&lt;li&gt;evolution talk&lt;/li&gt;
&lt;li&gt;ievobio talk&lt;/li&gt;
&lt;li&gt;csgf talk&lt;/li&gt;
&lt;li&gt;esa talk&lt;/li&gt;
&lt;li&gt;wrightscape&lt;/li&gt;
&lt;li&gt;Alan decision theory and early warning&lt;/li&gt;
&lt;li&gt;Jim’s precautionary paper JEEM&lt;/li&gt;
&lt;li&gt;PDG policy costs&lt;/li&gt;
&lt;li&gt;Jake uncertainty and learning&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Ievobio Lightning Talk Proposal</title>
	 <link href="/2012/06/24/ievobio-lightning-talk-proposal.html"/>
   <updated>2012-06-24T00:00:00+00:00</updated>
   <id>/06/24/ievobio-lightning-talk-proposal</id>
   <content type="html">&lt;h2 id=&quot;the-ropensci-project&quot;&gt;The rOpenSci Project&lt;/h2&gt;
&lt;h3 id=&quot;carl-boettiger-scott-chamberlain-karthik-ram&quot;&gt;Carl Boettiger, Scott Chamberlain, Karthik Ram&lt;/h3&gt;
&lt;p&gt;Sharing scientific data is a win for individual scientists as well as for the larger enterprise of other researchers, publishers, funders, educators, and the general public. Despite the rapid increase of public data, most researchers continue to work on their own data just as before.  We lack the both the tools and training to quickly and easily leverage such data.  To address some of these challenges, we have created the &lt;a href=&quot;http://ropensci.org&quot;&gt;rOpenSci&lt;/a&gt; project.&lt;/p&gt;
&lt;p&gt;The project creates tools in the form of R packages – a powerful data-manipulation and visualization environment familiar to many researchers – that interface with the major data repositories to make serious data exploration and analysis easy and script-able. We hope to provide a model other researchers and databases can replicate for interfacing with researchers, interfacing with R.  Our packages are open-source and developed in the open from their inception.  The rOpenSci project is becoming a means of discovering just how many databases are available, and a common environment in which to allow them to interact. In the past year the project has won a software award, $5,000 support for a full-time summer intern, attracted a world-class set of advisors, and authored 28 different software packages.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0/&quot;&gt;CC0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;All sofware open-source &lt;a href=&quot;https://github.com/ropensci&quot; class=&quot;uri&quot;&gt;https://github.com/ropensci&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes on value of information runs with uniform noise</title>
	 <link href="/2012/06/22/notes.html"/>
   <updated>2012-06-22T00:00:00+00:00</updated>
   <id>/06/22/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Debug Sethi with large uniform noise: needed to avoid havest &amp;gt; stock in definition of &lt;code&gt;f&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I ran the value of information calculations using the Sethi settings of a logistic map and uniform noise, which does indeed replicate their results, where the measurement error escapement is lower than the “all low noise” (“deterministic”) escapement until stock get above carrying capacity.  &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/bced4825c8b9203ed2ab257a4c4fa7e40307cf11/inst/examples/voi_sethi_parameters.md&quot;&gt;results&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kinda of interesting that this patterns isn’t robust to the noise distribution; I still find the lognormal noise pattern a bit more intuitive. Also rather interesting that nothing shows up when &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e0ad849307bcbd12dfb49abae2865bd2abd1cf3b/inst/examples/voi_sethi_parameters.md&quot;&gt;restricted to 10% noise range&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There’s also the updated value of information table in the results. As Mike predicted, with this symmetric noise distribution, the presence of growth noise no longer increases the value. Perhaps the only surprise is that adding extra forms of stochasticity that aren’t present has little impact on the value, presumably from the linearity? Some sample differences:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;cost of reckless (det - all real noise): 668 - 414 = 254&lt;/li&gt;
&lt;li&gt;cost of caution (det - all imagined noise): 668 - 672 = -4&lt;/li&gt;
&lt;li&gt;cost of stochasticity (det - all): 668 - 450 = 218&lt;/li&gt;
&lt;li&gt;assuming measurement uncertainty when absent ([g,g] - [g, g+m]): 678-663 = 15&lt;/li&gt;
&lt;li&gt;ignoring when present ([g+m, g+m] - [g+m, g]): 568-550 = 18&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;However, the asymmetric comparison is much more dramatic when implementation uncertainty is also present:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Assuming measurement uncertainty when absent: ([gi, gi] - [gi, gmi]) = 626-629&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ignoring when present: ([gmi, gmi] - [gmi, gi]) = 449 - 374&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Running with more replicates to tighten the monte carlo integration. (nice 19 on 0)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Running with the wide uniform noise on an allee model with nontrivial alternative stable states&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/06/21/notes.html"/>
   <updated>2012-06-21T00:00:00+00:00</updated>
   <id>/06/21/notes</id>
   <content type="html">&lt;h2 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/25bcbcbf67cc339215cbe98c3e2caeece7aa4946&quot;&gt;Reed with uniform large noise, logistic map&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/4c7f1523b746a8dc44f81c34b35929b125f08689&quot;&gt;Reed with uniform large noise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/e6037e0ded264ad8892261cad0b32f81dcdcb2ac&quot;&gt;Reed with uniform small noise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/b2330597532723f8bf2bab3b1ccd429a83cde520/inst/examples/Sethi.md&quot;&gt;Sethi with uniform small noise, logistic map&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/8dfaf18b323133c9e8b005405569ebc5303d6e3c/inst/examples/Sethi.md&quot;&gt;Sethi with large noise&lt;/a&gt; Doesn’t work. hmm..&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/81dc0100c6868ce56d93dc2e037d8a7446ef5f24/inst/examples/voi_sethi_parameters.md&quot;&gt;voi_sethi_parameters.md&lt;/a&gt; , running value of information setup but with small noise &amp;amp; logistic map. Whoops, this example solves uniform noise but simulates log-normal noise, which probably explains the positive effect of growth noise once again.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Corrected Sethi simulation &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/voi_sethi_parameters.md&quot;&gt;small, uniform noise and logisitic map&lt;/a&gt;. Confirms Mike’s hypothesis that the benefit to growh noise came from the assymetry of the log-normal noise, as the benefit is gone in this case. The policy functions all look like constant escapement rules, as expected for the “all low” noise limits.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Re-running with larger noise.&lt;br /&gt;Also ran original value of information with gaussian noise.&lt;/p&gt;
&lt;h2 id=&quot;critical-transitions-and-early-warning&quot;&gt;Critical transitions and early warning&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Example with &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/695552177916ad09c7b48ab0894517de1b9a995f/inst/examples/criticaltransition.md&quot;&gt;underlying critical transition externality&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;added calculation of warning signals and &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/6df511774221c2e2845bf22f4e1ea65f0dccf1a1/inst/examples/criticaltransition.md&quot;&gt;distribution of resulting stats&lt;/a&gt;, and shows the state equation from May (1977).&lt;/li&gt;
&lt;li&gt;May (1977) example of transitions in &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/c78964d360e0c0f6400b64633716b89aef791192/inst/examples/May.md&quot;&gt;optimal management without any deterioration&lt;/a&gt; of environment / approaching shifts.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Conservative strategy that optimizes iteratively after selecting fraction &lt;code&gt;P&lt;/code&gt; of optimal harvest level. Compare &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/3fcda162002b000e0fbbe5622fdb490d3e54140a/inst/examples/cautious.md&quot;&gt;results with cautious strategy&lt;/a&gt; to the &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/daaaa9852d3fa847834c12c3a16710580d437770/inst/examples/cautious.md&quot;&gt;results for optimal harvest where &lt;code&gt;P = 1&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, use specific distribution and probabilities of a transition (ROC curve). &lt;a href=&quot;http://www.carlboettiger.info/2012/05/14/notes.html&quot;&gt;See table, eqn&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Simulate timeseries before management begins, use this data to compute warning signals.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Calculate the ROC curve&lt;/li&gt;
&lt;li&gt;Calculate the expected profits remaining under the hypothesis that the system is not going to collapse. “D”&lt;/li&gt;
&lt;li&gt;Calculate the expected profits under the assumption that the system collapses (in the next timestep?) “C” == 0&lt;/li&gt;
&lt;li&gt;Calculate the profits expected under a response to the signal. (Say, 50% reduction in harvest). “A”, “B”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ideal response with complete information: determine the optimal policy under temporally changing f.&lt;/p&gt;
&lt;h3 id=&quot;proposed-edits-to-the-earlywarnings-package&quot;&gt;Proposed edits to the earlywarnings package&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;separate out / functionalize each signal in &lt;code&gt;generic_ews&lt;/code&gt;, separate plotting from evaluating.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>the week so far</title>
	 <link href="/2012/06/19/notes.html"/>
   <updated>2012-06-19T00:00:00+00:00</updated>
   <id>/06/19/notes</id>
   <content type="html">&lt;h2 id=&quot;sunday&quot;&gt;Sunday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Sent in my review for PLoS ONE. No way to attach pdf files, had to create and send a secure link instead to provide comments on the pdf.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://stat.ethz.ch/pipermail/r-sig-phylo/2012-June/thread.html&quot;&gt;AIC discussion on r-sig-phylo&lt;/a&gt;. For a derivation I refer to Cavanaugh, (1997), also see &lt;a href=&quot;http://www.csse.monash.edu.au/~dschmidt/ModelSectionTutorial1_SchmidtMakalic_2008.pdf&quot;&gt;Daniel Schmidt’s slides&lt;/a&gt;. Aikaike’s original paper does the derivation less deliberately than Cavanaugh but does discuss this Frequentist intepretation as the maximum expected log likelihood (Akaike, 1974).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;monday&quot;&gt;Monday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Discussing &lt;a href=&quot;http://peerJ.com&quot;&gt;peerJ&lt;/a&gt;, &lt;a href=&quot;http://www.nceas.ucsb.edu/projects/12651&quot;&gt;NCEAS publishing working group&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;knitcitations submitted to CRAN&lt;/li&gt;
&lt;li&gt;Check fallacy appendix&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;runs-for-value-of-information&quot;&gt;Runs for Value of Information:&lt;/h3&gt;
&lt;p&gt;Stationary policy function and value function plots for the seven noise combinations, with &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/1547659280413637a9c53f0901692ffd91c6056d/inst/examples/value_of_information.md&quot;&gt;Beverton-Holt dynamics.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I also re-ran this with strongly nonlinear recruitment function for comparison (Ricker model with allee threshold below which stocks crash): &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/29a8160ba5da81ecbc2fca60ffe6633cf1ebff81/inst/examples/value_of_information_allee.md&quot;&gt;Allee dynamics&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;value-of-information-meeting-jim-mike&quot;&gt;Value of information meeting (Jim + Mike)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;check surprising result in growth noise using negative shocks only. Done: &lt;a href=&quot;https://github.com/cboettig/pdg_control/issues/14&quot;&gt;confirms expected behavior.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;run with Sethi exact settings (overnight, &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/voi_sethi_parameters.md&quot;&gt;results&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Think about Mike’s point in differences between parameter uncertainty and stochasticity. See &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/d8d46087d8194e10488eeb79790293fcbde0e58e/inst/examples/cost_of_bias.md&quot;&gt;cost_of_bias.md results&lt;/a&gt; as a starting point.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tuesday&quot;&gt;Tuesday&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;check fallacy appendix&lt;/li&gt;
&lt;li&gt;edits to knitcitations from feedback&lt;/li&gt;
&lt;li&gt;Use github url for all package pages on CRAN&lt;/li&gt;
&lt;li&gt;Submitted fallacy paper!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;wednesday&quot;&gt;Wednesday&lt;/h2&gt;
&lt;h3 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;debugging Sethi exact settings. Try running logistic + uniform shocks on Reed-only noise.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;evolution-stuff&quot;&gt;Evolution stuff&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;treebase finalize edits?&lt;/li&gt;
&lt;li&gt;ievobio submission?&lt;/li&gt;
&lt;li&gt;wrightscape edits&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc-css-notes&quot;&gt;Misc CSS notes&lt;/h2&gt;
&lt;p&gt;CSS &lt;a href=&quot;http://tex.stackexchange.com/questions/1319/showcase-of-beautiful-typography-done-in-tex-friends&quot;&gt;can’t replace LaTeX yet&lt;/a&gt;, but it’s getting most of the basics of good typography. We might at least have LaTeX quality justified text soon, see:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://dev.w3.org/csswg/css3-fonts/#font-variant-ligatures-prop&quot;&gt;Ligatures, font-kerning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://skinnywhitegirl.com/blog/web-typography-hyphenation-justification/475/&quot;&gt;hyphenating&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sixrevisions.com/css/css-typography-01/&quot;&gt;dropcaps and more&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sixrevisions.com/css/css-typography-02/&quot;&gt;font spacing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://sixrevisions.com/css/css-typography-03/&quot;&gt;examples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Cavanaugh JE (1997). “Unifying The Derivations For The Akaike And Corrected Akaike Information Criteria.” &lt;em&gt;Statistics &amp;amp; Probability Letters&lt;/em&gt;, &lt;strong&gt;33&lt;/strong&gt;. ISSN 01677152, &lt;a href=&quot;http://dx.doi.org/10.1016/S0167-7152(96)00128-9&quot;&gt;http://dx.doi.org/10.1016/S0167-7152(96)00128-9&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Akaike H (1974). “A New Look at The Statistical Model Identification.” &lt;em&gt;Ieee Transactions on Automatic Control&lt;/em&gt;, &lt;em&gt;19&lt;/em&gt;. ISSN 0018-9286, &lt;URL: http://dx.doi.org/10.1109/TAC.1974.1100705&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Policy functions and value functions under multiple uncertainty</title>
	 <link href="/2012/06/13/Sethi-policy-functions.html"/>
   <updated>2012-06-13T00:00:00+00:00</updated>
   <id>/06/13/Sethi-policy-functions</id>
   <content type="html">&lt;p&gt;Implements a numerical version of the SDP described in (Sethi &lt;em&gt;et. al.&lt;/em&gt; 2005).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;## Clear the workspace and load package dependencies: 
&lt;span class=&quot;kw&quot;&gt;rm&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;list=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ls&lt;/span&gt;())   
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(pdgControl)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(data.table)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We consider a Beverton Holt state equation governing population dynamics, &lt;span class=&quot;math&quot;&gt;\(f(x,h) = \frac{A x}{1 + B x}\)&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;BevHolt&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With parameters &lt;code&gt;A&lt;/code&gt; = &lt;code&gt;1.5&lt;/code&gt; and &lt;code&gt;B&lt;/code&gt; = &lt;code&gt;0.05&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the positive stationary root of the model is given by \(  \), or carring capacity &lt;code&gt;K&lt;/code&gt; = &lt;code&gt;10&lt;/code&gt;.&lt;br /&gt;We consider a profits from fishing to be a function of harvest &lt;code&gt;h&lt;/code&gt; and stock size &lt;code&gt;x&lt;/code&gt;, \( (x,h) = h - ( c_0 + c_1  )  \), conditioned on \( h &amp;gt; x \) and \(x &amp;gt; 0 \),&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;price &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
c0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;
c1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price=&lt;/span&gt;price, &lt;span class=&quot;dt&quot;&gt;c0 =&lt;/span&gt; c0, &lt;span class=&quot;dt&quot;&gt;c1=&lt;/span&gt;c1) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;with price &lt;code&gt;1&lt;/code&gt;, &lt;code&gt;c0&lt;/code&gt; &lt;code&gt;0.01&lt;/code&gt; and &lt;code&gt;c1&lt;/code&gt; &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;xmin &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
xmax &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K
grid_n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We seek a harvest policy which maximizes the discounted profit from the fishery using a stochastic dynamic programming approach over a discrete grid of stock sizes from &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;15&lt;/code&gt; on a grid of &lt;code&gt;100&lt;/code&gt; points, and over an identical discrete grid of possible harvest values.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(xmin, xmax, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; grid_n)  
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid  &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will determine the optimal solution over a &lt;code&gt;25&lt;/code&gt; time step window with boundary condition for stock at &lt;code&gt;0&lt;/code&gt; and discounting rate of &lt;code&gt;0.05&lt;/code&gt;. Different scenarios introduce different assumptions about the sources of noise. Unlike (Sethi &lt;em&gt;et. al.&lt;/em&gt; 2005), we use log normal insead of uniform noise, which requires Monte Carlo integration to estimate the transition matrix. Note that we also have a Beverton-Holt recruitment function instead of the logistic map, and differ in the precise choice of parameters for the state equation, noise, discounting, profit function, etc.&lt;/p&gt;
&lt;h2 id=&quot;scenarios&quot;&gt;Scenarios&lt;/h2&gt;
&lt;h3 id=&quot;large-measurement-error&quot;&gt;Large Measurement error&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in stock assessment measurement&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in implementation of the quota&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_m) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_i) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(snowfall) 
&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parallel=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cpu=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;16&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;R Version:  R version 2.14.1 (2011-12-22) 
&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;SDP_by_simulation&lt;/span&gt;(f, pars, x_grid, h_grid, z_g, z_m, z_i, &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;19999&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Library ggplot2 loaded.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;measure &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xT=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
                     profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;large-growth-error&quot;&gt;Large growth error&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in stock assessment measurement&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in implementation of the quota&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_m) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_i) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;SDP_by_simulation&lt;/span&gt;(f, pars, x_grid, h_grid, z_g, z_m, z_i, &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;19999&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Library ggplot2 loaded.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;growth &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xT=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
                     profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;large-implementation-error&quot;&gt;Large implementation error&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in stock assessment measurement&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in implementation of the quota&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_m) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_i) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;SDP_by_simulation&lt;/span&gt;(f, pars, x_grid, h_grid, z_g, z_m, z_i, &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;19999&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Library ggplot2 loaded.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;imp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xT=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
                     profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;( &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;implementation =&lt;/span&gt; x_grid[imp$D[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;measurement =&lt;/span&gt; x_grid[measure$D[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;growth =&lt;/span&gt; x_grid[growth$D[,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
value &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stock=&lt;/span&gt;x_grid, &lt;span class=&quot;dt&quot;&gt;implementation =&lt;/span&gt; imp$V, &lt;span class=&quot;dt&quot;&gt;measurement =&lt;/span&gt; measure$V, &lt;span class=&quot;dt&quot;&gt;growth =&lt;/span&gt; growth$V), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;stock&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policy) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock-value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8151/7372557232_fe14154278_o.png&quot; alt=&quot;plot of chunk plots&quot; /&gt;&lt;figcaption&gt;plot of chunk plots&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(value) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Net Present Value&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7239/7187327439_cf08db1492_o.png&quot; alt=&quot;plot of chunk plots&quot; /&gt;&lt;figcaption&gt;plot of chunk plots&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policy) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_smooth&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, stock-value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable))+&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;escapement&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7089/7372557594_d689df38d1_o.png&quot; alt=&quot;plot of chunk plots&quot; /&gt;&lt;figcaption&gt;plot of chunk plots&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(value) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_smooth&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(stock, value, &lt;span class=&quot;dt&quot;&gt;color=&lt;/span&gt;variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ylab&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Net Present Value&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8014/7187327805_62635271fa_o.png&quot; alt=&quot;plot of chunk plots&quot; /&gt;&lt;figcaption&gt;plot of chunk plots&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Note that growth noise gives the constant escapement solution, as expected, but large measurement noise results in raising the maximum escapement, particularly at large stock sizes. If the measured population was unusually high you might assume it was a measurement error and not increase your target harvest immediately, so this makes some intuitive sense.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;author Carl Boettiger, &lt;script type=&quot;text/javascript&quot;&gt;
&lt;!--
h=&#39;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#108;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#x6d;&#39;;a=&#39;&amp;#64;&#39;;n=&#39;&amp;#x63;&amp;#98;&amp;#x6f;&amp;#x65;&amp;#116;&amp;#116;&amp;#x69;&amp;#x67;&#39;;e=n+a+h;
document.write(&#39;&lt;a h&#39;+&#39;ref&#39;+&#39;=&quot;ma&#39;+&#39;ilto&#39;+&#39;:&#39;+e+&#39;&quot; clas&#39;+&#39;s=&quot;em&#39; + &#39;ail&quot;&gt;&#39;+e+&#39;&lt;\/&#39;+&#39;a&#39;+&#39;&gt;&#39;);
// --&gt;
&lt;/script&gt;&lt;noscript&gt;&amp;#x63;&amp;#98;&amp;#x6f;&amp;#x65;&amp;#116;&amp;#116;&amp;#x69;&amp;#x67;&amp;#32;&amp;#x61;&amp;#116;&amp;#32;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#108;&amp;#32;&amp;#100;&amp;#x6f;&amp;#116;&amp;#32;&amp;#x63;&amp;#x6f;&amp;#x6d;&lt;/noscript&gt;&lt;/li&gt;
&lt;li&gt;license: CC0&lt;/li&gt;
&lt;li&gt;A dynamic document generated with knitr&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;references&quot;&gt;References&lt;/h1&gt;
&lt;p&gt;Sethi G, Costello C, Fisher A, Hanemann M and Karp L (2005). “Fishery Management Under Multiple Uncertainty.” &lt;em&gt;Journal of Environmental Economics And Management&lt;/em&gt;, &lt;em&gt;50&lt;/em&gt;. ISSN 00950696, &lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2004.11.005&quot;&gt;doi:10.1016/j.jeem.2004.11.005&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/06/08/notes.html"/>
   <updated>2012-06-08T00:00:00+00:00</updated>
   <id>/06/08/notes</id>
   <content type="html">&lt;h2 id=&quot;pdg-control-working-group&quot;&gt;pdg-control Working group&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;send summary briefing for stochastic policy costs paper – DONE&lt;/li&gt;
&lt;li&gt;send latex/pdf to group&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;To better get at Jim’s question, should compare (profit from growth only noise) - (profit from deterministic) + ((profit from measurement only) - (profit from deterministic)) to (profit from growth+measurement) - (determinsitic), i.e. is (growth+measurement) greater/less than (growth) + (measurement) - deterministic?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Clarify this! is (profit from growth only) the case in which (a) the manager includes growth noise in the solution when in reality it is absent (hence the deterministic solution is optimal), (b) the case where the manager includes growth noise and it is present (i.e. both are optimal given reality, but reality differs, not the information)&lt;/li&gt;
&lt;li&gt;when/are the policies equivalent regardless of the noise?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;fallacy-paper&quot;&gt;Fallacy paper&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Integrate Noam comments DONE&lt;/li&gt;
&lt;li&gt;Data analysis on updated model runs. DONE&lt;/li&gt;
&lt;li&gt;Replace Figure 1 with conceptual diagram of fallacy. DONE&lt;/li&gt;
&lt;li&gt;Marissa’s edits. DONE&lt;/li&gt;
&lt;li&gt;Alex’s edits. DONE&lt;/li&gt;
&lt;li&gt;Rewrite introduction. DONE&lt;/li&gt;
&lt;li&gt;Remove 500 words. DONE&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;evolution-stuff&quot;&gt;Evolution stuff&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;pmc bugfix (see issues log)&lt;/li&gt;
&lt;li&gt;write more wrightscape, email peter&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;treebase-edits.&quot;&gt;treebase edits.&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;added &lt;code&gt;metadata()&lt;/code&gt; to combine metadata sources and improve data discovery&lt;/li&gt;
&lt;li&gt;adding Duncan’s corrections&lt;/li&gt;
&lt;li&gt;Duncan’s corrections round 2:&lt;/li&gt;
&lt;li&gt;Revised figures. Return more example code to body&lt;/li&gt;
&lt;li&gt;Text comparing the process of doing tasks manually!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;logistics&quot;&gt;Logistics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;purchased Evolution airplane tickets DONE&lt;/li&gt;
&lt;li&gt;filed reimbursement request on my Krell account DONE&lt;/li&gt;
&lt;li&gt;CSGF tickets DONE&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;jekyll&quot;&gt;Jekyll&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;notebook previews? DONE&lt;/li&gt;
&lt;li&gt;next/previous post DONE&lt;/li&gt;
&lt;li&gt;Toggle code blocks on/off DONE, add to posts template&lt;/li&gt;
&lt;li&gt;See labnotebook issues.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h2&gt;
&lt;h3 id=&quot;meeting-with-jim&quot;&gt;Meeting with Jim&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;NCEAS TNC&lt;/li&gt;
&lt;li&gt;Quantify the penalty influence on stock dynamics, not just on the control dynamics!&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;potential-extensions-to-policy-costs&quot;&gt;Potential extensions to Policy Costs:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Measurment uncertainty?&lt;/li&gt;
&lt;li&gt;Allee effect?&lt;/li&gt;
&lt;li&gt;&lt;p&gt;interaction with nonlinear?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;memory introduced in policy&lt;/li&gt;
&lt;li&gt;comparison to autocorrelated noise results&lt;/li&gt;
&lt;li&gt;&lt;p&gt;what would you have concluded from stock&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;pdg-control-reading&quot;&gt;pdg-control Reading&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Bohm 1974&lt;/li&gt;
&lt;li&gt;Sigh &lt;em&gt;et al.&lt;/em&gt; 2006 essentially treats this problem but with two control variables – fishing fleet and harvest level.&lt;br /&gt;Highlights the tradeoff: want a variable harvest rate since Jensen’s inequality guarantees that a fixed harvest rate will under-perform in stochastic stock, but need a smoother change to avoid adjustment costs to the fleet.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;(Show the underperformance of the fixed harvest rate?)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bohm, P. (1974). On the Effects of Policy Costs. The Swedish Journal of Economics, 76(1), 104. doi:10.2307/3439361&lt;/p&gt;
&lt;p&gt;Singh, R., Weninger, Q., and Doyle, M. (2006). Fisheries management with stock growth uncertainty and costly capital adjustment. Journal of Environmental Economics and Management, 52(2), 582-599. doi:10.1016/j.jeem.2006.02.006&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;h2 id=&quot;misc-and-code-tricks&quot;&gt;misc and code-tricks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/altercation/vim-colors-solarized&quot;&gt;solarized for vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sigurdga/gnome-terminal-colors-solarized&quot;&gt;solarized for gnome-terminal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>knitcitations</title>
	 <link href="/2012/05/30/knitcitations.html"/>
   <updated>2012-05-30T00:00:00+00:00</updated>
   <id>/05/30/knitcitations</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;EDIT&lt;/strong&gt;: Note that this package has evolved quite a bit from this initial post. While the basic interface is the same, support for additional features and some choices in formatting differ from what is presented here. Please see the &lt;a href=&quot;https://github.com/cboettig/knitcitations/&quot;&gt;README&lt;/a&gt; for the latest introduction to the package. Readers may also be interested in the more recent post discussing the &lt;a href=&quot;http://www.carlboettiger.info/2013/02/22/semantic-citations-for-the-notebook-and-knitr.html&quot;&gt;introduction of several new features including semantic tools in the &lt;code&gt;knitcitations&lt;/code&gt; package&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Markdown is becoming an increasingly popular platform for lightweight and online publishing. While traditional publishing tools like LaTeX and word processors have long had integrated bibliographic management, few tools handle citations for lightweight publishing. I am finding myself more and more drawn to markdown rather then tex/Rnw as my standard format (not least of which is the ease of displaying the files on github, particularly now that we have automatic image uploading. I’ve taken a little whack at generating in-text citations using knitr and other R tools.&lt;/p&gt;
&lt;h2 id=&quot;installation&quot;&gt;Installation&lt;/h2&gt;
&lt;p&gt;I’ve put some simple functions in a &lt;code&gt;knitcitations&lt;/code&gt; package (see the most recent version of the &lt;a href=&quot;http://github.com/cboettig/knitcitations&quot;&gt;knitcitations package on github here&lt;/a&gt;). The functions use the crossref API to grab citation information given a doi, so I don’t have to generate a bibtex file for papers I’m reading, (inspired by the &lt;a href=&quot;http://wordpress.org/extend/plugins/kcite/&quot;&gt;kcite&lt;/a&gt; package for Wordpress). One can currently grab the package from Github&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;knitcitations&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s load the package into R and go for a spin.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(knitcitations)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;generating-citations&quot;&gt;Generating citations&lt;/h2&gt;
&lt;h3 id=&quot;doi-approach&quot;&gt;DOI Approach&lt;/h3&gt;
&lt;p&gt;Then we can generate a citation given a DOI with the &lt;code&gt;ref&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;r &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ref&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(r, &lt;span class=&quot;st&quot;&gt;&amp;quot;html&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Halpern BS, Regan HM, Possingham HP and Mccarthy MA (2006). “Accounting For Uncertainty in Marine Reserve Design.” &lt;em&gt;Ecology Letters&lt;/em&gt;, 9. ISSN 1461-023X, &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Note that R allows bibitems to print in a variety of formats, including html.&lt;/p&gt;
&lt;p&gt;We can generate inline citations in the short name/date format with the &lt;code&gt;citet&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Halpern &lt;em&gt;et. al.&lt;/em&gt; (2006)”&lt;/p&gt;
&lt;p&gt;Similarly we can generate parenthetical citations with the &lt;code&gt;citep&lt;/code&gt; function,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;10.1890/11-0011.1&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “(Halpern &lt;em&gt;et. al.&lt;/em&gt; 2006; Abrams &lt;em&gt;et. al.&lt;/em&gt; 2012)”&lt;/p&gt;
&lt;p&gt;Which can take a list of DOIs to cite parenthetically. The &lt;code&gt;citet&lt;/code&gt; and &lt;code&gt;citep&lt;/code&gt; functions are automatically retrieving the available metadata via the Crossref API, and R is storing the information to generate the final bibliography.&lt;/p&gt;
&lt;h3 id=&quot;using-and-creating-citation-keys&quot;&gt;Using and creating citation keys&lt;/h3&gt;
&lt;p&gt;When specifying a DOI for a citation, we can also give the citation a simple key name so we can use it later without having to remember the DOI, for instance, we can make the first citation of a particular example as&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Michaels =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1755-263X.2012.00241.x&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “(Michaels &amp;amp; Tyre, 2012)”&lt;/p&gt;
&lt;p&gt;and then later use&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citep&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Michaels&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “(Michaels &amp;amp; Tyre, 2012)”&lt;/p&gt;
&lt;p&gt;If we do not pass a key for the DOI we create, knitcitations will automatically generate a key of it’s own using the last name of the first author and the year. For instance, based on one of the DOI-citations we have already created, we can do&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Halpern2006&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Halpern &lt;em&gt;et. al.&lt;/em&gt; (2006)”&lt;/p&gt;
&lt;p&gt;and knitcitations recognizes the key. The function will try to avoid collisions in the key: if it is given or creates a key matching one that is already in use, it will see if the titles of the articles match. If the are the same, the same key is used to avoid a duplicate entry. This makes it safe to call&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Halpern2006 =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Halpern &lt;em&gt;et. al.&lt;/em&gt; (2006)”&lt;/p&gt;
&lt;p&gt;even if we have earlier or later cited by the doi alone. Collision checking also avoids duplicating keys that correspond to different papers. If the titles are unique, knitcitations appends an underscore at the end of the automatically generated key. For instance, here we call a DOI that corresponds to a different citation with the same first author and year:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1523-1739.2005.00258.x&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Warning message: Automatic key generation found a copy of this key, using Halpern2006_ instead&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Halpern &lt;em&gt;et. al.&lt;/em&gt; (2006)”&lt;/p&gt;
&lt;p&gt;A warning (not printed by knitr when this is used inline, but included in the log file) alerts us to the fact that this citation has been given an alternate key,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Halpern2006_&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Halpern &lt;em&gt;et. al.&lt;/em&gt; (2006)”&lt;/p&gt;
&lt;p&gt;Of course if managing different keys sounds annoying, we can just call the DOI directly each time.&lt;/p&gt;
&lt;h3 id=&quot;bibtex-approach&quot;&gt;Bibtex Approach&lt;/h3&gt;
&lt;p&gt;If we have a bibtex file, we can use this for the citations as well. If you don’t have a bibtex file handy, you can make one containing the citation information for some of R’s packages:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;write.bibtex&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;bibtex&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;knitr&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;knitcitations&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;example.bib&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We could also have used the &lt;code&gt;ref&lt;/code&gt; function write a bibtex file for our list of DOIs&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;refs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;10.1890/11-0011.1&amp;quot;&lt;/span&gt;), 
    ref)
&lt;span class=&quot;kw&quot;&gt;write.bibtex&lt;/span&gt;(refs, &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;refs.bib&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once we have a bibtex file available, we must read it into R.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;bib &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.bibtex&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;example.bib&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can now create citations from &lt;code&gt;bib&lt;/code&gt; using the bibtex key,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;bib[[&lt;span class=&quot;st&quot;&gt;&amp;quot;knitr&amp;quot;&lt;/span&gt;]]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Xie Y (2012). &lt;em&gt;knitr: A general-purpose package for dynamic report generation in R&lt;/em&gt;. R package version 0.5.4, &lt;URL:
http://yihui.name/knitr/&gt;.&lt;/p&gt;
&lt;p&gt;The inline citation tools can also now use this &lt;code&gt;bib&lt;/code&gt; instead of a DOI to generate a citation,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(bib[[&lt;span class=&quot;st&quot;&gt;&amp;quot;knitr&amp;quot;&lt;/span&gt;]])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Xie, (2012)”&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citep&lt;/span&gt;(bib[&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;knitr&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;bibtex&amp;quot;&lt;/span&gt;)])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “(Xie, 2012; Francois, 2011)”&lt;/p&gt;
&lt;p&gt;Like the case of the DOI, after we have used a citation once, we can cite by the bibkey name directly, rather than having to reference the bibentry object (&lt;em&gt;e.g.&lt;/em&gt; from the &lt;code&gt;bib&lt;/code&gt; list):&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;citet&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;knitr&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[1] “Xie, (2012)”&lt;/p&gt;
&lt;h3 id=&quot;using-the-inline-citations&quot;&gt;Using the inline citations&lt;/h3&gt;
&lt;p&gt;The inline citation calls are designed to be used with knitr’s inline code blocks. In markdown, these are enclosed in ` r `. The output format will use the plain-text rendering rather than the code markup. Thus we can use the line &lt;code&gt;citep(&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;)&lt;/code&gt; to generate a parenthetical citation, (Halpern &lt;em&gt;et. al.&lt;/em&gt; 2006). We can generate the in-text citations with &lt;code&gt;citet&lt;/code&gt;, such as Xie, (2012).&lt;/p&gt;
&lt;h2 id=&quot;generating-the-final-bibliography&quot;&gt;Generating the final bibliography&lt;/h2&gt;
&lt;p&gt;As we go along adding inline citations, R stores the list of citation info. Then at the end of the document, use this command to print the bibliography generated by the use of our inline citations.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;bibliography&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;html&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Halpern BS, Regan HM, Possingham HP and Mccarthy MA (2006). “Accounting For Uncertainty in Marine Reserve Design.” &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;strong&gt;9&lt;/strong&gt;. ISSN 1461-023X, &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Abrams PA, Ruokolainen L, Shuter BJ and Mccann KS (2012). “Harvesting Creates Ecological Traps: Consequences of Invisible Mortality Risks in Predator-Prey Metacommunities.” &lt;em&gt;Ecology&lt;/em&gt;, &lt;strong&gt;93&lt;/strong&gt;. ISSN 0012-9658, &lt;a href=&quot;http://dx.doi.org/10.1890/11-0011.1&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1890/11-0011.1&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Michaels S and Tyre AJ (2012). “How Indeterminism Shapes Ecologists’ Contributions to Managing Socio-Ecological Systems.” &lt;em&gt;Conservation Letters&lt;/em&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1755-263X.2012.00241.x&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1111/j.1755-263X.2012.00241.x&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Halpern BS, Pyke CR, Fox HE, Haney JC, Schlaepfer MA and Zaradic P (2006). “Gaps And Mismatches Between Global Conservation Priorities And Spending.” &lt;em&gt;Conservation Biology&lt;/em&gt;, &lt;strong&gt;20&lt;/strong&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1523-1739.2005.00258.x&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1111/j.1523-1739.2005.00258.x&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Xie Y (2012). &lt;em&gt;knitr: A general-purpose package for dynamic report generation in R&lt;/em&gt;. R package version 0.5.4, &lt;a href=&quot;http://yihui.name/knitr/&quot; class=&quot;uri&quot;&gt;http://yihui.name/knitr/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Francois R (2011). &lt;em&gt;bibtex: bibtex parser&lt;/em&gt;. R package version 0.3-0, &lt;a href=&quot;http://CRAN.R-project.org/package=bibtex&quot; class=&quot;uri&quot;&gt;http://CRAN.R-project.org/package=bibtex&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;reflections&quot;&gt;Reflections&lt;/h2&gt;
&lt;p&gt;We could have justed printed bibliography in plain text format using with &lt;code&gt;bibliography()&lt;/code&gt;. Note that it contains only the citations created with the inline citation commands &lt;code&gt;citet&lt;/code&gt; and &lt;code&gt;citep&lt;/code&gt;, in the order cited. All of these citations are stored in a hidden options variable in R when the inline functions are called. To reset the citation list (&lt;em&gt;i.e.&lt;/em&gt; empty the contents of “bibliography()”) we can use the &lt;code&gt;cleanbib()&lt;/code&gt; command, or set the option &lt;code&gt;bibliography(erase=TRUE)&lt;/code&gt;. Typically we could hide the bibliography chunk using a inline knitr call or the chunk option “echo=FALSE”.&lt;/p&gt;
&lt;p&gt;I hope to add markup to format this a bit more nicely later. For instance, we want the links to appear as real links. Additionally, we may want to add markup around the citations, such as the reason for the citation into the link using the &lt;a href=&quot;http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/cito&quot;&gt;Citation Typing Ontology&lt;/a&gt;. Ideally I need a method to support different citation styles, even though it is silly in today’s world that the citation format is still a choice of the &lt;em&gt;publisher&lt;/em&gt; and not a choice of the &lt;em&gt;reader&lt;/em&gt;. This will probably require citeproc integration and a major upgrade. Please report any bugs, feature requests or citations on the &lt;a href=&quot;https://github.com/cboettig/knitcitations/issues&quot;&gt;Github issues tracker!&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;comparing-lightweight-citation-alternatives&quot;&gt;Comparing lightweight citation alternatives&lt;/h3&gt;
&lt;p&gt;Several citation alternatives are available for lightweight publishing outside of this option, each with its own advantages and limitations. John MacFarlane’s &lt;a href=&quot;http://johnmacfarlane.net/pandoc/&quot;&gt;Pandoc&lt;/a&gt; is probably the most widely used citation manager for markdown files, working with a bibtex source file but formatting the citation lists using citeproc. It has the advantage of a more concise citation syntax, consistent with the source-readable goals of markdown and citation formating. Of course it is a markdown extension and will not be read by other markdown interpreters. This would be less of an issue of Pandoc could run markdown -&amp;gt; markdown without garbling syntax of some other markdown interpreter, like Github-flavored markdown.&lt;/p&gt;
&lt;p&gt;The only other tool I know of that provides dynamic citations by DOI look-up is Phil Lord’s excellent Wordpress plugin, &lt;a href=&quot;http://wordpress.org/extend/plugins/kcite/&quot;&gt;kcite&lt;/a&gt;. It now uses citeproc for formatting, automatically links the in-text citations to the bibliography, supports PubMed and ArXiv ids as well as DOIs and even web URLs (though not bibtex files). The major limitation for me is that it is limited to Wordpress with Wordpress specific shortcode. (Of course I introduce R-specific code here, but with the assumption of a knitr-based audience who probably uses github). A variety of other platform-specific plugins are available to convert bibtex files into citations for different blogging platforms, including Wordpress and Jekyll.&lt;/p&gt;
&lt;p&gt;So why knitcitations? My goal is primarily to bring this functionality to knitr users who rely on the markdown format rather than the latex format and are interested in dynamic citations and web-based publishing. I hope it finds its niche.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Jekyll layout</title>
	 <link href="/2012/05/26/exploring-jekyll-layout.html"/>
   <updated>2012-05-26T00:00:00+00:00</updated>
   <id>/05/26/exploring-jekyll-layout</id>
   <content type="html">&lt;p&gt;Jekyll works wonderfully with little knowledge beyond basic html/css to create &lt;code&gt;_layout&lt;/code&gt; templates and then you’re free to write beautiful pages and posts in markdown. But adding more dynamic content, the kind of cool stuff avialable in so many wordpress plugins, tends to require a little understanding of the template formatting language, &lt;a href=&quot;https://github.com/Shopify/liquid&quot;&gt;Liquid&lt;/a&gt;. Liquid is actually super simple and powerful way to build a dynamic website. The project’s wiki provides a great introduction, starting with&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Shopify/liquid/wiki/Liquid-for-Designers&quot;&gt;Liquid filters and tags&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/Liquid-Extensions&quot;&gt;Jekyll proves a few more useful extensions&lt;/a&gt;, though I’ve found the standard ones most useful.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Knowing the &lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/Template-Data&quot;&gt;template names&lt;/a&gt; available in Jekyll comes in handy for this stuff. (like &lt;code&gt;site.posts&lt;/code&gt; or &lt;code&gt;page.content&lt;/code&gt;. Not sure why &lt;code&gt;page.content&lt;/code&gt; comes in as rendered content for posts.&lt;/li&gt;
&lt;li&gt;A lot of the more fancy stuff requires writing custom liquid functions, common in Jekyll plugins. See the &lt;a href=&quot;https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers&quot;&gt;Liquid extensions&lt;/a&gt; guide to learn the syntax for this.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;These liquid extensions can be specified in a Ruby &lt;code&gt;.rb&lt;/code&gt; script that can run arbitrary ruby commands.&lt;/li&gt;
&lt;li&gt;Compatibility with github: anything that doesn’t require additional gems will work on Github.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;writing-my-own-extension-to-parse-feeds&quot;&gt;Writing my own extension to parse feeds&lt;/h2&gt;
&lt;p&gt;I wanted a nice way to embed feeds on my Jekyll site – preferably at Jekyll-compile rather than in javascript, to maintain the fast static site ethos. As usual, this search begins with an &lt;a href=&quot;http://stackoverflow.com/questions/10726916/can-i-embed-an-atom-feed-in-html5-with-the-embed-tag/10727291#10727291&quot;&gt;SO question on parsing feeds&lt;/a&gt;. From this I learn about a nice Ruby library to do the parsing: &lt;a href=&quot;https://github.com/pauldix/feedzirra&quot;&gt;feedrizza&lt;/a&gt;. Using a bit of knowledge from above (and a bit of hacking – probably would have been better served if I read those things &lt;em&gt;first&lt;/em&gt; instead of &lt;em&gt;after&lt;/em&gt; trying this), I have a &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/_plugins/feedzirra/feedzirra.rb&quot;&gt;plugin for feedrizza&lt;/a&gt; which displays feeds. This could probably be greatly improved. Fetching xml slows down jekyll compiling, may disable the plugin for the time being&lt;/p&gt;
&lt;h2 id=&quot;modifying-layout-of-posts-archive-lab-notebook&quot;&gt;Modifying layout of posts archive (lab notebook)&lt;/h2&gt;
&lt;h4 id=&quot;can-i-add-columns-with-post-previews-like-my-wordpress-notebook-mission-accomplished.&quot;&gt;Can I add columns with post previews, like &lt;a href=&quot;http://www.carlboettiger.info/research/lab-notebook&quot;&gt;my Wordpress notebook&lt;/a&gt;? Mission accomplished.&lt;/h4&gt;
&lt;p&gt;I first considered using a plugin &lt;a href=&quot;https://github.com/sebcioz/jekyll-only_first_p&quot;&gt;plugin&lt;/a&gt; to get the frist paragraph (based on nokogiri parsing the html/xml). While nokogiri is quite powerful, I often don’t have just the right length content in the first paragraph – some entries just launch into a list enviornment with no paragraphs to begin with.&lt;/p&gt;
&lt;p&gt;Instead, it’s much easier to use &lt;a href=&quot;https://github.com/Shopify/liquid/wiki/Liquid-for-Designers&quot;&gt;built in liquid filters&lt;/a&gt; which can already grab first n characters or n words. Unfortunately pulls in &lt;em&gt;formatted&lt;/em&gt; post content, not pure markdown, leaving open tags. Should probably look into some santize html filters, but don’t seem to be default. To avoid this, I ended up using the &lt;code&gt;strip_html&lt;/code&gt; filter, rendering unformatted but more uniformly looking previews on pages.&lt;/p&gt;
&lt;p&gt;Lastly, format the previews in justified columns in a smaller font-size using a little css.&lt;/p&gt;
&lt;p&gt;Oh, it appears there is a &lt;a href=&quot;https://github.com/MattHall/truncatehtml&quot;&gt;nokogiri-based plugin&lt;/a&gt; which will truncate and close html tags appropriately.&lt;/p&gt;
&lt;h4 id=&quot;some-liquid-example-code&quot;&gt;Some liquid example code&lt;/h4&gt;
&lt;p&gt;Arrange site-posts into three columns, entries columnwise.&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;
{% capture n  %}{{ site.posts | size | divided_by:3}}{% endcapture %}
{% capture m %} {{ n | times:2 }}{% endcapture %}


&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;span3&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

{% for post in site.posts limit:n %}
{{ post | content }}
{% endfor %}

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;span3&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

{% for post in site.posts limit:n offset:n%}
{{ post | content }}
{% endfor %}

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;span3&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

{% for post in site.posts limit:n offset:m %}
{{ post | content }}
{% endfor %}

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Having a sitemap is a good idea&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vitobotta.com/how-to-migrate-from-wordpress-to-jekyll/&quot;&gt;A nice Jekyll tutorial&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Limits to the detection of early warning signals</title>
	 <link href="/2012/05/21/limits-to-detection-of-early-warning-signals.html"/>
   <updated>2012-05-21T00:00:00+00:00</updated>
   <id>/05/21/limits-to-detection-of-early-warning-signals</id>
   <content type="html">&lt;p&gt;Our paper, &lt;em&gt;limits to the detection of early warning signals for critical transitions&lt;/em&gt;, has now &lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2012.0125&quot;&gt;appeared in the Proceedings of the Royal Interface&lt;/a&gt;. An open-access copy is &lt;a href=&quot;http://arxiv.org/abs/1204.6231&quot;&gt;available under CC-by license on the ArXiv&lt;/a&gt;. The essence of the paper is to bring a more model-based approach to early warning signals, while seeking to remain as general as possible.&lt;/p&gt;
&lt;p&gt;Without a model-based approach, it is difficult to leverage statistically meaningful comparisons to identify what is a real warning signal and what is just noise. We use two simple models, (a stationary OU process and temporally heterogeneous OU process) combined with a likelihood ratio bootstrap to do this, though other models and comparisons could be equally promising.&lt;/p&gt;
&lt;p&gt;The motivation for this paper comes somewhat from the appendices in the groundbreaking work by Dakos &lt;em&gt;et al&lt;/em&gt; 2008, which compares several potential null distributions and shows that Kendall’s tau, the correlation statistic used to identify an increase, takes on almost any value in its range, which doesn’t leave us with much information to go by. I both wanted to confirm this distribution and see if I could improve upon it with the model-based approach. I was glad to see that not only could we quantify uncertainty more precisely with the model based-approach, but also improve upon the sensitivity relative to traditional indicators, as seen in our ROC curves.&lt;/p&gt;
&lt;p&gt;My talk at ESA last year gave an introduction to these results.&lt;/p&gt;
&lt;div id=&quot;__ss_11357956&quot; style=&quot;width:425px&quot;&gt;
&lt;strong style=&quot;display:block;margin:12px 0 4px&quot;&gt;&lt;a
href=&quot;http://www.slideshare.net/cboettig/limits-to-detection-for-early-warning-signals-of-population-collapse&quot;
title=&quot;Limits to Detection for Early Warning Signals of
Population Collapse&quot; target=&quot;_blank&quot;&gt;Limits to Detection for Early Warning Signals of Population Collapse&lt;/a&gt;&lt;/strong&gt; &lt;iframe
src=&quot;http://www.slideshare.net/slideshow/embed_code/11357956&quot;
width=&quot;425&quot; height=&quot;355&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot;
scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;
&lt;div style=&quot;padding:5px 0 12px&quot;&gt;
View more &lt;a href=&quot;http://www.slideshare.net/&quot; target=&quot;_blank&quot;&gt;presentations&lt;/a&gt; from &lt;a href=&quot;http://www.slideshare.net/cboettig&quot; target=&quot;_blank&quot;&gt;Carl Boettiger&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h1 id=&quot;an-open-notebook-story&quot;&gt;An Open Notebook Story&lt;/h1&gt;
&lt;p&gt;This project has gone through many iterations, dead ends, and transformations as it evolved over the past year and a half alongside my other research projects. In the process, there’s also been ample cross-pollination of ideas from different projects. The interplay of these ideas unfolds in the interleaved pages of my online lab notebook.&lt;/p&gt;
&lt;p&gt;Here are a few examples of this cross-pollination: Using the likelihood ratio bootstrap as the most powerful comparison of two composite (parameter-estimated) hypotheses first emerged in my evolutionary work which became the paper, &lt;em&gt;Is your phylogeny informative&lt;/em&gt;, while solving the likelihood equation for the temporally heterogeneous OU process has it’s roots in my work on the evolutionary release of constraint that became the paper &lt;em&gt;Modeling Stabilizing Selection: Expanding the Ornstein-Uhlenbeck Model of Adaptive Evolution&lt;/em&gt; and plays a role in my current &lt;code&gt;wrightscape&lt;/code&gt; project. These projects share a central challenge of detecting faint signals of regime shifts from large data sets whilst quantifying uncertainty, despite substantial differences in the details of both model formulation and solution.&lt;/p&gt;
&lt;p&gt;The project had several dead ends of things that sounded promising but turn out not to work. A few that I’ve been asked about since include &lt;a href=&quot;http://www.carlboettiger.info/wordpress/archives/144&quot;&gt;solving the model inference problem in the frequency (Fourier) space&lt;/a&gt; (doesn’t work because the power transform destroys the Gaussian property of the noise), and &lt;a href=&quot;http://www.carlboettiger.info/wordpress/archives/452&quot;&gt;estimating quadratic models (such as the canonical form for the saddle node bifurcation)&lt;/a&gt; (page forward on each if your curious).&lt;/p&gt;
&lt;h2 id=&quot;the-project-by-numbers&quot;&gt;The project by numbers&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://farm9.staticflickr.com/8144/7249633810_a1cb6395bf_m.jpg&quot; alt=&quot;floatright&quot; /&gt; My notebook contains &lt;a href=&quot;http://www.carlboettiger.info/wordpress/archives/tag/warning-signals&quot;&gt;123 posts&lt;/a&gt; relevant to this project, tagged under &lt;code&gt;warning-signals&lt;/code&gt;, dating back to October 2010, out of a total of 388 posts. The flickr archive has &lt;a href=&quot;http://www.flickr.com/photos/cboettig/tags/warningsignals/&quot;&gt;903 images&lt;/a&gt; tagged for this project, the &lt;a href=&quot;https://github.com/cboettig/populationdynamics&quot;&gt;github repository&lt;/a&gt; have seen over 40,000 lines of code, mostly in different explorations, consisting of 64 files with commits on 74 days. (This repository has since been split into separate repositories for the [population dynamics simulations] and the &lt;a href=&quot;https://github.com/cboettig/earlywarning&quot;&gt;early warning signals computations&lt;/a&gt;.) Simulations were run on at least four different machines, including the 512 node cluster on campus and &lt;a href=&quot;http://www.nersc.gov/users/computational-systems/carver&quot;&gt;NERSC’s Carver supercomputing facility&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id=&quot;accessing-the-data-and-code&quot;&gt;Accessing the data and code&lt;/h1&gt;
&lt;p&gt;My organizational structure has evolved over the course of this project, but mostly conforms to my &lt;a href=&quot;http://www.carlboettiger.info/2012/05/06/research-workflow.html&quot;&gt;Github-based R-package structure&lt;/a&gt; within the &lt;a href=&quot;https://github.com/cboettig/earlywarning&quot;&gt;&lt;code&gt;earlywarning&lt;/code&gt; repository&lt;/a&gt;. The &lt;code&gt;inst/examples&lt;/code&gt; directory includes code to reproduce the analysis for the chemostat, simulation, and glaciation data.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;p&gt;Boettiger, C., and Hastings, A. (2012). Quantifying limits to detection of early warning for critical transitions. Journal of The Royal Society Interface, 1-29. doi:10.1098/rsif.2012.0125&lt;/p&gt;
&lt;p&gt;Dakos, V., Scheffer, M., van Nes, E. H., Brovkin, V., Petoukhov, V., and Held, H. (2008). Slowing down as an early warning signal for abrupt climate change. Proceedings of the National Academy of Sciences, 105(38), 14308-12. doi:10.1073/pnas.0802430105&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>notes</title>
	 <link href="/2012/05/18/notes.html"/>
   <updated>2012-05-18T00:00:00+00:00</updated>
   <id>/05/18/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Wrote short talk for Adaptive Management class&lt;/li&gt;
&lt;li&gt;Adaptive management class short talks.&lt;/li&gt;
&lt;li&gt;teary&lt;/li&gt;
&lt;li&gt;Confirmed model-based estimation avoids fallacy on newly zoomed data.&lt;/li&gt;
&lt;li&gt;Updated cost-of-bias comparison&lt;/li&gt;
&lt;li&gt;Policy-costs: added adjustment free distribution to highlight double-cost effect&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Value of information, cost of bias</title>
	 <link href="/2012/05/16/value-of-information.html"/>
   <updated>2012-05-16T00:00:00+00:00</updated>
   <id>/05/16/value-of-information</id>
   <content type="html">&lt;h2 id=&quot;value-of-information&quot;&gt;Value of information&lt;/h2&gt;
&lt;p&gt;The motivation for this “value of information” excercise comes from Costello &lt;em&gt;et al.&lt;/em&gt; (2010), which essentially compares two scenarios: the value of a marine protected area when you the dispersal kernel is unknown (one of a discrete set of possible kernels you sum over), to the value of the protected area when the kernel is known perfectly. No intrinsic stochasticity, single time step, no learning.&lt;/p&gt;
&lt;p&gt;The model I’m looking at comes from Reed (1979), and a modification by Sethi &lt;em&gt;et al.&lt;/em&gt; (2005). Fish dynamics are driven by Beverton Holt process, we harvest some of the population each year. In the Reed formulation, only the future growth rate is stochastic – the current stock value is known without error when we must choose the harvest level for that year. The Sethi paper expands this result to consider the case in which the stock assessment may have measurement error, and the harvest process may have implementation error. In either event, the optimal harvest level for all possible values of stock for each interval in time (on a finite time-horizon) is computed by stochastic dynamic programming, given some price function for the harvest. This is implemented in &lt;a href=&quot;https://github.com/cboettig/pdg-control&quot;&gt;my R package, pdgControl&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I consider several cases in which we vary the management uncertainty and the stock uncertainty. I’ve considered four scenarios so far, (links to the runs of each scenario with R code and results)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e501e219ddae177804751f289355510a8c5fc88a/inst/examples/value_of_information.md&quot;&gt;“Value of information” (VI)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e501e219ddae177804751f289355510a8c5fc88a/inst/examples/value_of_stochasticity.md&quot;&gt;“Value of stochasticity” (VS)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/e501e219ddae177804751f289355510a8c5fc88a/inst/examples/cost_of_underestimating.md&quot;&gt;“Cost of underestimating” (CU)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/cfe87046bb29122b4e624459b63e4df5db34118d/inst/examples/reckless_driver.md&quot;&gt;“Reckless driver” (RD)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Easiest to compare by putting these on a grid of manager uncertainty (across) vs true stochasticity (down):&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;none&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;growth&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g+measure&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g+m+implement&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;none&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VS,VI,RD&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VI&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VI&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VI&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;growth&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;RD&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;g+measure&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;RD&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;VS&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;g+m+implement&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;CU, RD&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;CU&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;CU&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;CU, VS&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;numerical-values&quot;&gt;Numerical values&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;none&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;growth&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g+measure&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;g+m+implement&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;none&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-0.3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-1.4&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-1.5&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33 +/1.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;growth&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;35+/-4&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;35 +/ -3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;g+measure&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-3&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/- 3.5&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;g+m+implement&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-4&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/- 4&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33+/-4&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;33 +/- 5&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So far I’ve been surprised that the expected profits in each scenario are remarkably similar, despite the apparent mismatch between optimization strategy and reality, or the presence of extra noise. Perhaps this is driven by the essentially single-step prediction nature of the problem formulation, perhaps simply because things are relatively linear?&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;p&gt;Costello C, Rassweiler A, Siegel D, De Leo G, Micheli F and Rosenberg A (2010). “Marine Reserves Special Feature: The value of spatial information in MPA network design.” &lt;em&gt;Proceedings of the National Academy of Sciences&lt;/em&gt;, &lt;em&gt;107&lt;/em&gt;. ISSN 0027-8424, http://dx.doi.org/10.1073/pnas.0908057107&lt;/p&gt;
&lt;p&gt;Sethi G, Costello C, Fisher A, Hanemann M and Karp L (2005). “Fishery management under multiple uncertainty.” &lt;em&gt;Journal of Environmental Economics and Management&lt;/em&gt;, &lt;em&gt;50&lt;/em&gt;. ISSN 00950696, http://dx.doi.org/10.1016/j.jeem.2004.11.005&lt;/p&gt;
&lt;p&gt;Reed W (1979). “Optimal escapement levels in stochastic and deterministic harvesting models.” &lt;em&gt;Journal of Environmental Economics and Management&lt;/em&gt;, &lt;em&gt;6&lt;/em&gt;. ISSN 00950696, http://dx.doi.org/10.1016/0095-0696(79)90014-7&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/05/15/fallacy.html"/>
   <updated>2012-05-15T00:00:00+00:00</updated>
   <id>/05/15/fallacy</id>
   <content type="html">&lt;h2 id=&quot;prosecutors-fallacy&quot;&gt;Prosecutors Fallacy&lt;/h2&gt;
&lt;p&gt;Running the null distribution and add to plots&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;generate &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/35ea8b6d9aee76ed2814c32bb4d5b4ec861af0eb/inst/examples/nullfallacy.md&quot;&gt;nulls&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;add to &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/90696473b0d98a506e337cbd80a85cec5be51736/inst/examples/fallacy.md&quot;&gt;fallacy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Questions on plots – show the full replicates plot?&lt;/li&gt;
&lt;li&gt;Emphasize the two different distributions that result.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/35ea8b6d9aee76ed2814c32bb4d5b4ec861af0eb/inst/examples/nullfallacy.md&quot;&gt;Additional replicates&lt;/a&gt; narrow the null distribution further. hmm…&lt;/li&gt;
&lt;li&gt;run model fit part again &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/prosecutor/inst/examples/modelfallacy.md&quot;&gt;modelfallacy.Rmd&lt;/a&gt;. Need to add the model fit data analysis section into this script.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;knitr’s caching really is the way to go with debugging things that need HPC. Nice to pick up from where we hit the bug rather than rerunning everything. Must remember to set unique cache paths though.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>notes</title>
	 <link href="/2012/05/14/notes.html"/>
   <updated>2012-05-14T00:00:00+00:00</updated>
   <id>/05/14/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Added results into prosecutors fallacy and sent to Alex, Noam, Marissa.&lt;/li&gt;
&lt;li&gt;Ran pdf copy and sent Treebase to Duncan&lt;/li&gt;
&lt;li&gt;README added to &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;staticdoc documentation for knitcitations (and filed a few issues on staticdocs)&lt;/li&gt;
&lt;li&gt;Updated documentaiton on treebase, rfishbase. updated their staticdocs documentation as well.&lt;/li&gt;
&lt;li&gt;rfishbase 0.0-9 update pushed to CRAN&lt;/li&gt;
&lt;li&gt;Working on prosecutor’s fallacy edits from Alex&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;alan-meeting&quot;&gt;Alan meeting&lt;/h2&gt;
&lt;p&gt;Discuss management example with ROC curve instead of hypothesis test&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: right;&quot;&gt;C&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;rash&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;No Crash&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;Action&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;a&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;o Action&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;c&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Where $ d &amp;gt; a &amp;gt; b &amp;gt; c $&lt;/p&gt;
&lt;p&gt;From the ROC curve: TP = f(FP), that is, y = f(x), so:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \min_x a f(x) +b x + c f(x) + d x \]&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;simulate and detect. Dynamic updating?&lt;/li&gt;
&lt;li&gt;estimate stochastic model&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;misc-tricks&quot;&gt;Misc tricks&lt;/h1&gt;
&lt;p&gt;Start a new branch on gh-pages for the documentation&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;true | git mktree | xargs git commit-tree | xargs git branch gh-pages
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then update in future using:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git checkout gh-pages
git read-tree master:inst/doc/html
git commit -a -m &amp;#39;gh-pages documentation&amp;#39;
git push origin gh-pages
git checkout master&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;From updating staticdocs on gh-pages: &lt;a href=&quot;http://stackoverflow.com/questions/10590156/git-update-the-root-directory-of-a-branch-from-the-subdirectory-of-another&quot;&gt;Q on SO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Prosecutor's fallacy notes</title>
	 <link href="/2012/05/12/notes.html"/>
   <updated>2012-05-12T00:00:00+00:00</updated>
   <id>/05/12/notes</id>
   <content type="html">&lt;p&gt;Mostly getting Prosecutor’s Fallacy example to run with large enough sample sizes. Finer sampling or more replicates than current settings seems to crash MPI connections over farm cluster, probably a memory issue. Oh well, looks like I’ve got a good enough sample size here.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/08952efd2e181726a3a44aeb6cba14fa83aa57a4/inst/examples/fallacy.md&quot;&gt;Prosecutor’s Fallacy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;citations-on-jekyll&quot;&gt;Citations on Jekyll&lt;/h2&gt;
&lt;p&gt;No ideal solution here at the moment, a couple options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pandoc: My intended solution, Disadvantages: converts everything to it’s own markdown format, which messes up my PHP Markdown tables and YAML frontmatter. Also chokes on large bibtex files, so I need to run bibtool / my bibgen script to generate the bib file first. Perhaps a scripted solution can get around this.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Use knit+R to generate citations with my &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; package. Advantages: customizable, can run on DOIs without needing to bother with bibtex. Easiest to extend with metadata in citations, such as CiTO. Disadvantages: not very polished, citation formating needs help.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/inukshuk/jekyll-scholar&quot;&gt;jekyll-scholar&lt;/a&gt;: Perhaps the most promising of the citation plugins.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Computing the value of information in management of a stochastic resource</title>
	 <link href="/2012/05/11/Notes.html"/>
   <updated>2012-05-11T00:00:00+00:00</updated>
   <id>/05/11/Notes</id>
   <content type="html">&lt;h1 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h1&gt;
&lt;p&gt;After reading Costello &lt;em&gt;et. al.&lt;/em&gt; (2010), taking a look at value of information in a dynamic context. Consider the model of Sethi &lt;em&gt;et. al.&lt;/em&gt; (2005) (Costello is part of et al); a dynamic fisheries model with stochastic growth (a la Reed, (1979)), stochastic measurement assessing the stock size, and stochastic implementation of the harvest. I first imagine the case where the real system is quite deterministic, say, with a tiny amount of growth stochasticity only. I solve this optimal harvest problem using SDP and compare it to three other scenarios (simulating 100 realizations of each).&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;where our estimate of the growth stochasticity is much higher, reflecting our lack of knowledge about growth, (in our the computation of the optimal solution)&lt;/li&gt;
&lt;li&gt;where our estimate of both growth and stock measurement is higher&lt;/li&gt;
&lt;li&gt;where our estimate of all three is higher.&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/70e899ea4ecc52317cb6ff91c21406cf665cbaa9/inst/examples/value_of_information.md&quot;&gt;Value of information&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Compare this to solving the optimal solution under increasing uncertainty (that is, increasing the sources of stochasticity in the real system, and having the manager solve for the optimal solution given that uncertainty). Still feels like uncertainty should impact profits, but not much:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/0bda7ca2f32b80a7905d6cbc302223f8811bc033/inst/examples/value_of_information.md&quot;&gt;Value of stochasticity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Even &lt;em&gt;underestimating&lt;/em&gt; rather than overestimating the noise isn’t so costly, only impacts cases where the population crashes (i.e. the manager assumes a nearly deterministic system, and scenarios add additional stochasticity into the reality).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/da6e0b933450755319a16d92efa4745883baa792/inst/examples/cost_of_underestimating.md&quot;&gt;Cost of underestimating&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Similarly for an Allee effect model, overestimating uncertainty doesn’t result in very suboptimal (conservative) behavior…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/4b89252c276a3cf9881f598ffe2070cc1cafde4a/inst/examples/value_under_allee.md&quot;&gt;Allee&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Costello C, Rassweiler A, Siegel D, De Leo G, Micheli F and Rosenberg A (2010 2010). “Marine Reserves Special Feature: The value of spatial information in MPA network design.” &lt;em&gt;Proceedings of the National Academy of Sciences&lt;/em&gt;, &lt;em&gt;107&lt;/em&gt;. ISSN 0027-8424, http://dx.doi.org/10.1073/pnas.0908057107&lt;/p&gt;
&lt;p&gt;Sethi G, Costello C, Fisher A, Hanemann M and Karp L (2005). “Fishery management under multiple uncertainty.” &lt;em&gt;Journal of Environmental Economics and Management&lt;/em&gt;, &lt;em&gt;50&lt;/em&gt;. ISSN 00950696, http://dx.doi.org/10.1016/j.jeem.2004.11.005&lt;/p&gt;
&lt;p&gt;Reed W (1979). “Optimal escapement levels in stochastic and deterministic harvesting models.” &lt;em&gt;Journal of Environmental Economics and Management&lt;/em&gt;, &lt;em&gt;6&lt;/em&gt;. ISSN 00950696, http://dx.doi.org/10.1016/0095-0696(79)90014-7&lt;/p&gt;
&lt;h1 id=&quot;evolution-stuff&quot;&gt;Evolution stuff&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;More writing on Wrightscape manuscript. Reply to Peter.&lt;/li&gt;
&lt;li&gt;rfishbase new version to CRAN?&lt;/li&gt;
&lt;li&gt;Create table 1 for treebase&lt;/li&gt;
&lt;li&gt;Touch up pacakge documentation in treebase&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;early-warning&quot;&gt;Early warning&lt;/h1&gt;
&lt;p&gt;Large replicate sims with fine sampling – creating memory issues on nodes on farm. Too hot for SOCK, switching to MPI…&lt;/p&gt;
&lt;h1 id=&quot;package-documentation&quot;&gt;Package Documentation&lt;/h1&gt;
&lt;p&gt;Just as a test, I ran staticdocs &lt;code&gt;build_package&lt;/code&gt; function on rfishbase, sticking the output into &lt;code&gt;inst/doc/html&lt;/code&gt; (from the package root directory).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(staticdocs)
&lt;span class=&quot;kw&quot;&gt;build_package&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;rfishbase&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;inst/doc/html&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I then created the gh-pages branch with just the html docs and pushed to github.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git branch gh-pages
git checkout gh-pages
rm -rf data/ man/ R/ README.md NEWS NAMESPACE DESCRIPTION demo/
mv inst/doc/html/* .
rm -rf inst/
git add *
git commit -a -m &amp;quot;gh-pages documentation&amp;quot;
git push origin gh-pages
git checkout master&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which means that the documentation now appears at: http://ropensci.github.com/rfishbase/&lt;/p&gt;
&lt;p&gt;We can think about customizing the css to some ropensci standard if we like. Should motivate me to get some more pretty examples in the documentation too. I think there’s a way to get vignettes to show up as well, will dig around a bit.&lt;/p&gt;
&lt;p&gt;Also created an index for all packages at http://ropensci.github.com&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/05/10/notes.html"/>
   <updated>2012-05-10T00:00:00+00:00</updated>
   <id>/05/10/notes</id>
   <content type="html">&lt;h1 id=&quot;partially-observable-stochastic-processes-cont.&quot;&gt;Partially Observable Stochastic Processes (cont.)&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Reading a bit more about &lt;code&gt;pomp&lt;/code&gt;. Looks like SCM and PMCMC offer nicely Bayesian inference tools using the same framework (&lt;code&gt;rprocess&lt;/code&gt; and &lt;code&gt;dmeasure&lt;/code&gt;), making a nice platform for implementing multiple methods. Almost feels like having the likelihood equation in hand again.&lt;/li&gt;
&lt;li&gt;A bit more skeptical about nonlinear forecasting and probe matching, as they feel even more heuristic or arbitrary. I suppose that’s just the price of having only &lt;code&gt;rmeasure&lt;/code&gt; instead of &lt;code&gt;dmeasure&lt;/code&gt; available though. Perhaps worth a closer look.&lt;/li&gt;
&lt;li&gt;Time to implement some saddle-node models and see what we can get…&lt;/li&gt;
&lt;li&gt;Also need to spend a bit more time working through examples on Vasilis’s &lt;code&gt;earlywarings&lt;/code&gt; package.&lt;/li&gt;
&lt;li&gt;About ready to submit Prosecutor’s Fallacy paper. Repeating runs, some touch up on presentation still needed.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;evolution-stuff&quot;&gt;Evolution stuff&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;treebase manuscript re-organization. – done&lt;/li&gt;
&lt;li&gt;treebase mansuscript simplify / clarify language – done&lt;/li&gt;
&lt;li&gt;treebase select examples, move technical examples to appendix – done&lt;/li&gt;
&lt;li&gt;treebase finalize new function list. – done&lt;/li&gt;
&lt;li&gt;More writing on Wrightscape manuscript. Reply to Peter.&lt;/li&gt;
&lt;li&gt;rfishbase new version to CRAN?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Treebase miscellaneous exploration examples?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(histogram of species in treebase?)&lt;/li&gt;
&lt;li&gt;gene tree diversification rates vs species tree?&lt;/li&gt;
&lt;li&gt;gene tree of taxon of interest&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;logistics&quot;&gt;Logistics&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ESA 2012 flight booked. Registration paid. need housing…&lt;/li&gt;
&lt;li&gt;Sent query for CSGF 2012 flights&lt;/li&gt;
&lt;li&gt;Need to book Evolution flight. Registration paid, housing paid.&lt;/li&gt;
&lt;li&gt;file reimbursements&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;computing&quot;&gt;Computing&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;oooh: &lt;a href=&quot;https://github.com/hadley/staticdocs&quot;&gt;staticdocs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Infering Partially Observable Markov Processes with Iterative Particle Filtering</title>
	 <link href="/2012/05/09/notes.html"/>
   <updated>2012-05-09T00:00:00+00:00</updated>
   <id>/05/09/notes</id>
   <content type="html">&lt;p&gt;Excellent talk by Ed Ionides at UC Davis today (led me to miss Weds session of Data to Knowledge).&lt;/p&gt;
&lt;h1 id=&quot;ed-ionides&quot;&gt;Ed Ionides&lt;/h1&gt;
&lt;p&gt;six problems of Bjonstead and Grenfell: an appeal for arbitrary nonlinear partially observed vector valued stochastic models.&lt;br /&gt;POMP doesn’t mix well in the winbugs.&lt;/p&gt;
&lt;p&gt;simulation-based algorithm (plug-and-play)&lt;/p&gt;
&lt;p&gt;Think of a process being defined by:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rprocess()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dprocess()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rmeasure()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dmeasure()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In general we need some subset of these processes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;rprocess&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;dprocess&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;rmeasure&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;dmeasure&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;iterative filtering&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Lui-West SCM&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;EM by SCM&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;MCMC&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Nonlin forecasting&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Particle MCMC&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;Probe matching&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;X&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;bayesian-plug-and-play&quot;&gt;Bayesian plug-and-play&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Artificial parameter evolution (Liu &amp;amp; West 2001)&lt;/li&gt;
&lt;li&gt;Approximate Bayesian Computing (&lt;span rel=&quot;tooltip&quot; title=&quot;Toni T, Welch D, Strelkowa N, Ipsen A and Stumpf M (2009).
Approximate Bayesian Computation Scheme For Parameter Inference
And Model Selection in Dynamical Systems. _Journal of The Royal
Society Interface_, *6*. ISSN 1742-5689, 
http://dx.doi.org/10.1098/rsif.2008.0172.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2008.0172&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Toni &lt;em&gt;et. al.&lt;/em&gt; 2009&lt;/a&gt;&lt;/span&gt;)&lt;/li&gt;
&lt;li&gt;Particle MCMC (&lt;span rel=&quot;tooltip&quot; title=&quot;Andrieu C, Doucet A and Holenstein R (2010). Particle Markov
Chain Monte Carlo Methods. _Journal of The Royal Statistical
Society: Series B (Statistical Methodology)_, *72*. 
http://dx.doi.org/10.1111/j.1467-9868.2009.00736.x.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1111/j.1467-9868.2009.00736.x&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Andrieu &lt;em&gt;et. al.&lt;/em&gt; 2010&lt;/a&gt;&lt;/span&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;non-bayesian&quot;&gt;Non-Bayesian&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Simulation-based prediction rules “Probe-matching” (&lt;span rel=&quot;tooltip&quot; title=&quot;Kendall B, Briggs C, Murdoch W, Turchin P, Ellner S, McCauley E,
Nisbet R and Wood S (1999). Why do Populations Cycle? A Synthesis
of Statistical And Mechanistic Modeling Approaches. _Ecology_,
*80*. ISSN 0012-9658, 
http://dx.doi.org/10.1890/0012-9658(1999)080[1789:WDPCAS]2.0.CO;2.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1890/0012-9658(1999)080[1789:WDPCAS]2.0.CO;2&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Kendall &lt;em&gt;et. al.&lt;/em&gt; 1999&lt;/a&gt;&lt;/span&gt;)&lt;/li&gt;
&lt;li&gt;Simulated likelihood of summary statistics (&lt;span rel=&quot;tooltip&quot; title=&quot;Wood S (2010). Statistical Inference For Noisy Nonlinear
Ecological Dynamic Systems. _Nature_, *466*. ISSN 0028-0836,
 http://dx.doi.org/10.1038/nature09319.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1038/nature09319&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Wood, 2010&lt;/a&gt;&lt;/span&gt;)&lt;/li&gt;
&lt;li&gt;Iterated filtering (&lt;span rel=&quot;tooltip&quot; title=&quot;Ionides E, Breto C and King A (2006). Inference For Nonlinear
Dynamical Systems. _Proceedings of The National Academy of
Sciences_, *103*. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.0603181103.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0603181103&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ionides &lt;em&gt;et. al.&lt;/em&gt; 2006&lt;/a&gt;&lt;/span&gt;)&lt;/li&gt;
&lt;li&gt;Nonlinear forecasting&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;“Likelihood-free” inference – i.e. don’t have the likelihood equation unlike MCMC, EM need &lt;code&gt;dprocess()&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compare to optimization “gradient-free” methods.&lt;/li&gt;
&lt;li&gt;or to Keverkidis “equation-free” (&lt;span rel=&quot;tooltip&quot; title=&quot;Kevrekidis I, Gear W, Hyman J, Kevrekidid P, Runborg O and
Theodoropoulos C (2003). Equation-Free, Coarse-Grained Multiscale
Computation: Enabling Mocroscopic Simulators to Perform
System-Level Analysis. 
http://projecteuclid.org/euclid.cms/1119655353 [Online.
last-accessed: 2013-03-19 22:38:18]. 
http://projecteuclid.org/euclid.cms/1119655353.&quot;&gt;&lt;a href=&quot;http://projecteuclid.org/euclid.cms/1119655353&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Kevrekidis &lt;em&gt;et. al.&lt;/em&gt; 2003&lt;/a&gt;&lt;/span&gt;) Approximate Bayesian methods and simulated moment methods lead to loss of &lt;em&gt;statistical&lt;/em&gt; efficiency Iterated filtering enables almost exact likelihood-based inference.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ODEs have been plug-and-play (numerical) for a long time. We want this to be true for SDEs as well.&lt;/p&gt;
&lt;h2 id=&quot;filtering&quot;&gt;Filtering&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Think “Kalman filter”. Particle filter is a simulated approximation approach for the likelihood function.&lt;/li&gt;
&lt;li&gt;Iterative filtering is a much more clever way to search for the best fit model than some traditional optimization routine that wants a smooth likelihood function.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Theorem: derivative of the log-likelihood is the small-noise limit of a weighted average of local filtering. In:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(&lt;span rel=&quot;tooltip&quot; title=&quot;Ionides E, Breto C and King A (2006). Inference For Nonlinear
Dynamical Systems. _Proceedings of The National Academy of
Sciences_, *103*. ISSN 0027-8424, 
http://dx.doi.org/10.1073/pnas.0603181103.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0603181103&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ionides &lt;em&gt;et. al.&lt;/em&gt; 2006&lt;/a&gt;&lt;/span&gt;) (pseudo-code)&lt;/li&gt;
&lt;li&gt;(&lt;span rel=&quot;tooltip&quot; title=&quot;Ionides E, Bhadra A, Atchadé Y and King A (2011). Iterated
Filtering. _The Annals of Statistics_, *39*. ISSN 0090-5364,
 http://dx.doi.org/10.1214/11-AOS886.&quot;&gt;&lt;a href=&quot;http://dx.doi.org/10.1214/11-AOS886&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Ionides &lt;em&gt;et. al.&lt;/em&gt; 2011&lt;/a&gt;&lt;/span&gt;) (proofs)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Scientists like life on the edge of identifiability, &amp;gt; Minimal complexity acceptable to scientsits approx maximimal complexity acceptable to available data&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ah, &lt;a href=&quot;http://www.stat.lsa.umich.edu/~ionides/pubs/davis12.pdf&quot;&gt;Ed’s slides are available online&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Some good information on the &lt;a href=&quot;http://pomp.r-forge.r-project.org/&quot;&gt;pomp website&lt;/a&gt; as well.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Christophe Andrieu, Arnaud Doucet, Roman Holenstein, (2010) Particle Markov Chain Monte Carlo Methods. &lt;em&gt;Journal of The Royal Statistical Society: Series B (Statistical Methodology)&lt;/em&gt; &lt;strong&gt;72&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1111/j.1467-9868.2009.00736.x&quot;&gt;10.1111/j.1467-9868.2009.00736.x&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;E. L. Ionides, C. Breto, A. A. King, (2006) Inference For Nonlinear Dynamical Systems. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;103&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0603181103&quot;&gt;10.1073/pnas.0603181103&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Edward L. Ionides, Anindya Bhadra, Yves Atchadé, Aaron King, (2011) Iterated Filtering. &lt;em&gt;The Annals of Statistics&lt;/em&gt; &lt;strong&gt;39&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1214/11-AOS886&quot;&gt;10.1214/11-AOS886&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Bruce E. Kendall, Cheryl J. Briggs, William W. Murdoch, Peter Turchin, Stephen P. Ellner, Edward McCauley, Roger M. Nisbet, Simon N. Wood, (1999) Why do Populations Cycle? A Synthesis of Statistical And Mechanistic Modeling Approaches. &lt;em&gt;Ecology&lt;/em&gt; &lt;strong&gt;80&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1890/0012-9658(1999)080[1789:WDPCAS]2.0.CO;2&quot;&gt;10.1890/0012-9658(1999)080[1789:WDPCAS]2.0.CO;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Simon N. Wood, (2010) Statistical Inference For Noisy Nonlinear Ecological Dynamic Systems. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;466&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature09319&quot;&gt;10.1038/nature09319&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;E. L. Ionides, C. Breto, A. A. King, (2006) Inference For Nonlinear Dynamical Systems. &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt; &lt;strong&gt;103&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.0603181103&quot;&gt;10.1073/pnas.0603181103&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;T. Toni, D. Welch, N. Strelkowa, A. Ipsen, M. P.H Stumpf, (2009) Approximate Bayesian Computation Scheme For Parameter Inference And Model Selection in Dynamical Systems. &lt;em&gt;Journal of The Royal Society Interface&lt;/em&gt; &lt;strong&gt;6&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1098/rsif.2008.0172&quot;&gt;10.1098/rsif.2008.0172&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ioannis Kevrekidis, William Gear, James Hyman, Panagiotis Kevrekidid, Olof Runborg, Constantinos Theodoropoulos, (2003) Equation-Free, Coarse-Grained Multiscale Computation: Enabling Mocroscopic Simulators to Perform System-Level Analysis. &lt;em&gt;Communications in Mathematical Sciences&lt;/em&gt; &lt;a href=&quot;http://projecteuclid.org/euclid.cms/1119655353&quot; class=&quot;uri&quot;&gt;http://projecteuclid.org/euclid.cms/1119655353&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;exploring-iterative-filtering-in-pomp&quot;&gt;Exploring Iterative Filtering in POMP&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/populationdynamics/blob/497d4ce4c401833464ccaff6edd518133f4e9b0c/inst/examples/pomp_explore.md&quot;&gt;my example exploration&lt;/a&gt;, following the &lt;a href=&quot;http://cran.at.r-project.org/web/packages/pomp/vignettes/intro_to_pomp.pdf&quot;&gt;introductory vignette.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Note that the iterative filtering algorithm took a little over 16 minutes on ten processors on the farm cluster. pomp does not provide any parallelization. Particles must communicate at each iteration. With tight communication loops, could probably get substantial acceleration on MPI or GPU.&lt;/p&gt;
&lt;p&gt;(Would be interesting to drive the simulation with Gillespie algorithm, something richer than a crude discritization. Depending on timescale, may result in very computationally intensive requirements).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(pomp)
gompertz.proc.sim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, t, params, delta.t, ...) {
    r &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;params[&lt;span class=&quot;st&quot;&gt;&amp;quot;r&amp;quot;&lt;/span&gt;]
    K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;params[&lt;span class=&quot;st&quot;&gt;&amp;quot;K&amp;quot;&lt;/span&gt;]
    sigma &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;params[&lt;span class=&quot;st&quot;&gt;&amp;quot;sigma&amp;quot;&lt;/span&gt;]
    X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[&lt;span class=&quot;st&quot;&gt;&amp;quot;X&amp;quot;&lt;/span&gt;]  &lt;span class=&quot;co&quot;&gt;# the state at time t:&lt;/span&gt;
    ## generate a log-normal random variable:
    eps &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;mean =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sd =&lt;/span&gt; sigma))
    ## compute the state at time t+delta.t:
    S &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(-r *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;delta.t)
    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;X =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(K^(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;S) *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;X^S *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;eps))
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz.meas.sim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, t, params, ...) {
    tau &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;params[&lt;span class=&quot;st&quot;&gt;&amp;quot;tau&amp;quot;&lt;/span&gt;]
    X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[&lt;span class=&quot;st&quot;&gt;&amp;quot;X&amp;quot;&lt;/span&gt;]  &lt;span class=&quot;co&quot;&gt;# state at time t:&lt;/span&gt;
    y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Y =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;unname&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;meanlog =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(X), &lt;span class=&quot;dt&quot;&gt;sd =&lt;/span&gt; tau)))
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;create a container of class &lt;code&gt;pomp&lt;/code&gt; to hold the model and data.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pomp&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Y =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;times =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;rprocess =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;discrete.time.sim&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;step.fun =&lt;/span&gt; gompertz.proc.sim, &lt;span class=&quot;dt&quot;&gt;delta.t =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), 
    &lt;span class=&quot;dt&quot;&gt;rmeasure =&lt;/span&gt; gompertz.meas.sim, &lt;span class=&quot;dt&quot;&gt;t0 =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parameters and inital condition:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sigma =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;X.0 =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; theta)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;variables =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Y&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8012/7168130004_62bc33148d_o.png&quot; alt=&quot;plot of chunk simulate&quot; /&gt;&lt;figcaption&gt;plot of chunk simulate&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Likelihood using a particle filter (sequential Monte Carlo) requires the measurement density (but not the process density).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz.meas.dens &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(y, x, t, params, log, ...) {
    tau &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;params[&lt;span class=&quot;st&quot;&gt;&amp;quot;tau&amp;quot;&lt;/span&gt;]
    ## state at time t:
    X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[&lt;span class=&quot;st&quot;&gt;&amp;quot;X&amp;quot;&lt;/span&gt;]
    ## observation at time t:
    Y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;y[&lt;span class=&quot;st&quot;&gt;&amp;quot;Y&amp;quot;&lt;/span&gt;]
    ## compute the likelihood of Y|X,tau
    &lt;span class=&quot;kw&quot;&gt;dlnorm&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; Y, &lt;span class=&quot;dt&quot;&gt;meanlog =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(X), &lt;span class=&quot;dt&quot;&gt;sdlog =&lt;/span&gt; tau, &lt;span class=&quot;dt&quot;&gt;log =&lt;/span&gt; log)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Stick the new function into our container:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pomp&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;dmeasure =&lt;/span&gt; gompertz.meas.dens)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we get a point estimate of the likelihood,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pfilter&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; theta, &lt;span class=&quot;dt&quot;&gt;Np =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(pf)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[1] 49.29&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;iterated-filtering&quot;&gt;Iterated filtering&lt;/h3&gt;
&lt;p&gt;We will do this in the transformed variable space, so we add our transformation method to the container:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;gompertz &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pomp&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;parameter.transform =&lt;/span&gt; function(params, 
    ...) {
    &lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(params)
}, &lt;span class=&quot;dt&quot;&gt;parameter.inv.transform =&lt;/span&gt; function(params, ...) {
    &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(params)
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we’re ready for an iterated-filtering run. This is gonna be slow, so let’s set up a parallel architecture first:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(snowfall)
&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parallel =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cpu =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;rep &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(dummy_index) {
    estpars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;r&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;sigma&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;tau&amp;quot;&lt;/span&gt;)
    theta.guess &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;coef&lt;/span&gt;(gompertz)
    theta.guess[estpars] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(estpars), &lt;span class=&quot;dt&quot;&gt;meanlog =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(theta.guess[estpars]), 
        &lt;span class=&quot;dt&quot;&gt;sdlog =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;mif&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;Nmif =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;start =&lt;/span&gt; theta.guess, &lt;span class=&quot;dt&quot;&gt;transform =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;pars =&lt;/span&gt; estpars, 
        &lt;span class=&quot;dt&quot;&gt;rw.sd =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;r =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.02&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sigma =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.02&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;tau =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;Np =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;var.factor =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;ic.lag =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cooling.factor =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.999&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;max.fail =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;)
}
&lt;span class=&quot;kw&quot;&gt;sfExportAll&lt;/span&gt;()
&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(mf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sfSapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, rep))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;   user  system elapsed 
   0.02    0.00 1037.39 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Average parameter estimates (compare to theta)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;theta.mif &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;apply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(mf, coef), &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, mean)
theta.mif&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;      r       K   sigma     tau     X.0 
0.04385 1.00000 0.09647 0.10495 1.00000 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Evaluating the log-likelihoods at the convergent parameters requires the particle filter. This line applies the particle filter to each of the parameter estimates&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;loglik.mif &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;replicate&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;pfilter&lt;/span&gt;(mf[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]], &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; theta.mif, 
    &lt;span class=&quot;dt&quot;&gt;Np =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10000&lt;/span&gt;)))
bl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(loglik.mif)
loglik.mif.est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.mif -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl)))
loglik.mif.se &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sd&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.mif -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl))/&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.mif.est -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl)
&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;est =&lt;/span&gt; loglik.mif.est, &lt;span class=&quot;dt&quot;&gt;se =&lt;/span&gt; loglik.mif.se)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;     est       se 
51.45397  0.09316 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;“True” uses the original model and coefficients rather than the estimated one, but still approximates the log.likelihood using particle filtering&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;loglik.true &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;replicate&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;n =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;logLik&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;pfilter&lt;/span&gt;(gompertz, &lt;span class=&quot;dt&quot;&gt;params =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;coef&lt;/span&gt;(gompertz), 
    &lt;span class=&quot;dt&quot;&gt;Np =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10000&lt;/span&gt;)))
loglik.true.est &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.true -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl)))
loglik.true.se &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sd&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.true -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;bl))/&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(loglik.true.est -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;bl)
&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;est =&lt;/span&gt; loglik.true.est, &lt;span class=&quot;dt&quot;&gt;se =&lt;/span&gt; loglik.true.se)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;    est      se 
50.0128  0.1062 &lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Data to Knowledge Day II and other notes</title>
	 <link href="/2012/05/08/notes.html"/>
   <updated>2012-05-08T00:00:00+00:00</updated>
   <id>/05/08/notes</id>
   <content type="html">&lt;p&gt;Great second day at the Data to Knowledge conference (a few notes below).&lt;br /&gt;Also I have been trying to move a few projects forward during the commute and break. I’ve sent Alan my revisions on the prosecutor’s fallacy manuscript, getting pretty close. Following up on a query from John, ran a simulation showing the impact of having a delay in the timeseries before the slow change towards the bifurcation begins. Certainly weakens power but does not preclude the linear-change model detecting the change, &lt;a href=&quot;https://github.com/cboettig/earlywarning/blob/59e6da5cee663447509db0441c81fe4a6b960c34/inst/examples/delayed.md&quot;&gt;see example&lt;/a&gt; Also moving towards scheduling a call for the pdg-control manuscript on stochastic policy costs; some notes below.&lt;/p&gt;
&lt;h1 id=&quot;data-to-knowledge-conference-day-2&quot;&gt;Data to Knowledge Conference, Day 2&lt;/h1&gt;
&lt;p&gt;David A. Bader, algorithm design / HPC perspective&lt;/p&gt;
&lt;p&gt;Opportunities:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;HPC on big data (massive graphs)&lt;/li&gt;
&lt;li&gt;Streaming analytics: Today’s challenges aren’t dense linear algebra.&lt;/li&gt;
&lt;li&gt;Informational visualization - more data on graph than we have pixels&lt;/li&gt;
&lt;li&gt;Hetergeneous systems - a system that can reconfigure memory hierarchy on the fly&lt;/li&gt;
&lt;li&gt;energy efficiency (moving data takes high energy as well as time)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This is not the time to get stuck in a single paradigm! Scientific computing != MPI Big data != Hadoop/Map-reduce&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;External disk -------------------------------------------- Internal memory
Hadoop -- traditional database -- cloud/cluster -- large shared memory
Easy programming -------------- harder
low performance --------------- higher performance
high energy use --------------- low energy use&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Latency on memory (random access some address in a big global index) dominates over floating point calculations Cray XMT 512 processor, 128 threads/processor, 64TB global memory, no cache.&lt;/p&gt;
&lt;h2 id=&quot;jeff-hawkins-brain-as-a-streaming-processor&quot;&gt;Jeff Hawkins: Brain as a streaming processor&lt;/h2&gt;
&lt;p&gt;learning isn’t about strengthening weights on synapses – they form and vanish all the time. connections are binary, with scalar permanence.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The two-Layer learning system (classification problem)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Layer 0 is the original problem:&lt;/li&gt;
&lt;li&gt;receive labeled and unlabeled data&lt;/li&gt;
&lt;li&gt;train a classifier on labeled example, predict for others.&lt;/li&gt;
&lt;li&gt;Layer 1 meta-classifier which tries to learn over which data layer 0 does well (using binary classification on layer 0 as true or false)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;policy-costs&quot;&gt;Policy Costs&lt;/h1&gt;
&lt;p&gt;Framing the question: Need to discuss these issues, then get a someone to be point-person on each?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Policy costs – Why this is important, what’s already known.&lt;/li&gt;
&lt;li&gt;Typical ways these concerns are addressed (i.e. quadratic costs on control), similarity &amp;amp; differences.&lt;/li&gt;
&lt;li&gt;Discussion of policy costs as “Regularization”&lt;/li&gt;
&lt;li&gt;Why stochastic?&lt;/li&gt;
&lt;li&gt;Background: Reed model.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Results so far: (discuss these, decide what needs more study)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introduce &amp;amp; characterize the impact of different norms: L1, L2, asymmetric, fixed costs&lt;/li&gt;
&lt;li&gt;Comparison to Reed&lt;/li&gt;
&lt;li&gt;The double-pay of policy costs: Paying for the transactions, difference from optimal policy&lt;/li&gt;
&lt;li&gt;Comparisons between these norms apples-to-apples.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Discussion/Conclusion – what do we highlight?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Must first answer - which journal/audience?&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;misc&quot;&gt;Misc&lt;/h1&gt;
&lt;p&gt;Modified css to use twitter-bootstrap striped tables as table default, since markdown won’t add a class on tables automatically. Hopefully doesn’t cause trouble with other table layouts.&lt;/p&gt;
&lt;p&gt;Note that &lt;code&gt;xtable&lt;/code&gt; can handle this by toggling options&amp;quot;&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;html.table.attributes=&lt;span class=&quot;kw&quot;&gt;getOption&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;xtable.html.table.attributes&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;class=table-striped&amp;quot;&lt;/span&gt;),&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;so setting html class of tables should work fine in &lt;code&gt;knitr&lt;/code&gt;. On the flip side, sounds like pandoc would do better with ascii tables as input than with html tables?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Data to Knowledge Day 1</title>
	 <link href="/2012/05/07/notes.html"/>
   <updated>2012-05-07T00:00:00+00:00</updated>
   <id>/05/07/notes</id>
   <content type="html">&lt;h2 id=&quot;scaling-time-series-data-mining-to-trillions-of-series&quot;&gt;Scaling Time Series Data Mining to trillions of series&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cs.ucr.edu/~eamonn/&quot;&gt;Eamonn Keogh&lt;/a&gt;&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Similarity search is the fundamental problem for any task&lt;/li&gt;
&lt;li&gt;This problem is now solved.&lt;/li&gt;
&lt;li&gt;As effective as possible, as efficient as possible.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;What is similarity search? All about required invariances: Looking at ancient manuscripts of fish – identify multiple drawings of the same species. Invariant to color, scale, and orientation.&lt;br /&gt;(Note that rotation becomes phase, easy to handle). Of course database to compare to might be very large, so this must be fast.&lt;/p&gt;
&lt;p&gt;Time-series space: Larson transform. Key is often changing between data formats. DNA to time-series: G = step up 1, A = step up two, C = step down 1, etc.&lt;br /&gt;Produces accurate phylogenies Locke et al., Nature.&lt;/p&gt;
&lt;p&gt;Identify mosquito species based on activity time series pattern.&lt;br /&gt;Now doing in real time identification of sex and species by flight path from 100m away.&lt;/p&gt;
&lt;p&gt;Beet leafhopper, $10 billion damage by spreading disease between plants.&lt;br /&gt;measure voltage on leafhoppers. Time-series motifs identify common behaviors.&lt;br /&gt;See &lt;a href=&quot;http://www.cs.ucr.edu/~eamonn/SDM_insects.pdf&quot;&gt;paper&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Finding rules in time series for predicting patterns.&lt;br /&gt;Rules work across Zebra finch songs. Knockout genes, see how this changes.&lt;/p&gt;
&lt;p&gt;What are the distance measures? Invariant to: noise, uniform scaling, offset, amplitude scaling, dropouts, phase, warping.&lt;/p&gt;
&lt;p&gt;Euclidean distance between &lt;code&gt;i&lt;/code&gt;th pt in the time-series.&lt;br /&gt;Much better: distance to &lt;code&gt;i+1&lt;/code&gt; etc. “Dynamic Time Warping”.&lt;/p&gt;
&lt;p&gt;Claim to have tested every publicly available dataset in the world.&lt;br /&gt;Got code/advice from every author and asked them how to make it better.&lt;br /&gt;All other methods are slower, more parameter-rich than anything else. Not on average, but on every dataset we’ve tested. (While not “every dataset in the world”, Eamonn probably has assembled one of the largest collections of datasets used in clustering, which he makes conditionally &lt;a href=&quot;http://www.cs.ucr.edu/~eamonn/time_series_data/&quot;&gt;available on his website&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;But isn’t DTW is O(N^2) to minimize the path in distance space between any pt in set 1 and any set in pt 2.&lt;br /&gt;LB Keogh method makes it O(N). But, can now do in O(1).&lt;/p&gt;
&lt;p&gt;How about high dimensions. answers: argues that low-dimensions is all that you need, which needs domain expertise.&lt;/p&gt;
&lt;h2 id=&quot;random-forests&quot;&gt;Random forests&lt;/h2&gt;
&lt;p&gt;more memory efficient, scalable solution for random forests.&lt;br /&gt;&lt;a href=&quot;github.com/deads/bigrf&quot;&gt;code on github&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;coffee-break&quot;&gt;coffee break&lt;/h2&gt;
&lt;p&gt;Nice chatting with&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Josh Bloom, Astrophysics.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Michael Last, applied math, US Gov’t.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Excellent discussion with Keogh about applications of time series analysis to early warning&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;sparse-gev-yan-liu.&quot;&gt;Sparse GEV Yan Liu.&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;EM algorithm approach.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;classifying-signals-with-missing-data&quot;&gt;Classifying signals with missing data&lt;/h2&gt;
&lt;p&gt;i.e. before we’ve seen the future of the data.&lt;br /&gt;Estimate reliability of the data, decide when to act.&lt;br /&gt;(Reliable != accurate. Just means same prediction as full data) Model random features parameterized from data so far.&lt;/p&gt;
&lt;h2 id=&quot;astro-statistical-challenges-alex-szalay&quot;&gt;Astro-statistical challenges (&lt;a href=&quot;http://www.sdss.jhu.edu/~szalay/&quot;&gt;Alex Szalay&lt;/a&gt;)&lt;/h2&gt;
&lt;p&gt;limitations of poor sampling give way to systematic errors unknown unknowns when no models available&lt;/p&gt;
&lt;p&gt;Sparse signal, large dimensions, much noise, rare events, Large SVD perfect for randomized algorithms&lt;/p&gt;
&lt;h2 id=&quot;jeff-scargle-bayesian-blocks-segmented-models-for-detecting-and-characterizing-transients-in-streaming-time-series&quot;&gt;Jeff Scargle, Bayesian Blocks: Segmented Models for Detecting and Characterizing Transients in Streaming Time Series&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Construct a good representation of the variability of the underlying process from time series data.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A Bayesian dynamic programming solution for selecting change-points.&lt;/p&gt;
&lt;h2 id=&quot;multiple-object-detections-in-time-domain-surveys-tamas-budavari&quot;&gt;Multiple Object Detections in Time-Domain Surveys (Tamas Budavari)&lt;/h2&gt;
</content>
 </entry>
 
 <entry>
   <title>My research workflow, based on Github</title>
	 <link href="/2012/05/06/research-workflow.html"/>
   <updated>2012-05-06T00:00:00+00:00</updated>
   <id>/05/06/research-workflow</id>
   <content type="html">&lt;p&gt;This post outlines my current research workflow. This has evolved over time, so only my most recent projects hold completely to it, though almost all my projects follow the general R package structure. Two main differences are visible in my earlier projects: I used to keep scripts in &lt;code&gt;demo&lt;/code&gt; before they became the more complete knitr markdown in &lt;code&gt;inst/examples&lt;/code&gt;. I previously relied on a custom package called socialR to post results from those scripts to flickr, and would then embed the results in my Wordpress notebook, linking back to the demo file in Github. Knitr has allowed me to keep those figures, code and text in the package repository. This keeps everything more centralized (to Github), and lets each of the examples be updated in a more natural way than the linear record in the lab notebook. (Images are still hosted on flickr to avoid committing the binary files, knitr handles this upload rather well.).&lt;/p&gt;
&lt;p&gt;I’ve recently gotten better at always including &lt;code&gt;Roxygen&lt;/code&gt; documentation for packages. Since &lt;code&gt;knitr&lt;/code&gt; and markdown are recent developments for me, many older and even working manuscripts are still local in LaTeX. Being sensitive to the desires of collaborators means, that some projects are kept locally or hosted as private, secure repositories.&lt;/p&gt;
&lt;h1 id=&quot;my-workflow&quot;&gt;My Workflow&lt;/h1&gt;
&lt;p&gt;When I begin a new research project, I create a repository for that project in &lt;a href=&quot;https://github.com/cboettig&quot;&gt;Github&lt;/a&gt;. Projects that build substantially on earlier work of mine may start as a &lt;code&gt;clone&lt;/code&gt; of one of my existing projects. New directions in an existing project will instead begin as a branch within that repository, that may merge or be split out.&lt;/p&gt;
&lt;p&gt;Each repository is organized as an R package, with the basic directories &lt;code&gt;R/&lt;/code&gt;, &lt;code&gt;src/&lt;/code&gt;, &lt;code&gt;man/&lt;/code&gt; &lt;code&gt;data/&lt;/code&gt;, &lt;code&gt;inst/examples/&lt;/code&gt; and &lt;code&gt;inst/doc/&lt;/code&gt;, and the metadata file &lt;code&gt;DESCRIPTION&lt;/code&gt; providing the R package metadata such as author and dependencies. &lt;code&gt;README.md&lt;/code&gt; files provide descriptions of the directories. The package is installable directly from R through Github. The R package structure nicely handles software dependencies, documentation, and metadata in a consistent and portable structure:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;R/&lt;/code&gt; provides R functions representing commonly used analyses.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/&lt;/code&gt; provides C source-code for any R functions that are too slow by themselves.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;man/&lt;/code&gt; contains automatically generated documentation of these functions from the Roxygen documentation included in the function files.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;data/&lt;/code&gt; contains small data files. Version management is not ideal for large data files. Instead, a README file contains metadata and links to data stored on a seperate webserver.&lt;br /&gt;The README file can be version managed within git and nicely displayed on Github.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;inst/examples/&lt;/code&gt; contains each of my investigations. These are saved as &lt;a href=&quot;http://yihui.name/knitr&quot;&gt;knitr&lt;/a&gt; files, which allow me to mix markdown text describing what I am doing with each code block. Knitr runs this code and assembles the results in a markdown format that displays the code, images, and supporting text nicely together. Long blocks of code become abstracted as functions and move into the &lt;code&gt;R&lt;/code&gt; directory, where they recieve formal documentation and can be more easily used in later examples.&lt;/li&gt;
&lt;li&gt;Sections from mature examples can be moved into &lt;code&gt;inst/doc/&lt;/code&gt; as another markdown file that will eventually become a publication associated with this work. The paper acts a Sweave-style dynamic document that still contains the code relevant to re-create the examples, though options can now hide that code from the final display. In addition to the markdown format for online viewing, &lt;code&gt;inst/doc/&lt;/code&gt; includes utilities from knitr and &lt;a href=&quot;http://johnmacfarlane.net/pandoc/&quot;&gt;pandoc&lt;/a&gt; which handle citations and can convert this markdown file into a LaTeX or Word document for journal submission.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Github maintains and displays the version history of the workflow, making it easy to compare earlier versions of the manuscript, and track the history of the results to even before they reach the manuscript in &lt;code&gt;inst/examples/&lt;/code&gt;. Contributions of collaborators using Github are easily tracked and displayed as well. Github can provide version-stable links that will point to any element at a fixed point in the process, and dynamic links that always point to the most recent version (or even particular line of code in a version).&lt;/p&gt;
&lt;p&gt;Github’s issues tracker provides a convenient platform to record, sort, and prioritize issues that need to be addressed and directions for future exploration. Issues can be submitted by anyone.&lt;/p&gt;
&lt;p&gt;The R package structure provides a standardized and portable container for the project suitable for combining functions, scripts, documentation, and examples, and also handling software dependencies and versions.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/05/04/notes.html"/>
   <updated>2012-05-04T00:00:00+00:00</updated>
   <id>/05/04/notes</id>
   <content type="html">&lt;h2 id=&quot;chris-costello-talk&quot;&gt;Chris Costello Talk&lt;/h2&gt;
&lt;p&gt;Presents unpublished work on value of (behavioral) adaptation, using forestry practices changing under climate change as the example. &lt;strong&gt;If we ignore adaptive responses, we overestimate costs and underestimate benefits.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Effect w/ adaptation:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \frac{d V}{d \theta} = \frac{\partial f}{\partial r} \frac{\partial r }{\partial \theta} + \frac{\partial f}{\partial \theta} \]&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envelope theorem: optimal point is at &lt;span&gt;( df/dr = 0 )&lt;/span&gt;, so no value of adaptation after optimizing with respect to r.&lt;/li&gt;
&lt;li&gt;Present Faustman harvest model adding with heterogeneity on site, species, time, age, environment to dynamic programming solution.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;meeting&quot;&gt;meeting&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Discuss &lt;span class=&quot;citation&quot; data-cites=&quot;Sethi2005&quot;&gt;@Sethi2005&lt;/span&gt; and &lt;span class=&quot;citation&quot; data-cites=&quot;Brozovic2011&quot;&gt;@Brozovic2011&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Option value pricing on acting on an early warning signal?&lt;/li&gt;
&lt;li&gt;Discussion of adding&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;lunch&quot;&gt;lunch&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fascinating discussion of his experience in the marine reserve design process, in which they use a model to score proposals offered by stakeholders but are forbidden using the model to predict the optimal policy (since they are then more directly accountable for the recommendation).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;wrightscape&quot;&gt;Wrightscape&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Should we present the additional traits that do not show a signal, for contrast?&lt;/li&gt;
&lt;li&gt;Launched additional runs on &lt;code&gt;farm&lt;/code&gt; cluster, each on 16 cores, running over all traits:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;pid&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;priority&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;time of launch&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;61830&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.61000&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;intra&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;05/04/2012 15:26:21&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;61831&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.61000&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;twoshifts&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;5/04/2012 15:27:06&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;61832&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;0.00000&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;pharyngeal&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;05/04/2012 15:34:07&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
 </entry>
 
 <entry>
   <title>Testing out a Jekyll-based notebook</title>
	 <link href="/2012/05/03/testing-out-a-jekyll-based-notebook.html"/>
   <updated>2012-05-03T10:50:13+00:00</updated>
   <id>/05/03/testing-out-a-jekyll-based-notebook</id>
   <content type="html">&lt;p&gt;I &lt;a href=&quot;http://carlboettiger.info/lab-notebook.html&quot;&gt;am trying out Jekyll&lt;/a&gt; as an alternative to Wordpress for powering this site and my open lab notebook. If you subscribe, the new RSS (atom) feed for the new notebook is at &lt;a href=&quot;http://carlboettiger.info/atom.xml&quot; class=&quot;uri&quot;&gt;http://carlboettiger.info/atom.xml&lt;/a&gt;. I’d love to hear any feedback, good or bad, about the switch.  A recent post gives &lt;a href=&quot;http://www.carlboettiger.info/OpenScience/2012/05/01/Jekyll-vs-Wordpress.html&quot;&gt;my own reflections&lt;/a&gt;.  The site’s &lt;a href=&quot;https://github.com/cboettig/jekyll-source/&quot;&gt;source-code is available on github&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;navigating-two-platforms&quot;&gt;Navigating two platforms&lt;/h2&gt;
&lt;p&gt;The Wordpress site now lives at &lt;a href=&quot;http://carlboettiger.info/wordpress&quot; class=&quot;uri&quot;&gt;http://carlboettiger.info/wordpress&lt;/a&gt;, while the new Jekyll site lives at the root domain: &lt;a href=&quot;http://carlboettiger.info&quot; class=&quot;uri&quot;&gt;http://carlboettiger.info&lt;/a&gt;. All former links to the wordpress site will still work (though they are also available with “wordpress” in the url).  Enjoy the faster, simpler site.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/05/03/notes.html"/>
   <updated>2012-05-03T00:00:00+00:00</updated>
   <id>/05/03/notes</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Returned proofs for warning signals paper.&lt;/li&gt;
&lt;li&gt;Wrightscape figures sent to Peter.&lt;/li&gt;
&lt;li&gt;move &lt;code&gt;fallacy&lt;/code&gt; to a branch off of main in &lt;code&gt;earlywaring&lt;/code&gt; package?&lt;/li&gt;
&lt;li&gt;Running knit on the large clusters means images cannot be uploaded as they are created, since compute nodes don’t have internet access. Saving files locally, I’ve created &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/master/uploadflickr&quot;&gt;a little script&lt;/a&gt; to parse the output &lt;code&gt;file.md&lt;/code&gt; to find the and upload the local images, and swap the local paths for the url paths.&lt;/li&gt;
&lt;li&gt;Also wrote quick R &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/master/bibgen&quot;&gt;script to build the corresponding bib files&lt;/a&gt; from a markdown file with pandoc style citations.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Minor tweaks on new site.&lt;/li&gt;
&lt;li&gt;Annoyed by &lt;a href=&quot;http://stackoverflow.com/questions/10438937/is-there-a-markdown-parser-supported-on-jekyll-that-plays-nicely-with-mathjax&quot;&gt;Mathjax/markdown issues&lt;/a&gt;. &lt;a href=&quot;https://github.com/tanoku/redcarpet/issues/130&quot;&gt;Redcarpet&lt;/a&gt;. Maruku does better, protecting anything in &lt;code&gt;$$&lt;/code&gt;, but lacks support for fenced code blocks. They are supposed to work on &lt;a href=&quot;https://github.com/nex3/maruku/issues/28#issuecomment-5499698&quot;&gt;this fork&lt;/a&gt;, but no luck. UPDATE – problem solved, I can just wrap any mathjax expressions in a &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;lt;/div&amp;gt;&lt;/code&gt; and they’ll work with any markdown interpreter.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;UC considers an &lt;a href=&quot;http://phylogenomics.blogspot.com/2012/05/draft-of-proposal-for-uc-openaccess.html&quot;&gt;open-access policy&lt;/a&gt;, now open for comments. (Email Brian Kolner, we may get a statement from the GSA giving a student perspective on this one).&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Stochastic policy costs</title>
	 <link href="/2012/05/02/stochastic-policy-costs.html"/>
   <updated>2012-05-02T00:00:00+00:00</updated>
   <id>/05/02/stochastic-policy-costs</id>
   <content type="html">&lt;p&gt;Updated runs for various norms, added profit plots.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ecc1b23594234cbc99def6114d5ccf6f48908e3a/inst/examples/policycosts/L1.md&quot;&gt;L1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ecc1b23594234cbc99def6114d5ccf6f48908e3a/inst/examples/policycosts/L2.md&quot;&gt;L2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;asymmetric: differs on the sign of the asymmetry? Penalty only for &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ecc1b23594234cbc99def6114d5ccf6f48908e3a/inst/examples/policycosts/free_increase.md&quot;&gt;decreasing quotas&lt;/a&gt;. Penalty only for &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ecc1b23594234cbc99def6114d5ccf6f48908e3a/inst/examples/policycosts/free_decrease.md&quot;&gt;increasing quotas&lt;/a&gt;. check implementation.&lt;/li&gt;
&lt;li&gt;fixed transaction fee – whoops, fixed cost should still be free when &lt;code&gt;h == h_prev&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We need to determine a the magnitude of penalty coefficient to compare between the different functional forms. For instance, for what value of &lt;code&gt;c&lt;/code&gt; is an &lt;code&gt;L2&lt;/code&gt; penalty, $ c ( h_t - h_p )^2 $ comparable to the &lt;code&gt;L1&lt;/code&gt; penalty, $ c (h_t - h_p ) $ ?&lt;/p&gt;
&lt;p&gt;I think we decided that we should select this parameter such that the penalty induces the same equilibrium expected profit from fishing (before costs of policy-changes are subtracted) in each functional form. Is this correct?&lt;/p&gt;
&lt;p&gt;Consequently we simply calculate this expected-profit-from-fishing under each penalty over a range of &lt;code&gt;c&lt;/code&gt; values, and plot a curve for each profit value as a function of &lt;code&gt;c&lt;/code&gt;. A horizontal line across this graph at, say, 50% of the adjustment-costs-free (i.e. Reed) profits would intersect each curve at the value of &lt;code&gt;c&lt;/code&gt; that corresponded to this common baseline. Was that the agreed upon apples-to-apples strategy?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Computing this from the numerics: average over replicates. Provides variance estimates too, but rather noisy. &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/simulate_npv_curves.md&quot;&gt;results&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Computing exactly from the SDP solution – record the equilbrium value-to-go would be before profits have been added. &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/exact_npv.md&quot;&gt;results&lt;/a&gt;. Also needs rerunning with corrected fixed-fee model.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Jekyll vs Wordpress</title>
	 <link href="/2012/05/01/Jekyll-vs-Wordpress.html"/>
   <updated>2012-05-01T00:00:00+00:00</updated>
   <id>/05/01/Jekyll-vs-Wordpress</id>
   <content type="html">&lt;p&gt;I am now trying out a &lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;Jekyll-based platform&lt;/a&gt; rather than a Wordpress based for my website and lab notebook. Don’t worry, the Wordpress site still remains where it was with links intact, I’ve simply remapped the homepage. For now this is an experiment, we’ll see how it goes.&lt;/p&gt;
&lt;h1 id=&quot;why-switch&quot;&gt;Why switch?&lt;/h1&gt;
&lt;h2 id=&quot;speed&quot;&gt;Speed&lt;/h2&gt;
&lt;p&gt;Wordpress was great, meeting most of my needs for a customizable site that I couldn’t really accomplish in my first online notebook on &lt;a href=&quot;http://openwetware.org&quot;&gt;OpenWetWare&lt;/a&gt;. Unfortunately, despite caching and a variety of other optimization steps, Wordpress remains very demanding of computational power, and consequently both expensive and unstable to traffic bursts. Relying on Wordpress.com would avoid this, but loses some of the customization and flexibility – particularly plugins for &lt;a href=&quot;http://mathjax.org&quot;&gt;MathJax&lt;/a&gt; and &lt;a href=&quot;http://wordpress.org/extend/plugins/kcite/&quot;&gt;kcite&lt;/a&gt;, as well as anything needing a script. The &lt;a href=&quot;http://en.support.wordpress.com/com-vs-org/&quot;&gt;Wordpress.com vs Wordpress.org&lt;/a&gt; page sums up the trade-offs between these options very well. Jekyll, on the other hand, is light as a feather. All the content is static, like in the early days of the web, rather than served on the fly through dynamic databases. This means that the site can load instantly even from a low-power server. A lot has been written about the advantages of static sites, which seem to be on the rise these days, so I won’t add much more here.&lt;/p&gt;
&lt;h2 id=&quot;markdown&quot;&gt;Markdown&lt;/h2&gt;
&lt;p&gt;Markdown syntax has become my Lingua Franca of day-to-day work, thanks to tools such as knitr and pandoc. It allows me to have files in a single format that are maximimally mobile, displaying well on Github, converting into LaTeX or MS Word manuscripts, and even running as R code. It doesn’t force me to work in a source format that is surrounded by markup code which makes things hard to read without rendering them, such as LaTeX or HTML, which frees me to focus on content. The common format means that I can take some R script I write and surround it with meaningful comments, math, etc, which can be easily shared on Github and later adapted into a manuscript without worrying about formats. (I’ve written about this &lt;a href=&quot;http://www.carlboettiger.info/archives/4325&quot;&gt;workflow here&lt;/a&gt; and adapting it to &lt;a href=&quot;http://www.carlboettiger.info/archives/4419&quot;&gt;manuscripts here&lt;/a&gt;). Now this works seemlessly on my website as well, instead of needing custom shortcode for Wordpress syntax highlighting, etc. For instance, here’s a &lt;a href=&quot;http://www.carlboettiger.info/ecology/2012/04/30/Sethi.html&quot;&gt;recent code script&lt;/a&gt; I just dropped into my &lt;code&gt;_posts&lt;/code&gt; directory and added the yaml header.&lt;/p&gt;
&lt;h2 id=&quot;reservations&quot;&gt;Reservations&lt;/h2&gt;
&lt;p&gt;My greatest reservation in this shift comes from the vibrant user and developer community on Wordpress (Wordpress powers an estimated 14% of the top 1 million websites) including a &lt;a href=&quot;https://groups.google.com/forum/#!forum/wordpress-for-scientists&quot;&gt;Wordpress-for-Scientists group&lt;/a&gt;. This means that almost anything you want has already been done. A downside is the need to know PHP and Wordpress-specific implementation to do anything the community hasn’t already provided. Thanks to Github and it’s appeal as a “hacker’s blog,” Jekyll has a powerful and growing community of it’s own. It’s not a content management system (CMS), and unlike Wordpress will doubtfully ever become one – but several tools are now coming online to make Jekyll more accessible, such as &lt;a href=&quot;http://octopress.org/&quot;&gt;octopress&lt;/a&gt;, &lt;a href=&quot;http://jekyllbootstrap.com/&quot;&gt;jekyllbootstrap&lt;/a&gt; and &lt;a href=&quot;http://ruhoh.com/&quot;&gt;ruhoh&lt;/a&gt;. These provide some good examples of how to do the more tricky dynamic things like generating an atom feed or a list of posts by tag. These also get away from having to generate custom CSS and HTML. However, with rich CSS options such as twitter-bootstrap available, I’ve found I actually prefer writing my own HTML templates for pages and posts.&lt;/p&gt;
&lt;p&gt;The other downside of a Jekyll based blog is that it may be a less effective platform to convince others to try out a lab notebook. The emphasis on Github and the somewhat convoluted dependencies on Ruby surely make Jekyll a bit intimidating to new users.&lt;/p&gt;
&lt;h1 id=&quot;some-remaining-concerns-in-switching&quot;&gt;Some remaining concerns in switching&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Wordpress can generate rss feeds for any category or tag on the fly&lt;/em&gt;. Looks like this is now &lt;a href=&quot;https://github.com/pattex/jekyll-tagging&quot;&gt;possible in Jekyll&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Wordpress can toggle password and privacy control for each post&lt;/em&gt;. On a independently hosted site, this could be done with an &lt;code&gt;.htaccess&lt;/code&gt; file and independent hosting (pointless if the source is hosted on github). I known several partially open lab notebooks would have a problem with this. I use privacy controls occasionally when a collaborator may have reservations, and always for requested editorial reviews. Such things can remain on my Wordpress site or off-line entirely.&lt;/li&gt;
&lt;li&gt;Due in part to heavy use of plugins with short-code, migrating my existing posts out of Wordpress and into a static site seems pretty much impossible. Presumably this should be doable at the front end HTML, if not from the database, but my attempts have been unsuccessful. For now, old content will continue to live on my Wordpress site.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;my-basic-requirements-for-an-electronic-notebook&quot;&gt;My basic requirements for an electronic notebook&lt;/h1&gt;
&lt;p&gt;Leaving Wordpress, I have a few basic requirments for a notebook system. Fortunately it is pretty easy to enjoy all these features in Jekyll.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Dynamic posts&lt;/strong&gt;: Works out of the box&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RSS feed&lt;/strong&gt;: just create an appropriate &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/atom.xml&quot;&gt;atom.xml file&lt;/a&gt; with a bit of Jekyll Liquid code.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Comments&lt;/strong&gt;: paste Disqus code into &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/_layouts/default.html&quot;&gt;html template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Categories &amp;amp; tags&lt;/strong&gt;: built-in through Jekyll’s YAML frontmatter&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Search&lt;/strong&gt;: Google search or Tipue&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MathJax equations (and numbering)&lt;/strong&gt;: &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/_layouts/default.html&quot;&gt;Just add the javascript call to the html template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dynamic citations&lt;/strong&gt;: Pandoc or my knitcitations tool, for now.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Syntax highlighting&lt;/strong&gt;: use Github notation with Redcarpet2&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Writing posts in markdown&lt;/strong&gt;: native&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version control&lt;/strong&gt;: &lt;a href=&quot;https://github.com/cboettig/labnotebook/&quot;&gt;on Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Visitor statistics&lt;/strong&gt;: &lt;a href=&quot;https://github.com/cboettig/labnotebook/blob/master/_layouts/default.html&quot;&gt;Google analytics in layout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;embeddable content (twitter streams, feeds, etc.)&lt;/strong&gt; : add scripts to html templates&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;customization of appearance&lt;/strong&gt; &lt;a href=&quot;http://twitter.github.com/bootstrap&quot;&gt;twitter bootstrap&lt;/a&gt; for the css and javascript + html templates&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ease of use&lt;/strong&gt;: Such as the ability to move around markdown documents and html layouts, and to customize things appearance without PHP.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;jekyll-configuration-notes&quot;&gt;Jekyll Configuration Notes&lt;/h1&gt;
&lt;p&gt;Probably the only annoying step in setting up a Jekyll blog is getting the right versions of Ruby running. Strictly speaking, this is unnecessary for sites hosted on Github, which will run Jekyll automatically. I host on my Dreamhost VPS, for which it is easiest just to compile locally using Jekyll and push on the output HTML files, created in &lt;code&gt;_site&lt;/code&gt;, to the server.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Getting &lt;a href=&quot;http://askubuntu.com/questions/91693/how-do-you-uninstall-ruby-1-8-7-and-install-ruby-1-9-2&quot;&gt;out of 1.8.7 and into 1.9.2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Redcarpet isn’t the default interpreter, but works better. However, &lt;a href=&quot;http://stackoverflow.com/questions/8395347/gollum-wiki-undefined-method-new-for-redcarpetmodule&quot;&gt;it’s latest version has issues&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;I find it better to use the Redcarpet2, &lt;a href=&quot;https://github.com/nono/Jekyll-plugins&quot;&gt;and a plugin&lt;/a&gt; that lets one use Github-flavored markdown code blocks instead of the silly liquid highlight tags (markdown should be markdown after all). Unfortunately this prevents Github’s Jekyll from building the site at the moment, which doesn’t yet support Redcarpet2.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/255170/markdown-and-image-alignment&quot;&gt;image alignment in markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://code.lancepollard.com/jquery-disqus-plugin&quot;&gt;markdown in diqus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;HTML layouts can import chunks from separate files given in &lt;code&gt;_include&lt;/code&gt; directory using a bit of liquid code. See &lt;a href=&quot;https://github.com/spo11/kismetik-jekyll&quot;&gt;an example&lt;/a&gt;. Perfect for creating layouts out of different combinations of elements.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Additional sources of noise (Sethi 2005)</title>
	 <link href="/2012/04/30/Sethi.html"/>
   <updated>2012-04-30T00:00:00+00:00</updated>
   <id>/04/30/Sethi</id>
   <content type="html">&lt;h1 id=&quot;sethi-model&quot;&gt;Sethi Model&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;author Carl Boettiger, &lt;script type=&quot;text/javascript&quot;&gt;
&lt;!--
h=&#39;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#108;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#x6d;&#39;;a=&#39;&amp;#64;&#39;;n=&#39;&amp;#x63;&amp;#98;&amp;#x6f;&amp;#x65;&amp;#116;&amp;#116;&amp;#x69;&amp;#x67;&#39;;e=n+a+h;
document.write(&#39;&lt;a h&#39;+&#39;ref&#39;+&#39;=&quot;ma&#39;+&#39;ilto&#39;+&#39;:&#39;+e+&#39;&quot; clas&#39;+&#39;s=&quot;em&#39; + &#39;ail&quot;&gt;&#39;+e+&#39;&lt;\/&#39;+&#39;a&#39;+&#39;&gt;&#39;);
// --&gt;
&lt;/script&gt;&lt;noscript&gt;&amp;#x63;&amp;#98;&amp;#x6f;&amp;#x65;&amp;#116;&amp;#116;&amp;#x69;&amp;#x67;&amp;#32;&amp;#x61;&amp;#116;&amp;#32;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#108;&amp;#32;&amp;#100;&amp;#x6f;&amp;#116;&amp;#32;&amp;#x63;&amp;#x6f;&amp;#x6d;&lt;/noscript&gt;&lt;/li&gt;
&lt;li&gt;license: CC0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Implements a numerical version of the SDP described in (Sethi &lt;em&gt;et. al.&lt;/em&gt; 2005).&lt;/p&gt;
&lt;p&gt;Clear the workspace and load package dependencies:&lt;/p&gt;
&lt;p&gt;Define noise parameters&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in stock assessment measurement&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# noise in implementation of the quota&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;we’ll use log normal noise functions. For Reed, only &lt;code&gt;z_g&lt;/code&gt; will be random. Sethi et al will add the other forms of noise:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_m) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_i) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Chose the state equation / population dynamics function&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;BevHolt&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the &lt;code&gt;pdg-control&lt;/code&gt; pacakge already has a definition for the &lt;code&gt;BevHolt&lt;/code&gt; function, (typing the function name prints the function)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;BevHolt&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;function (x, h, p) 
{
    x &amp;lt;- max(0, x - h)
    A &amp;lt;- p[1]
    B &amp;lt;- p[2]
    sapply(x, function(x) {
        x &amp;lt;- max(0, x)
        max(0, A * x/(1 + B * x))
    })
}
&amp;lt;environment: namespace:pdgControl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;That is, \( f(x,h) =  \)&lt;/p&gt;
&lt;p&gt;Of course we could pass in any custom function of stocksize &lt;code&gt;x&lt;/code&gt;, harvest &lt;code&gt;h&lt;/code&gt; and parameter vector &lt;code&gt;p&lt;/code&gt; in place of &lt;code&gt;BevHolt&lt;/code&gt;. Note that we would need to write this function explicitly so that it can take vector values of &lt;code&gt;x&lt;/code&gt; (i.e. uses &lt;code&gt;sapply&lt;/code&gt;), an annoying feature of &lt;code&gt;R&lt;/code&gt; for users comming from Matlab.&lt;/p&gt;
&lt;p&gt;We must now define parameters for the function. Note that the positive stationary root of the model is given by \(  \), which we’ll store for future reference as &lt;code&gt;K&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;)
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(pars[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)/pars[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and we use a harvest-based profit function with default parameters&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;c0 =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.01&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;profit_harvest&lt;/code&gt; function has the form&lt;/p&gt;
&lt;p&gt;\[ = h - ( c_0 + c_1  )  \]&lt;/p&gt;
&lt;p&gt;conditioned on \( h &amp;gt; x \) and \(x &amp;gt; 0 \). Note that the R code defines a function from another function using a trick known as a &lt;em&gt;closure&lt;/em&gt;. Again we could write a custom profit function as long as it can take a vector stock size &lt;code&gt;x&lt;/code&gt; and a scalar harvest level &lt;code&gt;h&lt;/code&gt;. Details for provided functions can be found in the manual, i.e. &lt;code&gt;?profit_harvest&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now we must set up the discrete grids for stock size and havest levels (which will use same resolution as for stock), in order to calculate the SDP solution. Here we set the gridsize to 100.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)  
h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid  &lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;calculate-the-transition-matrix-with-noise-in-growth-only&quot;&gt;Calculate the transition matrix (with noise in growth only)&lt;/h3&gt;
&lt;p&gt;We calculate the stochastic transition matrix for the probability of going from any state \( x_t \) to any other state \( x_t+1 \) the following year, for each possible choice of harvest \( h_t \). This provides a look-up table for the dynamic programming calculations.&lt;/p&gt;
&lt;p&gt;In the Sethi case, computing the distribution over multiple sources of noise is actually quite difficult. Simulation turns out to be more efficient than numerically integrating over each distribution. This code parallelizes the operation over four cores, but can be scaled to an arbitrary cluster.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(snowfall) 
&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;parallel=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cpu=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;SDP_by_simulation&lt;/span&gt;(f, pars, x_grid, h_grid, z_g, z_m, z_i, &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;999&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Library ggplot2 loaded.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that &lt;code&gt;SDP_Mat&lt;/code&gt; is specified from the calculation above, as are our grids and our profit function. &lt;code&gt;OptTime&lt;/code&gt; is the stopping time. &lt;code&gt;xT&lt;/code&gt; specifies a boundary condition at the stopping time. A reward for meeting this boundary must be specified for it to make any difference. &lt;code&gt;delta&lt;/code&gt; indicates the economic discount rate. Again, details are in the function documentation.&lt;/p&gt;
&lt;h3 id=&quot;find-the-optimum-by-dynamic-programming&quot;&gt;Find the optimum by dynamic programming&lt;/h3&gt;
&lt;p&gt;Bellman’s algorithm to compute the optimal solution for all possible trajectories.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;OptTime=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;25&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xT=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
                     profit, &lt;span class=&quot;dt&quot;&gt;delta=&lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.05&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;simulate&quot;&gt;Simulate&lt;/h3&gt;
&lt;p&gt;Now we’ll simulate 100 replicates of this stochastic process under the optimal harvest policy determined above.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, function(i){
  &lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, pars, x_grid, h_grid, &lt;span class=&quot;dt&quot;&gt;x0=&lt;/span&gt;K, opt$D, z_g, z_m, z_i)
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The forward simulation algorithm needs an initial condition &lt;code&gt;x0&lt;/code&gt; which we set equal to the carrying capacity, as well as our population dynamics &lt;code&gt;f&lt;/code&gt;, parameters &lt;code&gt;pars&lt;/code&gt;, grids, and noise coefficients. Recall in the Reed case only &lt;code&gt;z_g&lt;/code&gt;, growth, is stochastic, while in the Sethi example we now have three forms of stochasticity – growth, measurement, and implementation.&lt;/p&gt;
&lt;h2 id=&quot;summarize-and-plot-the-results&quot;&gt;Summarize and plot the results&lt;/h2&gt;
&lt;p&gt;R makes it easy to work with this big replicate data set. We make data tidy (melt), fast (data.tables), and nicely labeled.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(sims, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sims[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]))  
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# names are nice&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;plots&quot;&gt;Plots&lt;/h3&gt;
&lt;p&gt;Let’s begin by looking at the dynamics of a single replicate. The line shows Reed’s S, the level above which the stock should be harvested (where catch should be the difference between stock and S). To confirm that this policy is being followed, note that harvesting only occurs when the stock is above this line, and harvest is proportional to the amount by which it is above. Change the replicate &lt;code&gt;reps==&lt;/code&gt; to see the results from a different replicate.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dt,reps==&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;opt$S, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, harvest), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8007/7130135757_09c23e3e5a_o.png&quot; alt=&quot;plot of chunk onerep&quot; /&gt;&lt;figcaption&gt;plot of chunk onerep&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This plot summarizes the stock dynamics by visualizing the replicates. Reed’s S shown again.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;opt$S, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) 
p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8148/6984061776_d15e7d073f_o.png&quot; alt=&quot;plot of chunk all&quot; /&gt;&lt;figcaption&gt;plot of chunk all&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We can also look at the harvest dynamics:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, harvest, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7188/6984052718_6e932cedf8_o.png&quot; alt=&quot;plot of chunk harvestplot&quot; /&gt;&lt;figcaption&gt;plot of chunk harvestplot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This strategy is supposed to be a constant-escapement strategy. We can visualize the escapement:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, escapement, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgrey&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7096/6984052922_b4ab50f14b_o.png&quot; alt=&quot;plot of chunk escapement&quot; /&gt;&lt;figcaption&gt;plot of chunk escapement&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;visualizing-the-optimal-policy&quot;&gt;Visualizing the optimal policy&lt;/h3&gt;
&lt;p&gt;Note that when the boundary is sufficiently far away, i.e. for the first couple timesteps, the optimal policy is stationary. The optimal policy is shown here over time, where the color indicates the harvest recommended for each possible stock value at that time (shown on the vertical axis). Observe that the solution does not correspond to a simple Reed-style rule.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;policy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(opt$D)
policy_zoom &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(policy, x_grid[Var1] &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(dt$fishstock) )
p5 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policy_zoom) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Var2, (x_grid[Var1]), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;h_grid[value])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fishstock&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_gradientn&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;colours =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;rainbow&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;opt$S, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) 
p5&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7198/7130146133_bf7083f9d2_o.png&quot; alt=&quot;plot of chunk policy&quot; /&gt;&lt;figcaption&gt;plot of chunk policy&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The harvest intensity is limited by the stock size.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;p6 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(policy_zoom) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Var2, (x_grid[Var1]), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;x_grid[Var1] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;h_grid[value])) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;labs&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;y =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;fishstock&amp;quot;&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;scale_colour_gradientn&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;colours =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;rainbow&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;opt$S, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) 
p6 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;dt)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm9.staticflickr.com/8007/6984063036_ea9d9ac47d_o.png&quot; alt=&quot;plot of chunk policy2&quot; /&gt;&lt;figcaption&gt;plot of chunk policy2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;p&gt;Sethi G, Costello C, Fisher A, Hanemann M and Karp L (2005). “Fishery management under multiple uncertainty.” &lt;em&gt;Journal of Environmental Economics and Management&lt;/em&gt;, &lt;em&gt;50&lt;/em&gt;. ISSN 00950696, http://dx.doi.org/10.1016/j.jeem.2004.11.005&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Project tracking (Evolution)</title>
	 <link href="/2012/04/27/evolution-notes.html"/>
   <updated>2012-04-27T00:00:00+00:00</updated>
   <id>/04/27/evolution-notes</id>
   <content type="html">&lt;h1 id=&quot;evolution&quot;&gt;Evolution&lt;/h1&gt;
&lt;p&gt;I’m also still wrapping up a variety of projects on the Evolution front.&lt;/p&gt;
&lt;h2 id=&quot;treebase&quot;&gt;&lt;a href=&quot;https://github.com/ropensci/treebase&quot;&gt;treebase&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ropensci/treeBASE/tree/master/inst/doc/treebase&quot;&gt;Dynamic manuscript&lt;/a&gt;. Reorganize, simplify?&lt;/li&gt;
&lt;li&gt;add, document, employ the additional functions to avoid &lt;code&gt;sapply&lt;/code&gt; commands.&lt;/li&gt;
&lt;li&gt;Prune examples?&lt;/li&gt;
&lt;li&gt;iEvoBio challenge entry?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;wrightscape&quot;&gt;&lt;a href=&quot;https://github.com/cboettig/wrightscape&quot;&gt;Wrightscape&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Start synthesizing documents&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/examples/manuscript.md&quot;&gt;Evidence for release in open lever ratio and kt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/examples/simulate_release.md&quot;&gt;Illustrating the different models&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Consider updated data format outputs and graphical processing functions for the model choice steps&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;fishbase&quot;&gt;&lt;a href=&quot;https://github.com/ropensci/rfishbase&quot;&gt;fishbase&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;submitted! &lt;a href=&quot;https://github.com/ropensci/rfishbase/tree/master/inst/doc/rfishbase&quot;&gt;Dynamic document&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;handling of reference ids example for Patrick&lt;/li&gt;
&lt;li&gt;Working word templatese for Pandoc odt/docx?&lt;/li&gt;
&lt;li&gt;Push updated copy to CRAN&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;adaptive-dynamics&quot;&gt;&lt;a href=&quot;https://github.com/cboettig/AdaptiveDynamics&quot;&gt;Adaptive dynamics&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;What to do with time-to-branching results from Vienna with Ulf?&lt;/li&gt;
&lt;li&gt;What to do with nice fast branching process simulation code?&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Project tracking (Ecology)</title>
	 <link href="/2012/04/27/ecology-notes.html"/>
   <updated>2012-04-27T00:00:00+00:00</updated>
   <id>/04/27/ecology-notes</id>
   <content type="html">&lt;h2 id=&quot;pdg-control&quot;&gt;&lt;a href=&quot;https://github.com/cboettig/pdg-control&quot;&gt;pdg-control&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Has become a variety of different directions:&lt;/p&gt;
&lt;h3 id=&quot;policy-costs&quot;&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/examples/policycosts&quot;&gt;Policy Costs&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Considering different norms. &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/policycost_L1.md&quot;&gt;L1&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/policycost_L2.md&quot;&gt;L2&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/policycost_asym.md&quot;&gt;Assymetric&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/policycost_fixed.md&quot;&gt;fixed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;When can policy costs pay for themselves? &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/exact_npv.md&quot;&gt;notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;additional-noise&quot;&gt;Additional Noise&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Starts with &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/Sethi.md&quot;&gt;replicating Sethi et al. (2005)&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Consider the performance of various non-optimal solutions, particularly regarding imperfect implementation&lt;/li&gt;
&lt;li&gt;These are losely collected in &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/examples/robustness&quot;&gt;Robustness examples&lt;/a&gt;, needs some evaluation of the most interesting.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;approaches-to-parameter-structural-and-state-uncertainty&quot;&gt;Approaches to parameter, structural, and state uncertainty&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;(Morph of) Training problem II from the working group.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/model_uncertainty.md&quot;&gt;Active adaptive management using grid, model choice example.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Add: Myopic Bayes passive adaptive management for model choice&lt;/li&gt;
&lt;li&gt;Compare to: stationary (no learning) solution averaging over models&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;warning-signals&quot;&gt;&lt;a href=&quot;https://github.com/cboettig/earlywarning&quot;&gt;Warning signals&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Accepted!&lt;/li&gt;
&lt;li&gt;Copy up on &lt;a href=&quot;http://arxiv.org/abs/1204.6231&quot;&gt;arxiv&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Streamline code and examples. Began updating functions to work in a more generic manner that is better for connecting in pipelines and swapping between indicators. Move examples over from wiki to &lt;code&gt;inst/examples&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;What to do with older repo &lt;code&gt;warningsignals&lt;/code&gt; vs newer codebase &lt;code&gt;earlywarning&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;Provide a generic early warning signals package? Perhaps Vasilis would be interested in helping?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;fallacy&quot;&gt;Fallacy&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Write introduction with more basic background on warning signals&lt;/li&gt;
&lt;li&gt;Touch up discussion, edits.&lt;/li&gt;
&lt;li&gt;Updated runs from codebase. Heavy computation makes quick replication difficult&lt;/li&gt;
&lt;li&gt;draft sent to Alan&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>2012-04-20</title>
	 <link href="/2012/04/26/2012-04-20.html"/>
   <updated>2012-04-26T13:32:18+00:00</updated>
   <id>/04/26/2012-04-20</id>
   <content type="html">&lt;h2 id=&quot;warning-signals&quot;&gt;Warning Signals&lt;/h2&gt;
&lt;p&gt;Warning signals paper accepted. Making minor edits before submitting final copy.&lt;/p&gt;
&lt;p&gt;Added Alan’s edits.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Review model section again&lt;/li&gt;
&lt;li&gt;Letter: Response to reviewers&lt;/li&gt;
&lt;li&gt;Create Diff&lt;/li&gt;
&lt;li&gt;Media Summary&lt;/li&gt;
&lt;li&gt;Submit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Done!&lt;/p&gt;
&lt;h2 id=&quot;database-papers&quot;&gt;Database papers&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;rfishbase edits made, reformatting in word, sent to Peter&lt;/li&gt;
&lt;li&gt;Ethics form, recommended reviewers, cover letter.&lt;/li&gt;
&lt;li&gt;Submit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Done!&lt;/p&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;p&gt;NERSC web directory: create &lt;code&gt;www&lt;/code&gt; in &lt;code&gt;/project/projectdirs/m1366&lt;/code&gt; NSF &lt;a href=&quot;http://www.nsf.gov/pubs/2012/nsf12553/nsf12553.htm&quot;&gt;Arctic SEES grants&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;These larger, integrated efforts would promote understanding of Arctic systems and would develop optimized models, multiple stable state scenarios, sustainable pathways, decision matrices, visualization techniques and data infrastructure to aid decision making and communication, and structural, energy and communications technology solutions which would inform community practices, management, and policy for a more sustainable Arctic environment.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Methods in Ecology &amp;amp; Evolution is publishing quite a few R packages recently.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00179.x/full&quot;&gt;abc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00180.x/full&quot;&gt;RNetLogo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00153.x/full&quot;&gt;smatr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2012.00186.x/full&quot;&gt;BaSTA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2012.00190.x/full&quot;&gt;mvbund&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00169.x/full&quot;&gt;phytools&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Notes</title>
	 <link href="/2012/04/25/notes.html"/>
   <updated>2012-04-25T00:00:00+00:00</updated>
   <id>/04/25/notes</id>
   <content type="html">&lt;p&gt;Working on IGPS Presentation.&lt;/p&gt;
&lt;p&gt;Experimenting with recent tools for Amazon cloud computing via R. &lt;a href=&quot;https://github.com/armstrtw/AWS.tools&quot;&gt;Whit Armstrong’s packages&lt;/a&gt; seem like a good place to start, but some trouble with credentials on both this and on Segue at the moment.&lt;/p&gt;
&lt;p&gt;Submitted nominations for EVE Seminar. Splitting nominations among the theory group, this year I’ve filed nominations for&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://resource.wur.nl/en/wetenschap/detail/ecologist_marten_scheffer_the_spirit_must_be_free&quot;&gt;Marten Scheffer (profile)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.science.org.au/scientists/interviews/p/hp.html&quot;&gt;Hugh Possingham (profile)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dragonfly.ecology.uga.edu/drakelab&quot;&gt;John Drake&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Catching up</title>
	 <link href="/2012/04/19/catching-up.html"/>
   <updated>2012-04-19T10:39:06+00:00</updated>
   <id>/04/19/catching-up</id>
   <content type="html">&lt;p&gt;Catching up on notebook entries for last week and the beginning of this week in one go here. In the process of wrapping up a variety of older projects, so this is kinda all over the place.&lt;/p&gt;
&lt;h2 id=&quot;rfishbase&quot;&gt;rfishbase&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Create function table,&lt;/li&gt;
&lt;li&gt;finalize functions&lt;/li&gt;
&lt;li&gt;Add support for references. Done, see &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/R/analysis.R#L280&quot;&gt;getRefs&lt;/a&gt;. (And isn’t it awesome that you can link to a specific linenumber (i.e. line 280) in github by adding #L280 to the end of the url?)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Picked up some great grep tools in the process thanks to stackoverflow: handling &lt;a href=&quot;http://stackoverflow.com/questions/10214604/gsub-return-an-empty-string-when-no-match-is-found&quot;&gt;empty matches&lt;/a&gt; and &lt;a href=&quot;http://stackoverflow.com/questions/10215142/gsub-to-return-all-matches-of-an-expression-instead-of-just-the-last-match&quot;&gt;multiple matches&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;No luck in setting &lt;a href=&quot;http://johnmacfarlane.net/pandoc/demo/example9/options.html&quot;&gt;templates for pandoc’s conversion to word&lt;/a&gt;. Should be possible with &lt;code&gt;--reference.docx&lt;/code&gt; but no luck. (meanwhile, who knew .docx and .odt were just zip archives you could unzip and poke around the xml? Unfortunately styles.xml is a bit opaque to me).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;treebase&quot;&gt;treebase&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Replace all sapply calls with dedicated functions&lt;/li&gt;
&lt;li&gt;Table of functions&lt;/li&gt;
&lt;li&gt;Simplify presentation&lt;/li&gt;
&lt;li&gt;markdownify the Sweave file.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;prosecutors-fallacy&quot;&gt;Prosecutor’s fallacy&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Running examples&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;wrightscape&quot;&gt;Wrightscape&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Collecting, organizing and selecting &lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/examples&quot;&gt;examples&lt;/a&gt; into knitr format from demo files.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;statcompsci&quot;&gt;StatCompSci&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Duncan is running a brown bag seminar on big data computing. We’re coordinating all material over &lt;a href=&quot;https://github.com/StatComputingUCDavis/Spring12BBSeminar&quot;&gt;on github&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;other&quot;&gt;Other&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Write ievobio proposals&lt;/li&gt;
&lt;li&gt;prsb review – Done.&lt;/li&gt;
&lt;li&gt;Experimenting with a &lt;a href=&quot;cboettig.github.com&quot;&gt;Jekyll based site&lt;/a&gt; using CSS from twitter-bootstrap.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Coordinating Academic Publishing panel discussion&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc-code-tricks&quot;&gt;Misc code tricks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/67699/how-do-i-clone-all-remote-branches-with-git&quot;&gt;clone all branches&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/255170/markdown-and-image-alignment&quot;&gt;image alignment in markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://code.lancepollard.com/jquery-disqus-plugin&quot;&gt;markdown in diqus&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ruby-versions-can-drive-you-nuts-sometimes.&quot;&gt;&lt;em&gt;ruby versions can drive you nuts sometimes.&lt;/em&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Getting &lt;a href=&quot;http://askubuntu.com/questions/91693/how-do-you-uninstall-ruby-1-8-7-and-install-ruby-1-9-2&quot;&gt;out of 1.8.7 and into 1.9.2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Redcarpet isn’t the default interpreter, but works better. However, &lt;a href=&quot;http://stackoverflow.com/questions/8395347/gollum-wiki-undefined-method-new-for-redcarpetmodule&quot;&gt;it’s latest version has issues&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday / Tuesday</title>
	 <link href="/2012/04/10/monday-tuesday.html"/>
   <updated>2012-04-10T23:09:06+00:00</updated>
   <id>/04/10/monday-tuesday</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;rfishbase updated to Duncan’s feedback&lt;/li&gt;
&lt;li&gt;writing intro section on Prosecutor’s Fallacy.&lt;/li&gt;
&lt;li&gt;wrightscape update project repository. Scripts mostly in demos, results in notebook. Notebook makes is easy to get the most recent writeup on the topic, from where I can start to track back the history, but doesn’t provide a good at-a-glance view of the analyses I’ve run side-by-side. Moving the R script &lt;code&gt;demos/&lt;/code&gt; into markdown knitted files in &lt;code&gt;inst/examples/&lt;/code&gt; and rerunning. &lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/examples&quot;&gt;See directory&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Files that require cluster computation won’t be able to upload graphs directly. Should separate these scripts from their respective plotting scripts.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;working-examples&quot;&gt;Working examples&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Have labrid_data, labrid_mc, focal_examples, simulated_release working. &lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/master/inst/examples&quot;&gt;See directory&lt;/a&gt;. Running the direct model comparisons on the other traits.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;data-management&quot;&gt;Data management&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Trying out the API for &lt;a href=&quot;http://thedatahub.org&quot;&gt;thedatahub.org&lt;/a&gt; for storing data. Starting with the python tool, some difficulty getting this running. &lt;a href=&quot;https://github.com/okfn/dpm/issues/55&quot;&gt;Detailed issue log&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Also put in form to get www hosting through NERSC.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Meanwhile, am just tossing data into the &lt;a href=&quot;http://two.ucdavis.edu/~cboettig/data/&quot;&gt;webserver&lt;/a&gt; running on our local lab computers. This just provides a home for the data so I don’t have binary files on github – the metadata for these objects is handled by the &lt;a href=&quot;https://github.com/cboettig/wrightscape/tree/master/inst/examples&quot;&gt;README that lives with the code&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;For large data files (which I’m not generating in these codes) the clear way forward is storage you can send the computation to, rather than downloading. For above solutions work for users of our cluster, or of NERSC, but for a more general audience AmazonS3 is the obvious choice (though involves monthly fees). Looks like there is already a good way to put this into my workflow using &lt;code&gt;RAmazonS3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;First install libraries for Ubuntu:&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;sudo&lt;/span&gt; apt-get install libmime-base64-urlsafe-perl libdigest-hmac-perl libdigest-sha1-perl&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then install&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;install.packages&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;RAmazonS3&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;repo=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.omegahat.org/R&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And then we’re ready to roll. &lt;a href=&quot;http://www.omegahat.org/RAmazonS3/s3amazon.html&quot;&gt;See Duncan’s tutorial&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Will consider a tutorial for this + maybe Segue for &lt;a href=&quot;http://statcomputingucdavis.github.com/Spring12BBSeminar/&quot;&gt;Duncan’s seminar&lt;/a&gt;. (Note that Duncan’s moved lots of omegahat.org onto github, which we’ll be using for all the class content.)&lt;/p&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.phidot.org/AMCS/participants/index.html&quot;&gt;Adaptive Management Conference Series&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://wir.okfn.org/2012/03/29/plos-computational-biology-goes-wiki/&quot;&gt;PLoS direct submission to wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://plus.google.com/117538137308310530361/posts/LviS2eofpon&quot;&gt;Tom Preston-Werner talk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://opencpu.org/2012/01/running-a-block-of-r-code-in-opencpu/&quot;&gt;Open CPU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Humans aren’t good random number generators. &lt;a href=&quot;http://www.khanacademy.org/labs/explorations/frequency-stability&quot;&gt;uniform frequency example&lt;/a&gt; and &lt;a href=&quot;http://seed.ucsd.edu/~mindreader/&quot;&gt;game in which a machine-learning algorithm exploits your non-randomness&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;p&gt;modify knitr hook for formatting inline code, e.g.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
knit_hooks$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;inline =&lt;/span&gt; function(x) {
 &lt;span class=&quot;kw&quot;&gt;prettyNum&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;round&lt;/span&gt;(x,&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;big.mark=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;)
})&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr/issues/192&quot;&gt;Avoid knitr displaying X11 during interactive runs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr/issues/191&quot;&gt;Refresh cache&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Writing reproducibly in the open with knitr</title>
	 <link href="/2012/04/07/writing-reproducibly-in-the-open-with-knitr.html"/>
   <updated>2012-04-07T14:58:36+00:00</updated>
   <id>/04/07/writing-reproducibly-in-the-open-with-knitr</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Sweave&quot;&gt;Sweave&lt;/a&gt; is something of a gold standard in reproducible research. It creates a &lt;em&gt;dynamic document&lt;/em&gt;, written in a mix of LaTeX and R code where the results of the analysis (numbers, figures, tables) are automatically generated from the code and inserted into the resulting pdf document, making them easy to update if the data or methods change. It’s a nice idea, in principle.&lt;/p&gt;
&lt;p&gt;However, the practical troubles are many. Coauthors don’t know LaTeX, publishers who don’t accept LaTeX or pdfs. The LaTeX myth that you are freed from thinking about formatting, when in fact you have to fill your document with LaTeX specific markup that makes it a burden both to type and to read the source-code. Compiling and debugging your text. And then the reproducibility comes from sharing that Sweave file – a mix of LaTeX and R that almost no one can read easily. Where’s the elegance in that? ((I’m glossing over the additional challenges of highlighting, caching, and formating on the R code side, which have been largely addressed by additional packages and are elegantly solved in knitr.)) Sure, none of these are show-stoppers – I’ve been content with LaTeX for years – but suddenly there’s a better way.&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;http://yihui.name/knitr/&quot;&gt;knitr&lt;/a&gt;, a successor of Sweave, I can write my publications in &lt;a href=&quot;http://en.wikipedia.org/wiki/Markdown&quot;&gt;markdown&lt;/a&gt;. Unlike LaTeX, HTML, or other markup languages, markdown is designed to be easily read as plain text, but can also be interpreted into pretty HTML, and now into almost any other format thanks to &lt;a href=&quot;http://johnmacfarlane.net/pandoc/&quot;&gt;pandoc&lt;/a&gt;. All of which is to say that writing and sharing just got &lt;em&gt;a lot easier.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.carlboettiger.info/archives/4325&quot;&gt;As I have written previously&lt;/a&gt;, I already use this markdown format for my notes and code, so there’s no re-typing required. When working on the paper, I can just write. I can edit the code without flipping back and forth between files. Knitr can run the code blocks, caching parts that have already run for efficiency, and upload the resulting figures in &lt;code&gt;png&lt;/code&gt; format automatically to the Internet. Github displays the &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/rfishbase_github.md&quot;&gt;resulting document&lt;/a&gt; and the&lt;/p&gt;
&lt;pre class=&quot;file&quot;&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/source/rfishbase.md), while also &lt;a href=&quot;https://github.com/ropensci/rfishbase/commits/master/inst/doc/rfishbase/source&quot;&gt;tracking the versions&lt;/a&gt; as my writing progresses.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7241/7054829647_ac9dcc4bd3_z.jpg&quot; alt=&quot;Different output formats for the manuscript&quot; /&gt;&lt;figcaption&gt;Different output formats for the manuscript&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Pandoc allows me to transform these notes into a LaTeX file that can generate professional-looking pdfs with given journal &lt;code&gt;.cls&lt;/code&gt; files by using &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/elsarticle.latex&quot;&gt;a custom latex template&lt;/a&gt;. Pandoc can also generate the less pretty but often required word documents. &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/knit&quot;&gt;A separate Rscript&lt;/a&gt; combines with a &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/Makefile&quot;&gt;Makefile&lt;/a&gt; to control the relevant formatting – for LaTeX output I want high-quality &lt;code&gt;pdf&lt;/code&gt; graphics, for Word-doc output I want &lt;code&gt;eps&lt;/code&gt; graphics which are created but not pasted into the Word file, for the drafts I want &lt;code&gt;png&lt;/code&gt; graphics stored online for easy sharing. Pandoc allows citations to be extracted from my Mendeley library (via Bibtex files) and inserted into each of these output formats (doc, pdf, github markdown).&lt;/p&gt;
&lt;p&gt;Getting the LaTeX template, Makefile, and knit script set up for this pipeline takes a little care – mostly to ensure figures and tables look appropriate in all outputs. Once these files are created though, they can be easily reused on other manuscripts. A simple &lt;code&gt;make pdf&lt;/code&gt; builds the pdf copy, &lt;code&gt;make docx&lt;/code&gt; builds a MS Word copy, ((though these binary files aren’t stored in the git repository)) and &lt;code&gt;make github&lt;/code&gt; the copy that displays with images on Github.&lt;/p&gt;
&lt;p&gt;The links in this post point to what is an active draft of a little manuscript at the time of this writing. In addition to making the final result reproducible, Github captures the &lt;a href=&quot;http://en.wikipedia.org/wiki/Provenance#Data_provenance&quot;&gt;provenance&lt;/a&gt; or history of the research and writing process. It’s not a perfect system, but it’s a nice step.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Friday</title>
	 <link href="/2012/04/06/friday-8.html"/>
   <updated>2012-04-06T21:01:16+00:00</updated>
   <id>/04/06/friday-8</id>
   <content type="html">&lt;h3 id=&quot;fishbase&quot;&gt;Fishbase&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Revisions based on Duncan’s feedback&lt;/li&gt;
&lt;li&gt;Formatting to &lt;a href=&quot;http://www.wiley.com/bw/submit.asp?ref=0022-1112&quot;&gt;Journal of Fish Biology guidelines&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Updated formatting&lt;/li&gt;
&lt;/ul&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;fixed footnotes issue in pdf version.&lt;/li&gt;
&lt;li&gt;Externalize tables in word version.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;    knit_hooks$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;chunk =&lt;/span&gt; function(x, options) {
      if (!options$split) &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(x)
     &lt;span class=&quot;kw&quot;&gt;cat&lt;/span&gt;(x, &lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;fig_path&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;.md&amp;#39;&lt;/span&gt;, options))
    }&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Consider more intuitive function names rather than function arguments?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;treebase&quot;&gt;TreeBase&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Needs additional functions replacing &lt;code&gt;sapply&lt;/code&gt; queries and argument queries.&lt;/li&gt;
&lt;li&gt;Table of functions&lt;/li&gt;
&lt;li&gt;re-organize presentation&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ropensci-gsoc&quot;&gt;rOpenSci GSOC&lt;/h2&gt;
&lt;p&gt;GSoC applications were due at noon today. Provided final rounds of feedback to our three applicants. Proposals (secure):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/christophm/9001&quot;&gt;Christoph&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/vijaybarve/8002&quot;&gt;Vijay&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/lomereiter/1&quot;&gt;Artem&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;h3 id=&quot;berkeley-adaptive-management-resource-economics&quot;&gt;Berkeley adaptive management / resource economics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.coastalresearchcenter.ucsb.edu/cmi/Hanemann.html&quot;&gt;Michael Hanemann&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nature.berkeley.edu/carlsonlab/publications.html&quot;&gt;Stephanie Carlson&lt;/a&gt;? (Evolution/harvesting, Mangel graduate)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://are.berkeley.edu/~karp/&quot;&gt;Larry Karp&lt;/a&gt;?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also looking at Mangel’s Decision-making and investment under uncertainty, particularly within a Bayesian framework, and ecological detection, with application to adaptive management.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“Ecology, Conservation and Public Policy: A Vision for the 21st Century”, Astor Lecture, University of Oxford, April 2007 &lt;a href=&quot;http://www.soe.ucsc.edu/~msmangel/Astor%20talk.pdf&quot;&gt;slides&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ecosystem management perspective Pikitch, 2004, (Carpenter &lt;em&gt;et. al.&lt;/em&gt; 2009), (Mangel &amp;amp; Levin, 2005)&lt;/li&gt;
&lt;li&gt;Adaptive management NCEAS synthesis [cite]10.1002/(SICI)1520-6602(1998)1:1&amp;lt;16::AID-INBI3&amp;gt;3.0.CO;2-D[/cite]&lt;/li&gt;
&lt;li&gt;nice treatment of stochastic transitions in (Mangel, 1994)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;other-reading&quot;&gt;Other reading&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Tara Martin, CSIRO’s &lt;a href=&quot;http://taramartin.org&quot;&gt;Conservation Decisions Lab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ag-econ.ncsu.edu/faculty/fackler/fackler.html&quot;&gt;Paul Fackler’s&lt;/a&gt; &lt;a href=&quot;https://sites.google.com/site/mdpsolve/&quot;&gt;MDPSolve&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Carpenter S, Armbrust E, Arzberger P, Chapin F, Elser J, Hackett E, Ives A, Kareiva P, Leibold M, Lundberg P, Mangel M, Merchant N, Murdoch W, Palmer M, Peters D, Pickett S, Smith K, Wall D and Zimmerman A (2009). “Accelerate Synthesis in Ecology And Environmental Sciences.” &lt;em&gt;Bioscience&lt;/em&gt;, &lt;strong&gt;59&lt;/strong&gt;. ISSN 0006-3568, &lt;a href=&quot;http://dx.doi.org/10.1525/bio.2009.59.8.11&quot;&gt;http://dx.doi.org/10.1525/bio.2009.59.8.11&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mangel M and Levin P (2005). “Regime, Phase And Paradigm Shifts: Making Community Ecology The Basic Science For Fisheries.” &lt;em&gt;Philosophical Transactions of The Royal Society B: Biological Sciences&lt;/em&gt;, &lt;strong&gt;360&lt;/strong&gt;. ISSN 0962-8436, &lt;a href=&quot;http://dx.doi.org/10.1098/rstb.2004.1571&quot;&gt;http://dx.doi.org/10.1098/rstb.2004.1571&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mangel M (1994). “Barrier Transitions Driven by Fluctuations, With Applications to Ecology And Evolution.” &lt;em&gt;Theoretical Population Biology&lt;/em&gt;, &lt;strong&gt;45&lt;/strong&gt;. ISSN 00405809, &lt;a href=&quot;http://dx.doi.org/10.1006/tpbi.1994.1002&quot;&gt;http://dx.doi.org/10.1006/tpbi.1994.1002&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ecology: Ecosystem-Based Fishery Management, E. K. Pikitch, (2004) &lt;em&gt;Science&lt;/em&gt;, &lt;strong&gt;305&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1126/science.1098222&quot;&gt;10.1126/science.1098222&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Jordan's bigdata talk in Math/Stats series</title>
	 <link href="/2012/04/05/jordans-bigdata-talk-in-mathstats-series.html"/>
   <updated>2012-04-05T15:48:44+00:00</updated>
   <id>/04/05/jordans-bigdata-talk-in-mathstats-series</id>
   <content type="html">&lt;p&gt;Really excellent talk by Professor Michael Jordan from the Berkeley Statistics department visiting us at Davis yesterday. Haven’t seen a talk cover technical content with remarkable clarity for the algorithms and insights involved, while also covering such a breadth of material. My notes didn’t really keep up, but transcribing some of my scribbling into electronic form will have to wait until I have more time. (Their pubs are probably a better reference anyway.)&lt;/p&gt;
&lt;p&gt;But to summarize,I enjoyed the bag of little bootstraps – a very simple, elegant, and powerful idea. Divide-and-conquer meets Efron.&lt;a href=&quot;http://arxiv.org/abs/1112.5016&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Kleiner &lt;em&gt;et. al.&lt;/em&gt; (2011)&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;I hadn’t realized NetFlix prize could be thought of a matrix completion problem with justifiable assumption of low-rank, and was impressed both by how simple the best algorithm is and by the 10 fold speedup obtained by their approximate divide-and-conquer solution. &lt;a href=&quot;http://arxiv.org/abs/1201.6002&quot; rel=&quot;http://purl.org/spar/cito/discusses&quot; &gt;Mackey &lt;em&gt;et. al.&lt;/em&gt; (2012)&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Highlights the use of Stein’s method of exchangeable pairs for giving you a differential-equation approach to proving things like central limit theorem, and a remarkably simple proof for a Bernstein-like large deviation result for matrices sounds pretty clever.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;https://lh6.googleusercontent.com/-INX5Pqn_LPw/T34eAsH6XeI/AAAAAAAAB0M/Xp7DTbdAKb8/s735/2012-04-05_15-34-20_96.jpg&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;https://lh5.googleusercontent.com/-HX9kM569FqA/T34eF0w3NFI/AAAAAAAAB0Q/4_ecUh-wXWM/s736/2012-04-05_15-34-37_214.jpg&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday/Tuesday</title>
	 <link href="/2012/04/03/mondaytuesday.html"/>
   <updated>2012-04-03T15:59:22+00:00</updated>
   <id>/04/03/mondaytuesday</id>
   <content type="html">&lt;h2 id=&quot;knitr-markdown-pandoc-latex&quot;&gt;knitr + markdown + pandoc + latex&lt;/h2&gt;
&lt;p&gt;Troubleshooting this workflow still…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr-book/issues/2&quot;&gt;Fonts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr-book/pull/1&quot;&gt;xtable for html &amp;amp; latex/pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr-book/issues/3&quot;&gt;xtable comments display&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yihui/knitr-book/issues/4&quot;&gt;tikz device trouble&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/jgm/pandoc/issues/469&quot;&gt;Pandoc table trouble&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/jgm/pandoc/issues/475&quot;&gt;pandoc footnotes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Getting a &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/elsarticle.latex&quot;&gt;satisfactory LaTeX template&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/master/inst/doc/rfishbase/Makefile&quot;&gt;Makefile&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;writing-writing-writing&quot;&gt;writing writing writing:&lt;/h3&gt;
&lt;p&gt;Mostly writing this week, so my notebook has been lacking in entries. Trying to move several manuscripts forward: two are papers accompanying software packages for extracting, manipulating and visualizing data from online repositories (TreeBase and FishBase); part of the rOpenSci project. These databases are great, but it difficult to pursue really interesting questions until we can spin it around on our fingertips. Web-based repositories make the data easily accessible but not easily manipulable. The R language provides a powerful and widely used platform to explore, visualize, and manipulate data once we have it. These packages aim to bridge the gap between access and use, between the web, and R.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;treebase manuscript&lt;/li&gt;
&lt;li&gt;rfishbase manuscript&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;other-tasks-for-the-week&quot;&gt;Other tasks for the week&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;prosecutor fallacy writing.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Relevant initiatives from today's Big Data press release</title>
	 <link href="/2012/03/29/relevant-initiatives-from-todays-big-data-press-release.html"/>
   <updated>2012-03-29T22:01:54+00:00</updated>
   <id>/03/29/relevant-initiatives-from-todays-big-data-press-release</id>
   <content type="html">&lt;p&gt;An &lt;a href=&quot;http://www.whitehouse.gov/blog/2012/03/29/big-data-big-deal&quot;&gt;exciting day for Big Data&lt;/a&gt; (particularly if your Berkeley).&lt;/p&gt;
&lt;h2 id=&quot;nsf&quot;&gt;NSF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Encouraging research universities to develop interdisciplinary graduate programs to prepare the next generation of data scientists and engineers;&lt;/li&gt;
&lt;li&gt;Funding a $10 million Expeditions in Computing project based at the University of California, Berkeley, that will integrate three powerful approaches for turning data into information - machine learning, cloud computing, and crowd sourcing;&lt;/li&gt;
&lt;li&gt;Providing the first round of grants to support “EarthCube” - a system that will allow geoscientists to access, analyze and share information about our planet;&lt;/li&gt;
&lt;li&gt;Convening researchers across disciplines to determine how Big Data can transform teaching and learning.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;doe&quot;&gt;DOE&lt;/h2&gt;
&lt;p&gt;The Department of Energy will provide $25 million in funding to establish the Scalable Data Management, Analysis and Visualization (SDAV) Institute. Led by the Energy Department’s Lawrence Berkeley National Laboratory,&lt;/p&gt;
&lt;h2 id=&quot;dod&quot;&gt;DoD&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The Department is seeking a 100-fold increase in the ability of analysts to extract information from texts in any language.&lt;/li&gt;
&lt;li&gt;The Defense Advanced Research Projects Agency (DARPA) is beginning the XDATA program, which intends to invest approximately $25 million annually for four years to develop computational techniques and software tools for analyzing large volumes of data. The XDATA program will &lt;em&gt;support open source software toolkits&lt;/em&gt; to enable flexible software development for users to process large volumes of data in timelines commensurate with mission workflows of targeted defense applications.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;usgs&quot;&gt;USGS&lt;/h2&gt;
&lt;p&gt;USGS is announcing the latest awardees for grants it issues through its John Wesley Powell Center for Analysis and Synthesis. The Center catalyzes innovative thinking in Earth system science by providing scientists a place and time for in-depth analysis, state-of-the-art computing capabilities, and collaborative tools invaluable for making sense of huge data sets. These Big Data projects will improve our understanding of issues such as species response to climate change, earthquake recurrence rates, &lt;em&gt;and the next generation of ecological indicators&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;NSF’s email alerts today reflect this initiative with more details:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/2012/nsf12059/nsf12059.jsp?WT.mc_id=USNSF_25&amp;amp;WT.mc_ev=click&quot;&gt;Cyberinfastructure track comes to IGERT training&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/2012/nsf12060/nsf12060.jsp?WT.mc_id=USNSF_25&amp;amp;WT.mc_ev=click&quot;&gt;Data intensive education related research&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/2012/nsf12499/nsf12499.htm?WT.mc_id=USNSF_179&quot;&gt;Big Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nsf.gov/pubs/2012/nsf12058/nsf12058.jsp?WT.mc_id=USNSF_25&amp;amp;WT.mc_ev=click&quot;&gt;Data Citations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Data to Knowledge Conference, UC Berkeley: application </title>
	 <link href="/2012/03/29/data-to-knowledge-conference-uc-berkeley-application-abstract.html"/>
   <updated>2012-03-29T12:08:51+00:00</updated>
   <id>/03/29/data-to-knowledge-conference-uc-berkeley-application-abstract</id>
   <content type="html">&lt;p&gt;I’ve just been accepted to the &lt;a href=&quot;http://lyra.berkeley.edu/CDIConf/registration.html&quot;&gt;Data to Knowledge Conference&lt;/a&gt; in Berkeley this May.  I think this conference will address some of the key issues facing us in Big Data today across many different fields, and I hope to learn much that could be useful to ecology and evolution.  Given the audience I look forward to being a source of questions rather than answers as I put on my biologist’s cap.  Berkeley’s particular leadership in this area is probably evident in the millions of dollars they are receiving from the various initiatives coming out of today’s Big Data &lt;a href=&quot;http://www.whitehouse.gov/blog/2012/03/29/big-data-big-deal&quot;&gt;announcement&lt;/a&gt;.  What better day to apply?&lt;/p&gt;
&lt;h3 id=&quot;my-abstract&quot;&gt;My Abstract&lt;/h3&gt;
&lt;p&gt;Many complex systems, from ecosystems to economies to governments, can undergo sudden and often catastrophic transitions between alternate stable states. Ecologists have recently begun to demonstrate the existence of certain early warning signals or leading indicators – patterns that suggest an ecosystem is approaching a critical transition such as the collapse of a population or eutrophication of a lake. Though these patterns are extremely subtle and consequently require large amounts of data to generate an adequate ratio of signal to noise, technology such as satellite imaging and microchip sensors have dramatically increased the data available. Will this recent data deluge help us detect critical transitions with enough time avert them?&lt;/p&gt;
&lt;p&gt;I will briefly introduce recent advances in the field of early warning signals and discuss my work to transition this from a proof of principle to a quantifiable risk that can inform policy.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tuesday: pandoc citations notes, various</title>
	 <link href="/2012/03/27/tuesday-pandoc-citations-notes-various.html"/>
   <updated>2012-03-27T22:22:14+00:00</updated>
   <id>/03/27/tuesday-pandoc-citations-notes-various</id>
   <content type="html">&lt;h2 id=&quot;markdown-over-latex&quot;&gt;Markdown over latex?&lt;/h2&gt;
&lt;p&gt;knitr may have solved the fundamental challenge of all Sweave/latex users with Markdown. Too many of us must be able to work with collaborators who don’t know LaTeX and journals that won’t accept LaTeX. It’s a sad state of the affairs, and has improved slowly for journals (at least many will take pdfs for initial submissions) if not for collaborators. Consequently getting away from LaTeX would be nice, but Word or Google docs just won’t cut it. They cannot Sweave in code. They handle equations poorly. They save binary files not amiable to version management. The aren’t easily portable across architectures or onto the web.&lt;/p&gt;
&lt;h3 id=&quot;pandoc-configuration-notes&quot;&gt;Pandoc Configuration notes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Very pretty. https://github.com/vim-pandoc/vim-pandoc&lt;/li&gt;
&lt;li&gt;But uses this to install. https://github.com/tpope/vim-pathogen&lt;/li&gt;
&lt;li&gt;Apparently apt-get just cannot keep up with our modern world.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Getting citation support for pandoc, also problematic.&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sudo&lt;/span&gt; apt-get install libbibutils-dev bibutils haskell-platform
&lt;span class=&quot;kw&quot;&gt;cabal&lt;/span&gt; update
&lt;span class=&quot;kw&quot;&gt;cabal&lt;/span&gt; install pandoc
&lt;span class=&quot;kw&quot;&gt;sudo&lt;/span&gt; cp ~/.cabal/bin/pandoc /usr/bin/pandoc&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Goodness grief. Everyone wants a custom install for their language today. At least this may be &lt;a href=&quot;https://bugs.launchpad.net/ubuntu/+source/haskell-citeproc-hs/+bug/881355&quot;&gt;fixed soon&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;pandoc-citations&quot;&gt;Pandoc citations&lt;/h3&gt;
&lt;p&gt;Taking a look at pandoc citation formats. &lt;a href=&quot;http://johnmacfarlane.net/pandoc/demos.html&quot;&gt;see demo 24&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Going back and forth between knit notation in vim these days…&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:%s/``` {r$.*$}//g
:%s/`ri //g&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Any opinions on Pandoc headers? Pandoc seems to want something like&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% Title
% Author
% date&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which doesn’t translate nicely to github.&lt;/p&gt;
&lt;p&gt;I’ve got citations working using either pandoc or my inline knit now The inline knit requires something like &lt;code&gt;citep(bib[&amp;quot;RTeam2012&amp;quot;])&lt;/code&gt; where bib is a list of bibentries read in from read.bibtex or a doi, &lt;code&gt;citep(&amp;quot;10.1016/j.tpb.2009.10.003&amp;quot;)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I’m thinking about turning something like &lt;span class=&quot;citation&quot; data-cites=&quot;RTeam2012&quot;&gt;[@RTeam2012]&lt;/span&gt; into a knitr handle, so I can optionally use knitr or pandoc to fill in the citations.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Here’s an example source with &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/3ce7c7a7aa3113624a18ccd74c080a0c014537e8/inst/doc/rfishbase/source/rfishbase.md&quot;&gt;inline citation&lt;/a&gt; and the &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/3ce7c7a7aa3113624a18ccd74c080a0c014537e8/inst/doc/rfishbase/rfishbase.md&quot;&gt;resulting output&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Compare to with &lt;a href=&quot;https://github.com/ropensci/rfishbase/blob/3ce7c7a7aa3113624a18ccd74c080a0c014537e8/inst/doc/rfishbase/rfishbase_pandoc.md&quot;&gt;pandoc output&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R citations need a bit of formating work, but at least I have the proof of principle now.&lt;/p&gt;
&lt;h3 id=&quot;pdg-control-training-problem-ii&quot;&gt;pdg-control (Training Problem II)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;active adaptive management with model uncertainty (implemented)&lt;/li&gt;
&lt;li&gt;no-learning case of model uncertainty (still integrate over model uncertainty)&lt;/li&gt;
&lt;li&gt;passive adaptive management of model uncertainty&lt;/li&gt;
&lt;li&gt;no-learning case for parameter uncertainty&lt;/li&gt;
&lt;li&gt;passive adaptive parameter uncertainty&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ropensci&quot;&gt;rOpenSci&lt;/h3&gt;
&lt;p&gt;Lots of stuff going on.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Website transfer to new server. Possibly consider Jekyll site.&lt;/li&gt;
&lt;li&gt;Synthesis paper on text mining&lt;/li&gt;
&lt;li&gt;Google summer-of-code applicants&lt;/li&gt;
&lt;li&gt;ESA &amp;amp; Evolution tutorials&lt;/li&gt;
&lt;li&gt;ievobio lightning talk, software bazaar entry, possible challenge entry&lt;/li&gt;
&lt;li&gt;Pursuit of additional funds&lt;/li&gt;
&lt;li&gt;Strategy for managing growing list of collaborators&lt;/li&gt;
&lt;li&gt;Communication / outreach&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Active adaptive management solutions: Belief SDP</title>
	 <link href="/2012/03/26/active-adaptive-management-solutions-belief-sdp.html"/>
   <updated>2012-03-26T14:46:52+00:00</updated>
   <id>/03/26/active-adaptive-management-solutions-belief-sdp</id>
   <content type="html">&lt;p&gt;Have finally gotten my active adaptive management solutions working.&lt;/p&gt;
&lt;p&gt;The active adaptive management solution learns very quickly and rather monotonically which model is correct, even when models differ by small amounts and the initial belief is heavily skewed to the wrong model. I’ve implemented examples with Myers model, but in this parameter space the allee effect is well below the Reed escapement level of the alternative Beverton Holt model, so it doesn’t exert itself.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A case of &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/c5f69be6e51849a2be7850239f6397136f949ceb/inst/examples/model_uncertainty.md&quot;&gt;choosing between to Beverton Holt models with very similar parameters&lt;/a&gt;. Some delay occurs before a given replicate observes an event unlikely to have come from the wrong model, and then it quickly adjusts its beliefs.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm7.staticflickr.com/6109/7018813563_d8ca8eb756_o.png&quot; alt=&quot;delay&quot; /&gt;&lt;figcaption&gt;delay&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/fd9852313efe0fa9ea9233539a1e2fcb77983a13/inst/examples/model_uncertainty.md&quot;&gt;Choosing between Beverton Holt and Myers Allee model&lt;/a&gt;. Allee model is correct even though our initial belief doubts it. The algorithm quickly corrects this.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm7.staticflickr.com/6111/7018879281_b2bc4ea6a2_o.png&quot; alt=&quot;allee&quot; /&gt;&lt;figcaption&gt;allee&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;Perhaps the &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/c1481a071bed3496413328eb148b28138ccb0f55/inst/examples/model_uncertainty.md&quot;&gt;most dramatic example I have so far&lt;/a&gt; comes from a mistake in my model specification, whereby what I intended to be the correct model was actually a terribly optimistic model. The algorithm quickly realized that it would do best to chose what I had provided as the wrong model, which was actually closer to the truth than my faulty specified true model.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7102/7018850545_5562557904_o.png&quot; alt=&quot;corrected&quot; /&gt; &lt;img src=&quot;http://farm7.staticflickr.com/6113/6872744460_b1976cd8f6_o.png&quot; alt=&quot;belief&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ S = \frac{\alpha S ^ {\delta}}{1 + S^{\delta}/K} \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ 1 + S^\delta/K = \alpha S ^ {\delta-1} \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ K - K \alpha S ^ {\delta-1} + S{^\delta} \]&lt;/span&gt; for $ = 2 $ &lt;span class=&quot;math&quot;&gt;\[S = \frac{1}{2} \left( \alpha K \pm \sqrt{\alpha^2 K^2 - 4 K}\right) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Cases where risk of collapse is real, learning is fast, but model uncertainty isn’t the challenge. Compare outcomes starting with &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/d0cd7ca379dfc30e67363442189ab57adfa8058a/inst/examples/model_uncertainty.md&quot;&gt;wrong&lt;/a&gt; and &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ff049e1f623413e1438555aec63ddbe65dec6d8f/inst/examples/model_uncertainty.md&quot;&gt;right&lt;/a&gt; initial belief. Learning takes place in the first step, but many populations crash by chance anyhow.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7231/7019134197_76f3c00e80_m.jpg&quot; alt=&quot;right assumption&quot; /&gt; &lt;img src=&quot;http://farm8.staticflickr.com/7046/7019126361_c3a712b982_m.jpg&quot; alt=&quot;wrong initial assumption&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Citations in markdown using knitr</title>
	 <link href="/2012/03/24/citations-in-markdown-using-knitr.html"/>
   <updated>2012-03-24T21:33:27+00:00</updated>
   <id>/03/24/citations-in-markdown-using-knitr</id>
   <content type="html">&lt;p&gt;I am finding myself more and more drawn to markdown rather then tex/Rnw as my standard format (not least of which is the ease of displaying the files on github, particularly now that we have automatic image uploading). One thing I miss from latex is the citation commands. (I understand these can be provided to markdown via Pandoc, but I’d like to simply have to knit the document, and not then run it through pandoc, latex, or another interpreter). I’ve taken a little whack at generating in-text citations using knitr and other R tools.&lt;/p&gt;
&lt;h3 id=&quot;doi-approach&quot;&gt;DOI Approach&lt;/h3&gt;
&lt;p&gt;I’ve put some simple functions in a &lt;code&gt;knitcitations&lt;/code&gt; package. The functions use the crossref API to grab citation information given a doi, so I don’t have to generate a bibtex file for papers I’m reading, (inspired by the &lt;a href=&quot;http://wordpress.org/extend/plugins/kcite/&quot;&gt;kcite&lt;/a&gt; package for Wordpress). One can grab my package from github&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;knitcitations&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;cboettig&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and load the package&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(knitcitations)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we can generate a citation given a doi with the &lt;code&gt;ref&lt;/code&gt; function:&lt;/p&gt;
&lt;h3 id=&quot;bibtex-approach&quot;&gt;Bibtex Approach&lt;/h3&gt;
&lt;p&gt;If we have a bibtex file, we can use this for the citations as well. Let’s start off by getting ourselves a bibtex file from some of R’s packages:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(bibtex)
&lt;span class=&quot;kw&quot;&gt;write.bib&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;bibtex&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;knitr&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;knitcitations&amp;#39;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;example.bib&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we can simply read in the bibtex files:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
biblio &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.bib&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;example.bib&amp;quot;&lt;/span&gt;)
biblio[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Francois R (2011). &lt;em&gt;bibtex: bibtex parser&lt;/em&gt;. R package version 0.3-1/r332, .&lt;/p&gt;
&lt;p&gt;(This would be much more awesome if we could generate keys on write.bib and use those bibtex keys, instead of the index value, &lt;code&gt;[[1]]&lt;/code&gt;, to generate the citation.)&lt;/p&gt;
&lt;h3 id=&quot;using-the-inline-citations&quot;&gt;Using the inline citations&lt;/h3&gt;
&lt;p&gt;Now that we can get citation information from bibtex files or dois, we need a way to insert these citations into the text. I’ve written a simple &lt;code&gt;citep&lt;/code&gt; print inline citations that would just use a given shortened format (e.g. author-year) and add the citation to a &lt;code&gt;works_cited&lt;/code&gt; object, which we could then use to generate the full citation information at the end. We can generate inline citations by giving a doi, bibentry object, or a list thereof, into inline knitr code block. Thus we can use the line &lt;code&gt;citep(&amp;quot;10.1111/j.1461-0248.2005.00827.x&amp;quot;)&lt;/code&gt; to generate a parenthetical citation, (Halpern &lt;em&gt;et. al.&lt;/em&gt; 2006). We can alos generate textual citations with &lt;code&gt;citet(biblio[1])&lt;/code&gt;, such as Francois, (2011). Parenthetical citations can take more than one entry, such as &lt;code&gt;citep[biblio[2:3]&lt;/code&gt;, which produces (Xie, 2012; Boettiger, 2012).&lt;/p&gt;
&lt;h3 id=&quot;generating-the-final-bibliography&quot;&gt;Generating the final bibliography&lt;/h3&gt;
&lt;p&gt;As we go along adding inline citations, R stores the list of citation info. Then at the end of the document, use this command to print the bibliography generated by the use of our inline citations.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;bibliography&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Halpern B, Regan H, Possingham H and McCarthy M (2006). “Accounting for uncertainty in marine reserve design.” &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;em&gt;9&lt;/em&gt;. ISSN 1461-023X, .&lt;/p&gt;
&lt;p&gt;Francois R (2011). &lt;em&gt;bibtex: bibtex parser&lt;/em&gt;. R package version 0.3-1/r332, .&lt;/p&gt;
&lt;p&gt;Xie Y (2012). &lt;em&gt;knitr: A general-purpose package for dynamic report generation in R&lt;/em&gt;. R package version 0.4.1, .&lt;/p&gt;
&lt;p&gt;Boettiger C (2012). &lt;em&gt;knitcitations: Citations for knitr markdown files&lt;/em&gt;. R package version 0.0-1.&lt;/p&gt;
&lt;p&gt;I hope to add markup to format this a bit more nicely later. For instance, we want the links to appear as real links. Additionally, we may want to add markup around the citations, such as the reason for the citation into the link using the &lt;a href=&quot;http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/cito&quot;&gt;Citation Typing Ontology&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This entry was, of course, produced in knitr with my &lt;a href=&quot;https://github.com/cboettig/knitcitations&quot;&gt;knitcitations&lt;/a&gt; package. See the &lt;a href=&quot;https://raw.github.com/cboettig/knitcitations/master/inst/examples/citations_knit_.md&quot;&gt;original source&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Robust control & uncertainty - reading notes</title>
	 <link href="/2012/03/22/robust-control-uncertainty-reading-notes.html"/>
   <updated>2012-03-22T18:19:17+00:00</updated>
   <id>/03/22/robust-control-uncertainty-reading-notes</id>
   <content type="html">&lt;p&gt;Ecologists/TREE (Fischer &lt;em&gt;et. al.&lt;/em&gt; 2009), (Polasky &lt;em&gt;et. al.&lt;/em&gt; 2011)  give a nice overview/introduction to the problem.  Perhaps most interestingly, both set up resilience approaches as a foil or alternate approach in contrast to a decision-theoretic problem. Fischer’s group does a particularly nice job handling the case that these two are separate approaches – it’s easy to dismiss resilience thinking as fuzzy optimization of fuzzy objective functions.&lt;/p&gt;
&lt;p&gt;The Polasky piece does a nice job refocusing us on the obvious but brushed-over question of the objective function.  Without explicit probabilities on outcomes, we switch immediately to approaches like maximin, which their simple example does a much better job calling attention to the weakness of such assumptions that do the richer examples usually formulated (below).&lt;/p&gt;
&lt;p&gt;Entertainingly, max-min goes back to von Neumann’s proof of the theorem in two player games, while in the case of uncertainty “Nature” or “chance” takes the role of the other player – not knowing how they will play, you seek a strategy that maximizes the minimum payoff you will receive. Clearly this is invented in a discrete world with limited outcomes and options – for most realistic problems there must always be some probability of no payoff, regardless of strategy, and you must be doing a maximin conditional on the really unlikely things not happening (hit by asteroid, sudden collapse of your fishery, etc).&lt;/p&gt;
&lt;p&gt;Their critique of decision theory focuses only on the fact that it requires probabilities of outcomes, which in practice won’t be known, or at least knowledge of possible states, in the case of maximin.  The first is critique is quite just, which is as they say, the reason for maximin approaches.  These probably founder more on their choice of objective function than their inability to enumerate possible states.  Surprisingly they make no mention of computational complexity, which is probably in practice the more common limitation.&lt;/p&gt;
&lt;h3 id=&quot;info-gap-theory&quot;&gt;Info Gap Theory&lt;/h3&gt;
&lt;p&gt;Reading (Regan &lt;em&gt;et. al.&lt;/em&gt; 2005), sounds like a sensitivity analysis on the uncertainty parameter. Authors refer to this as “info-gap theory,” though it’s not particularly different.  (While sensitivity analysis would do this parametrically using, say, the width of the distribution about a parameter), this rather more crudely it seems, just varies the best-estimate value of the parameter until the decision changes.&lt;/p&gt;
&lt;p&gt;Whoops (reading more), apparently it’s a thing (i.e. gets it’s own &lt;a href=&quot;http://en.wikipedia.org/wiki/Info-gap_decision_theory&quot;&gt;wikipedia page&lt;/a&gt;, also appearing in the literature without Dr. Ben-Haim, Nicholson &amp;amp; Possingham, 2007 (Halpern &lt;em&gt;et. al.&lt;/em&gt; 2006)) though this still seems to &lt;a href=&quot;http://en.wikipedia.org/wiki/Info-gap_decision_theory#Alternatives&quot;&gt;support&lt;/a&gt; my characterization (the second author of the Eco Apps paper seems to be behind the term). Info-gap can also be framed as a Max Min approach.&lt;/p&gt;
&lt;p&gt;Whoops again, &lt;a href=&quot;http://info-gap.moshe-online.com/&quot;&gt;apparently it’s a controversy too&lt;/a&gt;, (as mentioned in the Fischer piece). Nicholson &amp;amp; Possingham, 2007 Gives a rather nice list of papers that in single-species analyses have found ranking of management options to be robust to uncertainty and others where it is not (hardly surprising, but nice to have concrete examples).  Takes a simple info-gap approach to the multi-species case.&lt;/p&gt;
&lt;h3 id=&quot;more-rigorous-maximin-approaches&quot;&gt;More rigorous maximin approaches&lt;/h3&gt;
&lt;p&gt;Bill Brock’s work in this area is particularly nice.  Cute proper technical example of model uncertainty in Hansen’s recursive max/min expected utility (Brock &amp;amp; Xepapadeas, 2010).  Hansen’s treatment on these is dense (below), but not at all clear that this is what we want to be optimizing.  See mathematical economics treatment of model uncertainty &amp;amp; misspecification in (Hansen &amp;amp; Sargent, 2001), (Hansen &lt;em&gt;et. al.&lt;/em&gt; 2006)&lt;/p&gt;
&lt;p&gt;Brock also has a beautiful simple paper pointing out how uncertainties lead to conflicting conclusions , such as the debate over the fisheries collapse.  (Biggs &lt;em&gt;et. al.&lt;/em&gt; 2009) Also has a nice example in Peterson &lt;em&gt;et. al.&lt;/em&gt; 2003 of an apparently optimally managed system collapsing.  Applies a passive adaptive management solution learning about a choice between two given models (with fixed parameters), one which describes the system around the eutrophic stable state, the other around the oligotrophic.Note the actual dynamics cannot be represented as a sum of these beliefs, so this approach is doomed and the result is hardly surprising mathematically, which kinda makes it all the more clever as an example.&lt;/p&gt;
&lt;p&gt;(Brozović &amp;amp; Schlenker, 2011) is probably a richer example of an optimally managed system failing under uncertainty. Shows the outcome can be very sensitive to assumptions about uncertainty in systems with alternative stable states; a nice example to further the point of (Biggs &lt;em&gt;et. al.&lt;/em&gt; 2009). Shows with moderate uncertainty a precautionary behavior, while more severe uncertainty it precaution isn’t worth it, since it cannot diminish the risk adequately.&lt;/p&gt;
&lt;p&gt;(Meir &lt;em&gt;et. al.&lt;/em&gt; 2004) Which seems to give  rise to the Possingham position on giving only rules of thumb from decision theoretic models.  Comes the closest to implementation uncertainty, considering the case in which a policy cannot be implemented immediately as it is formed.  This is really a red herring – if implementation takes place over time, in principle that problem should be framed in the dynamic optimization.  The real bugbear here is not implementation uncertainty per se, but the fact that dynamic solutions (SDP) are not computationally feasible, so they test rules-of-thumb against the optimum for a small problem, in hopes that the extrapolation is valid.  The rules of thumb are “more effective” than a static solution; the optimal dynamic solution being unfeasible. It seems we’d be on firmer ground using small problems to provide counterexamples of when simple rules fail, than to use the lack of counterexample in a particular case as grounds for extrapolating.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Fischer J, Peterson G, Gardner T, Gordon L, Fazey I, Elmqvist T, Felton A, Folke C and Dovers S (2009). “Integrating Resilience Thinking And Optimisation For Conservation.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;24&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2009.03.020&quot;&gt;http://dx.doi.org/10.1016/j.tree.2009.03.020&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Polasky S, Carpenter S, Folke C and Keeler B (2011). “Decision-Making Under Great Uncertainty: Environmental Management in an Era of Global Change.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;26&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.04.007&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.04.007&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Regan H, Ben-Haim Y, Langford B, Wilson W, Lundberg P, Andelman S and Burgman M (2005). “Robust Decision-Making Under Severe Uncertainty For Conservation Management.” &lt;em&gt;Ecological Applications&lt;/em&gt;, &lt;strong&gt;15&lt;/strong&gt;. ISSN 1051-0761, &lt;a href=&quot;http://dx.doi.org/10.1890/03-5419&quot;&gt;http://dx.doi.org/10.1890/03-5419&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Halpern B, Regan H, Possingham H and McCarthy M (2006). “Accounting For Uncertainty in Marine Reserve Design.” &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;strong&gt;9&lt;/strong&gt;. ISSN 1461-023X, &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&quot;&gt;http://dx.doi.org/10.1111/j.1461-0248.2005.00827.x&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brock W and Xepapadeas A (2010). “Robust Control And Hot Spots in Dynamic Spatially Interconnected Systems.” &lt;em&gt;Ssrn Electronic Journal&lt;/em&gt;. &lt;a href=&quot;http://dx.doi.org/10.2139/ssrn.1736486&quot;&gt;http://dx.doi.org/10.2139/ssrn.1736486&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hansen L and Sargent T (2001). “Robust Control And Model Uncertainty.” &lt;em&gt;American Economic Review&lt;/em&gt;, &lt;strong&gt;91&lt;/strong&gt;. ISSN 0002-8282, &lt;a href=&quot;http://dx.doi.org/10.1257/aer.91.2.60&quot;&gt;http://dx.doi.org/10.1257/aer.91.2.60&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hansen L, Sargent T, Turmuhambetova G and Williams N (2006). “Robust Control And Model Misspecification.” &lt;em&gt;Journal of Economic Theory&lt;/em&gt;, &lt;strong&gt;128&lt;/strong&gt;. ISSN 00220531, &lt;a href=&quot;http://dx.doi.org/10.1016/j.jet.2004.12.006&quot;&gt;http://dx.doi.org/10.1016/j.jet.2004.12.006&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Biggs R, Carpenter S and Brock W (2009). “Spurious Certainty: How Ignoring Measurement Error And Environmental Heterogeneity May Contribute to Environmental Controversies.” &lt;em&gt;Bioscience&lt;/em&gt;, &lt;strong&gt;59&lt;/strong&gt;. ISSN 0006-3568, &lt;a href=&quot;http://dx.doi.org/10.1525/bio.2009.59.1.10&quot;&gt;http://dx.doi.org/10.1525/bio.2009.59.1.10&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brozović N and Schlenker W (2011). “Optimal Management of an Ecosystem With an Unknown Threshold.” &lt;em&gt;Ecological Economics&lt;/em&gt;, &lt;strong&gt;70&lt;/strong&gt;. ISSN 09218009, &lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolecon.2010.10.001&quot;&gt;http://dx.doi.org/10.1016/j.ecolecon.2010.10.001&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Meir E, Andelman S and Possingham H (2004). “Does Conservation Planning Matter in A Dynamic And Uncertain World?” &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;strong&gt;7&lt;/strong&gt;. ISSN 1461-023X, &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2004.00624.x&quot;&gt;http://dx.doi.org/10.1111/j.1461-0248.2004.00624.x&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Making Conservation Decisions Under Uncertainty For The Persistence of Multiple Species, Emily Nicholson, Hugh P. Possingham, (2007) &lt;em&gt;Ecological Applications&lt;/em&gt;, &lt;strong&gt;17&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1890/1051-0761(2007)017[0251:MCDUUF]2.0.CO;2&quot;&gt;10.1890/1051-0761(2007)017[0251:MCDUUF]2.0.CO;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Uncertainty And The Management of Multistate Ecosystems: an Apparently Rational Route to Collapse, G. D. Peterson, S. R. Carpenter, W. A. Brock, (2003) &lt;em&gt;Ecology&lt;/em&gt;, &lt;strong&gt;84&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1890/0012-9658(2003)084[1403:UATMOM]2.0.CO;2&quot;&gt;10.1890/0012-9658(2003)084[1403:UATMOM]2.0.CO;2&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Policy costs to changing mangement, TP 1b: Apples to Apples</title>
	 <link href="/2012/03/21/policy-costs-to-changing-mangement-tp-1b-apples-to-apples.html"/>
   <updated>2012-03-21T14:42:57+00:00</updated>
   <id>/03/21/policy-costs-to-changing-mangement-tp-1b-apples-to-apples</id>
   <content type="html">&lt;p&gt;A central question of training problem 1b addressed at the working group was how to compare the different penalties. Following up on those discussions, here are a few notes on how far I’ve gotten in the analysis regarding the best way to make these comparisons.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/simulate_npv_curves.md&quot;&gt;simulate_npv_curves&lt;/a&gt; Nice job of showing the performance of the variance ratio, clear example for L2. Correlation test should probably be applied to differences, pattern is much less clear. As for NPV comparison, looks too noisy, should calculate exactly from the SDP policy matrix in the way Michael suggested.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/exact_npv.md&quot;&gt;exact_npv&lt;/a&gt;. Much clearer plot than the stochastic case, not sure why asymmetric shows no penalty. Note that fixed costs keep increasing, getting policy-cost to exceed NPV0, implying that the profit margin has gone to zero. Probably not worth computing the cases that go beyond this. Surprised how much a difference discretization makes too.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;updated &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/policycosts/policycost_L1.md&quot;&gt;policycost_L1&lt;/a&gt;. I’ve updated the simulation function to keep track of policy costs and total costs on the fly, so I no longer need to calculate these post-hoc, but this breaks the earlier version calls to ForwardSim. Likewise I’ve updated the policy cost dynamic programming solution to allow for arbitrary cost penalty, and to treat the quadratic effort penalty as a cost (for accounting purposes) which also breaks the prior version of these calls. Note that we’re also in Dan’s values for default parameters now. This file has been updated to reflect these changes, the examples of other penalties should be one-line chances to this code.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example figures (more figures and details in the analyses linked above)&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7068/6983560431_053aa815b0_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7061/6842399336_6eaaa99e3d_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>knitr, github, and a new phase for the lab notebook</title>
	 <link href="/2012/03/21/knitr-github-and-a-new-phase-for-the-lab-notebook.html"/>
   <updated>2012-03-21T12:13:42+00:00</updated>
   <id>/03/21/knitr-github-and-a-new-phase-for-the-lab-notebook</id>
   <content type="html">&lt;p&gt;I have recently modified the basic workflow of my lab notebook since discovering &lt;a href=&quot;http://yihui.name/knitr/&quot;&gt;knitr&lt;/a&gt;. Before, I would write code files which I could track on &lt;a href=&quot;https://github.com&quot;&gt;github&lt;/a&gt;, push figures created by the code to flickr, and then write a notebook entry on wordpress describing what I was doing. I’d embed each figure I wanted into the entry, and each figure got an automatic link to github for the script that created it (which usually worked, though it didn’t say where in the script the command came from, and it required manually specifying the script name).&lt;/p&gt;
&lt;p&gt;Because knitr allows me to write a single file containing code and formatted text, and will automatically display the code and embed the images, I can avoid that more convoluted workflow and just write.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7256/7003687571_09f79cfc15_o.png&quot; /&gt;](https://github.com/cboettig/pdg_control/blob/master/inst/examples)&lt;/p&gt;
&lt;p&gt;What makes this so excellent is that knitr allows me to write in markdown, and github automatically displays nicely formatted markdown instead of raw script when you visit the page. So whereas before I would keep a bunch of working &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/demo&quot;&gt;R scripts&lt;/a&gt; in &lt;code&gt;projectname/demo&lt;/code&gt; I now keep a bunch of &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/master/inst/examples&quot;&gt;markdown scripts&lt;/a&gt; in &lt;code&gt;inst/examples&lt;/code&gt;, ((since I’m using the R package for projects and demo/ doesn’t want non-R scripts)).&lt;/p&gt;
&lt;p&gt;The great thing about this is that I can just click on each script and see nicely rendered text, links, code, and figures right on github.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://farm7.staticflickr.com/6217/7003679683_d9f472efd6_o.png&quot; alt=&quot;example entry&quot; /&gt;](https://github.com/cboettig/pdg_control/blob/master/inst/examples/Reed.md)&lt;/p&gt;
&lt;p&gt;While I can push this same markdown script to wordpress and have it be rendered in my notebook, I think maintaining these examples on github is preferable. Note that every script-name appears twice, once with and once without the &lt;code&gt;_knit_&lt;/code&gt; extension. The &lt;code&gt;_knit_&lt;/code&gt; extension indicates the file I ran to create the output (the code is in html comments so you can only see them in raw form). Because all the code is displayed in the output file (unless I call knitr options to surpress this), there’s really no need to view the &lt;code&gt;_knit_&lt;/code&gt; file to reproduce the example, everything is in one place in the output &lt;code&gt;.md&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;These files benefit from the github managed version history, just clicking the history button gives a list of all the former versions, with code and results right there.&lt;/p&gt;
&lt;p&gt;While I could update a post in the notebook in the same way, the version control of this wordpress notebook is more crude, and more importantly, the blog-format is designed for a linear flow, whereas in a given day I might update each of these example scripts. This seems like a much more natural workflow then having consecutive entries in the notebook with updated versions of the analysis the day before, and more natural than going back and changing a previous notebook entry.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7094/7003692801_d14a23855e_o.png&quot; /&gt;](https://github.com/cboettig/pdg_control/commits/master/inst/examples/model_uncertainty.md)&lt;/p&gt;
&lt;p&gt;Github can also gives nice snapshot of what’s changed, along with the commit notes for each project, for each day. Now that I can display figures and formatted text on github, as well as code, what role does the Wordpress notebook play? I think this wordpress notebook can resume is proper role as a lab notebook, containing reflections and synthesis on what I’ve done, rather than the more comprehensive copies of each analysis and each figure. Because it’s the internet, I can link to each of the analyses of that day using version-stable links from github, or links that always give the most recent version. This requires additional effort, but it’s a reflection I should be doing anyway. We’ll see how it goes. Meanwhile, welcome to the open lab notebook v2.0.&lt;/p&gt;
&lt;h2 id=&quot;a-few-more-details&quot;&gt;A few more details&lt;/h2&gt;
&lt;h5 id=&quot;longer-code-r-functions&quot;&gt;Longer code &amp;amp; R functions&lt;/h5&gt;
&lt;p&gt;When I write code longer than a few lines, I try to make it a function, or collection of functions, and include basic Roxygen-style documentation with it so I don’t have to read the code to remember how to use it. These functions naturally live in the &lt;code&gt;R/&lt;/code&gt; directory of the project. The project’s R package can be installed, and all these functions are then available. Each of my example scripts calls functions belonging to the package, but those functions change less regularly. To fully reproduce the example, it would be necessary to grab a copy of the R package from the same commit-version as the script. In practice, most of the time any version of the package R functions could be used.&lt;/p&gt;
&lt;h5 id=&quot;github-wiki&quot;&gt;Github wiki&lt;/h5&gt;
&lt;p&gt;Github has wiki pages which I could use instead of putting my entries in &lt;code&gt;inst/example&lt;/code&gt;, since both render markdown (the wiki will additionally render mathjax math, all be it as a png). However, the wiki is aimed at online editing, and exists as a separate repository, so just keeping the markdown files in the project directory is simpler.&lt;/p&gt;
&lt;h5 id=&quot;images&quot;&gt;Images&lt;/h5&gt;
&lt;p&gt;Github doesn’t actually host the images. In fact, my images are still being pushed to flickr, and you can see them there. Knitr is handling this automatically as the figures are created, keeping track of the links so they can be included in the output markdown. Knitr can do this with imgur out of the box, and I’ve also written a wrapper to let it push the images to a wordpress site. Doesn’t really matter where they are stored, they can always be viewed on Github.&lt;/p&gt;
&lt;h5 id=&quot;heavy-computing&quot;&gt;Heavy computing&lt;/h5&gt;
&lt;p&gt;I’ve found that the knitted markdown examples make the most sense for fast-running examples. Despite excellent caching support, I’ve found it best to run really long-running examples as external R scripts, and then save and import this data. Such scripts are often being run on a cluster that can’t push images to the internet anyway.&lt;/p&gt;
&lt;h5 id=&quot;power-of-openness&quot;&gt;Power of openness?&lt;/h5&gt;
&lt;p&gt;It occurs to me that this system would be harder but not impossible, in a closed environment. I could upload the figures to flickr with private status. The links are hashes, so cannot be guessed. If the output were then hosted on a secure site (running a markdown renderer, such as Jekyll), instead of github, these links would still work to display the images. Then one could give selected access to those pages. But the open solution works out of the box.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tuesday: active adaptive management, a first solution</title>
	 <link href="/2012/03/20/tuesday-active-adaptive-management-a-first-solution.html"/>
   <updated>2012-03-20T22:31:42+00:00</updated>
   <id>/03/20/tuesday-active-adaptive-management-a-first-solution</id>
   <content type="html">&lt;p&gt;Spent way more of today than I wanted to hammering out the active adaptive management implementation for a trivial model-choice problem using the discretized belief-SDP approach.&lt;/p&gt;
&lt;p&gt;We have alternate models &lt;span class=&quot;math&quot;&gt;\(f_1\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(f_2\)&lt;/span&gt; of the state equations (population growth dynamics) &lt;span class=&quot;math&quot;&gt;\[ x_{t+1} = z_t f(x_t) \]&lt;/span&gt; and introduce a continuously valued belief probability &lt;span class=&quot;math&quot;&gt;\(p\)&lt;/span&gt; that model 1 is correct. This lends itself to a Bayesian updating rule for our belief based on observing a transition from &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; to &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ p_{t+1} = \frac{p_t P(y, f_1(x))}{p_t P(y, f_1(x)) + (1- p_t) P(y, f_2(x))}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We define a two-dimensional state space as the continuously valued population density &lt;span class=&quot;math&quot;&gt;\(x\)&lt;/span&gt; and belief &lt;span class=&quot;math&quot;&gt;\(y\)&lt;/span&gt;, and then discretized both of these to fixed grids (feeling acutely the curse of dimensionality in the process.) We calculate and SDP matrix which essentially “factors” the original, known model matrix over beliefs, and have to keep track of this giant creature. The implementation is rather straight-forward, with a little book-keeping, but somehow I introduced a bug or two along the way which I proceeded not to track down very effectively…&lt;/p&gt;
&lt;p&gt;Not sure that I have this working yet. I now get agreement between the optimal strategy proposed when model 1 is known to be correct, and the the optimal strategy proposed when there are two models, and model 1 is most likely; however this active adaptive solution does not seem to vary with belief state(!) so something is still wrong.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ec5a588a92b02d46931d709f8bce51cd097bf754/inst/examples/model_uncertainty.md&quot;&gt;model_uncertainty.md example&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/model_uncertainty.md&quot;&gt;history&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Friday: some random notes</title>
	 <link href="/2012/03/20/friday-some-random-notes.html"/>
   <updated>2012-03-20T16:53:08+00:00</updated>
   <id>/03/20/friday-some-random-notes</id>
   <content type="html">&lt;h2 id=&quot;computational-tricks&quot;&gt;Computational tricks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://gist.github.com/2050761&quot;&gt;tables in github markdown via knitr&lt;/a&gt;. clever&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://possiblybrainful.blogspot.com/2011/08/using-gpu-in-r-scripts.html&quot;&gt;Getting custom C/C++ CUDA working in R&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;data-management-and-sharing-solutions-for-large-files&quot;&gt;Data management and sharing solutions for large files&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;NERSC uses &lt;a href=&quot;https://www.globusonline.org/&quot;&gt;globus online&lt;/a&gt; for interface for transferring terabytes/hr, pretty clever. NERSC also enables &lt;a href=&quot;http://www.nersc.gov/users/data-and-networking/sharing-data/&quot;&gt;web hosting to share data&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Software-Carpentry style &lt;a href=&quot;software-carpentry.org/4_0/data/mgmt/&quot;&gt;Data management&lt;/a&gt; a nice start. An open solution could stick the data on figshare (or elsewhere), write the readmes in markdown and keep them on github with links to the data.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;A collection of &lt;a href=&quot;http://pad.p2pu.org/p/opensciencecontent&quot;&gt;Open Science challenges from p2pU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A nice &lt;a href=&quot;www.nytimes.com/2012/03/05/education/moocs-large-courses-open-to-all-topple-campus-walls.html?pagewanted=all&quot;&gt;NY Times piece on Thrun &amp;amp; large-scale teaching&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Citing R packages</title>
	 <link href="/2012/03/20/citing-r-packages.html"/>
   <updated>2012-03-20T10:02:09+00:00</updated>
   <id>/03/20/citing-r-packages</id>
   <content type="html">&lt;p&gt;I’m not always careful in citing all the R packages I use. R actually has some rather nice built-in mechanisms to support this, so I really have no excuse. Here’s some quick examples:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;citation&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ouch&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;To cite the ouch package in publications
use:

  Aaron A. King and Marguerite A. Butler
  (2009), ouch: Ornstein-Uhlenbeck models
  for phylogenetic comparative hypotheses (R
  package),
  http://ouch.r-forge.r-project.org

  Butler, M. A. and King, A. A. (2004)
  Phylogenetic comparative analysis: a
  modeling approach for adaptive evolution
  Am. Nat. 164:683--695

As ouch is continually evolving, you may
want to cite its version number. Find it
with &amp;#39;help(package=ouch)&amp;#39;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Can I have that in bibtex format please?&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;toBibtex&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;citation&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;ouch&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;@Manual{,
  title = {ouch: Ornstein-Uhlenbeck models for phylogenetic comparative hypotheses},
  author = {Aaron A. King and Marguerite A. Butler},
  year = {2009},
  url = {http://ouch.r-forge.r-project.org},
}
@Article{,
  author = {Marguerite A. Butler and Aaron A. King},
  title = {Phylogenetic comparative analysis: a modeling approach for adaptive evolution},
  journal = {American Naturalist},
  year = {2004},
  volume = {164},
  pages = {683--695},
  url = {http://www.journals.uchicago.edu/AN/journal/issues/v164n6/40201/40201.html},
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Notice that this package provides the citation information for both the package and the associated journal article simultaneously, and R has successfully identified the formats as ‘Manual’ and ‘Article’ respectively.&lt;/p&gt;
&lt;p&gt;After running your code, consider creating a custom bibtex file containing the citation information for all the packages you have just used. (The file can be imported into most citation managers, if LaTeX isn’t your thing).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;sink&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;test.bib&amp;quot;&lt;/span&gt;)
out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sessionInfo&lt;/span&gt;()$otherPkgs), 
    function(x) &lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;citation&lt;/span&gt;(x), &lt;span class=&quot;dt&quot;&gt;style =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Bibtex&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can also simply generate the list of loaded package in LaTeX format, which could be automatically included.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;toLatex&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sessionInfo&lt;/span&gt;(), &lt;span class=&quot;dt&quot;&gt;locale =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;for-package-authors&quot;&gt;For package authors&lt;/h3&gt;
&lt;p&gt;R will attempt to automatically construct the citation information for the package automatically from the description file, so it is not strictly necessary to do anything to your package to create it. Note that R has recently adopted a new syntax to specify the authors, which is a bit more precise. Instead of using Authors: in the DESCRPTION, we use:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Authors@R: c(person(&amp;quot;Carl&amp;quot;, &amp;quot;Boettiger&amp;quot;, role = c(&amp;quot;aut&amp;quot;, &amp;quot;cre&amp;quot;), email = &amp;quot;cboettig@gmail.com&amp;quot;), 
  person(&amp;quot;Duncan&amp;quot;, &amp;quot;Temple Lang&amp;quot;, role = &amp;quot;aut&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This defines the roles (author, creator, etc, see &lt;code&gt;?person&lt;/code&gt; for details), and ‘creator’ takes the place of the &lt;code&gt;Maintainer:&lt;/code&gt; designation, and requires an email address. If you wish to add an additional publication as part of the citation information (such as the example from &lt;code&gt;ouch&lt;/code&gt; above, you can specify this in the CITATION file. For the example this looks like:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;citHeader&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;To cite the ouch package in publications use:&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;citEntry&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;entry =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Article&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;author =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;personList&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.person&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Marguerite A. Butler&amp;quot;&lt;/span&gt;), 
        &lt;span class=&quot;kw&quot;&gt;as.person&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Aaron A. King&amp;quot;&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Phylogenetic comparative analysis: a modeling approach for adaptive evolution&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;journal =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;American Naturalist&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;year =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2004&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;volume =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;164&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;pages =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;683--695&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;url =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.journals.uchicago.edu/AN/journal/issues/v164n6/40201/40201.html&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;textVersion =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Butler, M. A. and King, A. A. (2004)&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;st&quot;&gt;&amp;quot;Phylogenetic comparative analysis: a modeling approach for adaptive evolution&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;st&quot;&gt;&amp;quot;Am. Nat. 164:683--695&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;citFooter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;As ouch is continually evolving, you may want to cite its version number. Find it with &amp;#39;help(package=ouch)&amp;#39;.&amp;quot;&lt;/span&gt;)

[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &lt;span class=&quot;st&quot;&gt;&amp;quot;As ouch is continually evolving, you may want to cite its version number. Find it with &amp;#39;help(package=ouch)&amp;#39;.&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;attr&lt;/span&gt;(,&lt;span class=&quot;st&quot;&gt;&amp;quot;class&amp;quot;&lt;/span&gt;)
[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] &lt;span class=&quot;st&quot;&gt;&amp;quot;citationFooter&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(It seems like there should be a simple way to generate this automatically from the bibtex format, but I haven’t discovered it.)&lt;/p&gt;
&lt;h3 id=&quot;r-as-a-citation-tool&quot;&gt;R as a citation tool&lt;/h3&gt;
&lt;p&gt;I wrote an R function for the Crossref API in our rplos package. We should probably be formatting the output as an R bibentry, taking advantage of R’s understanding of citation structure. Then I could work automatic citation look-up into my posts using inline knitr calls, such as:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;crossref&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;10.1038/44766&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An alternate mechanism could read in a local bibtex file and drop in the correct entry in the desired format.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday Treebase Manuscript Writing</title>
	 <link href="/2012/03/19/monday-treebase-manuscript-writing.html"/>
   <updated>2012-03-19T20:21:09+00:00</updated>
   <id>/03/19/monday-treebase-manuscript-writing</id>
   <content type="html">&lt;p&gt;Catching up on unfinished work: today has been spent mostly working over my little treebase applications note. I’m still deciding what/how to present in terms of the meta-analysis section – looking at the classic trends on diversification rate statistics: &lt;span class=&quot;math&quot;&gt;\(\gamma\)&lt;/span&gt; statistic (Pybus &amp;amp; Harvey, 2000) and diversification rate, and dependence on number of taxa. Not sure how best to handle issues of data choice, quality, or to just average over the available data. Analyses along the lines of (McPeek &amp;amp; Brown, 2007), (Phillimore &amp;amp; Price, 2008). Hard to compress a full analysis in without a full paper. Draft sent to some folks, we’ll see.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ropensci/treeBASE/blob/master/inst/doc/treebase/treebase.md&quot;&gt;Code/graphs for this analysis.&lt;/a&gt; (re-run to create post, Weds).&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Pybus O and Harvey P (2000). “Testing Macro-Evolutionary Models Using Incomplete Molecular Phylogenies.” &lt;em&gt;Proceedings of The Royal Society B: Biological Sciences&lt;/em&gt;, &lt;strong&gt;267&lt;/strong&gt;. ISSN 0962-8452, &lt;a href=&quot;http://dx.doi.org/10.1098/rspb.2000.1278&quot;&gt;http://dx.doi.org/10.1098/rspb.2000.1278&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;McPeek M and Brown J (2007). “Clade Age And Not Diversification Rate Explains Species Richness Among Animal Taxa.” &lt;em&gt;The American Naturalist&lt;/em&gt;, &lt;strong&gt;169&lt;/strong&gt;. ISSN 0003-0147, &lt;a href=&quot;http://dx.doi.org/10.1086/512135&quot;&gt;http://dx.doi.org/10.1086/512135&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Phillimore A and Price T (2008). “Density-Dependent Cladogenesis in Birds.” &lt;em&gt;Plos Biology&lt;/em&gt;, &lt;strong&gt;6&lt;/strong&gt;. ISSN 1544-9173, &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pbio.0060071&quot;&gt;http://dx.doi.org/10.1371/journal.pbio.0060071&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>pdg-control Day 1 goals by training problem</title>
	 <link href="/2012/03/13/pdg-control-day-1-goals-by-training-problem.html"/>
   <updated>2012-03-13T21:23:56+00:00</updated>
   <id>/03/13/pdg-control-day-1-goals-by-training-problem</id>
   <content type="html">&lt;h2 id=&quot;training-problem-i-theme-1&quot;&gt;Training Problem I / Theme 1&lt;/h2&gt;
&lt;h3 id=&quot;policy-costs&quot;&gt;Policy costs&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;Functional forms of cost &amp;amp; Structure of the paper&lt;/li&gt;
&lt;li&gt;Comparability (view over all costs? view expected economic benefit?)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Visualizations&lt;/li&gt;
&lt;li&gt;Dan’s L1 norm story (vs stochastic, discrete time?)&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;transaction-fee-details-in-cts-time-deterministic&quot;&gt;Transaction Fee details in cts time, deterministic&lt;/h4&gt;
&lt;h3 id=&quot;advanced-problem-1&quot;&gt;Advanced problem 1&lt;/h3&gt;
&lt;p&gt;How many spatially differentiated policies are optimal 1. formulate bioeconomic model 2. modularity methods 3. comparison of GBR &amp;amp; Caribbean examples&lt;/p&gt;
&lt;h2 id=&quot;training-problem-2-theme-2&quot;&gt;Training Problem 2 / Theme 2&lt;/h2&gt;
&lt;p&gt;Synthesis paper Advanced problem II. 1. Functional forms for simulations, parameters, updating learning 2. Vet different forms of uncertainty (vocab) 3. Solve the simulations for model uncertainty: Adaptive management MPD, POMDP. 4. POMDP &amp;amp; Outline manuscript.&lt;/p&gt;
&lt;p&gt;advanced Prob II on Allee.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>pdg-control, Training Problem 2 update to group</title>
	 <link href="/2012/03/13/pdg-control-training-problem-2-update-to-group.html"/>
   <updated>2012-03-13T20:17:25+00:00</updated>
   <id>/03/13/pdg-control-training-problem-2-update-to-group</id>
   <content type="html">&lt;h3 id=&quot;intrinsic-stochasticity&quot;&gt;Intrinsic Stochasticity&lt;/h3&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ x_{t+1} = z_t f(x_t, h_t) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ max_{h_t} \textrm{E} \left( \sum_t \Pi(h_t, x_t) \delta^t \right) \]&lt;/span&gt; Measurement error $ m_t = z_m x_t $ Implementation error $ i_t = z_i h_t $&lt;/p&gt;
&lt;p&gt;Next: Uncertainty = we can learn and hence decrease the uncertainty. But state-space grows exponentially.&lt;/p&gt;
&lt;h3 id=&quot;parametric-uncertainty&quot;&gt;Parametric Uncertainty&lt;/h3&gt;
&lt;p&gt;Biological state equation &lt;span class=&quot;math&quot;&gt;\[ x_{t+1} = z_t f(x_t, h_t, a_t) P(a_t, \hat a_t, \sigma_t) \]&lt;/span&gt; Bayesian Learning state equations &lt;span class=&quot;math&quot;&gt;\[ \hat a_{t+1} = \textrm{Posterior}(a | x) = \frac{ L(x|a) \textrm{Prior}(a)}{\int  L(x|a) \textrm{Prior}(a) da } \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Myopic learning just evolves the original SDP problem over the stopping time, integrating over the fixed uncertainty, but updates only to the next time-step. It then implements the optimal next step, observes the system, updates the uncertainty, and then repeats the SDP over this updated uncertainty. This scales as &lt;span class=&quot;math&quot;&gt;\(n^2\)&lt;/span&gt; times the action-space, since the SDP need not consider possible belief states.&lt;/p&gt;
&lt;p&gt;Adaptive learning includes the belief states in the state dynamics. Even summarized as a distribution with two summary statistics, this involves a transition matrix of $n^6 $ entries for each possibility in the action-space.&lt;/p&gt;
&lt;h3 id=&quot;model-uncertainty&quot;&gt;Model Uncertainty&lt;/h3&gt;
&lt;p&gt;Parameters of the models are fixed, and becomes parameter uncertainty, Updating rule is &lt;span class=&quot;math&quot;&gt;\[ x_{t+1} = p_t f_1(x_t) + (1-p_t) f_2(x_t) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ p_{t+1} = \frac{p_t f_1(x_t)}{ p_t f_1(x_t) + (1-p_t) f_2(x_t) }\]&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;state-uncertainty&quot;&gt;State uncertainty&lt;/h3&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[f(x,h) P(x,\mu, \sigma) \]&lt;/span&gt; Belief MDP or POMDP.&lt;/p&gt;
&lt;h2 id=&quot;misc-notes&quot;&gt;Misc Notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Why is an Allee threshold different than the zero boundary in the other models? Stochastic rescue.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Viable vs optimal control (Doyen) (Martinet &amp;amp; Doyen, 2007)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Martinet V and Doyen L (2007). “Sustainability of an Economy With an Exhaustible Resource: A Viable Control Approach.” &lt;em&gt;Resource And Energy Economics&lt;/em&gt;, &lt;strong&gt;29&lt;/strong&gt;. ISSN 09287655, &lt;a href=&quot;http://dx.doi.org/10.1016/j.reseneeco.2006.03.003&quot;&gt;http://dx.doi.org/10.1016/j.reseneeco.2006.03.003&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Parameter uncertainty in stochastic control problems</title>
	 <link href="/2012/03/11/parameter-uncertainty-in-stochastic-control-problems-2.html"/>
   <updated>2012-03-11T23:52:23+00:00</updated>
   <id>/03/11/parameter-uncertainty-in-stochastic-control-problems-2</id>
   <content type="html">&lt;p&gt;Day 3 of my short-term visitor stay before the working group starts.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Wednesday&lt;/strong&gt;: Travel&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Thursday&lt;/strong&gt;: 8:45 Group Meeting: Paul, Michael, Lance, Dan, Jake, Carl.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Training problem II discussion – problem taxonomy: &lt;a href=&quot;www.carlboettiger.info/archives/3248&quot;&gt;stochastic&lt;/a&gt;, model uncertainty, parameter uncertainty, state uncertainty. Learning on uncertainty (passive/adaptive active management) in the uncertainty cases, all of which increase the parameter space. Evening with Paul’s students.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Friday&lt;/strong&gt; Writing up Training problem II with Jake, Michael. O’Meara meeting. Evening of old time fiddle and being locked out of NIMBioS.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Saturday&lt;/strong&gt; Catching up on reading. Writing down transition matrices to account for the learning is non-trivial.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Sunday&lt;/strong&gt; Writing Training problem II with Jake. Brief meeting with Eric &amp;amp; Paul.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;literature&quot;&gt;Literature&lt;/h2&gt;
&lt;p&gt;Still catching up on literature from 70s and 80s on optimal control with an uncertain parameter (uncertain model, or possibly, uncertain state).&lt;/p&gt;
&lt;p&gt;﻿Nicest walk through of different approaches in this collection is probably Ludwig &amp;amp; Walters, 1982, introducing the non-adaptive (“average equilibrium”) strategy, passive adaptive management (“Myopic Bayes”) and active adaptive management (also with Bayesian updating) approach (computed through policy iteration rather than value iteration (SDP)).&lt;/p&gt;
&lt;p&gt;(Ludwig &amp;amp; Hilborn, 1983) discuss difficulties in estimating stock abundance, but in the context of not knowing the parameter values, as opposed to inherent errors in the stock size.&lt;/p&gt;
&lt;p&gt;(Walters &amp;amp; Hilborn, 1976) give a nice walk-through in an example with a 3D state space (stock size, mean + covariance matrix for distribution of parameters), where the updating rules come from the regression formulae:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ a_n = a_{n-1} - \frac{\hat P_{n-1} x_n }{ \sigma^2 + x^T_n \hat P_{n-1} x_n} (a_{n-1}^T x_n - y_n ) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \hat P_n = \hat P_{n-1} - \frac{\hat P_{n-1} x_n x^T_n \hat P_{n-1} }{ \sigma^2 + \hat x^T_n P_{n-1} x_n} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Where $ ^2 $ is the regression error variance, and for the Ricker model,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[y_n = \ln \left(\frac{R_t}{S_{t-1}}\right) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ x_n = \left[ 1 \choose -S_{t-1} \right] \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ a_n = \left[ \alpha_t \choose \beta_t \right] \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Their annual review, (Walters &amp;amp; Hilborn, 1978), is a nice broad perspective without details for implementation. Surprised that ch 8 of Walters 86 textbook doesn’t get beyond the basics of Bellman’s value iteration. Mangel’s 1985 &lt;a href=&quot;http://www.amazon.com/Decision-uncertain-resource-Mathematics-Engineering/dp/0124687202/ref=ntt_at_ep_dpt_3&quot;&gt;edited volume&lt;/a&gt; seems to do a nice job (but the Google copy doesn’t quite cut it).&lt;/p&gt;
&lt;h2 id=&quot;two-armed-bandit-problem&quot;&gt;Two-armed bandit problem&lt;/h2&gt;
&lt;p&gt;Imagine machine 1 has payoff $ _1 $ with unknown probability $ p_1 $, machine 2 has payoff $ _2 $ with known probability $ p_2 $.&lt;/p&gt;
&lt;p&gt;Pr( $k $ wins in $m $ gambles $ | p_1 $ ) is &lt;code&gt;dbinom(k, m, p_1)&lt;/code&gt; and we need a good prior density $f(p_1) $ as &lt;code&gt;dbeta(x, alpha, beta)&lt;/code&gt; such that the posterior is also a beta density.&lt;/p&gt;
&lt;p&gt;The value-to-go in the SDP solution is a function of the distribution parameters of the prior,&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[J_n(\alpha,\beta) = \max\left( \alpha_2 p_2 , \alpha_1 \frac{\alpha}{\alpha + \beta}\right) \]&lt;/span&gt;,&lt;/p&gt;
&lt;p&gt;which just the integral over the posterior at that time, since no further information will be gained. We can compute the earlier steps from this.&lt;/p&gt;
&lt;h2 id=&quot;algorithmic-implementations&quot;&gt;Algorithmic implementations&lt;/h2&gt;
&lt;p&gt;Iadine’s &lt;a href=&quot;http://www.inra.fr/mia/T//MDPtoolbox/index_category.html&quot;&gt;Markov decision process toolbox for Matlab&lt;/a&gt; provides nice clean algorithmic specifications for Q-learning, value-iteration, policy-iteration, etc. Work will still be in specifying the transition matrices for these contrived state-spaces.&lt;/p&gt;
&lt;h2 id=&quot;confused&quot;&gt;Confused&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Is Myopic Bayes (passive adaptive management) differ from Q learning? (which “gives the expected utility of taking a given action in a given state and following a fixed policy thereafter.”) (i.e. do they agree for a given learning rate?) Both are value-iteration updates.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Why use policy iteration for the active adaptive management solution and value iteration (stochastic dynamic programming/Bellman equation) for Myopic Bayes?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;How are &lt;a href=&quot;http://en.wikipedia.org/wiki/Partially_observable_Markov_decision_process&quot;&gt;partially observable Markov decision processes&lt;/a&gt; different than just adding uncertainty to the observed state (a la Sethi et al, etc?) In particular, why not include observations as part of the state space?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;estimating-what-we-dont-know&quot;&gt;estimating what we don’t know&lt;/h4&gt;
&lt;p&gt;Random ideas that have come up in discussions. * How not to do this: estimate confidence intervals Harvey, 1997, (&lt;a href=&quot;http://en.wikipedia.org/wiki/Overconfidence_effect&quot;&gt;overconfidence effect&lt;/a&gt;) * Better: estimate largest reasonable value, smallest reasonable value. Order matters * Better yet? Bet on outcomes (prediction market?) Bueno de Mesquita (Bueno de Mesquita, 2010)&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Ludwig D and Hilborn R (1983). “Adaptive Probing Strategies For Age-Structured Fish Stocks.” &lt;em&gt;Canadian Journal of Fisheries And Aquatic Sciences&lt;/em&gt;, &lt;strong&gt;40&lt;/strong&gt;. ISSN 0706-652X, &lt;a href=&quot;http://dx.doi.org/10.1139/f83-075&quot;&gt;http://dx.doi.org/10.1139/f83-075&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Walters C and Hilborn R (1976). “Adaptive Control of Fishing Systems.” &lt;em&gt;Journal of The Fisheries Research Board of Canada&lt;/em&gt;, &lt;strong&gt;33&lt;/strong&gt;. ISSN 0015-296X, &lt;a href=&quot;http://dx.doi.org/10.1139/f76-017&quot;&gt;http://dx.doi.org/10.1139/f76-017&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Walters C and Hilborn R (1978). “Ecological Optimization And Adaptive Management.” &lt;em&gt;Annual Review of Ecology And Systematics&lt;/em&gt;, &lt;strong&gt;9&lt;/strong&gt;. ISSN 0066-4162, &lt;a href=&quot;http://dx.doi.org/10.1146/annurev.es.09.110178.001105&quot;&gt;http://dx.doi.org/10.1146/annurev.es.09.110178.001105&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bueno de Mesquita B (2010). “Judging Judgment.” &lt;em&gt;Critical Review&lt;/em&gt;, &lt;strong&gt;22&lt;/strong&gt;. ISSN 0891-3811, &lt;a href=&quot;http://dx.doi.org/10.1080/08913811.2010.541686&quot;&gt;http://dx.doi.org/10.1080/08913811.2010.541686&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Confidence in Judgment, Nigel Harvey, (1997) &lt;em&gt;Trends in Cognitive Sciences&lt;/em&gt;, &lt;strong&gt;1&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/S1364-6613(97)01014-0&quot;&gt;10.1016/S1364-6613(97)01014-0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Optimal Harvesting With Imprecise Parameter Estimates, D. Ludwig, C.J. Walters, (1982) &lt;em&gt;Ecological Modelling&lt;/em&gt;, &lt;strong&gt;14&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/0304-3800(82)90023-0&quot;&gt;10.1016/0304-3800(82)90023-0&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Alex Pfaff seminar, meeting</title>
	 <link href="/2012/03/09/alex-pfaff-seminar-meeting.html"/>
   <updated>2012-03-09T10:34:20+00:00</updated>
   <id>/03/09/alex-pfaff-seminar-meeting</id>
   <content type="html">&lt;p&gt;Notes from &lt;a href=&quot;http://www.duke.edu/~asp9/cv&amp;amp;bio.html&quot;&gt;Alex Pfaff&lt;/a&gt; talk at UTK (during my visit for pdg-control meeting).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;average impact vs differential impact – must compare against what would have happened to the area if unprotected (at current time/short-timescale, or in future?)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Proximity is not a good proxy of similarity (i.e. bc we protect steep slopes but farm the flat land nearby)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Instead use simple metrics available in GIS layers - distance from nearest road, etc.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Multi-use conservation works better. Why?&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;More likely to establish protection in higher-threat areas (i.e. nearer a city)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Possibly better enforcement when local interest has a stake (i.e. indigenous farmers reporting illegal logging)&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Matching areas subsets data. Why ignore some of the data instead of just regressions on all effects? Complexity of regressions, inaccuracies of those assumptions, lack of overlap in areas…&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(Joppa &amp;amp; Pfaff, 2010)&lt;/p&gt;
&lt;h3 id=&quot;breakfast-meeting&quot;&gt;Breakfast meeting&lt;/h3&gt;
&lt;p&gt;Discussion of ideas from &lt;a href=&quot;http://www.amazon.com/Expert-Political-Judgment-Good-Know/dp/0691123020&quot;&gt;Tetlock&lt;/a&gt; &lt;a href=&quot;http://www.amazon.com/The-Predictioneers-Game-ebook/dp/B002PXFYOC/ref=sr_1_3?ie=UTF8&amp;amp;qid=1331397537&amp;amp;sr=8-3&quot;&gt;Bruce Bueno de Mesquita&lt;/a&gt;, and &lt;a href=&quot;http://www.ted.com/talks/kevin_slavin_how_algorithms_shape_our_world.html&quot;&gt;Kevin Slavin&lt;/a&gt; math derived from the world to math shaping the world.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Joppa L and Pfaff A (2010). “Reassessing The Forest Impacts of Protection.” &lt;em&gt;Annals of The New York Academy of Sciences&lt;/em&gt;, &lt;strong&gt;1185&lt;/strong&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1749-6632.2009.05162.x&quot;&gt;http://dx.doi.org/10.1111/j.1749-6632.2009.05162.x&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Stability analysis on fished and unfished dynamics.  </title>
	 <link href="/2012/03/06/stability-analysis-on-fished-and-unfished-dynamics.html"/>
   <updated>2012-03-06T22:18:16+00:00</updated>
   <id>/03/06/stability-analysis-on-fished-and-unfished-dynamics</id>
   <content type="html">&lt;p&gt;In this example, we compute the distribution of the stability coefficients estimated from the fished and unfished simulations. Overall this shows little success in distinguishing between the stability of the fished and unfished populations – i.e. no hint that we are managing near an edge.&lt;/p&gt;
&lt;p&gt;(&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/stability.md&quot;&gt;Originally run and posted in github notebook&lt;/a&gt;, but cross posting for reference here since I had trouble recalling if this was filed with the control project or the warning signals project directory. Hence the backdating too.)&lt;/p&gt;
&lt;h3 id=&quot;model-setup&quot;&gt;Model setup&lt;/h3&gt;
&lt;p&gt;Clear the workspace and load package dependencies. &lt;code&gt;pdgControl&lt;/code&gt; is my implementation of these optimization methods and should be &lt;a href=&quot;https://github.com/cboettig/pdg_control&quot;&gt;installed from this repository&lt;/a&gt;, see README.&lt;/p&gt;
&lt;p&gt;Define basic parameters of the economic optimal control problem. We have a discrete economic discounting rate, and will solve the dynamic problem over a time window of 50 years. In the discrete implementation we do not inforce the boundary condition, but rather put a value on meeting it. The optimal solution may choose to not statisfy this boundary condition if the benefit outways this lost reward.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
delta &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;      &lt;span class=&quot;co&quot;&gt;# economic discounting rate&lt;/span&gt;
OptTime &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;# stopping time&lt;/span&gt;
reward &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;       &lt;span class=&quot;co&quot;&gt;# bonus for satisfying the boundary condition&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Use log-normal noise functions for growth noise, measurement error in the stock assessment, and implementation error, following the notation and definitions in &lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2004.11.005&quot;&gt;Sethi et al. (2005)&lt;/a&gt;. To begin, we will allow only noise in growth, as in Reed 1979.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
sigma_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# Noise in population growth&lt;/span&gt;
sigma_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;.     &lt;span class=&quot;co&quot;&gt;# noise in stock assessment measurement&lt;/span&gt;
sigma_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;.     &lt;span class=&quot;co&quot;&gt;# noise in implementation of the quota&lt;/span&gt;
z_g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_g) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_m) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;
z_i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() &lt;span class=&quot;kw&quot;&gt;rlnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,  &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, sigma_i) &lt;span class=&quot;co&quot;&gt;# mean 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Chose the state equation / population dynamics function to have alternate stable states. This is a Beverton-Holt like model with an Allee effect, a model based off of &lt;a href=&quot;http://dx.doi.org/10.1126/science.269.5227.1106&quot;&gt;Myers et al. (1995)&lt;/a&gt;. Note here we’re just loading the function from the package. The equilibrium value K is calculated explicitly from the model given this choice of parameters, as is the allee threshold. We’ll use the allee threshold as the final value &lt;code&gt;xT&lt;/code&gt;. We’ll start the model at the unharvested stochastic equilbrium size.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
f &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Myer_harvest
pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt;) 
p &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;pars &lt;span class=&quot;co&quot;&gt;# shorthand &lt;/span&gt;
K &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;( (p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] ) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
xT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sqrt&lt;/span&gt;( (p[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]) ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;p[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] ) /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# allee threshold&lt;/span&gt;
x0 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sigma_g ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; /&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We define a profit function with no stock effect for simplicity. Profit is just linear in price, with some operating cost (which prevents strategies that put out more fishing effort than required when trying to catch all fish.)&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
profit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;profit_harvest&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;price_fish =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, 
                         &lt;span class=&quot;dt&quot;&gt;cost_stock_effect =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,
                         &lt;span class=&quot;dt&quot;&gt;operating_cost =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We solve the system numerically on a discrete grid. We’ll consider all possible fish stocks between zero and twice the carrying capacity, and we’ll consider harvest levels at the same resolution.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
gridsize &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;   &lt;span class=&quot;co&quot;&gt;# gridsize (discretized population)&lt;/span&gt;
x_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;K, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; gridsize)  

h_grid &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x_grid  
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;the-perfect-policy&quot;&gt;The perfect policy&lt;/h3&gt;
&lt;p&gt;Having defined the problem, we are now ready to calculate the optimal policy by Bellman’s stochastic dynamic programming solution. We compute the stochastic transition matrices giving the probability that the stock goes from any value on the grid &lt;code&gt;x&lt;/code&gt; at time &lt;code&gt;t&lt;/code&gt; to any other value &lt;code&gt;y&lt;/code&gt; at time &lt;code&gt;t+1&lt;/code&gt;, for each possible harvest value. Then we use this to compute the optimal harvest rate at each time interval in the system, solving backwards by dynamic programming. The functions to do this are implemented in this package.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
SDP_Mat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;determine_SDP_matrix&lt;/span&gt;(f, pars, x_grid, h_grid, sigma_g )
opt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;find_dp_optim&lt;/span&gt;(SDP_Mat, x_grid, h_grid, OptTime, xT, 
                     profit, delta, &lt;span class=&quot;dt&quot;&gt;reward=&lt;/span&gt;reward)&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;the-implementation&quot;&gt;The implementation&lt;/h3&gt;
&lt;p&gt;Here we see how this policy performs over 100 replicates&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
sims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;lapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, function(i){
  &lt;span class=&quot;kw&quot;&gt;ForwardSimulate&lt;/span&gt;(f, pars, x_grid, h_grid, x0, opt$D, z_g, z_m, z_i)
})&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;outcome&quot;&gt;Outcome&lt;/h4&gt;
&lt;p&gt;We summarize the results of the simulation in a tidy data table.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(sims, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sims[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]))  

dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat)
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;st&quot;&gt;&amp;quot;L1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;) &lt;span class=&quot;co&quot;&gt;# names are nice&lt;/span&gt;





crashed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[time==&lt;span class=&quot;kw&quot;&gt;as.integer&lt;/span&gt;(OptTime&lt;span class=&quot;dv&quot;&gt;-1&lt;/span&gt;), fishstock &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;xT, by=reps]
&lt;span class=&quot;kw&quot;&gt;setkey&lt;/span&gt;(dt, reps)
&lt;span class=&quot;kw&quot;&gt;setkey&lt;/span&gt;(crashed, reps)
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[crashed]
&lt;span class=&quot;kw&quot;&gt;setnames&lt;/span&gt;(dt, &lt;span class=&quot;st&quot;&gt;&amp;quot;V1&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;crashed&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
p1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dt) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;opt$S, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;intercept=&lt;/span&gt;xT, &lt;span class=&quot;dt&quot;&gt;slope =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) 
p1 +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, unharvested, &lt;span class=&quot;dt&quot;&gt;group =&lt;/span&gt; reps), &lt;span class=&quot;dt&quot;&gt;alpha =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;lightblue&amp;quot;&lt;/span&gt;)  
&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7184/6814250662_15cb4bdb45_z.jpg&quot; alt=&quot;plot of chunk raw&quot; /&gt;&lt;figcaption&gt;plot of chunk raw&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;stability-calculations&quot;&gt;Stability calculations&lt;/h4&gt;
&lt;p&gt;Define a quick function to return just the parameters (or missing values if algorithm does not converge).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(earlywarning)
stability &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x){
  n &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x)
  x &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:(n&lt;span class=&quot;dv&quot;&gt;-2&lt;/span&gt;)]
  fit &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(x, &lt;span class=&quot;st&quot;&gt;&amp;quot;OU&amp;quot;&lt;/span&gt;)
  if(fit$convergence)
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.list&lt;/span&gt;(fit$pars)
  else
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.list&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(fig$pars)))
  out
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This function can then be applied to the variable in the data.table.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
fished =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[!crashed, &lt;span class=&quot;kw&quot;&gt;stability&lt;/span&gt;(fishstock), by=reps]
unfished =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[!crashed, &lt;span class=&quot;kw&quot;&gt;stability&lt;/span&gt;(unharvested), by=reps]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can then plot the resulting distribution of parameters. (Annoyingly we have to reformat the data to get it in tidy form again).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;



&lt;span class=&quot;co&quot;&gt;# tidy format, columns are variables: rep, variable, value, type&lt;/span&gt;





unfished_d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(unfished, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;unfished&amp;quot;&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;))
fished_d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(fished, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;fished&amp;quot;&lt;/span&gt;)), &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;))
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rbind&lt;/span&gt;(fished_d,unfished_d)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_boxplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(variable, value, &lt;span class=&quot;dt&quot;&gt;fill=&lt;/span&gt;type)) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7041/6960365083_4b41dd1f0a_z.jpg&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;



&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat, &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(value, variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_ribbon&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;ymax =&lt;/span&gt; ..density.., &lt;span class=&quot;dt&quot;&gt;ymin=&lt;/span&gt;-..density..),  &lt;span class=&quot;dt&quot;&gt;stat=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;density&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_grid&lt;/span&gt;(variable ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;type, &lt;span class=&quot;dt&quot;&gt;as.table=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;) &lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7053/6814251736_13895ef259_z.jpg&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-2&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;It’s not entirely evident that we have bimodal distributions from the boxplots. The beanplot (perversion of ggplot’s ribbon plot) makes this abundantly obvious.&lt;/p&gt;
&lt;p&gt;So what are those outliers doing?&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
weirdos &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;fished$reps[fished$Ro&amp;gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;]
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dt, !(reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;weirdos) )) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;reps), &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;7&lt;/span&gt;) +
&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;dat=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dt, (reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;weirdos)),
            &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, fishstock, &lt;span class=&quot;dt&quot;&gt;group=&lt;/span&gt;reps), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;purple&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;alpha=&lt;/span&gt;.&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7044/6814251888_80d660a566_z.jpg&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt;&lt;figcaption&gt;plot of chunk unnamed-chunk-3&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;If anything they are less variable, but not exceptionally so. Likely this is estimation error.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(dt[reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;weirdos,&lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt;(fishstock), &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;]$V1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code][1] 0.5116&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(dt[!(reps %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;weirdos),&lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt;(fishstock), &lt;span class=&quot;dt&quot;&gt;by=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;]$V1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code][1] 0.6191&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;Note that the populations do not show different coefficients of variation:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
f1 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[,&lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt;(fishstock)/&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(fishstock), by=reps]$V1
f2 &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;dt[,&lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt;(unharvested)/&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(unharvested), by=reps]$V1
&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(f2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code][1] 0.2306&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(f1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code][1] 0.2239&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tuesday</title>
	 <link href="/2012/03/06/tuesday-14.html"/>
   <updated>2012-03-06T19:58:20+00:00</updated>
   <id>/03/06/tuesday-14</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;Confirm travel plans for tomorrow&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/master/inst/examples/stability.md&quot;&gt;Stability analysis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;speeding up policycosts (extra loop) will probably require some C coding. Meanwhile could hard-code in the profit function to accelerate things.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;model averaging (mimic the fisheries science work &amp;amp; climate models that present distribution of outcomes over different models as the range of possibilities, lacking probabilities assigned to those models…).&lt;/li&gt;
&lt;li&gt;work on model estimation&lt;/li&gt;
&lt;li&gt;externalization: Note that we can tangle a file to create a .R script that can be used for externalization, rather than having to copy-paste the chunks. Nice if we want to source in rather than knit a file too.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;treebase&quot;&gt;Treebase&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Treebase manuscript writing…&lt;/li&gt;
&lt;li&gt;having to knit from R terminal, trouble with makefiles and knit script?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;need to use &lt;code&gt;require(methods)&lt;/code&gt; and &lt;code&gt;require(utils)&lt;/code&gt; separately?&lt;/p&gt;
&lt;h3 id=&quot;computing&quot;&gt;Computing&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Updated the pmc vignette successfully.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Kcachegrind comments to Hadley.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Are static pages the future?&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.yodi.me/blog/2011/10/24/github-custom-domain-with-octopress-in-ubuntu-oneiric-11-dot-10/&quot;&gt;Install/switch to Octopress?&lt;/a&gt; Pretty far from WP one-click installation… Software with large number of dependencies that are not packaged through the apt-get manager. Package conflicts that require manually reverting to older packages. Guide breaks over different Ubuntu versions. What aspect of this is simple and stable?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Ah, &lt;a href=&quot;http://news.ycombinator.com/item?id=3521426&quot;&gt;Jekyll bootstrap&lt;/a&gt;. Brilliant.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://groups.google.com/forum/?fromgroups#!topic/ggplot2-dev/tEF6Xou7yOA&quot;&gt;violin ggplots&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday</title>
	 <link href="/2012/03/05/monday-17.html"/>
   <updated>2012-03-05T16:17:34+00:00</updated>
   <id>/03/05/monday-17</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Trivial &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ed6063bdc65916b816f85078b27f7e2543b89e20/inst/examples/ppii.md&quot;&gt;example of a non-optimal but more robust policy&lt;/a&gt; by editing the optimal strategy directly. Note in particular that this outperforms the optimal strategy economically as well as ecologically (fewer crashed populations).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Running the &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/ed6063bdc65916b816f85078b27f7e2543b89e20/inst/examples/policycost.md&quot;&gt;policy-costs model with Beverton Holt&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/21ba4d913e1bf12fb641d3b54b2042fa9a32d498/inst/examples/policycost.md&quot;&gt;instead of the Myers function&lt;/a&gt; seems to give a clearer picture of a system responding to policy costs. The single-replicate picture probably captures this better than the policy/replicate visualizations..&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Setup flickr options (tags, description, title, etc) &lt;a href=&quot;https://raw.github.com/cboettig/pdg_control/ed6063bdc65916b816f85078b27f7e2543b89e20/inst/examples/policycost_knit_.md&quot;&gt;example&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Updated pmc to &lt;a href=&quot;https://github.com/cboettig/pmc/commit/f86ca7bfc74af7690c18e1f25184051295edfdf9&quot;&gt;handle errors&lt;/a&gt; (mostly from svd failures in geiger). Also updated vignette.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Failing to declare the XML namespace was causing my simple xml parsing example to fail.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
thing =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;xmlParse&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;getURL&lt;/span&gt;(&amp;amp;quot;https:&lt;span class=&quot;er&quot;&gt;//&lt;/span&gt;github.com/cboettig/pmc/commits/master.atom&amp;amp;quot;))
nds =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getNodeSet&lt;/span&gt;(thing, &lt;span class=&quot;st&quot;&gt;&amp;#39;//x:entry&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;namespaces =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;http://www.w3.org/2005/Atom&amp;#39;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(nds)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;success. thanks Gabe.&lt;/p&gt;
&lt;h2 id=&quot;log&quot;&gt;Log&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/ed6063bdc65916b816f85078b27f7e2543b89e20&quot;&gt;updated policycost with more plots&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/ed6063bdc65916b816f85078b27f7e2543b89e20&quot;&gt;ed6063bdc6&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/ed6063bdc65916b816f85078b27f7e2543b89e20&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored an hour ago&lt;/p&gt;
&lt;ol start=&quot;2&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/c5c76325ae6f080c8ffd78b75586f8bd4fb9c18b&quot;&gt;policy cost using BevHolt model&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/c5c76325ae6f080c8ffd78b75586f8bd4fb9c18b&quot;&gt;c5c76325ae&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/c5c76325ae6f080c8ffd78b75586f8bd4fb9c18b&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 3 hours ago&lt;/p&gt;
&lt;ol start=&quot;3&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/26394e8bfbc48b1ece85aac34dd54b7d6b3de7ab&quot;&gt;better notes and profit plots&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/26394e8bfbc48b1ece85aac34dd54b7d6b3de7ab&quot;&gt;26394e8bfb&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/26394e8bfbc48b1ece85aac34dd54b7d6b3de7ab&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 6 hours ago&lt;/p&gt;
&lt;ol start=&quot;4&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/f8daee5a6ef4ef2d8e10c9ae1fa5ffdb77c4dbad&quot;&gt;adding some additional plots to ppii&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/f8daee5a6ef4ef2d8e10c9ae1fa5ffdb77c4dbad&quot;&gt;f8daee5a6e&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/f8daee5a6ef4ef2d8e10c9ae1fa5ffdb77c4dbad&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 6 hours ago&lt;/p&gt;
&lt;ol start=&quot;5&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/d2636ccaead8fc7d7c2a8a3b92c792552d1b3dbf&quot;&gt;whoops, old parameter values were being used in simulation&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/d2636ccaead8fc7d7c2a8a3b92c792552d1b3dbf&quot;&gt;d2636ccaea&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/d2636ccaead8fc7d7c2a8a3b92c792552d1b3dbf&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 7 hours ago&lt;/p&gt;
&lt;ol start=&quot;6&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/21ba4d913e1bf12fb641d3b54b2042fa9a32d498&quot;&gt;policycost with P=.5 (intermediate size penalty)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/21ba4d913e1bf12fb641d3b54b2042fa9a32d498&quot;&gt;21ba4d913e&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/21ba4d913e1bf12fb641d3b54b2042fa9a32d498&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 7 hours ago&lt;/p&gt;
&lt;ol start=&quot;7&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/0f36a08be95dfeadb1900f0b1156d589221ebf08&quot;&gt;rule of thumb - 10% buffer&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/0f36a08be95dfeadb1900f0b1156d589221ebf08&quot;&gt;0f36a08be9&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/0f36a08be95dfeadb1900f0b1156d589221ebf08&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 7 hours ago&lt;/p&gt;
&lt;ol start=&quot;8&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/65b116eb201e79a541c259ef90b3bebb3fd149e4&quot;&gt;rule of thumb - harvest LESS not MORE than optimal&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/65b116eb201e79a541c259ef90b3bebb3fd149e4&quot;&gt;65b116eb20&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/65b116eb201e79a541c259ef90b3bebb3fd149e4&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 7 hours ago&lt;/p&gt;
&lt;ol start=&quot;9&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/408d6a92d19b7ac86bf9327d508cd2dc41812bef&quot;&gt;edit optimal policy by hand&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commit/408d6a92d19b7ac86bf9327d508cd2dc41812bef&quot;&gt;408d6a92d1&lt;/a&gt; &lt;a href=&quot;https://github.com/cboettig/pdg_control/tree/408d6a92d19b7ac86bf9327d508cd2dc41812bef&quot;&gt;Browse code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;cboettig&lt;/a&gt; authored 7 hours ago&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Thursday, Friday, Saturday</title>
	 <link href="/2012/03/03/thursday-friday-saturday.html"/>
   <updated>2012-03-03T22:21:36+00:00</updated>
   <id>/03/03/thursday-friday-saturday</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;forage fish seminar - Patrick and Jay with interesting stuff. Sounds like compensating benefits due to quality-response (larger fish) and stock effect (easier to find) will be more minor in this fishery, but demand response be compensating.&lt;/li&gt;
&lt;li&gt;knit hooks&lt;/li&gt;
&lt;li&gt;externalization example working (based on Reed.R). Still unsure how I feel about externalization vs fully literate code. Redundant typing is bad but isn’t that why common tasks are functionalized?&lt;/li&gt;
&lt;li&gt;pmc-0.5 posted to CRAN (use &lt;code&gt;check --as-cran&lt;/code&gt; in tests)&lt;/li&gt;
&lt;li&gt;R updated 2.14.2, packages updated.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;markdown notes of Reed vs extra noise&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;rules-of-thumb-that-are-not-robust&quot;&gt;Rules-of-thumb that are not robust&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/9ade7cffe7f50b58622062040344c9c1bde3f70f/inst/examples/precautionary.md&quot;&gt;Precautionary.md&lt;/a&gt; considers deriving an optimal policy by assuming that a threshold (in the RickerAllee model) is higher than it really is, which should lead to a conservative policy. This does lead to fewer crashes than the optimal model derived with the correct uncertainty, but, surprisingly, when faced with a higher noise than anticipated, this does not out-perform the optimal model.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://www.carlboettiger.info/wp-content/uploads/2012/03/wpid-unnamed-chunk-43.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;This &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/9ade7cffe7f50b58622062040344c9c1bde3f70f/inst/examples/perfect_policy_imperfect_implement.md&quot;&gt;pattern persists&lt;/a&gt; in the case where the additional noise comes from the implementation step, rather than as additional growth noise (a conservative estimate of the threshold point doesn’t help).&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://www.carlboettiger.info/wp-content/uploads/2012/03/wpid-unnamed-chunk-114.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/9ade7cffe7f50b58622062040344c9c1bde3f70f/inst/examples/ppii_movenoise.md&quot;&gt;Overestimating the growth noise&lt;/a&gt; cannot compensate for underestimating the implementation noise(?)&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://www.carlboettiger.info/wp-content/uploads/2012/03/wpid-unnamed-chunk-113.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;A basic example of the &lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/1d993d4eedbd90e51f853a3419ca86e757442848/inst/examples/wrong_noise.md&quot;&gt;impact of underestimating the growth noise&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://www.carlboettiger.info/wp-content/uploads/2012/03/wpid-winners_losers.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/commits/master&quot;&gt;Progress as told by the commit logs&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Warning Signals in Fish Collapse</title>
	 <link href="/2012/02/28/warning-signals-in-fish-collapse.html"/>
   <updated>2012-02-28T15:01:42+00:00</updated>
   <id>/02/28/warning-signals-in-fish-collapse</id>
   <content type="html">&lt;p&gt;Description: an example trying to detect early warning signals in data from fisheries collapses&lt;/p&gt;
&lt;p&gt;Set up markdown format and image uploads.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;render_wordpress&lt;/span&gt;()
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;imgur.key =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;getOption&lt;/span&gt;(&amp;amp;amp;quot;imgur&amp;amp;amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Load required libraries&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(warningsignals)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;load-the-data&quot;&gt;Load the data&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
scotia &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;read.csv&lt;/span&gt;(&amp;amp;amp;quot;../../data/rawdata/sau_scotia.csv&amp;amp;amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;visualize-data&quot;&gt;Visualize data&lt;/h2&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
dat_scotia &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(scotia, 
    &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &amp;amp;amp;quot;Year&amp;amp;amp;quot;)
p_scotia &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(dat_scotia, 
    &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Year, value, &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; variable)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_area&lt;/span&gt;()
&lt;span class=&quot;kw&quot;&gt;print&lt;/span&gt;(p_scotia)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7053/6793294944_74aa429a37_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;compute-some-indicators&quot;&gt;Compute some indicators&lt;/h2&gt;
&lt;p&gt;Define some indicators&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
window_var &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; (&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X)/&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)) {
    out &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;:(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;        &lt;/span&gt;windowsize), function(i) {
        &lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt;(X[(i +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;):(i +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;            &lt;/span&gt;windowsize)])
    })
    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(out)), out)
}

window_autocorr &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(X, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; (&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X)/&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)) {
    out &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;:(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;        &lt;/span&gt;windowsize), function(i) &lt;span class=&quot;kw&quot;&gt;acf&lt;/span&gt;(X[(i +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;):(i +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;windowsize)], 
        &lt;span class=&quot;dt&quot;&gt;lag.max =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;plot =&lt;/span&gt; F)$acf[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(out)), out)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reformat the data, uses data.table to perform computations over species&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(data.table)
fish &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dat_scotia, 
    Year &amp;amp;amp;lt; &lt;span class=&quot;dv&quot;&gt;1992&lt;/span&gt;))
tmp &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;species =&lt;/span&gt; fish$variable, 
    &lt;span class=&quot;dt&quot;&gt;Year =&lt;/span&gt; fish$Year, &lt;span class=&quot;dt&quot;&gt;Stock =&lt;/span&gt; fish$value, 
    &lt;span class=&quot;dt&quot;&gt;variance =&lt;/span&gt; fish[, &lt;span class=&quot;kw&quot;&gt;window_var&lt;/span&gt;(value), 
        &lt;span class=&quot;dt&quot;&gt;by =&lt;/span&gt; &amp;amp;amp;quot;variable&amp;amp;amp;quot;]$V1, 
    &lt;span class=&quot;dt&quot;&gt;acor =&lt;/span&gt; fish[, &lt;span class=&quot;kw&quot;&gt;window_autocorr&lt;/span&gt;(value), 
        &lt;span class=&quot;dt&quot;&gt;by =&lt;/span&gt; &amp;amp;amp;quot;variable&amp;amp;amp;quot;]$V1)

dat &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(tmp, 
    &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&amp;amp;amp;quot;Year&amp;amp;amp;quot;, &amp;amp;amp;quot;species&amp;amp;amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Cod are approaching a crash, but lobster are going strong, but both seem to show the same pattern.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dat, 
    species %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&amp;amp;amp;quot;Atlantic.cod&amp;amp;amp;quot;))) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Year, 
        value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_grid&lt;/span&gt;(variable ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;species, &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &amp;amp;amp;quot;free_y&amp;amp;amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7184/6793295294_1396a8d33d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(dat, 
    species %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&amp;amp;amp;quot;American.lobster&amp;amp;amp;quot;))) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_point&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Year, 
        value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_grid&lt;/span&gt;(variable ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;species, &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &amp;amp;amp;quot;free_y&amp;amp;amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7178/6793296188_f94e773654_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Note the indicator patterns vary widly and rather arbitrarily among species&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
dt &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(dat_scotia)
indicator &amp;amp;amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(dt[, 
    &lt;span class=&quot;kw&quot;&gt;window_var&lt;/span&gt;(value), 
    &lt;span class=&quot;dt&quot;&gt;by =&lt;/span&gt; &amp;amp;amp;quot;variable&amp;amp;amp;quot;], &lt;span class=&quot;dt&quot;&gt;Year =&lt;/span&gt; dat_scotia$Year)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(indicator) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(Year, 
        V1)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~variable, 
    &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &amp;amp;amp;quot;free_y&amp;amp;amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7050/6793296484_669a826cc7_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>Knitr with flickr and wordpress</title>
	 <link href="/2012/02/28/knitr-with-flickr-and-wordpress.html"/>
   <updated>2012-02-28T14:59:21+00:00</updated>
   <id>/02/28/knitr-with-flickr-and-wordpress</id>
   <content type="html">&lt;p&gt;It’s amazing how nice it is to work with well-developed software. It took me about 20 minutes to extend Yuhui’s interface to allow me to upload images through flickr instead of imgur, and embed them into a wordpress blog using the shortcode from the flickr gallery plugin.&lt;/p&gt;
&lt;p&gt;To do this, I just modified the hook used by the markdown format. First, I define a quick R function that uploads to flickr and returns the flickr identifier number. For the moment this is just calling&lt;a href=&quot;http://search.cpan.org/~cpb/Flickr-Upload-1.32/flickr_upload&quot;&gt;a command-line flickr uploader&lt;/a&gt;, though it should be straight-forward to replace this with something like &lt;a href=&quot;http://www.omegahat.org/Rflickr/&quot;&gt;Rflickr&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
flickr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(file, 
    &lt;span class=&quot;dt&quot;&gt;tags =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;description =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;public =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;) {
    out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;system&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;flickr_upload --tag=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        tags, &lt;span class=&quot;st&quot;&gt;&amp;quot; &lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt; --description=&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        description, &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;st&quot;&gt;&amp;quot; --public &amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;as.integer&lt;/span&gt;(public), 
        file), &lt;span class=&quot;dt&quot;&gt;intern =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;.*ids=(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;d+)&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;1&amp;quot;&lt;/span&gt;, out[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;])
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once we have such an uploading function, it’s super simple to wrap into knitr. I let my function be triggered by the same “upload” option that Yuhui introduced for imgur, but instead call the flickr function above,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
.flickr.url =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) {
    file =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(x, &lt;span class=&quot;dt&quot;&gt;collapse =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;.&amp;quot;&lt;/span&gt;)
    if (opts_knit$&lt;span class=&quot;kw&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;upload&amp;quot;&lt;/span&gt;)) {
        &lt;span class=&quot;kw&quot;&gt;flickr&lt;/span&gt;(file)
    } else file
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Lastly I define the function hook to run the upload and return the shortcode:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
hook_plot_flickr =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
    options) {
    &lt;span class=&quot;kw&quot;&gt;sprintf&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[flickr]%s[/flickr]&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;kw&quot;&gt;.flickr.url&lt;/span&gt;(x))
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I can then define a wordpress rendering environment by mapping the hooks to my choices.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
render_wordpress &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function() {
    &lt;span class=&quot;kw&quot;&gt;render_gfm&lt;/span&gt;()
    &lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;width =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;)
    opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
    output =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[ code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[ /code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    warning =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[ code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[ /code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    message =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[ code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[ /code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    inline =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;lt;pre&amp;gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;lt;/pre&amp;gt;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    error =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[ code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[ /code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    source =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, 
        options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[ code lang=&amp;#39;r&amp;#39;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[ /code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;)
    knit_hooks$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;output =&lt;/span&gt; output, 
        &lt;span class=&quot;dt&quot;&gt;warning =&lt;/span&gt; warning, 
        &lt;span class=&quot;dt&quot;&gt;message =&lt;/span&gt; message, 
        &lt;span class=&quot;dt&quot;&gt;inline =&lt;/span&gt; inline, 
        &lt;span class=&quot;dt&quot;&gt;error =&lt;/span&gt; error, 
        &lt;span class=&quot;dt&quot;&gt;source =&lt;/span&gt; source, 
        &lt;span class=&quot;dt&quot;&gt;plot =&lt;/span&gt; hook_plot_flickr)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the rendering sets a custom 30 character width that fits my theme better. Now simply adding the call to render_wordpress in the header of my documents will render this in wordpress format. If you’re reading this on wordpress, it was already in the header. Any figures will embed as flickr shortcode:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;qplot&lt;/span&gt;(hp, mpg, 
    &lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; mtcars) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_smooth&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7184/6793394960_94c5a5b017_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;It would be nicer to have built this around flickR, and provide the urls so that the image can be used without the wordpress flickr shortcode. But for now, the real point is that it’s intuitive to extend knitr to this very customized format, specific to my platform, my plugins, and my shortcodes, with minimal effort. All thanks to Yuhui’s very nice implementation of knitr.&lt;/p&gt;
&lt;h3 id=&quot;addendum&quot;&gt;Addendum&lt;/h3&gt;
&lt;p&gt;If we’d rather upload the images to wordpress itself (seems sensible), this is also straight forward thanks to Duncan’s RWordPress package on &lt;a href=&quot;http://www.omegahat.org/&quot;&gt;Omegahat&lt;/a&gt;. Writing the hooks would look like this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
.wordpress.url =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) {
  &lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(RWordPress)
  file =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(x, &lt;span class=&quot;dt&quot;&gt;collapse =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;)
  if (opts_knit$&lt;span class=&quot;kw&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;upload&amp;#39;&lt;/span&gt;)) {
            &lt;span class=&quot;kw&quot;&gt;fileUpload&lt;/span&gt;(file)$url
      } else file
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that RWordPress will look for the login credentials defined in “options”, i.e. put something like this in your .Rprofile.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;WordPressLogin =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;userid =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;password&amp;quot;&lt;/span&gt;),
    &lt;span class=&quot;dt&quot;&gt;WordPressURL =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.yourdomain.com/xmlrpc.php&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We then just define a hook based on the hook_plot_html that uses the Wordpress URL.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
.hook_plot_wordpress =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x, options) {
a =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;options$fig.align
  &lt;span class=&quot;kw&quot;&gt;sprintf&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;&amp;lt;img src=&amp;quot;%s&amp;quot; class=&amp;quot;plot&amp;quot; %s/&amp;gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;.wordpress.url&lt;/span&gt;(x),
          switch(a,
                 &lt;span class=&quot;dt&quot;&gt;default =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,
                 &lt;span class=&quot;dt&quot;&gt;left =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;style=&amp;quot;float: left&amp;quot;&amp;#39;&lt;/span&gt;,
                 &lt;span class=&quot;dt&quot;&gt;right =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;style=&amp;quot;float: right&amp;quot;&amp;#39;&lt;/span&gt;,
                 &lt;span class=&quot;dt&quot;&gt;center =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;style=&amp;quot;margin: auto; display: block&amp;quot;&amp;#39;&lt;/span&gt;))
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Put this hook in the render function instead/or as an option, and we’re good to go.&lt;/p&gt;
&lt;h3 id=&quot;addendum-ii&quot;&gt;Addendum II&lt;/h3&gt;
&lt;p&gt;knitr now supports additional uploading protocols out of the box. For instance, uploading to wordpress just requires a call to knitr options specifying the upload function:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload.fun =&lt;/span&gt; function(file){
   &lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RWordPress) 
   &lt;span class=&quot;kw&quot;&gt;uploadFile&lt;/span&gt;(file)$url
  })&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We could likewise specify the flickr function there, etc. Note that I don’t need to worry about the “paste” or “else” conditions either, that’s all handled automatically now. Just specify an upload function and we’re good to go.&lt;/p&gt;
&lt;p&gt;Minor you (I) might think the one-line namespace call could be used instead of loading the library:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
RWordPress::&lt;span class=&quot;kw&quot;&gt;uploadFile&lt;/span&gt;(file)$url&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but it appears you’d be wrong.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Using knitr and RWordPress to publish results directly from R</title>
	 <link href="/2012/02/27/using-knitr-and-rwordpress-to-publish-results-directly-from-r-6.html"/>
   <updated>2012-02-27T18:31:51+00:00</updated>
   <id>/02/27/using-knitr-and-rwordpress-to-publish-results-directly-from-r-6</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: The original &lt;a href=&quot;https://raw.github.com/cboettig/sandbox/b71f7f359164b1ff3b9609d5ded2324fafdc14b6/wordpress_knit_.md&quot;&gt;source file&lt;/a&gt; for this post, generates &lt;a href=&quot;https://raw.github.com/cboettig/sandbox/b71f7f359164b1ff3b9609d5ded2324fafdc14b6/wordpress.md&quot;&gt;this output file&lt;/a&gt; formatted for wordpress. The source file has been knitted for markdown formatting so this post displays in Jekyll. The rendered post relies on Wordpress shortcodes, as raw the output file shows above. The &lt;a href=&quot;https://github.com/cboettig/sandbox/blob/b71f7f359164b1ff3b9609d5ded2324fafdc14b6/wordpress.md&quot;&gt;markdown-based rendering&lt;/a&gt; shows the images and the shortcodes wordpress uses for codeblocks.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;One of the great things about knitr is its flexibility. Here I set knitr up to publish to Wordpress. I will then use RWordPress to publish the output automatically.&lt;/p&gt;
&lt;p&gt;I will base the wordpress format on the github-flavored markdown format. I change the markup for output and source-code to use the nice codeblocks provided by the syntax highlighter plugin. I also specify that images should use the html markup instead of github markup, and I will take advantage of knitr support for imgur to upload and host the image files automatically.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;render_gfm&lt;/span&gt;()
&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;width =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;)
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;upload =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
knit_hooks$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;output =&lt;/span&gt; function(x, options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, x, 
    &lt;span class=&quot;st&quot;&gt;&amp;quot;[/code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;source =&lt;/span&gt; function(x, options) &lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;[code lang=&amp;#39;r&amp;#39;]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, 
    x, &lt;span class=&quot;st&quot;&gt;&amp;quot;[/code]&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;sep =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;plot =&lt;/span&gt; hook_plot_html)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we write some code chunks in this markdown file:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;## a simple calculator
&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;## boring random numbers
&lt;span class=&quot;kw&quot;&gt;set.seed&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;123&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] -0.56048 -0.23018  1.55871  0.07051  0.12929&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can also produce plots which are uploaded to imgur.com:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;qplot&lt;/span&gt;(hp, mpg, &lt;span class=&quot;dt&quot;&gt;data =&lt;/span&gt; mtcars) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_smooth&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;ggpcp&lt;/span&gt;(mtcars) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can then post the result using RWordPress:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(RWordPress)
text =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paste&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;readLines&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;wordpress.md&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;collapse =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;)
title =&lt;span class=&quot;st&quot;&gt; &amp;quot;Using knitr and RWordPress to publish results directly from R&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;newPost&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;description =&lt;/span&gt; text, &lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; title), &lt;span class=&quot;dt&quot;&gt;publish =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Above we specify &lt;code&gt;publish = FALSE&lt;/code&gt; which will make the post upload as a draft where we can preview it. To publish directly we could omit that command. Giving a title is intuitive. Note that we have to read the text in and substitue newline characters for line-breaks.&lt;/p&gt;
&lt;p&gt;Note that this requires setting the login options securely in .Rprofile, for example:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;WordpressLogin =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;userid =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;password&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;WordpressURL =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.yourdomain.com/xmlrpc.php&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It would be nice to use the uploadFile function from RWordPress to host the images, but that seems to be giving me trouble at the moment.&lt;/p&gt;
&lt;h3 id=&quot;addendum&quot;&gt;Addendum&lt;/h3&gt;
&lt;p&gt;I’ve now figured out image uploading from RWordPress and also Rflickr. Currently some &lt;a href=&quot;http://www.carlboettiger.info/archives/3988&quot;&gt;notes here&lt;/a&gt; (see Addendum II), though I will try to do a proper writeup on these methods soon.&lt;/p&gt;
&lt;h3 id=&quot;addendum-ii&quot;&gt;Addendum II&lt;/h3&gt;
&lt;p&gt;RWordPress (and Rflickr) can be installed from the &lt;a href=&quot;http://www.omegahat.org/&quot;&gt;omegahat&lt;/a&gt; repository:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;install.packages&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;RWordPress&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;repos=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;http://www.omegahat.org/R&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday</title>
	 <link href="/2012/02/27/monday-14.html"/>
   <updated>2012-02-27T15:20:04+00:00</updated>
   <id>/02/27/monday-14</id>
   <content type="html">&lt;h2 id=&quot;warning-signals&quot;&gt;Warning Signals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Added resulting indicator distributions on &lt;a href=&quot;http://www.carlboettiger.info/archives/3905&quot;&gt;finer sampling results&lt;/a&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Re-running now excluding the final dive (population below 300).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7190/6792582932_d97e70d57f_o.png&quot; /&gt; &lt;img src=&quot;http://farm8.staticflickr.com/7054/6792575114_6393d6bf07_o.png&quot; /&gt;&lt;/p&gt;
&lt;h2 id=&quot;treebase&quot;&gt;Treebase&lt;/h2&gt;
&lt;p&gt;working on manuscript. A few examples using the improved meta-data queries:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7058/6791026230_1ab711cc7e_o.png&quot; alt=&quot;Treebase growth by year and journal&quot; /&gt; &lt;img src=&quot;http://farm8.staticflickr.com/7037/6937141295_ef0e6986fe_o.png&quot; alt=&quot;Exponential growth in the size of trees on treebase&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;computing-configuration&quot;&gt;Computing configuration&lt;/h3&gt;
&lt;h4 id=&quot;vim-and-r&quot;&gt;vim and R&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.lepem.ufc.br/jaa/vim-r-plugin.html&quot;&gt;install vim-r-plugin&lt;/a&gt;. Download, then run &lt;code&gt;vim-addons install r-plugin&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.vim.org/scripts/script.php?script_id=2711&quot;&gt;install screen plugin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;add to .vimrc:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;set nocompatible
syntax enable
filetype plugin on
filetype indent on
let vimrplugin_underscore = 0&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.lepem.ufc.br/jaa/r-plugin.html#r-plugin-use&quot;&gt;learn some key bindings&lt;/a&gt; Really to launch, and &lt;/li&gt;
&lt;li&gt;Also see &lt;a href=&quot;http://www.r-bloggers.com/r-with-vim/&quot;&gt;this post&lt;/a&gt; for configuration with vim-latex-suite.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;logistics&quot;&gt;Logistics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://lyra.berkeley.edu/CDIConf/registration.html&quot;&gt;From Data to Knowledge Conference&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Visuals for Communicating Uncertainty </title>
	 <link href="/2012/02/24/visuals-for-communicating-uncertainty.html"/>
   <updated>2012-02-24T20:20:16+00:00</updated>
   <id>/02/24/visuals-for-communicating-uncertainty</id>
   <content type="html">&lt;p&gt;Visiting the question of communicating uncertainty in Marissa’s lab meeting, focusing on this excellent Science article (Spiegelhalter &lt;em&gt;et. al.&lt;/em&gt; 2011). Noam and Jamie are leading the discussion, and suggested we pick a few favorite examples. None on my list really address the challenge of communicating uncertainty directly, though the first one probably comes closest. I think they do highlight some of the potential and the challenges of good data visualization though, which is certainly one of the essential building blocks to visual communication of uncertainty.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.nytimes.com/interactive/2010/02/02/us/politics/20100201-budget-porcupine-graphic.html&quot;&gt;Porcupine plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://datajournalism.stanford.edu&quot;&gt;Data journalism video from Stanford&lt;/a&gt;, the best introduction I’ve seen, which hits upon some of the best-known examples.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://flowingdata.com/2011/12/01/shan-carter-on-data-storytelling&quot;&gt;Success and failure of data storytelling&lt;/a&gt; Shan Carter, NY Times visualizations expert, gives a thought-provoking talk that leaves me wondering if we are asking too much of the visualization.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.omegahat.org/SVGAnnotation/tests/examples.html&quot;&gt;Animated graphics in R by SVG&lt;/a&gt;, because easy and platform-independent interactive graphics are essential.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://had.co.nz/ggplot2/&quot;&gt;ggplot2&lt;/a&gt;, because it’s not a revolution until it’s democratized.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Tufte’s &lt;a href=&quot;http://www.amazon.com/Visual-Display-Quantitative-Information/dp/0961392142&quot;&gt;first book&lt;/a&gt;, which sits above my desk.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-missing-second-block&quot;&gt;the missing second block&lt;/h2&gt;
&lt;p&gt;(Spiegelhalter &lt;em&gt;et. al.&lt;/em&gt; 2011) does a less excellent job addressing the some of the more basic problems in communicating uncertainty (though the conditional probability example comes close). Uncertainty can be immensely counter-intuitive, as Mlodinow illustrates in one of my favorite &lt;a href=&quot;http://www.amazon.com/Drunkards-Walk-Randomness-Rules-Lives/dp/0375424040&quot;&gt;popular non-fiction books&lt;/a&gt;. He doesn’t tackle visuals as a way of improving our intuition on the topic. I feel a proper treatment of the topic would start with some of the easily demonstrated fallacies around uncertainty Mlodinow discusses, and illustrate if and when visualizations can improve our accuracy.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Spiegelhalter D, Pearson M and Short I (2011). “Visualizing Uncertainty About The Future.” &lt;em&gt;Science&lt;/em&gt;, &lt;strong&gt;333&lt;/strong&gt;. ISSN 0036-8075, &lt;a href=&quot;http://dx.doi.org/10.1126/science.1191181&quot;&gt;http://dx.doi.org/10.1126/science.1191181&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>ESA 2012 Abstract</title>
	 <link href="/2012/02/23/esa-2012-abstract.html"/>
   <updated>2012-02-23T21:44:16+00:00</updated>
   <id>/02/23/esa-2012-abstract</id>
   <content type="html">&lt;p&gt;Submitted my abstract for ESA 2012, in Portland.  Getting a title and abstract pinned down about seven months in advance is itself an exercise in decision making under uncertainty. I’ve added some further background below.&lt;/p&gt;
&lt;h5 id=&quot;unknown-unknowns-management-strategies-under-uncertainty-alternate-stable-states&quot;&gt;Unknown unknowns: management strategies under uncertainty &amp;amp; alternate stable states&lt;/h5&gt;
&lt;h6 id=&quot;backgroundquestionmethods&quot;&gt;Background/Question/Methods&lt;/h6&gt;
&lt;p&gt;The effective management of natural resource populations such as fisheries or forests and the ecosystems in which they are embedded is a central goal of much work in both theoretical and applied ecological research. Management decisions must be made in an uncertain world, coping with errors in data, uncertainty in model parameters and even the choice of models being used. Advances in areas such risk management, optimization under uncertainty, and adaptive management methods have offered a way forward in spite of such uncertainty. We have only to admit what we don’t know, and make the best decision based on the information at hand.&lt;/p&gt;
&lt;p&gt;The realization that such complex systems can contain tipping points – thresholds at which the system can transition into a less desirable state rapidly and with little warning – poses a fundamental challenge to these approaches.  Such approaches require that we know what we don’t know: we don’t use the best guess of a parameter, instead, we have a distribution of possible values it may take.  As recent events of the economy have illustrated, estimating the distribution isn’t easy; and for complex systems with alternate stable states, a little bit more uncertainty can make a big difference.  How then, do we make the best decision based on the information available without exposing the system to these sudden crashes?  How do we handle that uncertainty we just cannot parameterize – the unknown unknowns?&lt;/p&gt;
&lt;p&gt;We combine methods from optimal control and stochastic dynamic programming with methods from ecological resilience and early warning signals to study both simulated and empirical examples of these systems.&lt;/p&gt;
&lt;h6 id=&quot;resultsconclusions&quot;&gt;Results/Conclusions&lt;/h6&gt;
&lt;p&gt;We begin with two examples that illustrate these challenges.  The first highlights the danger of handling only the risks we know how to handle.  The second illustrates the difficulty of implementing resilience-based concepts in the place of risk-based management.  We then present our mathematical framework for bridging these approaches on these systems &amp;amp; discuss the successes and obstacles to this united approach.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The literature has done a better job enunciating this question than tackling it. ((Knight’s 1921 text on &lt;a href=&quot;http://www.econlib.org/library/Knight/knRUP.html&quot;&gt;Risk, Uncertainty &amp;amp; Profit&lt;/a&gt; would be a more erudite citation than Rumsfeld’s memorable phrase.)) The TREE review, (Polasky &lt;em&gt;et. al.&lt;/em&gt; 2011), provides a nice introduction to the problem, identifying decision-theoretic and thresholds/resilience approaches, though gets little farther than the opinion piece suggesting the need for this work (Fischer &lt;em&gt;et. al.&lt;/em&gt; 2009) two years prior.&lt;/p&gt;
&lt;p&gt;A nice if intuitive result (Peterson et al 2003) ((﻿Peterson, G., &amp;amp; Carpenter, S. (2003). Uncertainty and the management of multi-state ecosystems: an apparently rational route to collapse. Ecology, 84(6), 1403-1411. &lt;a href=&quot;http://www.jstor.org/stable/3107958&quot; class=&quot;uri&quot;&gt;http://www.jstor.org/stable/3107958&lt;/a&gt;)) shows optimization that misses the alternate stable state description performing rather poorly, similar to my examples. A more illuminating result is (Brozović &amp;amp; Schlenker, 2011), which provides an explicit example where the outcome of optimization in a system with alternate stable states depends entirely on small differences in noise regime. A more general understanding of when stochastic optimization will give results that are sensitive to assumptions of the noise would be useful. Any takers for integrating over the uncertainty in the uncertainty?&lt;/p&gt;
&lt;p&gt;A more immediate problem is the computational limitations of decision-theoretic approaches in handling full system complexity. The curse of dimensionality is exacerbated by the need for higher dimensions to model parameter uncertainty as well as dynamic state variables, where adaptive management can learn actively or passively to update this uncertainty.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Polasky S, Carpenter S, Folke C and Keeler B (2011). “Decision-Making Under Great Uncertainty: Environmental Management in an Era of Global Change.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;26&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.04.007&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.04.007&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Fischer J, Peterson G, Gardner T, Gordon L, Fazey I, Elmqvist T, Felton A, Folke C and Dovers S (2009). “Integrating Resilience Thinking And Optimisation For Conservation.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;24&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2009.03.020&quot;&gt;http://dx.doi.org/10.1016/j.tree.2009.03.020&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brozović N and Schlenker W (2011). “Optimal Management of an Ecosystem With an Unknown Threshold.” &lt;em&gt;Ecological Economics&lt;/em&gt;, &lt;strong&gt;70&lt;/strong&gt;. ISSN 09218009, &lt;a href=&quot;http://dx.doi.org/10.1016/j.ecolecon.2010.10.001&quot;&gt;http://dx.doi.org/10.1016/j.ecolecon.2010.10.001&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Stochastic optimization </title>
	 <link href="/2012/02/22/stochastic-optimization.html"/>
   <updated>2012-02-22T21:44:35+00:00</updated>
   <id>/02/22/stochastic-optimization</id>
   <content type="html">&lt;h2 id=&quot;surprising-heterogeneity-of-profit-distribution-under-a-simple-beverton-holt-model&quot;&gt;Surprising heterogeneity of profit distribution under a simple Beverton-Holt model&lt;/h2&gt;
&lt;p&gt;Usually I expect the alternate stable state dynamics to be the ones producing bimodal distribution of profit:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7191/6922209705_314cc4cdd5_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;The pattern is driven by a costs to harvesting making harvest unprofitable most of the time, while chance fluctuations push some populations across this threshold again and again. The ensemble variation in harvest is suggestive of this:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7181/6776095432_83e90b3658_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;but we really see what is going on when we color-code the population dynamics of the most profitable and least profitable realizations of the stochastic dynamics:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7202/6922237885_5aa369901f_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Maximizing expected profit when it means 1:4 chance of no profit might not be, well, optimal? Haven’t seen this kind of dynamic before.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Wednesday</title>
	 <link href="/2012/02/22/wednesday-12.html"/>
   <updated>2012-02-22T20:20:07+00:00</updated>
   <id>/02/22/wednesday-12</id>
   <content type="html">&lt;ul&gt;
&lt;li&gt;&lt;p&gt;CC0 license approved for use on CRAN&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Update my DESCRIPTION files, use the new Author@R convention.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rebecca’s comment on mntd in comparative methods&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This lab notebook gets &lt;a href=&quot;http://academia.stackexchange.com/questions/83/good-practices-for-organizing-notes&quot;&gt;mentioned&lt;/a&gt; for good practices in academic workflow.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Working on treebase paper&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ESA registration&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Lecture notes for tomorrow&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;forage fish writing&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;p&gt;Reading over (Munch &lt;em&gt;et. al.&lt;/em&gt; 2005). I think this is a very nice treatment, a lot clearer I think than lots of other stuff I’ve looked at (thanks Tim &amp;amp; Jim!). I think it highlights one of the difficulties at the boundary between our sections though.&lt;/p&gt;
&lt;p&gt;I did notice they introduce predator density as a parameter, &lt;em&gt;μ&lt;/em&gt;&lt;sub&gt;&lt;em&gt;T&lt;/em&gt;&lt;/sub&gt;, rather than as a function of forage fish density (N). They &lt;em&gt;assume&lt;/em&gt; top-down effects aren’t density dependent (by assuming predator pop doesn’t grow when prey grows, though they could have added N in elsewhere in the T equation instead, they don’t). Since they’ve assumed top-down mechanisms are density independent, they can’t get an equilibrium size determined by top-down effects alone, equation (4) i.e. the pattern of control they report “finding” appears to me to be the pattern they “assumed” when they chose to make T independent of N. (Maybe I’m missing something but I feel I keep running into this kind of recursive argument).&lt;/p&gt;
&lt;p&gt;Greatly enjoyed reading &lt;a href=&quot;http://dx.doi.org/10.1579/0044-7447%282007%2936%5B304%3AIAMHTS%5D2.0.CO%3B2&quot;&gt;Walters 2007&lt;/a&gt;. The example of predictive disagreement between the two equally good-fitting shrimp-harvest models is a fantastic example, and quite evocative of what Steve Pacala talks about in the historic fits on the climate models.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;p&gt;Munch S, Snover M, Watters G and Mangel M (2005). “A Unified Treatment of Top-Down And Bottom-up Control of Reproduction in Populations.” &lt;em&gt;Ecology Letters&lt;/em&gt;, &lt;strong&gt;8&lt;/strong&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1461-0248.2005.00766.x&quot; class=&quot;uri&quot;&gt;http://dx.doi.org/10.1111/j.1461-0248.2005.00766.x&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tues: Research, seminar (managing for resilience), talk (future of libraries), etc...</title>
	 <link href="/2012/02/21/tues-research-seminar-managing-for-resilience-talk-future-of-libraries-etc.html"/>
   <updated>2012-02-21T19:20:40+00:00</updated>
   <id>/02/21/tues-research-seminar-managing-for-resilience-talk-future-of-libraries-etc</id>
   <content type="html">&lt;h2 id=&quot;research-stuff&quot;&gt;research Stuff&lt;/h2&gt;
&lt;h4 id=&quot;warningsignals&quot;&gt;warningsignals&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Exceeded wall time on NERSC, readjusting and running this again.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;treebase&quot;&gt;treebase&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Working on treebase manuscript.&lt;/li&gt;
&lt;li&gt;Treebase Rewrote handling of server errors, added pauses to reduce load, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;pmc&quot;&gt;PMC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A user pointed out my support for “white” model was incomplete. Fix is now on github (install instructions for development version are also now on github), will push to CRAN soon.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Another user points out that pmc support for additional functions would be nice, such as rbrownie, fit.discrete. So true. Mixing and matching these methods may be a bit tricky without a higher level abstraction than pmc is applying.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;server&quot;&gt;Server&lt;/h4&gt;
&lt;p&gt;Happily upgraded to kcite 1.5.  &lt;a href=&quot;http://www.russet.org.uk/blog/2012/02/kcite-spreads-its-wings&quot;&gt;Many nice features&lt;/a&gt;.  Still looking forward to cito integration, generic handling of links (i.e. websites).  Also since it’s javascript now, doesn’t format in google reader, unlike 1.3 (nor does mathjax rendering).  May still have to edit tweak my css a bit (maybe have numbered list format for bibliography, or make the bibliography line into header format).&lt;/p&gt;
&lt;p&gt;Server didn’t recover after crash, looks like a local apache2 install got in the way of dreamhost apache.  hope this worked: &lt;code&gt;/usr/sbin/update-rc.d -f apache2 remove&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;managing-for-resilience&quot;&gt;Managing for Resilience&lt;/h2&gt;
&lt;p&gt;Notes from reading seminar&lt;/p&gt;
&lt;h4 id=&quot;old-paradigms&quot;&gt;Old paradigms&lt;/h4&gt;
&lt;p&gt;Species based. (Endangered species act, etc)&lt;/p&gt;
&lt;h4 id=&quot;approaches&quot;&gt;Approaches&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;functional response traits. But: Difficult to measure. difficult to anticipate consequences. Hobbs &lt;em&gt;et. al.&lt;/em&gt; 2006&lt;/li&gt;
&lt;li&gt;Habitat structure &amp;amp; complexity. But:&lt;/li&gt;
&lt;li&gt;Indicators. But: difficult to get right data. Or even experimental disturbance (van Nes &amp;amp; Scheffer, 2007).&lt;/li&gt;
&lt;li&gt;(Allen &lt;em&gt;et. al.&lt;/em&gt; 2011) Indicators. Planning. Adaptive management framework.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;threshold-management&quot;&gt;Threshold management&lt;/h4&gt;
&lt;p&gt;South African National Parks examples (strategic adaptive management in Kruger). Management plan has:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;“Vision statement”,&lt;/li&gt;
&lt;li&gt;hierarchy of goals,&lt;/li&gt;
&lt;li&gt;thresholds of potential concern&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Example threshold concerns: invasive species. Fire level.&lt;/p&gt;
&lt;h2 id=&quot;future-of-libraries&quot;&gt;Future of libraries&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;A presentation by candidate for UC Davis library director, &lt;a href=&quot;http://www.mit.edu/~kenzie/&quot;&gt;MacKenzie Smith&lt;/a&gt;, whose resume sports amazing digital science projects at Harvard &amp;amp; MIT and work with Creative Commons.&lt;/li&gt;
&lt;li&gt;Jonathan Eisen has a &lt;a href=&quot;http://phylogenomics.blogspot.com/2012/02/notes-for-talk-by-mackenzie-smith.html&quot;&gt;nice summary&lt;/a&gt;, also a new notetaking style he’s trying out for open lab notebooks.&lt;/li&gt;
&lt;li&gt;Scale-on-demand, print-on-demand ebooks for UC library?&lt;/li&gt;
&lt;li&gt;Journals subscriptions are 80% of current costs. Open Access would fix this.  Most major publishers now see (gold) open access as inevitable.  Library may contribute to author’s publication costs?&lt;/li&gt;
&lt;li&gt;Library catalog is no longer about what the U has, but what the world has. focusing on UC Davis strengths.&lt;/li&gt;
&lt;li&gt;Newer collections need our attention, e.g. research data!   Organize, visualize, publish data. Should be just as recognized as core goal of future libraries.&lt;/li&gt;
&lt;li&gt;Libraries deal with the information overload, provide enterprise knowledge management services.  Examples include:
&lt;ul&gt;
&lt;li&gt;Text mining tools&lt;/li&gt;
&lt;li&gt;Scale up team science&lt;/li&gt;
&lt;li&gt;Current Research Information Systems.  automate cv’s etc.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Structurally libraries not built for today’s goals: group coursework, technology.&lt;/li&gt;
&lt;li&gt;New vision of library as high-tech center: visualization walls, 3D caves, 3D printers.&lt;/li&gt;
&lt;li&gt;Legal barriers / IP will be a major challenge facing future libraries.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;van Nes E and Scheffer M (2007). “Slow Recovery From Perturbations as A Generic Indicator of A Nearby Catastrophic Shift.” &lt;em&gt;The American Naturalist&lt;/em&gt;, &lt;strong&gt;169&lt;/strong&gt;. ISSN 0003-0147, &lt;a href=&quot;http://dx.doi.org/10.1086/516845&quot;&gt;http://dx.doi.org/10.1086/516845&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Allen C, Cumming G, Garmestani A, Taylor P and Walker B (2011). “Managing For Resilience.” &lt;em&gt;Wildlife Biology&lt;/em&gt;, &lt;strong&gt;17&lt;/strong&gt;. ISSN 0909-6396, &lt;a href=&quot;http://dx.doi.org/10.2981/10-084&quot;&gt;http://dx.doi.org/10.2981/10-084&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Novel Ecosystems: Theoretical And Management Aspects of The New Ecological World Order, Richard J. Hobbs, Salvatore Arico, James Aronson, Jill S. Baron, Peter Bridgewater, Viki A. Cramer, Paul R. Epstein, John J. Ewel, Carlos A. Klink, Ariel E. Lugo, David Norton, Dennis Ojima, David M. Richardson, Eric W. Sanderson, Fernando Valladares, Montserrat Vila, Regino Zamora, Martin Zobel, (2006) &lt;em&gt;Global Ecology And Biogeography&lt;/em&gt;, &lt;strong&gt;15&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1111/j.1466-822X.2006.00212.x&quot;&gt;10.1111/j.1466-822X.2006.00212.x&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>finer sampling in prosecutor's fallacy</title>
	 <link href="/2012/02/20/finer-sampling-in-prosecutors-fallacy.html"/>
   <updated>2012-02-20T19:12:13+00:00</updated>
   <id>/02/20/finer-sampling-in-prosecutors-fallacy</id>
   <content type="html">&lt;p&gt;Create the data. We’ll save files as some of these code chunks need to be run on the cluster for large memory use.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(populationdynamics)
pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;180&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;,
    &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, &lt;span class=&quot;dt&quot;&gt;times=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;50000&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;reps=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;sn&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;file=prosecutor.rda&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Subset the chance transitions&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
d &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;dim&lt;/span&gt;(sn$x1)
crashed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(sn$x1[d[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;],]==&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;)
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;( sn$x1[,crashed] )
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(dat) =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;dat&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;crashed.rda&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Zoom into the region before the crash for purposes of the analysis&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
zoom &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X){
    tip &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;which&lt;/span&gt;(X$value==&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
    index &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(tip&lt;span class=&quot;dv&quot;&gt;-800&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;):tip
    &lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;X$time[index], &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;X$value[index])
    })&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plot the first couple examples&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(zoom, reps &amp;lt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps, &lt;span class=&quot;dt&quot;&gt;scales=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;free&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7038/6911538065_da2e1924e4_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Test analysis on model fit:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;zoom.rda&amp;quot;&lt;/span&gt;)
L &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;unique&lt;/span&gt;(dat$reps))
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(snow)
cluster &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;makeCluster&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;80&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;MPI&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;clusterEvalQ&lt;/span&gt;(cluster, &lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(earlywarning)) &lt;span class=&quot;co&quot;&gt;# load a library&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;clusterExport&lt;/span&gt;(cluster, &lt;span class=&quot;kw&quot;&gt;ls&lt;/span&gt;()) &lt;span class=&quot;co&quot;&gt;# export everything in workspace&lt;/span&gt;
models &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parLapply&lt;/span&gt;(cluster, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:L, function(i)
  &lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(zoom[zoom$rep==i, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)], &lt;span class=&quot;st&quot;&gt;&amp;quot;LSN&amp;quot;&lt;/span&gt;)
  )
&lt;span class=&quot;kw&quot;&gt;stopCluster&lt;/span&gt;(cluster)
&lt;span class=&quot;kw&quot;&gt;save&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;models&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;file=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;models.rda&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once this step is complete, we can create the distribution of different indicators&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
 &lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;zoom.rda&amp;quot;&lt;/span&gt;)
 &lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;models.rda&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;# plot indicators&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(earlywarning)
indicators &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(zoom, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X){
    Y &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time=&lt;/span&gt;X$time, &lt;span class=&quot;dt&quot;&gt;value=&lt;/span&gt;X$value)
    tau_var &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(Y, window_var)
    tau_acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(Y, window_autocorr)
    i &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;X$rep[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
    m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;models[[i]]$pars[&lt;span class=&quot;st&quot;&gt;&amp;quot;m&amp;quot;&lt;/span&gt;]
    &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;var=&lt;/span&gt;tau_var, &lt;span class=&quot;dt&quot;&gt;acor=&lt;/span&gt;tau_acorr, &lt;span class=&quot;dt&quot;&gt;m=&lt;/span&gt;m)
})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And plot our results,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(indicators, &lt;span class=&quot;dt&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;png&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;fallacy.png&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(beanplot)
&lt;span class=&quot;kw&quot;&gt;beanplot&lt;/span&gt;(value ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;variable, &lt;span class=&quot;dt&quot;&gt;data=&lt;/span&gt;dat, &lt;span class=&quot;dt&quot;&gt;what=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;dev.off&lt;/span&gt;()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which shows clear signs of the fallacy of elevated false positives for the simple indicators (strongest for variance), and nothing that might be mistaken for a false positives in the model-based indicator.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7054/6790266518_942ce1dfce_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>prosecutor's fallacy initial look</title>
	 <link href="/2012/02/16/prosecutors-fallacy-initial-look.html"/>
   <updated>2012-02-16T20:02:49+00:00</updated>
   <id>/02/16/prosecutors-fallacy-initial-look</id>
   <content type="html">&lt;p&gt;So I’ve simulated 1000 replicates of a system that has alternative stable states, but is not approaching the bifurcation. I’ve added enough noise (demographic stochasticity in this case, but doesn’t matter what) that 129/1000 transition stochastically to the bad state, so I have decent sample sizes in each. &lt;img src=&quot;http://farm8.staticflickr.com/7182/6889477291_fa7d1c407c_o.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here’s what I’m finding: If I condition on having crashed (i.e. take the 129 that transition) and apply our model-based early warning signal, it doesn’t detect any early warning sign. Meanwhile, if I apply the kendall’s tau to the trend in variance on both crashed and and un-crashed data, the distributions look more or less as they always do, with tau values covering the full range from -1 to 1. The statistic from the systems that did not crash (0) and those that did (1), for both the model approach (parameter m) and tau for variance trend).&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7181/6874544461_d58b73d1e7_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Visually, I can also create the plot of the warning signal over time for those 129 sets, and some appear to increase.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7047/6889462817_089da2e38a_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;So in this sense we can illustrate a prosecutor’s fallacy in the sense that some of these 129 appear as false positives; there variances increase by chance. However, this doesn’t show any effect of conditioning on the fact that the system has transitioned – by these statistics the group that did crash and the group that didn’t look indistinguishable. In this sense it’s no so much a fallacy.&lt;/p&gt;
&lt;p&gt;I can try finer time sampling and see if I can catch a pattern that distinguishes between the groups – in the data I’ve got so far the chance fluctuation that drives the crash occurs faster than the observation rate, so there’s not much to latch on to.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Squiggles</title>
	 <link href="/2012/02/16/squiggles.html"/>
   <updated>2012-02-16T19:34:55+00:00</updated>
   <id>/02/16/squiggles</id>
   <content type="html">&lt;p&gt;Variability in the appearance of a trend&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
nreps &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(populationdynamics)
pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;730&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.09&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
time =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;990&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, time, &lt;span class=&quot;dt&quot;&gt;reps =&lt;/span&gt; nreps)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We reformat the replicates into long form,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; time, &lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; sn$x1)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape)
dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(X, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(dat)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;reps&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)
window &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(X[[&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;]])/&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X) &lt;span class=&quot;kw&quot;&gt;window_autocorr&lt;/span&gt;(X$value, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; window))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tidy up the warning signal data&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(tmp))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;acorr[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, ]
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(acorr) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
acorr$time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;D&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, acorr$time))
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt;(acorr$value) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;numeric&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and plot the replicate warning signals&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(acorr) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;opts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Autocorrelation on replicates from a system approaching a crash&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/crashautocor.png&quot; alt=&quot;plot of chunk crashautocor&quot; /&gt;&lt;figcaption&gt;plot of chunk crashautocor&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;stable-system&quot;&gt;Stable system&lt;/h2&gt;
&lt;p&gt;Stable model simulations&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;730&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;150&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
time =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;990&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, time, &lt;span class=&quot;dt&quot;&gt;reps =&lt;/span&gt; nreps)
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; time, &lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; sn$x1)
stable_dat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(X, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(stable_dat)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;reps&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(stable_dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X) &lt;span class=&quot;kw&quot;&gt;window_autocorr&lt;/span&gt;(X$value, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; window))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(tmp))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;acorr[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, ]
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(acorr) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
acorr$time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;D&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, acorr$time))
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt;(acorr$value) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;numeric&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(acorr) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;opts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Autocorrelation on replicates from a stable system&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/stableautocor.png&quot; alt=&quot;plot of chunk stableautocor&quot; /&gt;&lt;figcaption&gt;plot of chunk stableautocor&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;variance-pattern&quot;&gt;Variance pattern&lt;/h2&gt;
&lt;h3 id=&quot;replicates-approaching-a-crash&quot;&gt;Replicates approaching a crash&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X) &lt;span class=&quot;kw&quot;&gt;window_var&lt;/span&gt;(X$value, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; window))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(tmp))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;acorr[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, ]
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(acorr) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
acorr$time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;D&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, acorr$time))
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt;(acorr$value) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;numeric&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(acorr) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;opts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Variance on replicates approaching a crash&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/crashvar.png&quot; alt=&quot;plot of chunk crashvar&quot; /&gt;&lt;figcaption&gt;plot of chunk crashvar&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;replicates-from-a-stable-system&quot;&gt;Replicates from a stable system&lt;/h3&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
tmp &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(stable_dat, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, function(X) &lt;span class=&quot;kw&quot;&gt;window_var&lt;/span&gt;(X$value, 
    &lt;span class=&quot;dt&quot;&gt;windowsize =&lt;/span&gt; window))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;t&lt;/span&gt;(tmp))
acorr &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;acorr[-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, ]
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(acorr) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;reps&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
acorr$time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;gsub&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;D&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;, acorr$time))
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt;(acorr$value) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;numeric&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(acorr) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(time, value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~reps) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;opts&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;title =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Variance on replicates in a stable system&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/stablevar.png&quot; alt=&quot;plot of chunk stablevar&quot; /&gt;&lt;figcaption&gt;plot of chunk stablevar&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>getting signal from autocorrelation</title>
	 <link href="/2012/02/15/getting-signal-from-autocorrelation.html"/>
   <updated>2012-02-15T19:40:26+00:00</updated>
   <id>/02/15/getting-signal-from-autocorrelation</id>
   <content type="html">&lt;p&gt;This example goes through the steps to demonstrate that in a sufficiently-frequently sampled timeseries, autocorrelation does contain &lt;strong&gt;some&lt;/strong&gt; signal of early warning. ((Post markdown generated automatically from knitr.))&lt;/p&gt;
&lt;p&gt;Run the individual based simulation&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(populationdynamics)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code] Loading required package: populationdynamics&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
pars =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;Xo =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;730&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;e =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;K =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;i =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Da =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.09&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;Dt =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;p =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
time =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;)
sn &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;saddle_node_ibm&lt;/span&gt;(pars, time)
X &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;time =&lt;/span&gt; time, &lt;span class=&quot;dt&quot;&gt;value =&lt;/span&gt; sn$x1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;compute the observed value:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(earlywarning)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code] Loading required package: earlywarning&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
observed &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;warningtrend&lt;/span&gt;(X, window_autocorr)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;fit the models&lt;/p&gt;
&lt;p&gt;$ dX = (- X) dt + dB_t $&lt;/p&gt;
&lt;p&gt;$ dX = _t (- X) dt + (_t+) dB_t $&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
A &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(X, &lt;span class=&quot;st&quot;&gt;&amp;quot;OU&amp;quot;&lt;/span&gt;)
B &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stability_model&lt;/span&gt;(X, &lt;span class=&quot;st&quot;&gt;&amp;quot;LSN&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;simulate some replicates&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
reps &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;
Asim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate&lt;/span&gt;(A, reps)
Bsim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;simulate&lt;/span&gt;(B, reps)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;tidy up the data a bit&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(reshape2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
Asim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(Asim, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
Bsim &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(Bsim, &lt;span class=&quot;dt&quot;&gt;id =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(Asim)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;rep&amp;quot;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(Bsim)[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;rep&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apply the &lt;code&gt;warningtrend&lt;/code&gt; &lt;code&gt;window_autocorr&lt;/code&gt; to each replicate&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(plyr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
wsA &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(Asim, &lt;span class=&quot;st&quot;&gt;&amp;quot;rep&amp;quot;&lt;/span&gt;, warningtrend, window_autocorr)
wsB &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(Bsim, &lt;span class=&quot;st&quot;&gt;&amp;quot;rep&amp;quot;&lt;/span&gt;, warningtrend, window_autocorr)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And gather and plot the results&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
tidy &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;melt&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;null =&lt;/span&gt; wsA$tau, &lt;span class=&quot;dt&quot;&gt;test =&lt;/span&gt; wsB$tau))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(tidy) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;simulation&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(beanplot)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;beanplot&lt;/span&gt;(value ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;simulation, tidy, &lt;span class=&quot;dt&quot;&gt;what =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, 
    &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;abline&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;h =&lt;/span&gt; observed, &lt;span class=&quot;dt&quot;&gt;lty =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/plot.png&quot; alt=&quot;plot of chunk plot&quot; /&gt;&lt;figcaption&gt;plot of chunk plot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
roc &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;roc_data&lt;/span&gt;(tidy)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code] Area Under Curve = 0.819680311103255 True positive rate = 0.33 at false positive rate of 0.05&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(roc) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;geom_line&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(False.positives, True.positives), 
    &lt;span class=&quot;dt&quot;&gt;lwd =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/roc.png&quot; alt=&quot;plot of chunk roc&quot; /&gt;&lt;figcaption&gt;plot of chunk roc&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;parallelization&quot;&gt;Parallelization&lt;/h2&gt;
&lt;p&gt;Parallel code for the &lt;code&gt;plyr&lt;/code&gt; command is straight-forward for multicore use,&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(doMC)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;registerDoMC&lt;/span&gt;()
wsA &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(Asim, &lt;span class=&quot;st&quot;&gt;&amp;quot;rep&amp;quot;&lt;/span&gt;, warningtrend, window_autocorr, 
    &lt;span class=&quot;dt&quot;&gt;.parallel =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
wsB &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(Bsim, &lt;span class=&quot;st&quot;&gt;&amp;quot;rep&amp;quot;&lt;/span&gt;, warningtrend, window_autocorr, 
    &lt;span class=&quot;dt&quot;&gt;.parallel =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which works nicely (other than the progress indicator finishing early).&lt;/p&gt;
&lt;p&gt;In principle, this can be &lt;a href=&quot;http://stackoverflow.com/questions/5559287/how-do-i-make-dosmp-play-nicely-with-plyr&quot;&gt;parallelized over MPI&lt;/a&gt; using &lt;a href=&quot;http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/&quot;&gt;an additional function&lt;/a&gt;, seems to work:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(snow)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(doSNOW)
&lt;span class=&quot;kw&quot;&gt;source&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;../createCluster.R&amp;quot;&lt;/span&gt;)
cl &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;createCluster&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;export =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;ls&lt;/span&gt;(), &lt;span class=&quot;dt&quot;&gt;lib =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;earlywarning&amp;quot;&lt;/span&gt;))
ws &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ddply&lt;/span&gt;(Asim, &lt;span class=&quot;st&quot;&gt;&amp;quot;rep&amp;quot;&lt;/span&gt;, warningtrend, window_autocorr, 
    &lt;span class=&quot;dt&quot;&gt;.parallel =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;stopCluster&lt;/span&gt;(cl)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(ws)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[code] rep tau 1 X1 0.7886 2 X2 0.6966 3 X3 0.6543 4 X4 0.5251 5 X5 -0.2859 6 X6 -0.3889&lt;/p&gt;
&lt;p&gt;```&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Further examples for appendices</title>
	 <link href="/2012/02/14/further-examples-for-appendices.html"/>
   <updated>2012-02-14T16:35:06+00:00</updated>
   <id>/02/14/further-examples-for-appendices</id>
   <content type="html">&lt;p&gt;Going through additional examples of things I’d like to see / demonstrate but do not fit into the narrative of the manuscript. Writing these in knitr/dynamic documentation to confirm code produces the examples listed, and give a bit tighter integration between text and code examples.&lt;/p&gt;
&lt;h3 id=&quot;show-the-parameter-distributions&quot;&gt;Show the parameter distributions:&lt;/h3&gt;
&lt;p&gt;We can also look at the bootstraps of the parameters. Another helper function will reformat this data from reps list. The fit column uses a two-letter code to indicate first what model was used to simulate the data, and then what model was fit to the data. For instance, AB means the data was simulated from model A (the null, OU model) but fit to B.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
pars &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;parameter_bootstraps&lt;/span&gt;(reps)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(pars)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
    value parameter fit rep
 &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;1.380&lt;/span&gt;        Ro  AA   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
 &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;583.109&lt;/span&gt;     theta  AA   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
 &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;147.015&lt;/span&gt;     sigma  AA   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
 &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;1.631&lt;/span&gt;        Ro  AB   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
 &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;602.484&lt;/span&gt;     theta  AB   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;
 &lt;span class=&quot;dv&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;130.060&lt;/span&gt;     sigma  AB   &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are lots of options for visualizing this relatively high-dimensional data, which we can easily explore with a few commands from the &lt;code&gt;ggplot2&lt;/code&gt; package. For instance, we can look at average and range of parameters estimated in the bootstraps of each model:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(Hmisc)
&lt;span class=&quot;kw&quot;&gt;ggplot&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(pars, fit %in%&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;AA&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;BB&amp;quot;&lt;/span&gt;)), &lt;span class=&quot;kw&quot;&gt;aes&lt;/span&gt;(fit, 
    value)) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_summary&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fun.y =&lt;/span&gt; mean, &lt;span class=&quot;dt&quot;&gt;geom =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;position =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;dodge&amp;quot;&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;stat_summary&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;fun.data =&lt;/span&gt; median_hilow, &lt;span class=&quot;dt&quot;&gt;geom =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;pointrange&amp;quot;&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;position =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;position_dodge&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;width =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.9&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;conf.int =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.95&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;facet_wrap&lt;/span&gt;(~parameter, &lt;span class=&quot;dt&quot;&gt;scales =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;free_y&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;https://github.com/cboettig/earlywarning/wiki/parsplot.png&quot; alt=&quot;plot of chunk parsplot&quot; /&gt;&lt;figcaption&gt;plot of chunk parsplot&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;further-tests-and-examples&quot;&gt;Further tests and examples&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Compare likelihood &amp;amp; summary statistic results simulating under the non-linear process vs under the LSN model: see &lt;a href=&quot;https://github.com/cboettig/earlywarning/wiki/validating_approximation&quot;&gt;validating approximation&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Show ROC curves do improve for each set of statistics as data sampling improves. Current examples make it look like autocorrelation never works. See &lt;a href=&quot;http://www.carlboettiger.info/archives/3885&quot;&gt;Getting signal from autocorrelation&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Show visually increasing patterns in summary stats from stable systems and non-increasing patterns from unstable ones. See &lt;a href=&quot;http://www.carlboettiger.info/archives/3863&quot;&gt;squiggles&lt;/a&gt;. Compare to the &lt;span class=&quot;math&quot;&gt;\(\alpha=r_t^2\)&lt;/span&gt; plot.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;full replicate code&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Into the murky reality – show the windowed auto-correlation, variance, and $ =r(t)^2 $ graphs&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Do dependencies in documentation examples need to be listed as package dependencies?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday</title>
	 <link href="/2012/02/13/monday-16.html"/>
   <updated>2012-02-13T23:29:36+00:00</updated>
   <id>/02/13/monday-16</id>
   <content type="html">&lt;p&gt;I’ve created the more extend-able &lt;a href=&quot;https://github.com/cboettig/earlywarning/&quot;&gt;earlywarning&lt;/a&gt; package out of my &lt;a href=&quot;https://github.com/cboettig/warningsignals/&quot;&gt;warningsignals&lt;/a&gt; package. The individual-based simulations are carried out separately via my new &lt;a href=&quot;https://github.com/cboettig/populationdynamics&quot;&gt;populationdynamics&lt;/a&gt; package.&lt;/p&gt;
&lt;h2 id=&quot;fallacy-plots&quot;&gt;Fallacy plots&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7181/6874544461_d58b73d1e7_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;appendices&quot;&gt;Appendices&lt;/h2&gt;
&lt;p&gt;Trying a knitr-based platform for tighter integration of code, figures, and text. See &lt;a href=&quot;https://github.com/cboettig/earlywarning/wiki/appendices&quot;&gt;today’s analysis&lt;/a&gt; in markdown generated by knitr, posted as a github wiki page.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Sunday </title>
	 <link href="/2012/02/12/sunday-6.html"/>
   <updated>2012-02-12T22:14:43+00:00</updated>
   <id>/02/12/sunday-6</id>
   <content type="html">&lt;h2 id=&quot;phylogenetics&quot;&gt;phylogenetics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Exploring display of phylogeny. Unlabled, painted fan?&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7192/6866145469_72efa0a0b4_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;tweaking release-of-constraint plot - vary alpha, less strong? release at T/2? Animated version?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;creating-paintings-of-phylogenies&quot;&gt;Creating paintings of phylogenies&lt;/h2&gt;
&lt;p&gt;Creating from a specified set of taxa is a somewhat common task for me. Wrightscape supports doing this for both ouch and ape trees.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cboettig/wrightscape/blob/fb0dc3bf9eacc4c99118b9d06e7a658bb383f666/R/OUwietools.R&quot;&gt;ape-based phylogenies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ouch-based phylogenies use some legacy maticce functions&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;intra_ancestor &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mrcaOUCH&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Chlorurus_sordidus&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Hipposcarus_longiceps&amp;quot;&lt;/span&gt;), labrid$tree)
intramandibular &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paintBranches&lt;/span&gt;(intra_ancestor, labrid$tree, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;other&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;intramandibular&amp;quot;&lt;/span&gt;))
pharyngeal_ancestor&amp;lt;-&lt;span class=&quot;kw&quot;&gt;mrcaOUCH&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;Bolbometopon_muricatum&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Sparisoma_radians&amp;quot;&lt;/span&gt;), labrid$tree)
pharyngeal &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paintBranches&lt;/span&gt;(pharyngeal_ancestor, labrid$tree, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;other&amp;quot;&lt;/span&gt;,&lt;span class=&quot;st&quot;&gt;&amp;quot;pharyngeal&amp;quot;&lt;/span&gt;))
two_shifts &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;paintBranches&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(pharyngeal_ancestor, intra_ancestor), labrid$tree, 
&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;wrasses&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;pharyngeal&amp;quot;&lt;/span&gt;, intramandibular&lt;span class=&quot;st&quot;&gt;&amp;quot;) )&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The ouch-trees can be converted back to ape trees in a way that can plot them, but for some reason break the fan-plot mode but not the standard phylogram plot mode. Writing to a nexus file and reading back in solves the backwards convert problem, but does not write the branch labels (at least not currently, which are stored in &lt;code&gt;$regimes&lt;/code&gt;).&lt;/p&gt;
&lt;h2 id=&quot;warning-signals&quot;&gt;Warning signals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Parallelizing the prosecutors fallacy, following &lt;a href=&quot;http://www.carlboettiger.info/archives/3274&quot;&gt;earlier post&lt;/a&gt; for MPI via snow&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cbsnews.com/video/watch/?id=7398476n&amp;amp;tag=contentBody;storyMediaBox&quot;&gt;CBS 60 minutes&lt;/a&gt; on the importance of reproducible research&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Saturday: projects, reading, markdown notebook-technology</title>
	 <link href="/2012/02/12/saturday-projects-reading-markdown-plugins.html"/>
   <updated>2012-02-12T13:40:37+00:00</updated>
   <id>/02/12/saturday-projects-reading-markdown-plugins</id>
   <content type="html">&lt;p&gt;Greatly enjoyed seeing this perspective on power laws (Stumpf &amp;amp; Porter, 2012) Or as Richard McElreath put even more concisely,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;People get amazed by power laws but never by normal distributions. Seems like some max ent outcomes astonish while others don’t. When so many mechanisms aggregate to common densities, I’d hope we’d stop trying to argue that we can go backwards from pattern to process so easily.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;projects&quot;&gt;Projects&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fishbase &lt;a href=&quot;https://github.com/ropensci/rfishbase/commit/a1a9e0307288871b82caca921e9751bdc56b1942&quot;&gt;example query for Peter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Commit edits to warningsignals paper, send to Alan.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Things to show in warningsignals vignette/appendix: Increasing data improves estimates. Improves for autocorrelation&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Remembered seeing this example, &lt;a href=&quot;http://worrydream.com/#!/ScientificCommunicationAsSequentialArt&quot;&gt;scientific communication&lt;/a&gt; as sequential art, a year or so ago but took a while to find it. Why &lt;a href=&quot;http://webapps.stackexchange.com/questions/23797/advanced-search-options-for-my-links-in-delicious&quot;&gt;can’t I search&lt;/a&gt; my delicious links appropriately?&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://datajournalism.stanford.edu/&quot;&gt;Data journalism&lt;/a&gt;, another nice take on visualizations&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vimeo.com/33727555&quot;&gt;Hadley’s tidy R&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;some-r-tricks&quot;&gt;some R tricks&lt;/h2&gt;
&lt;p&gt;Moved this one to a separate entry, see &lt;a href=&quot;http://www.carlboettiger.info/archives/3832&quot;&gt;Elegant &amp;amp; fast data manipulation with data.table&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I always forget how to do this. [gist id=1805250]&lt;/p&gt;
&lt;h2 id=&quot;some-plugin-notes&quot;&gt;Some plugin notes&lt;/h2&gt;
&lt;p&gt;Tried writing this in markdown, using &lt;a href=&quot;http://wordpress.org/extend/plugins/markdown-quicktags&quot;&gt;markdown-quicktags&lt;/a&gt; plugin. Seems to work with most of my short-codes but creates trouble with the equations. The “render” option converts the escaped brackets used by mathjax into html symbols. It also seems to convert symbol inside the equations, even when inside shortcodes instead of bracket notation. &lt;a href=&quot;http://wordpress.org/support/topic/plugin-markdown-quicktags-breaks-mathjax-syntax?replies=1#post-2620618&quot;&gt;Filed error&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Render stores the post source as html. Need to render or post will display markdown instead of formatting. A different option is plugins that convert the displayed content. Such plugins store the source as markdown, so if the plugin stops working, all posts appear in markdown instead of being properly rendered.&lt;/p&gt;
&lt;p&gt;Rendering can create a mix of html and markdown in the edit, which can be a big headache too.&lt;/p&gt;
&lt;h3 id=&quot;a-second-attempt&quot;&gt;A second attempt&lt;/h3&gt;
&lt;p&gt;Trying &lt;a href=&quot;http://wordpress.org/extend/plugins/markdown-on-save/&quot;&gt;markdown-on-save&lt;/a&gt;. Much less obtrusive in that it does not change the editor, just uses the default html editor with a check-box to indicate if the document is in markdown.&lt;/p&gt;
&lt;p&gt;It also renders the equations without any trouble, inline: &lt;span class=&quot;math&quot;&gt;\[ F = ma\]&lt;/span&gt; and displayed, &lt;span class=&quot;math&quot;&gt;\[ dX = \sigma dB_t \]&lt;/span&gt; Brilliant.&lt;/p&gt;
&lt;p&gt;It appears that leaving in html-style links in the text also does not create an issue, these render correctly as well.&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Stumpf M and Porter M (2012). “Critical Truths About Power Laws.” &lt;em&gt;Science&lt;/em&gt;, &lt;strong&gt;335&lt;/strong&gt;. ISSN 0036-8075, &lt;a href=&quot;http://dx.doi.org/10.1126/science.1216142&quot;&gt;http://dx.doi.org/10.1126/science.1216142&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Elegant & fast data manipulation with data.table</title>
	 <link href="/2012/02/12/elegant-fast-data-manipulation-with-data-table.html"/>
   <updated>2012-02-12T13:39:03+00:00</updated>
   <id>/02/12/elegant-fast-data-manipulation-with-data-table</id>
   <content type="html">&lt;p&gt;Just learned about the R &lt;a href=&quot;http://cran.r-project.org/web/packages/data.table/index.html&quot;&gt;data.table package&lt;/a&gt; (ht &lt;span class=&quot;citation&quot; data-cites=&quot;recology_&quot;&gt;@recology_&lt;/span&gt;) makes R data frames into ultra-fast, SQL-like objects.&lt;/p&gt;
&lt;p&gt;One thing we get is some very nice and powerful syntax. Consider some simple data of replicate time series:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;time &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;)
replicate &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(time)
value &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rnorm&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)
df &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(replicate, time, value)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To apply a function to each set of replicates, instead of&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(df$replicate), function(i) 
  &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;( df[df$replicate ==&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;i,]$value) 
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can use&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(data.table)
dt &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(df)
dt[, &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt;(value), by=&lt;span class=&quot;st&quot;&gt;&amp;quot;replicate&amp;quot;&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that we could have passed multiple arguments to the function, &lt;code&gt;f(time, value)&lt;/code&gt;, or functions of the arguments, &lt;code&gt;mean(value*time)&lt;/code&gt;, etc. While this can be much faster data-frames to begin with (see below), when the function is much more computationally intensive than “mean”, it might be sensible to parallelize this command instead:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;require&lt;/span&gt;(snowfall)
&lt;span class=&quot;kw&quot;&gt;sfInit&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;par=&lt;/span&gt;T, &lt;span class=&quot;dt&quot;&gt;cpu=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;sfSapply&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, function(i)
  &lt;span class=&quot;kw&quot;&gt;mean&lt;/span&gt; (dt[replicate==i, value] )
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that we could have given the second argument as a list if we needed multiple columns, i.e. &lt;code&gt;list(time, value)&lt;/code&gt;. For a provocative example, consider this example comparing the two. Let’s create a very big data frame, and also make it a data table:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;grpsize =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ceiling&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1e7&lt;/span&gt;/&lt;span class=&quot;dv&quot;&gt;26&lt;/span&gt;^&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;) 
DF &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;x=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;factor&lt;/span&gt;(LETTERS), &lt;span class=&quot;dt&quot;&gt;each =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;26&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;grpsize), 
                 &lt;span class=&quot;dt&quot;&gt;y=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rep&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;factor&lt;/span&gt;(letters), &lt;span class=&quot;dt&quot;&gt;each =&lt;/span&gt; grpsize), 
                 &lt;span class=&quot;dt&quot;&gt;v=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;runif&lt;/span&gt;(grpsize *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;26&lt;/span&gt; ^&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;))
DT &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;data.table&lt;/span&gt;(DF)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This table has three columns, each capital letter of the alphabet (fist column) paired with each lower-case letter in column B. Let’s imagine we want all the cases that have a capital “R” and lowercase “f”. Well, in classic R we might do:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;( 
  DF[DF$x==&lt;span class=&quot;st&quot;&gt;&amp;quot;R&amp;quot;&lt;/span&gt; &amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;DF$y==&lt;span class=&quot;st&quot;&gt;&amp;quot;f&amp;quot;&lt;/span&gt;, ]
)
user  system elapsed 
  &lt;span class=&quot;fl&quot;&gt;2.796&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;0.500&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;3.313&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We could do the same command with DF, and it would do the same “Vector Search”, which is slow (order N). we can get order log(N) scaling though with join option of data.table. We first have to set x and y as “keys”.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;setkey&lt;/span&gt;(DT, x, y)
&lt;span class=&quot;kw&quot;&gt;system.time&lt;/span&gt;(
  DT[&lt;span class=&quot;kw&quot;&gt;J&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;R&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;h&amp;quot;&lt;/span&gt;)]
)
   user  system elapsed 
  &lt;span class=&quot;fl&quot;&gt;0.012&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;0.000&lt;/span&gt;   &lt;span class=&quot;fl&quot;&gt;0.014&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A speed-up of 233 times! Certainly better than splitting up the analysis over 100s of processors. &lt;strong&gt;Brilliant&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;relationship-of-commands-to-sql&quot;&gt;Relationship of commands to SQL&lt;/h2&gt;
&lt;p&gt;The FAQ vignette provides a nice line-by-line comparison of SQL commands to data.table commands:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;data.table&lt;/th&gt;
&lt;th style=&quot;text-align: left;&quot;&gt;SQL&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;i&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;where&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;j&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;select&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;:=&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;update&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;by&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;group by&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;i&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;order by (in compound syntax)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;i&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;having (in compound syntax)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;nomatch=NA&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;outer join&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;nomatch=0&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;inner join&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;mult=&amp;quot;first&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;N/A because SQL is inherently unordered&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;&lt;code&gt;roll=TRUE&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: left;&quot;&gt;N/A because SQL is inherently unordered&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The general form is : &lt;code&gt;DT[where,select|update,group by][having][order by][ ]...[ ]&lt;/code&gt;. A key advantage of column vectors in R is that they are ordered, unlike SQL.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Thursday: writing; some latexdiff notes</title>
	 <link href="/2012/02/10/thursday-writing-some-latexdiff-notes.html"/>
   <updated>2012-02-10T10:06:11+00:00</updated>
   <id>/02/10/thursday-writing-some-latexdiff-notes</id>
   <content type="html">&lt;h2 id=&quot;forage-fish-writing&quot;&gt;Forage fish writing&lt;/h2&gt;
&lt;p&gt;See doc, FF dropbox PopDyn&lt;/p&gt;
&lt;h2 id=&quot;warning-signals-edits&quot;&gt;Warning signals edits&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Alan edits&lt;/li&gt;
&lt;li&gt;Figure captions, titles.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Text changes from Noam.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;a-better-git-latexdiff-solution&quot;&gt;A better git latexdiff solution&lt;/h2&gt;
&lt;p&gt;Placing the script below somewhere in the path like &lt;code&gt;/usr/local/bin&lt;/code&gt; and modify &lt;code&gt;~/.gitconfig&lt;/code&gt; as indicated in the header comments. Then oen can view pdf-diffs of the latex of the current version against previous versions with commands such as&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;git&lt;/span&gt; latexdiff HEAD &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;shows the differences between the last commit and the current (uncommitted) changes. References to other versions should work just as in git diff commands, see &lt;a href=&quot;http://book.git-scm.com/3_comparing_commits_-_git_diff.html&quot;&gt;git book for more&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;[gist id=1128616]&lt;/p&gt;
&lt;h2 id=&quot;logistics&quot;&gt;logistics&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Evolution reimbursement.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;CPB travel funds.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>UC Davis graduate student symposium proposal</title>
	 <link href="/2012/02/08/uc-davis-graduate-student-symposium-proposal.html"/>
   <updated>2012-02-08T12:35:15+00:00</updated>
   <id>/02/08/uc-davis-graduate-student-symposium-proposal</id>
   <content type="html">&lt;h4 id=&quot;abstract&quot;&gt;Abstract&lt;/h4&gt;
&lt;p&gt;The recog­ni­tion that ecosys­tems can undergo sud­den shifts to alter­nate, less desir­able sta­ble states has led to the desire to iden­tify early warn­ing signs of these impend­ing col­lapses. Motivated by the math­e­mat­ics of bifur­ca­tions, the search for early warn­ing signs seeks to detect subtle patterns that may precede these shift. Faced with limited and imperfect data, such forecasting is fraught with uncertainty. I will present work illustrating how we can quantify the risks of false alarms and missed detection of these early warning signals, and illustrate how this information can be used to inform robust decision-making that may avoid collapse.&lt;/p&gt;
&lt;h4 id=&quot;research-significance&quot;&gt;Research Significance&lt;/h4&gt;
&lt;p&gt;The most pressing issues of our time are all characterized by sudden regime shifts: the collapse of marine fisheries or stock-markets, the overthrow of governments, shifts in global climate. Despite their importance, predicting these shifts has long been more the domain of soothsayers than scientists, an area where experts perform no better than lay observers. Such transitions by definition lie outside the familiarity of our experience and the description of our models. By tapping the data deluge of information technological innovations have made available and by identifying a common mathematical framework around some sudden shifts, I will suggest how we can begin to break free of this mold.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Some Collaborative Tools for Science</title>
	 <link href="/2012/02/06/some-collaborative-tools-for-science.html"/>
   <updated>2012-02-06T15:30:06+00:00</updated>
   <id>/02/06/some-collaborative-tools-for-science</id>
   <content type="html">&lt;p&gt;Ania Truszczynski invited me to give a little talk on the use of various collaborative tools for scientists.  I enjoyed presenting this as a chalk-talk, but alas no slides to link so here’s a list of reference. Rather than the impossible attempt to be comprehensive, this is restricted to resources I use regularly and have found to be the best of their class.  All are freely available.&lt;/p&gt;
&lt;h2 id=&quot;tools&quot;&gt;Tools&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt; Science Blogs  (e.g. &lt;a href=&quot;http://rrresearch.fieldofscience.com/2010/12/arsenic-associated-bacteria-nasas.html&quot;&gt;Arsenic Life&lt;/a&gt; &amp;amp; peer review) &lt;a href=&quot;http://researchblogging.org&quot;&gt;ressearchblogging.org&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Preprint servers (&lt;a href=&quot;http://arxiv.org&quot;&gt;arXiv&lt;/a&gt;, &lt;a href=&quot;http://precedings.nature.com/&quot;&gt;Nature Precedings&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Twitter (&lt;a href=&quot;http://www.biodiversityinfocus.com/blog/2012/01/02/twitter-for-scientists-and-why-you-should-try-it-scienceshare/&quot;&gt;a Scientist’s intro&lt;/a&gt;)), also see (Eysenbach, 2011)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.mendeley.com/profiles/carl-boettiger/&quot;&gt;Mendeley&lt;/a&gt; - social reference manager&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig&quot;&gt;Github&lt;/a&gt; - social coding&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;wordpress.com&quot;&gt;Wordpress&lt;/a&gt; - collaborative website (&lt;a href=&quot;http://blogs.plos.org/mfenner/2011/02/04/discussing-wordpress-for-scientists/&quot;&gt;WP for scientists&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Google Docs, Dropbox (but try Wordpress or github)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;stackoverflow.com&quot;&gt;Stackoverflow&lt;/a&gt; and &lt;a href=&quot;http://stackexchange.com/sites&quot;&gt;similar Q&amp;amp;A sites &lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;RSS &lt;a href=&quot;http://www.google.com/reader&quot;&gt;readers&lt;/a&gt; (all the above can create RSS feeds of updates)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Open_notebook_science&quot;&gt;Open Notebook Science&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A few tools I didn’t mention: Increase your impact: share your science.  &lt;a href=&quot;http://datadryad.org/&quot;&gt;Dryad&lt;/a&gt; (published data), &lt;a href=&quot;http://figshare.com&quot;&gt;FigShare&lt;/a&gt; (Figures and data), &lt;a href=&quot;http://www.slideshare.net/cboettig&quot;&gt;Slideshare&lt;/a&gt; (slides)&lt;/p&gt;
&lt;h2 id=&quot;risks-rewards&quot;&gt;Risks &amp;amp; Rewards&lt;/h2&gt;
&lt;p&gt;I mentioned the use of these tools in &lt;a href=&quot;http://www.youtube.com/watch?v=LabqeJEOQyI&quot;&gt;filtering information overload&lt;/a&gt; and in building a network that can assist and promote you.&lt;/p&gt;
&lt;p&gt;We discussed that any of these tools can be used at varying degrees of openness. Using them in a more open way often increases the potential rewards they can provide, but also the risks that come with increased exposure. Being unknown or less known carries different risks.&lt;/p&gt;
&lt;p&gt;It’s easy to worry about giving away your science.  But giving it away can be really hard, as anyone whose replicated someone else’s publication knows.  I’ve tried to make it easy, but I bet it’s never as simple as I imagine.  Can you find and replicate a graph I’ve produced this week, name two papers I’ve read (did I like them?), or find technical question where I’ve been stuck and the code where I implemented the solution someone suggested?  What question am I most interested in answering right now?  (Thinking I’ll add answer links later).&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Eysenbach G (2011). “Can Tweets Predict Citations? Metrics of Social Impact Based on Twitter And Correlation With Traditional Metrics of Scientific Impact.” &lt;em&gt;Journal of Medical Internet Research&lt;/em&gt;, &lt;strong&gt;13&lt;/strong&gt;. &lt;a href=&quot;http://dx.doi.org/10.2196/jmir.2012&quot;&gt;http://dx.doi.org/10.2196/jmir.2012&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Different ways of visualizing distribution overlap</title>
	 <link href="/2012/02/03/different-ways-of-visualizing-distribution-overlap.html"/>
   <updated>2012-02-03T10:13:51+00:00</updated>
   <id>/02/03/different-ways-of-visualizing-distribution-overlap</id>
   <content type="html">&lt;p&gt;I spend a lot of time comparing distributions.  There’s lots of different ways to visualize these comparisons, I’m not sure what is the most effective &amp;amp; intuitive way to indicate their overlap.&lt;/p&gt;
&lt;h4 id=&quot;distributions&quot;&gt;Distributions&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7159/6812863339_b757c2f54b_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;boxplot&quot;&gt;Boxplot&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7035/6812863299_a99d0ea040_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;violinplot&quot;&gt;Violinplot&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7020/6812863493_35aec6434d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;beanplot&quot;&gt;Beanplot&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7154/6812863275_7d96bebf1f_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;roc-curve&quot;&gt;ROC Curve&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7032/6812863387_fffa882deb_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;These images in gallery format with examples from two other data sources as well (click on image to zoom into gallery).&lt;/p&gt;
&lt;p&gt;[flickr-gallery mode=“search” tags=“warningsignals” min_upload_date=“2012-02-03 00:00:00” max_upload_date=“2012-02-03 11:00:00”]&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Thursday</title>
	 <link href="/2012/02/02/thursday-13.html"/>
   <updated>2012-02-02T22:14:42+00:00</updated>
   <id>/02/02/thursday-13</id>
   <content type="html">&lt;h3 id=&quot;ropensci&quot;&gt;rOpenSci&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Dryad submission&lt;/li&gt;
&lt;li&gt;xml parsing example to Scott&lt;/li&gt;
&lt;li&gt;essentially see (&lt;a href=&quot;http://fishlab.ucdavis.edu/?p=395&quot;&gt;fishbase example&lt;/a&gt; , and &lt;a href=&quot;http://www.w3schools.com/xpath/xpath_syntax.asp&quot;&gt;xpath tutoral&lt;/a&gt; )&lt;/li&gt;
&lt;li&gt;knitr and &lt;a href=&quot;http://tex.stackexchange.com/questions/8625/force-figure-placement-in-text&quot;&gt;latex figure placement&lt;/a&gt; (use float package with H to enforce placement).&lt;/li&gt;
&lt;li&gt;cc0 &amp;amp; OSI …&lt;/li&gt;
&lt;li&gt;pmc purchase order, dryad data id approval.&lt;/li&gt;
&lt;li&gt;&amp;amp; writing writing writing…&lt;/li&gt;
&lt;li&gt;Re-formating data for ggplot version of graphs, realized I should be specifying id.vars to melt (&lt;a href=&quot;http://stackoverflow.com/questions/9122745/melt-and-append-data-using-reshape2-functions-in-r&quot;&gt;example from my Q on SO&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;reading&quot;&gt;Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Great special feature on the data era in TREE ((which I mention despite it’s misfortune of being connected to Elsivier right now)) (Page, 2012), (Michener &amp;amp; Jones, 2012), (Porter &lt;em&gt;et. al.&lt;/em&gt; 2012), (Hochachka &lt;em&gt;et. al.&lt;/em&gt; 2012), (Parr &lt;em&gt;et. al.&lt;/em&gt; 2012), (Brewer &lt;em&gt;et. al.&lt;/em&gt; 2012).&lt;/li&gt;
&lt;li&gt;Digital lab notebooks in Nature (again) (Giles, 2012).&lt;/li&gt;
&lt;li&gt;Nice ecosphere paper on warning signals Bestelmeyer &lt;em&gt;et. al.&lt;/em&gt; 2011&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Four conclusions, not surprising perhaps but nice message:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;em&gt;The utility of leading indicators is often limited and can depend on the abruptness,&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;information on spatiotemporal context is useful  &lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;and ancillary information from associated experiments and observations aids interpretation &lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;underscores the utility of long-term observations&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Applying 5 approaches to each candidate set of data for transitions&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;“visualizing patterns” i.e. loess smoothed curves&lt;/li&gt;
&lt;li&gt;Unimodality in frequency.&lt;/li&gt;
&lt;li&gt;breakpoints,&lt;/li&gt;
&lt;li&gt;rising variance&lt;/li&gt;
&lt;li&gt;“predictor-response”  i.e. regressions&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(2 and 5 are confounded by switching between two stable states that have equal stability/spring constants.   I think they’d do better to test for unimodality in time than in frequency when analyzing across break-points.)  Notably the &lt;a href=&quot;http://esapubs.org/archive/ecos/C002/011/suppl-1.htm&quot;&gt;code&lt;/a&gt; though not the data is posted on the Ecological archive.&lt;/p&gt;
&lt;p&gt;They find 3 data sets have true transitions with hysteresis, 1 which appears to simply linearly track a changing environment.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hehe, I get acknowledged in a PNAS astrophysics article (Spiegel &amp;amp; Turner, 2011)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://andrewgelman.com/2012/01/the-last-word-on-the-canadian-lynx-series/&quot;&gt;Simple mechanistic models outperforming big autoregressive moving average models&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Page R (2012). “Space, Time, Form: Viewing The Tree of Life.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.12.002&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.12.002&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Michener W and Jones M (2012). “Ecoinformatics: Supporting Ecology as A Data-Intensive Science.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.016&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.11.016&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Porter J, Hanson P and Lin C (2012). “Staying Afloat in The Sensor Data Deluge.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.009&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.11.009&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hochachka W, Fink D, Hutchinson R, Sheldon D, Wong W and Kelling S (2012). “Data-Intensive Science Applied to Broad-Scale Citizen Science.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.006&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.11.006&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Parr C, Guralnick R, Cellinese N and Page R (2012). “Evolutionary Informatics: Unifying Knowledge About The Diversity of Life.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.11.001&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.11.001&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brewer S, Jackson S and Williams J (2012). “Paleoecoinformatics: Applying Geohistorical Data to Ecological Questions.” &lt;em&gt;Trends in Ecology &amp;amp; Evolution&lt;/em&gt;, &lt;strong&gt;27&lt;/strong&gt;. ISSN 01695347, &lt;a href=&quot;http://dx.doi.org/10.1016/j.tree.2011.09.009&quot;&gt;http://dx.doi.org/10.1016/j.tree.2011.09.009&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Giles J (2012). “Going Paperless: The Digital Lab.” &lt;em&gt;Nature&lt;/em&gt;, &lt;strong&gt;481&lt;/strong&gt;. ISSN 0028-0836, &lt;a href=&quot;http://dx.doi.org/10.1038/481430a&quot;&gt;http://dx.doi.org/10.1038/481430a&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spiegel D and Turner E (2011). “Bayesian Analysis of The Astrobiological Implications of Life’S Early Emergence on Earth.” &lt;em&gt;Proceedings of The National Academy of Sciences&lt;/em&gt;, &lt;strong&gt;109&lt;/strong&gt;. ISSN 0027-8424, &lt;a href=&quot;http://dx.doi.org/10.1073/pnas.1111694108&quot;&gt;http://dx.doi.org/10.1073/pnas.1111694108&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Analysis of Abrupt Transitions in Ecological Systems, Brandon T. Bestelmeyer, Aaron M. Ellison, William R. Fraser, Kristen B. Gorman, Sally J. Holbrook, Christine M. Laney, Mark D. Ohman, Debra P. C. Peters, Finn C. Pillsbury, Andrew Rassweiler, Russell J. Schmitt, Sapna Sharma, (2011) &lt;em&gt;Ecosphere&lt;/em&gt;, &lt;strong&gt;2&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1890/ES11-00216.1&quot;&gt;10.1890/ES11-00216.1&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Journey to freedom - a code's tale of open source license migration</title>
	 <link href="/2012/01/31/journey-to-freedom-a-codes-tale-of-open-source-license-migration.html"/>
   <updated>2012-01-31T17:58:08+00:00</updated>
   <id>/01/31/journey-to-freedom-a-codes-tale-of-open-source-license-migration</id>
   <content type="html">&lt;p&gt;My software wants to be free. It wants to be seen and used and loved by as many people as possible. When first it heard of open source licenses, it set sail to join the company of great software in the promised land, but finding true freedom has been a tortured journey.&lt;/p&gt;
&lt;h3 id=&quot;in-the-clutches-of-the-gpl&quot;&gt;In the clutches of the GPL&lt;/h3&gt;
&lt;p&gt;Created and defended by the &lt;a href=&quot;http://www.fsf.org/&quot;&gt;Free Software Foundation&lt;/a&gt; and used by such venerable institutions as the Linux Kernel, the gcc compiler, and the R statistical environment, the &lt;a href=&quot;http://en.wikipedia.org/wiki/GNU_General_Public_License&quot;&gt;GNU’s General Public License&lt;/a&gt; seemed like a gold standard to call home. Many of my codes quickly migrated to this beacon of light, while others, already making use of other GPL licensed software, seemed compelled to follow by it’s viral share-alike clauses. But my code wasn’t free. It couldn’t play nicely with users from the pantheon of other open source licenses, upsetting free software developers and university tech transfer offices alike. It was scorned by open science advocates and repositories. And when it wanted to leave and migrate to a more free and permissive license, it felt trapped.&lt;/p&gt;
&lt;p&gt;By now the software was written as an R package (combining C source code and R functions), depended on several R packages, and even compiled against the &lt;a href=&quot;http://www.gnu.org/software/gsl/&quot;&gt;GSL C library&lt;/a&gt;, all GPL licensed software. Surely it was stuck?&lt;/p&gt;
&lt;p&gt;Only after close examination did the package realize that it could escape. It’s not a derivative work. It’s not distributing the other R packages or R itself. That software have to be installed separately – it is only &lt;strong&gt;dynamically linked&lt;/strong&gt; ((called at runtime, not compiled into the binary libraries of my package)) to my package. The case is less obvious for the dependency of the C library on the GSL code, since this must be compiled to run. If the C functions provided by the GSL are compiled statically, they are pulled from their source and crammed into the binary next to my own code – making a derivative work that doesn’t need the GSL libraries installed separately to run. Fortunately that is not the case, these functions are also dynamically linked, and my code is free to migrate.&lt;/p&gt;
&lt;h3 id=&quot;bsd-still-incompatible&quot;&gt;BSD: still incompatible?&lt;/h3&gt;
&lt;p&gt;Fleeing the convoluted and tortured shore of GPL, my code happily reached the land of &lt;a href=&quot;http://en.wikipedia.org/wiki/BSD_licenses&quot;&gt;BSD&lt;/a&gt;. In it’s forth iteration as FreeBSD, with only two simple clauses, it seemed anything was possible. The only thing it does require are that the license always be distributed with the source code or binaries of the software. This makes it difficult to apply to repositories that also archive data – facts about the world owned under anyone’s copyright – and other non-code material such as documentation that may be found in an R package or an academic data repository. For this reason, the Dryad repository objects to that little clause of redistributing the FreeBSD license, and insists on public domain declaration provided by the &lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0&quot;&gt;CC0&lt;/a&gt; license.&lt;/p&gt;
&lt;h3 id=&quot;cc0-free-at-last&quot;&gt;CC0, free at last?&lt;/h3&gt;
&lt;p&gt;Ah, so we arrive at the public domain, or as &lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0/legalcode.txt&quot;&gt;close as I can legally get&lt;/a&gt;. While this seems to be the ultimate freedom my code has long sought, it finds itself rather lonely on these foreign shores. The Open Source Initiative doesn’t yet recognize it, which means it doesn’t meet the “open source license” requirements of academic journals like &lt;a href=&quot;http://www.ploscompbiol.org/static/guidelines.action&quot;&gt;PLoS Computational Biology&lt;/a&gt; or academic conferences like &lt;a href=&quot;http://www.open-bio.org/wiki/BOSC_2012&quot;&gt;Bioinformatics Open Source Conference&lt;/a&gt; or iEvoBio. It has not yet been used for R packages on the CRAN repository (see below), and would require using R’s custom license file mechanism rather than a simple LICENSE: CC0 line in the package meta-data. It does get a mention for being GPL compatible by the FSF ((i.e. you can redistribute it under the GPL)), but the license that isn’t a license needs more support. Following their guidelines, I’ve written the Open Software Initiative hoping it will gain that recognition.&lt;/p&gt;
&lt;h2 id=&quot;will-osi-adopt-cc0&quot;&gt;Will OSI adopt CC0?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Hello,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I would like to submit the Creative Commons zero license for consideration.  I am new to this list, forgive me if it has already been considered. I understand that this license &lt;a href=&quot;http://www.gnu.org/licenses/license-list.html#CC0&quot;&gt;has been considered&lt;/a&gt; GPL compatible by the FSF with this &lt;a href=&quot;http://wiki.creativecommons.org/CC0_FAQ#May_I_apply_CC0_to_computer_software.3F_If_so.2C_is_there_a_recommended_implementation.3F&quot;&gt;recommended format&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Submission type: Approval License Name: Creative Commons Zero, CC0 Category: Licenses that are popular and widely used or with strong communities The &lt;a href=&quot;http://creativecommons.org/publicdomain/zero/1.0/legalcode.txt&quot;&gt;legal code as plain text&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The scientific community is increasingly embracing this option as the most open and compatible license.  It is required by scientific data repositories (that also archive scientific software, with cite-able DOIs) such as &lt;a href=&quot;http://datadryad.org/depositing#whycc0&quot;&gt;Dryad&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I feel it is important that this license achieve recognition by the Open Source initiative, as certain scientific journals &amp;amp; conferences permit only OSI recognized licenses, (e.g. PLoS Computational Biology &lt;a href=&quot;http://www.ploscompbiol.org/static/guidelines.action&quot;&gt;requirements&lt;/a&gt; or Bioinformatics open source conference &lt;a href=&quot;http://www.open-bio.org/wiki/BOSC_2012&quot;&gt;requirements&lt;/a&gt;).&lt;/p&gt;
&lt;h2 id=&quot;licensing-in-r&quot;&gt;Licensing in R&lt;/h2&gt;
&lt;p&gt;R uses a simple but powerful license format in the DESCRIPTION files of all packages, which contain the essential meta-data for the package. Common FOSS licenses are recognized automatically (including version numbers or version inequalities). Since CC0 doesn’t (yet) make this list, we can use a custom license file where we provide the full plaintext CC0 license in the file LICENSE and write “file LICENSE” in the DESCRIPTION (&lt;a href=&quot;https://github.com/cboettig/fluctuationDomains&quot;&gt;my example&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;We can also see the frequency with which various licenses are used on the R repository, CRAN, with a few lines of code:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
p =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;available.packages&lt;/span&gt;(contrib.
&lt;span class=&quot;kw&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://cran.r-project.org&amp;quot;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;type =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;source&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;table&lt;/span&gt;(p[, &lt;span class=&quot;st&quot;&gt;&amp;quot;License&amp;quot;&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday</title>
	 <link href="/2012/01/30/monday-15.html"/>
   <updated>2012-01-30T19:38:23+00:00</updated>
   <id>/01/30/monday-15</id>
   <content type="html">&lt;h3 id=&quot;pdg-control-aside-exercise&quot;&gt;pdg-control, aside exercise&lt;/h3&gt;
&lt;p&gt;Lab group commented that optimum in Reed model looks unrealistic due to frequency with which it shuts down all fishing. This is an artifact of not having extraction costs increase sufficiently for small catch, and can be easily fixed by increasing that cost (c in the profit eq, profits-costs = p*x-c/x)&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7005/6792670573_409e256ce5_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cboettig/pdg_control/blob/4ac8c2c13f16898f3d9dd82fcf6a424e406e3e2f/demo/Reed.R&quot;&gt;view sourcecode, Reed.R&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;nimbios-short-visitor-application&quot;&gt;NIMBioS short visitor application&lt;/h3&gt;
&lt;p&gt;Have been thinking that it would be really useful to have some extra time at Nimbios to meet with folks at the time of our next working group meeting (March 12-15).  I’ve &lt;a href=&quot;http://www.carlboettiger.info/share/NIMBioSShortVisitApplication.pdf&quot;&gt;applied&lt;/a&gt; for short-term visitor support to come out a week early.&lt;/p&gt;
&lt;h3 id=&quot;section&quot;&gt;&lt;/h3&gt;
&lt;h3 id=&quot;a-little-exercise&quot;&gt;A little exercise&lt;/h3&gt;
&lt;p&gt;Nick posed this question to me about dealing with exponents of large numbers numerically. Apparently he needs to calculate&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \log( e^{a_1 + K} + e^{a_2 + K} + ... ) \]&lt;/span&gt; for some very large values of $ K $ and $ a$. R cannot compute this for exponents greater than 307 using the default double precision. First, the K is no problem, just factor it out:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math&quot;&gt;\[ \log( \exp(a_1)\exp(K) + \exp(a_2) \exp(K) + ... ) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ \log( \exp(K) * ( \exp(a_1) + \exp(a_2) + ... )) \]&lt;/span&gt; &lt;span class=&quot;math&quot;&gt;\[ K + \log( (exp(a_1) + exp(a_2) + ... )) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Now just $a_1, a_2, a_3 $ etc are the problem. Let’s say the &lt;span class=&quot;math&quot;&gt;\(a_i\)&lt;/span&gt; are in the vector &lt;span class=&quot;math&quot;&gt;\(a\)&lt;/span&gt;. Then we just rescale by choosing some &lt;span class=&quot;math&quot;&gt;\(c\)&lt;/span&gt; such that we can take the exponents of something smaller:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
if ( &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;abs&lt;/span&gt;(a)) &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(a) )
  c &amp;lt;-&lt;span class=&quot;st&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(a)
else
  c &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(a)
ans &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;exp&lt;/span&gt;(a-c))) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;c&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;HT &lt;a href=&quot;http://jblevins.org/log/log-sum-exp&quot;&gt;Prof, J. Blevins&lt;/a&gt;, but not perfect of course, some numbers will still be too large if a covers a range of large magnitude and small magnitude values.&lt;/p&gt;
&lt;h4 id=&quot;reformatting-the-css-for-kcite-and-twitter&quot;&gt;Reformatting the css for kcite and twitter&lt;/h4&gt;
&lt;p&gt;Several modifications to my theme. Ought to be added to my child theme to keep updates working, but may be non-trivial to make sure the modifications appear in the correct places as the theme changes, so a few notes are probably more practical.&lt;/p&gt;
&lt;pre class=&quot;sourceCode css&quot;&gt;&lt;code class=&quot;sourceCode css&quot;&gt;
&lt;span class=&quot;co&quot;&gt;/* KCite formatting */&lt;/span&gt;
div&lt;span class=&quot;fl&quot;&gt;.kcite-bibliography&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;padding:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;10px&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;}&lt;/span&gt;
div&lt;span class=&quot;fl&quot;&gt;.csl-entry&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;padding:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;10px&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;/* jetpack twitter widget formatting */&lt;/span&gt;
ul&lt;span class=&quot;fl&quot;&gt;.tweets&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;{padding:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Quite frustrating to update these because I didn’t realize &lt;a href=&quot;http://webmasters.stackexchange.com/questions/25259/clearing-cache-with-cloudflare&quot;&gt;cloudflare caches my css&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&quot;other-theme-file-changes&quot;&gt;Other theme file changes&lt;/h4&gt;
&lt;p&gt;Add stat counter and post-revision display to sidebar in single.php, after “Comments” link:&lt;/p&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;&lt;code class=&quot;sourceCode html&quot;&gt;
  &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;cat-links&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;?php&lt;/span&gt; if(function_exists(&amp;#39;the_views&amp;#39;)) { the_views(); } &lt;span class=&quot;kw&quot;&gt;?&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;

          &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;cat-links&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;?php&lt;/span&gt; the_revision_note_prd() &lt;span class=&quot;kw&quot;&gt;?&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;cat-links&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;?php&lt;/span&gt; the_revision_list_prd() &lt;span class=&quot;kw&quot;&gt;?&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;kw&quot;&gt;&amp;lt;span&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; class=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;cat-links&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;lt;?php&lt;/span&gt; the_revision_diffs_prd() &lt;span class=&quot;kw&quot;&gt;?&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>pdg-control Training Problem II update</title>
	 <link href="/2012/01/24/pdg-control-training-problem-ii-update.html"/>
   <updated>2012-01-24T16:55:18+00:00</updated>
   <id>/01/24/pdg-control-training-problem-ii-update</id>
   <content type="html">&lt;p&gt;Basically we’ve done some simple stuff and now would be a good time to think about tools for some heavy-lifting computational challenges standing in the way.  Michael &amp;amp; Jim have been a great help on this, and Jake has also helped with theoretical underpinnings.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Statement of problem&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;We consider the impact of uncertainty in the harvesting of fisheries which involve alternative stable state dynamics.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Current Findings&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Adding uncertainty in current state means optimal escapement isn’t the optimal solution (contrary to Reed model) (Sethi &lt;em&gt;et. al.&lt;/em&gt; 2005)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We are considering uncertainty/variability entering at three levels: population dynamics (next yr’s stock, Reed case), stock assessment (this yr’s stock), and implementation of quotas, in the context of alternative stable states.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;When the parameterization of these uncertainties is correctly known, the optimal solution surprisingly doesn’t face many more sudden crashes than the unharvested dynamics.  (Casino “paradox” – income generated by a casino is highly predictable since the rules of uncertainty are well known).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Errors in the parameterization of the uncertainty or the biological parameters can have dramatic effects in the allee threshold model&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Questions for further study&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Is the optimal strategy risk adverse?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Can we add parameter uncertainty / Bayesian learning about parameters?&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In particular, can we implement the case in which stock is not assessed directly but estimated from harvest and knowledge of harvest effort, under parameters we learn about?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Technical capacity and challenges&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;We’ve developed an&lt;a href=&quot;https://github.com/cboettig/pdg_control&quot;&gt;R package&lt;/a&gt; for stochastic dynamic programming that allows a user to quickly experiment with different levels &amp;amp; types of uncertainty on different biological and economic models from a library of options and create visualizations of the solutions over an ensemble of realizations.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Curse of dimensionality is a major challenge to go beyond the 1D training problem into the 3D parrotfish model or the learning model.  We investigated Heuristic Sampling Nicol &amp;amp; Chadès, 2011 as a possible solution but this far this seems to scale rather poorly with the  size of the control space.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Sethi G, Costello C, Fisher A, Hanemann M and Karp L (2005). “Fishery Management Under Multiple Uncertainty.” &lt;em&gt;Journal of Environmental Economics And Management&lt;/em&gt;, &lt;strong&gt;50&lt;/strong&gt;. ISSN 00950696, &lt;a href=&quot;http://dx.doi.org/10.1016/j.jeem.2004.11.005&quot;&gt;http://dx.doi.org/10.1016/j.jeem.2004.11.005&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Beyond Stochastic Dynamic Programming: A Heuristic Sampling Method For Optimizing Conservation Decisions in Very Large State Spaces, Sam Nicol, Iadine Chadès, (2011) &lt;em&gt;Methods in Ecology And Evolution&lt;/em&gt;, &lt;strong&gt;2&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1111/j.2041-210X.2010.00069.x&quot;&gt;10.1111/j.2041-210X.2010.00069.x&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Tuesday</title>
	 <link href="/2012/01/24/tuesday-11.html"/>
   <updated>2012-01-24T15:04:41+00:00</updated>
   <id>/01/24/tuesday-11</id>
   <content type="html">&lt;h4 id=&quot;resilience-seminar&quot;&gt;Resilience seminar&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;the unhelpful resilience of invaded systems (ecosystem engineers anyone?  Cheatgrass change the fire regime, salt-cedar )  Examples in cheatgrass invading sagebrush, and saltcedar invading cottonwoods.&lt;/li&gt;
&lt;li&gt;Variables on axes?  Problem of dimensionality? resilient to what?&lt;/li&gt;
&lt;li&gt;Carpenter’s rigidity trap (need to eliminate something) vs poverty trap (something is missing)&lt;/li&gt;
&lt;li&gt;promote a small disturbance to reset the system  – when are small disturbances stabilizing?  (escape the rachet?)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;pdg-control&quot;&gt;pdg-control&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Summary for Training Problem II&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;warning-signals&quot;&gt;Warning Signals&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Figures for Alan paper.  (what to do with distributions)&lt;/li&gt;
&lt;li&gt;Updating code to provide full replicate simulations, and properly handle parameter distributions.&lt;/li&gt;
&lt;li&gt;rewriting warningsignals package for better S3 abstraction&lt;/li&gt;
&lt;li&gt;ROC curves as separate section to compare between results.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Friday (lab group meeting notes)</title>
	 <link href="/2012/01/20/friday-lab-group-meeting-notes.html"/>
   <updated>2012-01-20T17:09:09+00:00</updated>
   <id>/01/20/friday-lab-group-meeting-notes</id>
   <content type="html">&lt;p&gt;Theme inspired by Jane Lubchenco’s talk last week: how do we connect science to management?  We’re breaking down this topic, with individual leaders for each week, as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1/27: Carl: optimal vs. actionable management recommendations&lt;/li&gt;
&lt;li&gt;2/3: Jaime/Noam(?): monitoring for management&lt;/li&gt;
&lt;li&gt;2/10: Allison: informing management vs. advocacy&lt;/li&gt;
&lt;li&gt;2/17: Lewis: what types of research are must useful to management&lt;/li&gt;
&lt;li&gt;2/24: Noam/Jaime: communicating uncertainty&lt;/li&gt;
&lt;li&gt;3/2: Marissa: funding sources for applied research, building collaborations outside academia, and service opportunities ((this is one of the days of the PFMC meeting in Sacramento, which would be rather relevant to our theme, so we might push this topic to next quarter))&lt;/li&gt;
&lt;li&gt;3/9: Emil: obstacles to implementing scientific advise&lt;/li&gt;
&lt;li&gt;3/16: Scott: the quality of science along the basic-applied spectrum (perceptions and reality)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also shared some coding tricks and ways to share them.  Not sure what a good solution is for our small but diverse group, but trying our github organization, &lt;a href=&quot;https://github.com/tbp-code/General-Repository&quot;&gt;tpb-code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Otherwise notes for today: writing writing writing…&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Is your phylogeny informative?</title>
	 <link href="/2012/01/19/is-your-phylogeny-informative.html"/>
   <updated>2012-01-19T14:10:49+00:00</updated>
   <id>/01/19/is-your-phylogeny-informative</id>
   <content type="html">&lt;p&gt;Yesterday my paper (Boettiger &lt;em&gt;et. al.&lt;/em&gt; 2012)  appeared in early view in Evolution (&lt;a href=&quot;http://www.mendeley.com/download/public/98752/4485545655/9a209c7dd29980fd2e47c06eb8b2d1d7dd6f70d4/dl.pdf&quot;&gt;author’s preprint&lt;/a&gt;),As the open access copy doesn’t appear on pubmed for a while, you can access my author’s copy &lt;a href=&quot;http://www.mendeley.com/download/public/98752/4485545655/9a209c7dd29980fd2e47c06eb8b2d1d7dd6f70d4/dl.pdf&quot;&gt;here&lt;/a&gt;. so I’d like to take this chance to share the back-story and highlight my own view on some of our findings, and the associated &lt;a href=&quot;http://cran.r-project.org/web/packages/pmc/index.html&quot;&gt;package on CRAN&lt;/a&gt;.Just submitted, meanwhile, the code is always on &lt;a href=&quot;https://github.com/cboettig/pmc&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I didn’t set out to write this paper.  I set out to write a very different paper, introducing a new phylogenetic method for continuous traits that estimates changes in evolutionary constraint.  This adds _even more _parameters than already present in rich models multi-peak OU process, and I wanted to know if it could be justified – if there really was enough information to play the game we already had, before I went and made the situation even worse. Trying to find something rigorous enough to hang my hat on, I ended up writing this paper.&lt;/p&gt;
&lt;h3 id=&quot;the-short-of-it&quot;&gt;The short of it&lt;/h3&gt;
&lt;p&gt;There’s essentially three conclusions I draw from the paper.&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;AIC is not a reliable way to select models.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Certain parameters, such as &lt;span class=&quot;math&quot;&gt;\(\lambda\)&lt;/span&gt;, a measure of “phylogenetic signal,” (Pagel, 1999) are going to be really hard to estimate.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;BUT as long as we &lt;em&gt;simulate extensively&lt;/em&gt; to test model choice and parameter uncertainty, we won’t be misled by either of these.  So it’s okay to drink the koolaid (Losos, 2011), but &lt;strong&gt;drink responsibly. &lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;a-few-reflections&quot;&gt;A few reflections&lt;/h3&gt;
&lt;p&gt;I really have two problems with AIC and other information criteria when it comes to phylogenetic methods.  One is that it’s too easy to simulate data from one model, and have the information criteria choose a ridiculously over-parameterized model instead.  In one example, the wrong model has a &lt;span class=&quot;math&quot;&gt;\(\Delta\)&lt;/span&gt;AIC of 10 points over the correct model.&lt;/p&gt;
&lt;p&gt;But a more basic problem is that it’s just not designed for hypothesis testing – it doesn’t care how much data you have, it doesn’t give a notion of significance.  If we’re ascribing biological meaning to different models as different hypotheses, we need want a measure of uncertainty.&lt;/p&gt;
&lt;p&gt;When estimating parameters that scale branch length, I think we must be cautious because these are really data-hungry, and don’t work well on small trees. Check out how few of these estimates of lambda on 100 replicate datasets hit near the correct value shown by vertical line:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7014/6727029515_bcfe58aedb_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;The package commands are explained in more detail in the &lt;strong&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/pmc/vignettes/pmc_tutorial.pdf&quot;&gt;package vignette&lt;/a&gt;&lt;/strong&gt;, but the idea is simple. Running the pmc comparison between two models (for the model-choice step) looks like this:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;bm_v_lambda &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;pmc&lt;/span&gt;(geospiza.tree, geospiza.data[&lt;span class=&quot;st&quot;&gt;&amp;quot;wingL&amp;quot;&lt;/span&gt;],
  &lt;span class=&quot;st&quot;&gt;&amp;quot;BM&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;lambda&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;nboot=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Extracting the distribution of estimates for the parameter lambda got from fitting the lambda model (B) to data made by simulating under lambda model (A):&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;lambdas &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(bm_v_lambda[&lt;span class=&quot;st&quot;&gt;&amp;quot;par_dists&amp;quot;&lt;/span&gt;],
  comparison==&lt;span class=&quot;st&quot;&gt;&amp;quot;BB&amp;quot;&lt;/span&gt; &amp;amp;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;parameter==&lt;span class=&quot;st&quot;&gt;&amp;quot;lambda&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To view the model comparison, just plot the pmc result:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(bm_v_lambda)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The substantial overlap in the likelihood ratios after simulating under either model indicate that we cannot choose between BM and lambda in this case.  I’ll leave the paper to explain this approach in more detail, but it’s just simulation and refitting.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7026/6727293465_4a2a545fdf_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;You could just bootstrap the likelihoods or for nested models, look at the parameter distributions, but you get the maximum &lt;em&gt;statistical power&lt;/em&gt; from the ratio (says Neyman-Pearson Lemma).&lt;/p&gt;
&lt;h3 id=&quot;a-technical-note-mix-and-match-formats&quot;&gt;A technical note: mix and match formats&lt;/h3&gt;
&lt;p&gt;Many users don’t like going between ouch format and ape/phylo formats. The pmc package doesn’t care what you use, feel free to mix and match. In case the conversion tools are useful, I’ve provided functions to move your data and trees back and forth between those formats too.  See &lt;em&gt;format_data()&lt;/em&gt; to data-frames and &lt;em&gt;convert()&lt;/em&gt; to toggle between tree formats.&lt;/p&gt;
&lt;h2 id=&quot;reproducible-research&quot;&gt;Reproducible Research&lt;/h2&gt;
&lt;p&gt;The package is designed to make things easier.  It comes with a vignette (written in sweave) showing just what commands to run to replicate the results from the manuscript.&lt;/p&gt;
&lt;p&gt;This entire project has been documented in my open lab notebook from its &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger/Notebook/Comparative_Phylogenetics/2010/02/07&quot;&gt;inception&lt;/a&gt;. Posts prior to October 2010 can be found on my &lt;a href=&quot;http://openwetware.org/wiki/User:Carl_Boettiger/Notebook/Comparative_Phylogenetics/2010&quot;&gt;OWW notebook&lt;/a&gt;, the rest in my current &lt;a href=&quot;http://www.carlboettiger.info/archives/category/phylogenetics&quot;&gt;phylogenetics notebook&lt;/a&gt; (here on wordpress). Of course this project is interwoven with many notes on related and more recent work.&lt;/p&gt;
&lt;h2 id=&quot;additional-methods-and-feedback&quot;&gt;Additional methods and feedback&lt;/h2&gt;
&lt;p&gt;As we discuss in the paper, simulation and randomization-based methods have an established history in this field(Freckleton &amp;amp; Harvey, 2006), (Harmon &lt;em&gt;et. al.&lt;/em&gt; 2010). These are promising things to do, and we should do them more often, but I might make a few comments on these approaches.&lt;/p&gt;
&lt;p&gt;We are not getting a real power test when we simulate data produced from different models whose parameters have been arbitrarily assigned, rather than estimated on the same data, lest we overestimate the power. Of course we need to have a likelihood function to be able to estimate those parameters, which is not always available.&lt;/p&gt;
&lt;p&gt;It is also common and very useful to assign some summary statistic whose value is expected to be very different under different models of evolution, and look at it’s distribution under simulation. This is certainly valid and has ties to cutting edge approaches in ABC methods, but will be less statistically powerful than if we can calculate the likelihoods of the models directly and compare those, as we do here.&lt;/p&gt;
&lt;p&gt;Boettiger, C., Coop, G., &amp;amp; Ralph, P. (2012). IS YOUR PHYLOGENY INFORMATIVE? MEASURING THE POWER OF COMPARATIVE METHODS Evolution DOI: &lt;a href=&quot;http://dx.doi.org/10.1111/j.1558-5646.2012.01574.x&quot;&gt;10.1111/j.1558-5646.2012.01574.x&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Boettiger C, Coop G and Ralph P (2012). “is Your Phylogeny Informative? Measuring The Power of Comparative Methods.” &lt;em&gt;Evolution&lt;/em&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1558-5646.2012.01574.x&quot;&gt;http://dx.doi.org/10.1111/j.1558-5646.2012.01574.x&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Pagel M (1999). “Unknown.” &lt;em&gt;Nature&lt;/em&gt;, &lt;b&gt;401&lt;/b&gt;. ISSN 00280836, &lt;a href=&quot;http://dx.doi.org/10.1038/44766&quot;&gt;http://dx.doi.org/10.1038/44766&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Losos J (2011). “Seeing The Forest For The Trees: The Limitations of Phylogenies in Comparative Biology.” &lt;em&gt;The American Naturalist&lt;/em&gt;, &lt;b&gt;177&lt;/b&gt;. ISSN 00030147, &lt;a href=&quot;http://dx.doi.org/10.1086/660020&quot;&gt;http://dx.doi.org/10.1086/660020&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Freckleton R and Harvey P (2006). “Detecting Non-Brownian Trait Evolution in Adaptive Radiations.” &lt;em&gt;Plos Biology&lt;/em&gt;, &lt;b&gt;4&lt;/b&gt;. ISSN 1544-9173, &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pbio.0040373&quot;&gt;http://dx.doi.org/10.1371/journal.pbio.0040373&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Harmon L, Losos J, Jonathan Davies T, Gillespie R, Gittleman J, Bryan Jennings W, Kozak K, McPeek M, Moreno-Roark F, Near T, Purvis A, Ricklefs R, Schluter D, Schulte II J, Seehausen O, Sidlauskas B, Torres-Carvajal O, Weir J and Mooers A (2010). “Early Bursts of Body Size And Shape Evolution Are Rare in Comparative Data.” &lt;em&gt;Evolution&lt;/em&gt;. &lt;a href=&quot;http://dx.doi.org/10.1111/j.1558-5646.2010.01025.x&quot;&gt;http://dx.doi.org/10.1111/j.1558-5646.2010.01025.x&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Wednesday -- meetings</title>
	 <link href="/2012/01/18/wednesday-meetings.html"/>
   <updated>2012-01-18T23:22:49+00:00</updated>
   <id>/01/18/wednesday-meetings</id>
   <content type="html">&lt;h3 id=&quot;alan-meeting&quot;&gt;Alan meeting&lt;/h3&gt;
&lt;p&gt;write write write&lt;/p&gt;
&lt;h3 id=&quot;duncan-meeting&quot;&gt;Duncan Meeting&lt;/h3&gt;
&lt;h4 id=&quot;troubleshooting-s3-and-s4&quot;&gt;Troubleshooting S3 and S4&lt;/h4&gt;
&lt;p&gt;Try adding methods? Changing order on NAMESPACE?&lt;/p&gt;
&lt;p&gt;Leaving ouch off the import list: no errors, but within functions, don’t get S4 method. import but don’t depend on ouch: error.  accurate, since simulate is left as an s3 function at the user level.&lt;/p&gt;
&lt;p&gt;What a headache.  See &lt;a href=&quot;http://stackoverflow.com/questions/8884607/r-using-s3-and-s4-methods-of-simulate-in-the-same-package&quot;&gt;stackQ&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&quot;manuscript&quot;&gt;manuscript&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.google.com/document/d/1nJ4rfZAsQkTDvFdopt_yiOfXR5_mcOKBPOTU6kHMc44/edit?hl=en_US&quot;&gt;Duncan’s feedback&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;meredith-meeting&quot;&gt;Meredith Meeting&lt;/h3&gt;
&lt;p&gt;Run a science policy workshop with Davis open science group?&lt;/p&gt;
&lt;h3 id=&quot;peter-meeting&quot;&gt;Peter Meeting&lt;/h3&gt;
&lt;p&gt;Detecting release of constraint through phylogenetic methods&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Figure 1: cartoon of the difference between the release of constraint and the brownie model.&lt;/li&gt;
&lt;li&gt;Figure 2: Traits (Peter)&lt;/li&gt;
&lt;li&gt;Figure 3: regimes phylogeny&lt;/li&gt;
&lt;li&gt;Figure 4: Flow diagram of the model choice process&lt;/li&gt;
&lt;li&gt;Figure 5: Figure Model choice, &amp;lt;– must be intuitive!&lt;/li&gt;
&lt;li&gt;Figure 6: panel Figure for parameters.  &amp;lt;- barplot&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;and-back-to-work&quot;&gt;And back to Work…&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;pmc fixed, maybe?  Vignette needs expanded explanations and simpler syntax, plus figure fixed.&lt;/li&gt;
&lt;li&gt;Evolution post?&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Are open lab notebooks considered prior publication?</title>
	 <link href="/2012/01/16/are-open-lab-notebooks-considered-prior-publication.html"/>
   <updated>2012-01-16T10:47:17+00:00</updated>
   <id>/01/16/are-open-lab-notebooks-considered-prior-publication</id>
   <content type="html">&lt;p&gt;This question invariably comes up at some point in any discussion of open notebook science.  This concern is usually voiced in reference to the high-visibility magazines, which many scientists seem to assume will have very restrictive conditions.  A quick read of their policies shows otherwise.  Here are the links to pre-publication policies of major journals, with my short summaries &amp;amp; comments.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.nature.com/authors/policies/confidentiality.html&quot;&gt;Nature&lt;/a&gt; - Go right ahead. Explicit protection clause for open/collaborative blogs/wikis.  Just don’t talk to the press – guess that could include tweeting.  Also &lt;em&gt;Nature&lt;/em&gt; would like to see those links when you submit.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.pnas.org/content/96/8/4215.full&quot;&gt;PNAS&lt;/a&gt; - Nope, not prior publication here either. In fact, PNAS has one of the most liberal stances on prepublication which is well worth reading.  Even summaries of the work in the media encouraged – they only remind authors not to forget to publish!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sciencemag.org/site/feature/contribinfo/faq/index.xhtml#prioronline_faq&quot;&gt;Science&lt;/a&gt; - The policy listed there sounds more conservative (phrases like “most cases” and “contact the editors” don’t inspire confidence).  Luckily, actually contacting the editors does: Deputy editor Brooks Hanson writes to me:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We allow posting on not-for-profit pre-print archives, so posting on &lt;a href=&quot;http://arxiv.org/&quot;&gt;arxiv.org&lt;/a&gt; is fine at any time.  we ask that if you post before acceptance that you do not indicate that the paper is submitted to Science.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As to lab notebooks, it would probably depend on what was in the “notebook” but if it were just notes or thoughts, it would probably not be a great concern.&lt;/p&gt;
&lt;h2 id=&quot;approximating-policies&quot;&gt;Approximating policies?&lt;/h2&gt;
&lt;p&gt;Many discipline-specific journals don’t state their policy on this as clearly in their advise to authors.  Of course writing to the editors is the best way to get clarification, but I think their are reasonable proxies to guess what’s okay and what’s not.&lt;/p&gt;
&lt;p&gt;Posting on preprint servers in advance of submission is probably a greater threat to the journal’s exclusive control of the content than the less-digestible and less accessible (decentralized) posting of an open notebook, and as it’s a more widespread practice it may be a good signal to look for.  F1000 also &lt;a href=&quot;http://posters.f1000.com/journalresponses&quot;&gt;compiled a list&lt;/a&gt; of journals that would consider archiving a poster as prepublication, which could be used as another proxy – if they are okay with posters, notebooks are probably in the clear. The &lt;a href=&quot;http://www.sherpa.ac.uk/romeo/issn/0036-8075/&quot;&gt;Sherpa/Romeo&lt;/a&gt; project provides links to the pre-publication policies of many journals.  Its database also identifies which journals allow what level of public archiving.  Search for your favorite journals there.  To the extent that “Yellow” refers “at the time of submission,” rather than post-publication, one might assume that publisher wouldn’t much object to an open notebook.  Of course, I’d love clarification.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RoMEO Colour&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Archiving policy&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sherpa.ac.uk/romeo/browse.php?colour=green&amp;amp;la=en&amp;amp;fIDnum=%7C&amp;amp;mode=simple&quot;&gt;Green&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Can archive pre-print &lt;em&gt;and&lt;/em&gt; post-print or publisher’s version/PDF&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sherpa.ac.uk/romeo/browse.php?colour=blue&amp;amp;la=en&amp;amp;fIDnum=%7C&amp;amp;mode=simple&quot;&gt;Blue&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Can archive post-print (ie final draft post-refereeing) or publisher’s version/PDF&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sherpa.ac.uk/romeo/browse.php?colour=yellow&amp;amp;la=en&amp;amp;fIDnum=%7C&amp;amp;mode=simple&quot;&gt;Yellow&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Can archive pre-print (ie pre-refereeing)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sherpa.ac.uk/romeo/browse.php?colour=white&amp;amp;la=en&amp;amp;fIDnum=%7C&amp;amp;mode=simple&quot;&gt;White&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Archiving not formally supported&lt;/p&gt;
&lt;p&gt;For instance, looks like the Royal Society journals are okay too. They receive a Green status, &lt;a href=&quot;http://rsif.royalsocietypublishing.org/site/misc/preparing-articles.xhtml#question7&quot;&gt;permits&lt;/a&gt; pre-review author’s copy on preprint servers.  Published copy uses Creative Commons Attribution (cc-by) &lt;a href=&quot;http://royalsocietypublishing.org/site/authors/licence.xhtml&quot;&gt;licensing&lt;/a&gt;. Their duplicate publishing &lt;a href=&quot;http://royalsocietypublishing.org/site/authors/policy.xhtml&quot;&gt;statement&lt;/a&gt; makes no reference to archives, only other publishers.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Forage Fish course plan</title>
	 <link href="/2012/01/12/forage-fish.html"/>
   <updated>2012-01-12T13:49:29+00:00</updated>
   <id>/01/12/forage-fish</id>
   <content type="html">&lt;p&gt;Forage fish winter quarter session starts, attempting to write the synthesis manuscript based on Fall quarter. Broke into groups to write sub-sections (2-4pgs) by 15 Feb.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;wk 3 FF Pop Dyn &lt;em&gt;Carl* &amp;amp; Allison&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 4 FF Fisheries: _Patrick*, Jay, Carl_&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 5 Mammals &amp;amp; birds: Angee,* Jamie&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 6 Predator fisheries:_ Jamie,&lt;em&gt;  Kailin,&lt;/em&gt;  Angee_&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 7 Fishmeal/oil: &lt;em&gt;Jay* &amp;amp; Patrick&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 8 human consumption/pet food: _ Allison* &amp;amp; David_&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;wk 9 non-consumptive: &lt;em&gt;David* &amp;amp; Kailin&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;implies primary responsibility for a topic&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Each section addresses:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;What information is needed to answer the delta&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;What’s in literature&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;What’s not&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;getting-started&quot;&gt;Getting started&lt;/h4&gt;
&lt;p&gt;Collaborative doc for &lt;a href=&quot;https://docs.google.com/document/d/1O5Bwo2nVkQ6QTc6NL1AsvJ8IAPhPL8WKMFDTTq4EBIM/edit?hl=en_US&quot;&gt;Forage Fish - Population dynamics.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;remember dropbox for papers and ppresentations from fall.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Resilience seminar course plan</title>
	 <link href="/2012/01/10/resilience-seminar-course-plan.html"/>
   <updated>2012-01-10T15:17:42+00:00</updated>
   <id>/01/10/resilience-seminar-course-plan</id>
   <content type="html">&lt;p&gt;Resilience Monte Carlo Seminar, 11am Tuesdays. Val Eviner.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jan 17 Resilience of coral reefs/mangrove systems, Alexander Gaos&lt;/li&gt;
&lt;li&gt;Jan 24 Resilience of degraded vs. intact systems, Erica Case and Alex Webster&lt;/li&gt;
&lt;li&gt;Jan 31 Novel ecosystems, Ania Truszczynski and Mark Noyes&lt;/li&gt;
&lt;li&gt;Feb 7 Landscape configuration, Julia Moore&lt;/li&gt;
&lt;li&gt;Feb 14 Assisted Migration, Anna O’Brien&lt;/li&gt;
&lt;li&gt;Feb 21 Designing and managing for resilience, Sarah McCullough and Caroline Wright&lt;/li&gt;
&lt;li&gt;Feb 28 Thresholds/ uncertainty, Matt Meisner and Carl Boettiger&lt;/li&gt;
&lt;li&gt;March 6 Managing for evolutionary potential, Jaime Ashander&lt;/li&gt;
&lt;li&gt;March 13 ? Soils?, ?Archana Srinivas?&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Monday - Sweave workflow</title>
	 <link href="/2012/01/09/monday-13.html"/>
   <updated>2012-01-09T22:09:03+00:00</updated>
   <id>/01/09/monday-13</id>
   <content type="html">&lt;h3 id=&quot;bibtex-mendeley-sweave&quot;&gt;Bibtex, Mendeley &amp;amp; Sweave&lt;/h3&gt;
&lt;p&gt;Mendeley’s repeated entries in the bibfile is particularly annoying with my sweave workflow, as it throws an error from bibtex command that Make doesn’t want to ignore.&lt;/p&gt;
&lt;p&gt;Also, in writing the documentation I’d like to point the .Rnw file to my global library’s bibtex document, but then this means having the .Rnw/tex file generated to by the package pointing to a file that’s outside the package.&lt;/p&gt;
&lt;p&gt;To get around both of these issues, I’ve started using bibtool. Bibtool can generate a smaller bibfile of only the included citations, and remove the duplicates, which I can use in the package.&lt;/p&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;bibtool&lt;/span&gt; -s -d -x paper.aux global.bib &lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; paper.bib&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;tex generates the aux file. bibtools generates a local bib file from the citations listed in the .aux using my global bib file, then bibtex can run on the aux and format these citations, which are inserted by re-running tex as usual. Note that this could combine different bibs instead of using a global.bib.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The ubuntu version of bibtool (2.48 alpha) doesn’t handle large bibfiles well, the current version 2.53 seems to do fine. Inspiration for this from &lt;a href=&quot;http://tex.stackexchange.com/questions/1380/how-to-avoid-bibtex-error-message-repeated-entry-for-an-entry-appearing-in-sev&quot;&gt;tex Q&amp;amp;A&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Minor annoyance: R’s pdflatex compile prints non-breaking spaces as tildes (&lt;a href=&quot;http://tex.stackexchange.com/questions/40569/avoid-non-breaking-space-characters-printing-as-tildes-when-using-texi2dvi-in-r&quot;&gt;Q&amp;amp;A query&lt;/a&gt;). Currently calling native pdflatex from makefile.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;R CMD check now gives a warning if data isn’t compressed.  Running R CMD build –resave-data will compress all files optimally, but then need to extract that tarball and copy the compressed data files into the development dirctory.  Would be &lt;a href=&quot;https://github.com/hadley/devtools/issues/40&quot;&gt;nice&lt;/a&gt; if devtools handled this?  &lt;strong&gt;Update&lt;/strong&gt;the function I wanted is[code]tools:resaveRdaFiles ```&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Many packages use print() to communicate with the user for progress, warnings, etc.  These should use message() and warning() so these can be suppressed when appropriate.  Working around this is hard, instead of suppressMessages, one can wrap the call as (ht Simon, &lt;a href=&quot;http://stackoverflow.com/questions/8797314/suppress-messages-displayed-by-print-instead-of-message-or-warning-in-r/8797387&quot;&gt;stackoverflow&lt;/a&gt;):&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt; &lt;span class=&quot;kw&quot;&gt;invisible&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;capture.output&lt;/span&gt;(

out &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;some_noisy_function&lt;/span&gt;()

))&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;updated-approach-to-vignettes-with-sweaveknitr&quot;&gt;Updated approach to vignettes with Sweave/knitr&lt;/h3&gt;
&lt;p&gt;The easiest way to make vignettes in knitr is a bit of a hack.  Create a subdirectory in the inst/doc (or vignettes) directory, and add the knitr .Rnw document there.  Use knitr to generate .Rnw (which is essentially just a tex document by then) in inst/doc.  I do this with a Makefile in that directory, which I run manually ahead of time.  The makefile also compiles the local bibliography from the global one.&lt;/p&gt;
&lt;p&gt;[gist id=1591001]&lt;/p&gt;
&lt;h2 id=&quot;wrightscape&quot;&gt;wrightscape&lt;/h2&gt;
&lt;p&gt;Started runs on body-size data from Sam for different phylogenies.&lt;/p&gt;
&lt;h2 id=&quot;treebase&quot;&gt;TreeBASE&lt;/h2&gt;
&lt;p&gt;added TreePar example&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;

yule_4rate &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;bd.shifts.optim&lt;/span&gt;(x, &lt;span class=&quot;dt&quot;&gt;sampling =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,
&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;grid =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;start =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;end =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;60&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ME =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;,
&lt;span class=&quot;dt&quot;&gt;yule =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)

aic &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;sapply&lt;/span&gt;(yule_4rate[[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]], function(x) &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *

(&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(x) -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;x[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] )
&lt;span class=&quot;kw&quot;&gt;which.min&lt;/span&gt;(aic)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and flushed out text. Sending to Peter and Duncan for a read over.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Optimal policy with assymetric costs to changing harvest quotas</title>
	 <link href="/2012/01/06/optimal-policy-with-assymetric-costs-to-changing-harvest-quotas.html"/>
   <updated>2012-01-06T13:52:22+00:00</updated>
   <id>/01/06/optimal-policy-with-assymetric-costs-to-changing-harvest-quotas</id>
   <content type="html">&lt;p&gt;The optimal policy with symmetric L1 costs to changing the quotas results in the solutions that stop changing, sometimes at no harvest (if there’s scrap value), or at some fixed high harvest if no scrap value. (See earlier &lt;a href=&quot;http://www.carlboettiger.info/archives/3492&quot;&gt;notes&lt;/a&gt;). Asymmetric costs of comparable magnitude result in more crashes.&lt;/p&gt;
&lt;p&gt;When we apply an L1 norm cost of the same magnitude as before for decreasing quotas, but allow increasing quotas to be free (no cost to environmental lobby), the solution follows the Reed optimum is in purple (harvest_alt) (cost-free adjustment), while the blue is the harvest level being implemented with a cost:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7141/6649003123_6798886656_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;This is for a single replicate, but we can verify this holds across an ensemble of 100 runs:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7024/6649003241_59870df8e2_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;This is the same as the symmetric case when cost is relatively small. Since this case has the same cost to decrease quotas but no cost to increase quotas, it is overall a less expensive world in which to do business.&lt;/p&gt;
&lt;h3 id=&quot;asymmetric-policy-costs-lead-to-more-population-crashes&quot;&gt;Asymmetric Policy costs lead to more population crashes&lt;/h3&gt;
&lt;p&gt;Just tried this and we do indeed see policies that deviate from the Reed optimum (harvest_alt), with the blue harvest line changing far less often, but decreasing by amounts that seem about the same as the increases.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7152/6649121277_e1a0b8cb61_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;The ensemble shows the tossing in the towel result of the symmetric case, where several of the replicates cease any changes at all and just send the population to 0 after a certain point.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7148/6649121371_245e58870a_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;This is indeed worse than the optimum solution with symmetric costs at a matching penalty, where the solution is not to harvest&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7147/6649161593_4201893d64_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;In these cases there is a fixed reward / scrap value for not crashing the population.&lt;/p&gt;
&lt;h2 id=&quot;no-scrap-value&quot;&gt;No scrap value&lt;/h2&gt;
&lt;p&gt;Symmetric costs with no scrap value result in this “tossing in the towel” pattern of following the Reed policy for a while, and then leaving a constant harvest high rate that crashes the stock.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7023/6472332667_f75a3ccda6_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Running the asymmetric costs with no scrap value, we find everything crashes immediately:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7166/6649145241_7cf02e839d_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Replicating this with costs 1/10th as high does this more gradually.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7023/6649233637_33fdb45a53_o.png&quot; /&gt;
&lt;/figure&gt;
</content>
 </entry>
 
 <entry>
   <title>wrightscape examples</title>
	 <link href="/2012/01/04/wrightscape-examples.html"/>
   <updated>2012-01-04T12:48:29+00:00</updated>
   <id>/01/04/wrightscape-examples</id>
   <content type="html">&lt;p&gt;[flickr-gallery mode=“search” tags=“phylogenetics” min_upload_date=“2012-01-03 7:00:37” max_upload_date=“2012-01-03 22:23:37”]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;kt and open seem the best focal traits. Unclear what good null traits to use would be.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Unclear if anything is gained by indep thetas in this example.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Performance of alpha v theta?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Edited plotting of likelihood comparisons, just grouped by trait to get common axis. (Difficult to get intelligent zooming on facet_grid to ignore the outliers). Trying such as:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;
lims &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;cast&lt;/span&gt;(dat, comparison ~&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;trait, function(x) &lt;span class=&quot;kw&quot;&gt;quantile&lt;/span&gt;(x, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(.&lt;span class=&quot;dv&quot;&gt;05&lt;/span&gt;,.&lt;span class=&quot;dv&quot;&gt;95&lt;/span&gt;)))
&lt;span class=&quot;kw&quot;&gt;coord_cartesian&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;ylim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;min&lt;/span&gt;(lims), &lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(lims)), &lt;span class=&quot;dt&quot;&gt;wise=&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;but I need different ylims for each row when facet_grid has scales=“free_y”.&lt;/p&gt;
&lt;p&gt;[flickr-gallery mode=“search” tags=“phylogenetics” min_upload_date=“2012-01-04 7:00:37” max_upload_date=“2012-01-04 13:23:37”]&lt;/p&gt;
&lt;p&gt;Running likelihood ratio comparisons across all traits in following model comparisons:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Brownie vs alphas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brownie vs thetas (ouch/hansen)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;thetas vs alphas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sigmas vs alpha-thetas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;alphas vs alpha-thetas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;thetas vs alpha-thetas&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;on both two-shifts regime model and the intramandibular regime model.&lt;/p&gt;
&lt;p&gt;[flickr-gallery mode=“search” tags=“phylogenetics” min_upload_date=“2012-01-06 7:30:37” max_upload_date=“2012-01-06 14:35:00”]&lt;/p&gt;
&lt;h2 id=&quot;new-model-comparisons&quot;&gt;New model comparisons&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;BM vs Brownie&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;BM vs OU&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brownie vs alphas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Brownie vs thetas&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;OU vs Brownie&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;thetas vs alphas&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;labrid-data-intramandibular-innovation-summary-plot&quot;&gt;Labrid data, intramandibular innovation (Summary Plot)&lt;/h4&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7004/6649525841_1885da3766_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;Individual images:&lt;/p&gt;
&lt;p&gt;[flickr-gallery mode=“search” tags=“phylogenetics” min_upload_date=“2012-01-06 14:35:00” max_upload_date=“2012-01-06 16:00:37”]&lt;/p&gt;
&lt;h3 id=&quot;parrotfish-only&quot;&gt;Parrotfish only&lt;/h3&gt;
&lt;p&gt;Not really enough power in Parrotfish-only version:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;http://farm8.staticflickr.com/7142/6649845527_f9e7115dc3_o.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;[flickr-gallery mode=“search” tags=“phylogenetics” min_upload_date=“2012-01-06 16:05:00” max_upload_date=“2012-01-06 16:30:37”]&lt;/p&gt;
&lt;h3 id=&quot;full-labrids&quot;&gt;Full Labrids&lt;/h3&gt;
&lt;p&gt;Still running: two-shifts version&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tuesday: pmc package, latex to word attempts</title>
	 <link href="/2012/01/03/tuesday-pmc-package-latex-to-word-attempts.html"/>
   <updated>2012-01-03T18:49:10+00:00</updated>
   <id>/01/03/tuesday-pmc-package-latex-to-word-attempts</id>
   <content type="html">&lt;p&gt;Back from Oz.&lt;/p&gt;
&lt;h2 id=&quot;evolution-submission-latex-to-word&quot;&gt;Evolution submission: Latex to word&lt;/h2&gt;
&lt;p&gt;Final submission needs editable copy.  No great solutions for latex to word, despite quite a few options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;tex2rtf is a fast solution to get something, but not successful on images or equations.  Ended up going with this after all.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pandoc is a generic converter &lt;em&gt;to&lt;/em&gt; many types, but has only partial support for latex input.  Does okay on text, but fails on even simple things like italics and natbib citations&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;lyx sounded like a promising solution, as lyx has a OpenDocument export option.  Unfortunately I could only get a blank .odt out.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tex4ht doesn’t work out of the box (though&lt;a href=&quot;http://ubuntuforums.org/showthread.php?t=1033441&quot;&gt;a lot of work&lt;/a&gt; might get around this)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;mk4ht&lt;/span&gt; oolatex file.tex&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;lots of ways to go to html, or pdf into word, but all seem lossy.  More possible solutions on Q&amp;amp;A’s &lt;a href=&quot;http://askubuntu.com/questions/82634/how-to-convert-tex-into-odt&quot;&gt;askubuntu&lt;/a&gt; and &lt;a href=&quot;http://tex.stackexchange.com/questions/4145/workflow-for-converting-latex-into-open-office-ms-word-format&quot;&gt;tex&lt;/a&gt;, from which many of these suggestions came as well.  Still no robust solutions.  Why don’t we all just use html these days?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;pmc&quot;&gt;pmc&lt;/h3&gt;
&lt;p&gt;Revised the front-end for this package entirely over the break. Adding some polish, cleaning up the package, and writing a new vignette for the update today.&lt;/p&gt;
&lt;h5 id=&quot;a-few-random-notes&quot;&gt;A few random notes&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;Need a commented command for Vignette to pass R CMD check that gives the vignette a title&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;sourceCode latex&quot;&gt;&lt;code class=&quot;sourceCode latex&quot;&gt;&lt;span class=&quot;co&quot;&gt;%\VignetteIndexEntry{Using PMC}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;sorting out the vignette with the updated examples, using knitr (thank goodness for caching, geiger performance sucks).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Comment out the parallelization for generality?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;misc&quot;&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Website configuration: cloudflare&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mendeley duplicate bibtex entries are very annoying.  A &lt;a href=&quot;http://pleasemakeanote.blogspot.com/2010/06/deleting-duplicate-bibtex-entries-from.html&quot;&gt;hack&lt;/a&gt; solution.  Vote for &lt;a href=&quot;http://feedback.mendeley.com/forums/4941-mendeley-feedback/suggestions/699640-fix-bibtex-library-bugs-update-and-remove-duplica&quot;&gt;this issue on the bug list&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hmm…, interesting: &lt;a href=&quot;http://www.live-r.com/&quot;&gt;live-r&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 
